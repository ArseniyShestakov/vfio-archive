<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 19) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=19" title="Page 19" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=18" title="Page 18" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=20" title="Page 20" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=18">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=17">17</a> <a href="viewtopic.php?id=162768&amp;p=18">18</a> <strong>19</strong> <a href="viewtopic.php?id=162768&amp;p=20">20</a> <a href="viewtopic.php?id=162768&amp;p=21">21</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=20">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1320047" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#451</span> <a href="viewtopic.php?pid=1320047#p1320047">2013-09-02 19:39:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=69685">Chetyre</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-03-27</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=69685">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I think I figured out what is wrong, but not how to solve it.</p><p>Turns out I really shouldn`t have enabled the systemd service to vfio-bind... That was really stupid, and yet took me an eternity to notice.</p><p>anyway what happens is in my interpretation (I read very little on the subject): there is too much stuff in my iommu group for some reason. When the script runs it binds too many devices and makes the computer unusable. Is this really a thing that happens? I tried enabling only my ati card, but 4 devices were grabbed by vfio.</p><p>On the test script this produced a qemu window, but no output on the card. </p><p>When I try binding the rest of what I need, my system becomes pretty much unusable. Out of the 24 devices in my system it grabs 15 of them.</p> <p class="postedit"><em>Last edited by Chetyre (2013-09-02 19:54:14)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320047">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320295" class="blockpost roweven"> <h2><span><span class="conr">#452</span> <a href="viewtopic.php?pid=1320295#p1320295">2013-09-03 12:00:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Chetyre wrote:</cite><blockquote><div><p>I think I figured out what is wrong, but not how to solve it.</p><p>Turns out I really shouldn`t have enabled the systemd service to vfio-bind... That was really stupid, and yet took me an eternity to notice.</p><p>anyway what happens is in my interpretation (I read very little on the subject): there is too much stuff in my iommu group for some reason. When the script runs it binds too many devices and makes the computer unusable. Is this really a thing that happens? I tried enabling only my ati card, but 4 devices were grabbed by vfio.</p><p>On the test script this produced a qemu window, but no output on the card. </p><p>When I try binding the rest of what I need, my system becomes pretty much unusable. Out of the 24 devices in my system it grabs 15 of them.</p></div></blockquote></div><p>see: <a href="https://bbs.archlinux.org/viewtopic.php?pid=1319587#p1319587" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 7#p1319587</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320295">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320298" class="blockpost rowodd"> <h2><span><span class="conr">#453</span> <a href="viewtopic.php?pid=1320298#p1320298">2013-09-03 12:43:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=69685">Chetyre</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-03-27</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=69685">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Chetyre wrote:</cite><blockquote><div><p>I think I figured out what is wrong, but not how to solve it.</p><p>Turns out I really shouldn`t have enabled the systemd service to vfio-bind... That was really stupid, and yet took me an eternity to notice.</p><p>anyway what happens is in my interpretation (I read very little on the subject): there is too much stuff in my iommu group for some reason. When the script runs it binds too many devices and makes the computer unusable. Is this really a thing that happens? I tried enabling only my ati card, but 4 devices were grabbed by vfio.</p><p>On the test script this produced a qemu window, but no output on the card. </p><p>When I try binding the rest of what I need, my system becomes pretty much unusable. Out of the 24 devices in my system it grabs 15 of them.</p></div></blockquote></div><p>see: <a href="https://bbs.archlinux.org/viewtopic.php?pid=1319587#p1319587" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 7#p1319587</a></p></div></blockquote></div><br /><p>Thanks. I&#039;ll try this tonight. Maybe the first post could be edited to draw attention to the acs patch? I just realized that it was included in your patched kernel while trying to patch it myself.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320298">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320616" class="blockpost roweven"> <h2><span><span class="conr">#454</span> <a href="viewtopic.php?pid=1320616#p1320616">2013-09-04 09:04:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74747">gosheto</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:0xd3ad@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello,</p><p>all steps before are succeed, but when i try to run vfio-bind it says</p><div class="codebox"><pre><code># vfio-bind 0000:01:00.0 ls: cannot access /sys/bus/pci/devices/0000:01:00.0/iommu_group/devices: No such file or directory</code></pre></div><p>In all /sys/bus/pci/devices/XXXX:XX:XX.X/ directory &quot;iommu_group&quot; missed.</p><p>My distro is Ubuntu 13.10</p><p>Where I&#039;m wrong?</p><p>Thanks in advance.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320616">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320656" class="blockpost rowodd"> <h2><span><span class="conr">#455</span> <a href="viewtopic.php?pid=1320656#p1320656">2013-09-04 11:25:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>gosheto wrote:</cite><blockquote><div><p>Hello,</p><p>all steps before are succeed, but when i try to run vfio-bind it says</p><div class="codebox"><pre><code># vfio-bind 0000:01:00.0 ls: cannot access /sys/bus/pci/devices/0000:01:00.0/iommu_group/devices: No such file or directory</code></pre></div><p>In all /sys/bus/pci/devices/XXXX:XX:XX.X/ directory &quot;iommu_group&quot; missed.</p><p>My distro is Ubuntu 13.10</p><p>Where I&#039;m wrong?</p><p>Thanks in advance.</p></div></blockquote></div><p>Check if you cpu supports VT-D/AMD-VI and its enabled</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320656">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320667" class="blockpost roweven"> <h2><span><span class="conr">#456</span> <a href="viewtopic.php?pid=1320667#p1320667">2013-09-04 11:47:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74747">gosheto</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:0xd3ad@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello nbhs,</p><p>Thank you for quick reply!<br />My cpu is <a href="http://ark.intel.com/products/33924/" rel="nofollow">Intel Q9550</a> and support VT-d.<br />Mainboard is Asus Rampage Extreme with X48 chipset, who also support VT-d according <a href="http://en.wikipedia.org/wiki/List_of_Intel_chipsets#Core_2_chipsets" rel="nofollow">Intel Chipsets</a><br />In my current BIOS VT-d enable/disable setting missing.<br />After activating Intel VT-d in the kernel by appending the intel_iommu=on parameter to the kernel line, <br />dmesg | grep -e DMAR -e IOMMU<br />return<br /> [ 0.000000] Intel-IOMMU: enabled</p><p>Any ideas why &quot;iommu_group&quot; directories missed?</p><p>Thanks!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320667">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320915" class="blockpost rowodd"> <h2><span><span class="conr">#457</span> <a href="viewtopic.php?pid=1320915#p1320915">2013-09-04 23:23:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=69685">Chetyre</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-03-27</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=69685">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>acs_override worked, but I encountered another problem: blank display that does nothing. If I use vga cirrus or std, windows boots fine and installs drivers for everything correctly, including the video card. But device manager says it can&#039;t free enough resources. </p><p>However, if I boot with vga none, it simply gets stuck with a blank qemu window in my monitor forever. No hdd activity or anything.</p><p>On xen, if I have a standard vga adaptor enabled and passthrough a video card, once windows boots it disables the qemu vga device and lets the gpu take over. Is there anyway to force that behavior? Disabling it on device manager does nothing, it resets during the reboot.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320915">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320924" class="blockpost roweven"> <h2><span><span class="conr">#458</span> <a href="viewtopic.php?pid=1320924#p1320924">2013-09-04 23:41:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Chetyre wrote:</cite><blockquote><div><p>acs_override worked, but I encountered another problem: blank display that does nothing. If I use vga cirrus or std, windows boots fine and installs drivers for everything correctly, including the video card. But device manager says it can&#039;t free enough resources. </p><p>However, if I boot with vga none, it simply gets stuck with a blank qemu window in my monitor forever. No hdd activity or anything.</p><p>On xen, if I have a standard vga adaptor enabled and passthrough a video card, once windows boots it disables the qemu vga device and lets the gpu take over. Is there anyway to force that behavior? Disabling it on device manager does nothing, it resets during the reboot.</p></div></blockquote></div><p>You aren&#039;t using a nvidia card with the proprietary driver on the host, are you?</p> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320924">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1320925" class="blockpost rowodd"> <h2><span><span class="conr">#459</span> <a href="viewtopic.php?pid=1320925#p1320925">2013-09-04 23:44:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=69685">Chetyre</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-03-27</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=69685">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>andy123 wrote:</cite><blockquote><div><div class="quotebox"><cite>Chetyre wrote:</cite><blockquote><div><p>acs_override worked, but I encountered another problem: blank display that does nothing. If I use vga cirrus or std, windows boots fine and installs drivers for everything correctly, including the video card. But device manager says it can&#039;t free enough resources. </p><p>However, if I boot with vga none, it simply gets stuck with a blank qemu window in my monitor forever. No hdd activity or anything.</p><p>On xen, if I have a standard vga adaptor enabled and passthrough a video card, once windows boots it disables the qemu vga device and lets the gpu take over. Is there anyway to force that behavior? Disabling it on device manager does nothing, it resets during the reboot.</p></div></blockquote></div><p>You aren&#039;t using a nvidia card with the proprietary driver on the host, are you?</p></div></blockquote></div><br /><p>No, I&#039;m using the intel igp and trying to passthrough a radeon card</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1320925">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1321283" class="blockpost roweven"> <h2><span><span class="conr">#460</span> <a href="viewtopic.php?pid=1321283#p1321283">2013-09-05 21:07:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74747">gosheto</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:0xd3ad@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>vfio_iommu_type1 won`t&#160; load<br />modprobe vfio_iommu_type1<br />return<br />ERROR: could not insert &#039;vfio_iommu_type1&#039;: No such device<br />Maybe MB (Rampage Extreme X48) not supported VT-d? <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />X48 is capable but Asus BIOS not have option to enable him. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1321283">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1322676" class="blockpost rowodd"> <h2><span><span class="conr">#461</span> <a href="viewtopic.php?pid=1322676#p1322676">2013-09-09 17:27:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, so I just tried to get this working with linux 3.11 but recieved these error messages upon starting qemu </p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: vfio: failed to set iommu for container: Operation not permitted qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: vfio: failed to setup container for group 18 qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: vfio: failed to get group 18 qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>I simply applied the same patch to the kernel (I was kind of suprised that even worked).<br />Since 3.10 will be a lts kernel, should we simply stick with it?</p> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1322676">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1322854" class="blockpost roweven"> <h2><span><span class="conr">#462</span> <a href="viewtopic.php?pid=1322854#p1322854">2013-09-10 03:26:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>andy123 wrote:</cite><blockquote><div><p>Hi, so I just tried to get this working with linux 3.11 but recieved these error messages upon starting qemu </p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: vfio: failed to set iommu for container: Operation not permitted qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: vfio: failed to setup container for group 18 qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: vfio: failed to get group 18 qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=06:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>I simply applied the same patch to the kernel (I was kind of suprised that even worked).<br />Since 3.10 will be a lts kernel, should we simply stick with it?</p></div></blockquote></div><p>Are you running it as root? im using kernel 3.11 + qemu 1.5.2 here without problems</p><p>here&#039;s my package:</p><p><a href="http://www.fileswap.com/dl/aERxyulqB1" rel="nofollow">linux-mainline.tar.gz</a></p><p>Hopefully these patches wont be needed anymore for 3.12 and the next qemu release see: <a href="http://marc.info/?l=kvm&amp;m=137865971705085&amp;w=2" rel="nofollow">http://marc.info/?l=kvm&amp;m=137865971705085&amp;w=2</a> and <a href="http://qemu.11.n7.nabble.com/PATCH-vfio-pci-Implement-PCI-hot-reset-td223928.html" rel="nofollow">http://qemu.11.n7.nabble.com/PATCH-vfio … 23928.html</a></p><p>i&#039;m having some problems using qemu 1.6, it seems it requires seabios 1.7.3 and windows crashes the system at the login prompt, ill look into it when i get some time.</p> <p class="postedit"><em>Last edited by nbhs (2013-09-10 03:55:19)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1322854">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1323397" class="blockpost rowodd"> <h2><span><span class="conr">#463</span> <a href="viewtopic.php?pid=1323397#p1323397">2013-09-11 15:18:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Are you running it as root? im using kernel 3.11 + qemu 1.5.2 here without problems</p><p>here&#039;s my package:</p><p><a href="http://www.fileswap.com/dl/aERxyulqB1" rel="nofollow">linux-mainline.tar.gz</a></p><p>Hopefully these patches wont be needed anymore for 3.12 and the next qemu release see: <a href="http://marc.info/?l=kvm&amp;m=137865971705085&amp;w=2" rel="nofollow">http://marc.info/?l=kvm&amp;m=137865971705085&amp;w=2</a> and <a href="http://qemu.11.n7.nabble.com/PATCH-vfio-pci-Implement-PCI-hot-reset-td223928.html" rel="nofollow">http://qemu.11.n7.nabble.com/PATCH-vfio … 23928.html</a></p><p>i&#039;m having some problems using qemu 1.6, it seems it requires seabios 1.7.3 and windows crashes the system at the login prompt, ill look into it when i get some time.</p></div></blockquote></div><p>I think I was running it as root, so my guess is that I was using the wrong patch or configured the kernel wrong somehow. I based my new config off of yours, used your patches and it works now. Thanks for the package.<br />It&#039;s good to hear that the patches might not be needed in 3.12.</p><p>About 1.6, my qemu package ist called &quot;qemu-vga-current 1.6.0.g7b4b0e9-1&quot;, I sadly lost the pkgbuild recently, so I have no idea how that was created, but it works for me together with &quot;seabios 1.7.2.2-1&quot;.<br />Thanks again for your help.</p> <p class="postedit"><em>Last edited by andy123 (2013-09-11 15:19:20)</em></p> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1323397">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1324052" class="blockpost roweven"> <h2><span><span class="conr">#464</span> <a href="viewtopic.php?pid=1324052#p1324052">2013-09-13 06:08:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=67716">finesse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-01-25</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=67716">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Greetings all.</p><p>Thanks for this how-to nbhs!</p><p>I&#039;ve read every post here but can&#039;t get over something very simple. Im left believing that my board has buggy IOMMU support, pity since I bought it a few years ago wanting to do this very thing and options were limited.</p><p>System</p><p>i5-2500 (non-K)<br />ASRock Z68 Pro 3 Mobo<br />16gig ram<br />Intel IGPU on host Arch (with your custom built mainline kernel)<br />Some no name brand 7970 for the guest which currently might as well not exist</p><p>Im using syslinux, here is my kernel line:</p><div class="codebox"><pre><code>root=UUID=069ddd96-02d7-4b5a-9b8c-d71403fb4579 ro quiet init=/usr/lib/systemd/systemd intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 pcie_acs_override=downstream pci-stub.ids=1002:6798,1002:aaa0 initrd=../initramfs-linux-mainline.img BOOT_IMAGE=../vmlinuz-linux-mainline </code></pre></div><p>Ive pretty much tried everything suggested in here so there&#039;s stuff in there that probably doesn&#039;t need to be, but that is how it was on my last attempt.</p><p>Other outputs:</p><div class="codebox"><pre><code>@Shodan ~ $ dmesg |grep IOMMU [ 0.000000] Warning: PCIe ACS overrides enabled; This may allow non-IOMMU protected peer-to-peer DMA [ 0.000000] Intel-IOMMU: enabled</code></pre></div><div class="codebox"><pre><code>@Shodan ~ $ dmesg |grep pci-stub [ 0.509170] pci-stub: add 1002:6798 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.509176] pci-stub 0000:01:00.0: claimed by stub [ 0.509180] pci-stub: add 1002:AAA0 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.509183] pci-stub 0000:01:00.1: claimed by stub</code></pre></div><div class="codebox"><pre><code>@Shodan ~ $ lspci |grep VGA 00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09) 01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT [Radeon HD 7970]</code></pre></div><p>Vt-d is enabled in the bios, however disabling it and rebooting still produced the dmesg output of it getting enabled so I don&#039;t know if it&#039;s lying or just referring to the module and not hardware (if thats even possible)</p><p>I compiled and installed from your first post with no issue.</p><p>The problem herein lies with the iommu_groups not being created, there were 3 other posters here with that same error but nothing they did has fixed it for me yet. I have blacklisted IGP, radeon as well as pci-stub&#039;ing them.</p><p>For reference:</p><div class="codebox"><pre><code>@Shodan ~ $ sudo vfio-bind 0000:01:00.0 0000:01:00.1 ls: cannot access /sys/bus/pci/devices/0000:01:00.0/iommu_group/devices: No such file or directory ls: cannot access /sys/bus/pci/devices/0000:01:00.1/iommu_group/devices: No such file or directory</code></pre></div><p>Your script doesn&#039;t lie...</p><div class="codebox"><pre><code>@Shodan ~ $ sudo find /sys/bus |grep iommu_group @Shodan ~ :( $ </code></pre></div><p>Any thoughts? Im just doing random stuff now, not sure where to go from here cept maybe buy a new motherboard.</p><p>Thanks, Joe</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1324052">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1324704" class="blockpost rowodd"> <h2><span><span class="conr">#465</span> <a href="viewtopic.php?pid=1324704#p1324704">2013-09-15 00:23:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74747">gosheto</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:0xd3ad@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 1024 -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1</code></pre></div><p>return</p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: error, group 1 is not viable, please ensure all devices within the iommu_group are bound to their vfio bus driver. qemu-system-x86_64: -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to get group 1 qemu-system-x86_64: -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>Any ideas?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1324704">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1324849" class="blockpost roweven"> <h2><span><span class="conr">#466</span> <a href="viewtopic.php?pid=1324849#p1324849">2013-09-15 13:01:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74747">gosheto</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:0xd3ad@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello,</p><p>my primary and secondary VGA is in one IOMMU group, and i cant bind them to vfio.<br />I found in old posts here (<a href="https://bbs.archlinux.org/viewtopic.php?pid=1307091#p1307091" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 1#p1307091</a>) that must apply ACS-patch from here - <a href="http://www.spinics.net/lists/kvm/msg92163.html" rel="nofollow">http://www.spinics.net/lists/kvm/msg92163.html</a><br />Because i`m new in Linux world, can provide me step by step, how to apply this patch?<br />I&#039;m using Ubuntu 13.10 - 3.11.0-7-generic</p><p>Thank you in advance!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1324849">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325119" class="blockpost rowodd"> <h2><span><span class="conr">#467</span> <a href="viewtopic.php?pid=1325119#p1325119">2013-09-16 04:12:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73506">GizmoChicken</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-25</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73506">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>GizmoChicken wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>yeah its got to do with the number of cpu cores on your board just add ivrs_ioapic[5]=00:14.0 ivrs_ioapic[6]=00:00.1 as a kernel parameter to grub and you&#039;re done, once you get it working remove this line: </p><div class="codebox"><pre><code>vfio_iommu_type1.allow_unsafe_interrupts=1</code></pre></div><p>Im not going to write anything to Asus anymore this is my last board from them, they dont support linux, and they dont care fixing anything after the release, my next MB will be Gigabyte</p></div></blockquote></div><p>In capitulation to my repeated nagging and pestering, ASUS finally sent me a patched BIOS (M5A99FX-PRO-R20-ASUS-9903.CAP) that attempts to address the IVRS&#160; errors that I was having with my ASUS M5A99FX PRO R2.0 motherboard.&#160; </p><p>Much to my surprise and satisfaction, the patched BIOS resolves ALL the IVRS&#160; errors that I had with my motherboard, eliminating the need for the kernel IVRS override.&#160; Yippee!</p><p>The support rep couldn&#039;t tell me when a version of the BIOS that includes the patch will be available for download from ASUS.&#160; Hopefully soon.</p></div></blockquote></div><p>That is good news! i wonder if they&#039;ll release an updated bios for the rest of their boards with this issue</p></div></blockquote></div><p>I recently learned that, in addition to the fix for my M5A99FX PRO R2.0 motherboard, ASUS issued a similar &quot;test BIOS&quot; for a Sabertooth 990FX R2.0.&#160; I don&#039;t know for certain what ASUS has planned for other motherboards, but I&#039;m under the impression ASUS will at least make an effort to add the fix to future BIOS releases... perhaps not the next stable BIOS release, but eventually.</p><p>Anyone wanting a &quot;test BIOS&quot; for an ASUS motherboard that uses the AMD 990FX or 970FX chipsets should consider contacting ASUS and providing them with enough information to get to the correct person.&#160; ASUS might issue a custom &quot;test BIOS&quot; for other motherboards upon request, but no promises.</p><p>Here&#039;s some information that may help to get to the right person at ASUS:<br />Name of my primary contact at ASUS: lijay_quan<br />Name of &quot;test BIOS&quot; issued for the ASUS M5A99FX PRO R2:&#160; M5A99FX-PRO-R20-ASUS-9903.CAP<br />Name of &quot;test BIOS&quot; issued for the ASUS Sabertooth 990FX R2:&#160; SABERTOOTH-990FX-R20-ASUS-9901.CAP</p> <p class="postedit"><em>Last edited by GizmoChicken (2013-09-16 04:38:44)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325119">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325593" class="blockpost roweven"> <h2><span><span class="conr">#468</span> <a href="viewtopic.php?pid=1325593#p1325593">2013-09-17 11:27:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53621">teekay</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-10-26</span></dd> <dd><span>Posts: 267</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53621">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>i&#039;m having some problems using qemu 1.6, it seems it requires seabios 1.7.3 and windows crashes the system at the login prompt, ill look into it when i get some time.</p></div></blockquote></div><p>So I wasn&#039;t the only one :-)</p><div class="quotebox"><cite>teekay some pages ago wrote:</cite><blockquote><div><p>Am I the only one who gets BSODs with a message like &quot;your system BIOS is not fully ACPI compilant&quot; when using Qemu 1.6.0 and seabios 1.7.2.2 patched?<br />Seabios 1.7.3-stable branch works fine here with Qemu 1.6.0 (and the patch is included there).</p></div></blockquote></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325593">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325669" class="blockpost rowodd"> <h2><span><span class="conr">#469</span> <a href="viewtopic.php?pid=1325669#p1325669">2013-09-17 14:01:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75111">chUpa</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/75111.jpg?m=1379439992" width="80" height="80" alt="" /></dd> <dd><span>From: Chelyabinsk, Russia</span></dd> <dd><span>Registered: 2013-09-17</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75111">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Fully confirm. It works!</p><p>running on<br />Gigabyte AM3+ 990FXA-UD7/UD3<br />AMD FX-8150/8350<br />ATI 5450/Nvidia 210 - as primary.<br />ATI 7970/7850 - as passthrough.<br />Windows 7/8 fully works.</p><p>Qemu-git<br />Seabios from qemu</p><br /><p>Freezing when installing, was solved. The problem was in image file permissions.<br />Now I want to try to pass another card in the guest machine, to make a crossfire.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325669">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325690" class="blockpost roweven"> <h2><span><span class="conr">#470</span> <a href="viewtopic.php?pid=1325690#p1325690">2013-09-17 15:20:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi,</p><p>first of: thanks for this great topic!</p><p>I think about setting up a System with VGA-Passthrough, and i have still some questions:</p><p>Is it possible to use the System like in a normal Multi-monitor setup? I dont want to have 2 Mouses and Keyboards, one for the whole System would be great, is that possible?</p><p>Most of you guys with AMD-CPUs use a 990FX MB. Is the support better on that chipset? technichaly a 970 MB would work, too, wouldnt it?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325690">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325698" class="blockpost rowodd"> <h2><span><span class="conr">#471</span> <a href="viewtopic.php?pid=1325698#p1325698">2013-09-17 15:44:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><p>Hi,</p><p>first of: thanks for this great topic!</p><p>I think about setting up a System with VGA-Passthrough, and i have still some questions:</p><p>Is it possible to use the System like in a normal Multi-monitor setup? I dont want to have 2 Mouses and Keyboards, one for the whole System would be great, is that possible?</p><p>Most of you guys with AMD-CPUs use a 990FX MB. Is the support better on that chipset? technichaly a 970 MB would work, too, wouldnt it?</p></div></blockquote></div><p>Well if the 970 chipset supports iommu then yes you can, im using 1 monitor 1 keybaord and 1 mouse, my monitor supports 2 sources, so i can easly switch between windows and linux with 1 button, and for the mouse and keyboard you can use a usb switch, or like in my case i have 4 frontal usb ports 2 usb 2.0 and 2 usb 3.0 so i easly switch them (the usb 3 controller is on windows).</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325698">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325716" class="blockpost roweven"> <h2><span><span class="conr">#472</span> <a href="viewtopic.php?pid=1325716#p1325716">2013-09-17 16:09:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>teekay wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>i&#039;m having some problems using qemu 1.6, it seems it requires seabios 1.7.3 and windows crashes the system at the login prompt, ill look into it when i get some time.</p></div></blockquote></div><p>So I wasn&#039;t the only one :-)</p><div class="quotebox"><cite>teekay some pages ago wrote:</cite><blockquote><div><p>Am I the only one who gets BSODs with a message like &quot;your system BIOS is not fully ACPI compilant&quot; when using Qemu 1.6.0 and seabios 1.7.2.2 patched?<br />Seabios 1.7.3-stable branch works fine here with Qemu 1.6.0 (and the patch is included there).</p></div></blockquote></div></div></blockquote></div><p>Im gonna skip 1.6 and wait for kernel 3.12 and the next qemu release which like i mentioned before shouldnt need any extra patches.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325716">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325720" class="blockpost rowodd"> <h2><span><span class="conr">#473</span> <a href="viewtopic.php?pid=1325720#p1325720">2013-09-17 16:18:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><p>Hi,</p><p>first of: thanks for this great topic!</p><p>I think about setting up a System with VGA-Passthrough, and i have still some questions:</p><p>Is it possible to use the System like in a normal Multi-monitor setup? I dont want to have 2 Mouses and Keyboards, one for the whole System would be great, is that possible?</p><p>Most of you guys with AMD-CPUs use a 990FX MB. Is the support better on that chipset? technichaly a 970 MB would work, too, wouldnt it?</p></div></blockquote></div><p>Well if the 970 chipset supports iommu then yes you can, im using 1 monitor 1 keybaord and 1 mouse, my monitor supports 2 sources, so i can easly switch between windows and linux with 1 button, and for the mouse and keyboard you can use a usb switch, or like in my case i have 4 frontal usb ports 2 usb 2.0 and 2 usb 3.0 so i easly switch them (the usb 3 controller is on windows).</p></div></blockquote></div><p>So theres no way of using the mouse for both systems like for example a shared soundcard?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325720">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325734" class="blockpost roweven"> <h2><span><span class="conr">#474</span> <a href="viewtopic.php?pid=1325734#p1325734">2013-09-17 16:45:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><p>Hi,</p><p>first of: thanks for this great topic!</p><p>I think about setting up a System with VGA-Passthrough, and i have still some questions:</p><p>Is it possible to use the System like in a normal Multi-monitor setup? I dont want to have 2 Mouses and Keyboards, one for the whole System would be great, is that possible?</p><p>Most of you guys with AMD-CPUs use a 990FX MB. Is the support better on that chipset? technichaly a 970 MB would work, too, wouldnt it?</p></div></blockquote></div><p>Well if the 970 chipset supports iommu then yes you can, im using 1 monitor 1 keybaord and 1 mouse, my monitor supports 2 sources, so i can easly switch between windows and linux with 1 button, and for the mouse and keyboard you can use a usb switch, or like in my case i have 4 frontal usb ports 2 usb 2.0 and 2 usb 3.0 so i easly switch them (the usb 3 controller is on windows).</p></div></blockquote></div><p>So theres no way of using the mouse for both systems like for example a shared soundcard?</p></div></blockquote></div><p><a href="http://synergy-foss.org/" rel="nofollow">http://synergy-foss.org/</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325734">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1325743" class="blockpost rowodd"> <h2><span><span class="conr">#475</span> <a href="viewtopic.php?pid=1325743#p1325743">2013-09-17 17:16:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Well if the 970 chipset supports iommu then yes you can, im using 1 monitor 1 keybaord and 1 mouse, my monitor supports 2 sources, so i can easly switch between windows and linux with 1 button, and for the mouse and keyboard you can use a usb switch, or like in my case i have 4 frontal usb ports 2 usb 2.0 and 2 usb 3.0 so i easly switch them (the usb 3 controller is on windows).</p></div></blockquote></div><p>So theres no way of using the mouse for both systems like for example a shared soundcard?</p></div></blockquote></div><p><a href="http://synergy-foss.org/" rel="nofollow">http://synergy-foss.org/</a></p></div></blockquote></div><p>That looks really nice! Thanks a lot for the help!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1325743">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=18">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=17">17</a> <a href="viewtopic.php?id=162768&amp;p=18">18</a> <strong>19</strong> <a href="viewtopic.php?id=162768&amp;p=20">20</a> <a href="viewtopic.php?id=162768&amp;p=21">21</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=20">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
