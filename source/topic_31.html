<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 31) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=31" title="Page 31" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=30" title="Page 30" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=32" title="Page 32" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=30">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=29">29</a> <a href="viewtopic.php?id=162768&amp;p=30">30</a> <strong>31</strong> <a href="viewtopic.php?id=162768&amp;p=32">32</a> <a href="viewtopic.php?id=162768&amp;p=33">33</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=32">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1349551" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#751</span> <a href="viewtopic.php?pid=1349551#p1349551">2013-11-14 18:49:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>You need to lower your vcpu count or my script will break, thats why you&#039;re seeing all those error</p><p>Ex: change VCPUS=8 to VCPUS=6</p> <p class="postedit"><em>Last edited by nbhs (2013-11-14 19:02:54)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349551">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349554" class="blockpost roweven"> <h2><span><span class="conr">#752</span> <a href="viewtopic.php?pid=1349554#p1349554">2013-11-14 19:05:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76479">Norcoen</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Norway</span></dd> <dd><span>Registered: 2013-11-02</span></dd> <dd><span>Posts: 23</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:frankmoll@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Norcoen wrote:</cite><blockquote><div><p>//edit:<br />ah, now I see that vendor:device IDs are the same again, like the problem I had with the sata-controller.<br />Is it possible to be more specific, on which device I want to pass?<br />virt-manager defines it in this xml structure:</p><div class="codebox"><pre><code>&lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;vendor id=&#039;0x1532&#039;/&gt; &lt;product id=&#039;0x0016&#039;/&gt; &lt;address bus=&#039;3&#039; device=&#039;15&#039;/&gt; &lt;/source&gt; &lt;/hostdev&gt;</code></pre></div><p>//edit2:<br />I found this: <a href="http://www.linux-kvm.org/page/USB_Host_Device_Assigned_to_Guest" rel="nofollow">http://www.linux-kvm.org/page/USB_Host_ … d_to_Guest</a><br />I tried changing the startscript from</p><div class="codebox"><pre><code>USB_DEVICES=&quot;host:046d:c226 host:046d:c227 host:1532:0016&quot;</code></pre></div><p>to:</p><div class="codebox"><pre><code>USB_DEVICES=&quot;usb-host,hostbus=3,hostaddr=10 usb-host,hostbus=3,hostaddr=11 usb-host,hostbus=3,hostaddr=13&quot;</code></pre></div><p>but that did not work either.</p></div></blockquote></div><p>I changed the above things and I lowered the count to 4.<br />[do I have to set VCPUS=&quot;7&quot; to use all 8 cores (4+4 HT)?]</p><p>Now this is my output:</p><div class="codebox"><pre class="vscroll"><code>$ sudo ./startWin7.sh cset: --&gt; activating shielding: cset: moving 368 tasks from root into system cpuset... [==================================================]% cset: &quot;system&quot; cpuset of CPUSPEC(4-7) with 368 tasks running cset: &quot;user&quot; cpuset of CPUSPEC(0-3) with 0 tasks running $QEMU $BIOS $CPU $MEMORY $QEMU_ARGS $DEV $USB_DEV $NET $SND $STORAGE $EXTRA_ARGS QEMU 1.6.50 monitor - type &#039;help&#039; for more information (qemu) cset: --&gt; shielding following pidspec: 7983 cset: done pid 7983&#039;s current affinity list: 0-3 pid 7983&#039;s new affinity list: 0 cset: --&gt; shielding following pidspec: 7984 cset: done pid 7984&#039;s current affinity list: 0-3 pid 7984&#039;s new affinity list: 1 cset: --&gt; shielding following pidspec: 8029 cset: done pid 8029&#039;s current affinity list: 0-3 pid 8029&#039;s new affinity list: 2 qemu: could not add USB device &#039;usb-host,hostbus=3,hostaddr=10&#039; cset: --&gt; shielding following pidspec: 8070 cset: **&gt; skipped 1 task, not in origination set &quot;system&quot; cset: --&gt; hint: perhaps use --force if sure of command cset: **&gt; tasks do not match all criteria, none moved taskset: failed to get pid 8070&#039;s affinity: Kein passender Prozess gefunden cset: --&gt; deactivating/reseting shielding cset: moving 0 tasks from &quot;/user&quot; user set to root set... cset: moving 368 tasks from &quot;/system&quot; system set to root set... [==================================================]% cset: deleting &quot;/user&quot; and &quot;/system&quot; sets cset: done All Done!!</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349554">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349558" class="blockpost rowodd"> <h2><span><span class="conr">#753</span> <a href="viewtopic.php?pid=1349558#p1349558">2013-11-14 19:19:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi guys!</p><p>I`m able to pass through GTX 680 no problems, and able to shutdown / restart VM as many times as I want. I get qemu bios on the card ouptut. <br />I`m still far away from full featured windows inside linux, but this is awesome stuff.</p><p>Thanks a lot, especially nbhs and aw!</p><p>PS. Did a quick installation of Windows 7, install went fine but I got a blue screen after reboot. I guess there will be one or two hiccups still <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>PPS: Must be a ahci / ide controller mismatch. I`m getting it w/o passed through VGA ( dont have the time to see the code ) I`ll try more tomorrow.</p> <p class="postedit"><em>Last edited by ilya80 (2013-11-14 20:05:09)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349558">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349559" class="blockpost roweven"> <h2><span><span class="conr">#754</span> <a href="viewtopic.php?pid=1349559#p1349559">2013-11-14 19:23:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Norcoen wrote:</cite><blockquote><div><div class="quotebox"><cite>Norcoen wrote:</cite><blockquote><div><p>//edit:<br />ah, now I see that vendor:device IDs are the same again, like the problem I had with the sata-controller.<br />Is it possible to be more specific, on which device I want to pass?<br />virt-manager defines it in this xml structure:</p><div class="codebox"><pre><code>&lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;vendor id=&#039;0x1532&#039;/&gt; &lt;product id=&#039;0x0016&#039;/&gt; &lt;address bus=&#039;3&#039; device=&#039;15&#039;/&gt; &lt;/source&gt; &lt;/hostdev&gt;</code></pre></div><p>//edit2:<br />I found this: <a href="http://www.linux-kvm.org/page/USB_Host_Device_Assigned_to_Guest" rel="nofollow">http://www.linux-kvm.org/page/USB_Host_ … d_to_Guest</a><br />I tried changing the startscript from</p><div class="codebox"><pre><code>USB_DEVICES=&quot;host:046d:c226 host:046d:c227 host:1532:0016&quot;</code></pre></div><p>to:</p><div class="codebox"><pre><code>USB_DEVICES=&quot;usb-host,hostbus=3,hostaddr=10 usb-host,hostbus=3,hostaddr=11 usb-host,hostbus=3,hostaddr=13&quot;</code></pre></div><p>but that did not work either.</p></div></blockquote></div><p>I changed the above things and I lowered the count to 4.<br />[do I have to set VCPUS=&quot;7&quot; to use all 8 cores (4+4 HT)?]</p><p>Now this is my output:</p><div class="codebox"><pre class="vscroll"><code>$ sudo ./startWin7.sh cset: --&gt; activating shielding: cset: moving 368 tasks from root into system cpuset... [==================================================]% cset: &quot;system&quot; cpuset of CPUSPEC(4-7) with 368 tasks running cset: &quot;user&quot; cpuset of CPUSPEC(0-3) with 0 tasks running $QEMU $BIOS $CPU $MEMORY $QEMU_ARGS $DEV $USB_DEV $NET $SND $STORAGE $EXTRA_ARGS QEMU 1.6.50 monitor - type &#039;help&#039; for more information (qemu) cset: --&gt; shielding following pidspec: 7983 cset: done pid 7983&#039;s current affinity list: 0-3 pid 7983&#039;s new affinity list: 0 cset: --&gt; shielding following pidspec: 7984 cset: done pid 7984&#039;s current affinity list: 0-3 pid 7984&#039;s new affinity list: 1 cset: --&gt; shielding following pidspec: 8029 cset: done pid 8029&#039;s current affinity list: 0-3 pid 8029&#039;s new affinity list: 2 qemu: could not add USB device &#039;usb-host,hostbus=3,hostaddr=10&#039; cset: --&gt; shielding following pidspec: 8070 cset: **&gt; skipped 1 task, not in origination set &quot;system&quot; cset: --&gt; hint: perhaps use --force if sure of command cset: **&gt; tasks do not match all criteria, none moved taskset: failed to get pid 8070&#039;s affinity: Kein passender Prozess gefunden cset: --&gt; deactivating/reseting shielding cset: moving 0 tasks from &quot;/user&quot; user set to root set... cset: moving 368 tasks from &quot;/system&quot; system set to root set... [==================================================]% cset: deleting &quot;/user&quot; and &quot;/system&quot; sets cset: done All Done!!</code></pre></div></div></blockquote></div><p>Try using the commandline instead of my script,&#160; perhaps you built qemu without usb support?</p> <p class="postedit"><em>Last edited by nbhs (2013-11-14 19:23:36)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349559">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349586" class="blockpost rowodd"> <h2><span><span class="conr">#755</span> <a href="viewtopic.php?pid=1349586#p1349586">2013-11-14 20:30:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76479">Norcoen</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Norway</span></dd> <dd><span>Registered: 2013-11-02</span></dd> <dd><span>Posts: 23</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:frankmoll@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m trying to rebuilt qemu as provided in the first post now.<br /> I&#039;m a bit stuck with configure now.</p><p>I&#039;m getting this error:</p><div class="codebox"><pre><code>ERROR: pa check failed Make sure to have the pa libs and headers installed.</code></pre></div><p>using</p><div class="codebox"><pre><code>./configure --prefix=/home/user/qemu-1.7.r29486.g5c5432e --sysconfdir=/etc --audio-drv-list=&#039;pa alsa sdl oss&#039; \ --python=/usr/bin/python2 --smbd=/usr/bin/smbd \ --enable-docs --libexecdir=/usr/lib/qemu \ --disable-gtk --enable-linux-aio --enable-seccomp \ --enable-spice --localstatedir=/var</code></pre></div><p>Do I need &quot;pa&quot; - what does it do?<br />[//edit: I guess pa means pulseaudio in context with alsa and oss... could have figured that out earlier...] - I have pulseaudi installed, guess I need to check the libs.<br />Also, what do I set my --libexecdir to, with my given prefix? Or is it just fine?<br />I don&#039;t have /usr/bin/smbd, is that the samba daemon?</p> <p class="postedit"><em>Last edited by Norcoen (2013-11-14 20:43:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349586">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349595" class="blockpost roweven"> <h2><span><span class="conr">#756</span> <a href="viewtopic.php?pid=1349595#p1349595">2013-11-14 20:42:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76834">Val532</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-13</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76834">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi i need help ^^.</p><p>When i start my VM with : </p><div class="quotebox"><blockquote><div><p>sudo qemu-system-x86_64 -M q35 -m 8G -enable-kvm -cpu Haswell -vga none -nographic -parallel none -boot menu=on \<br />-bios /usr/share/qemu/bios.bin \<br />-smp 4,sockets=1,cores=4,threads=1 \<br />-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />-device ahci,bus=pcie.0,id=ahci \<br />-device vfio-pci,host=01:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1 \<br />-device vfio-pci,host=01:00.1,bus=pcie.0 \<br />-drive file=/home/val/windows2,id=disk \<br />-device ide-hd,bus=ahci.0,drive=disk \<br />-usb -usbdevice host:046d:c019 -usbdevice host:0603:00f2 \<br />-net nic,model=e1000 -net tap,ifname=tap0</p></div></blockquote></div><p>All work ok.</p><p>But if i start my VM with Virt-Manager with this xml :</p><div class="quotebox"><blockquote><div><p>&lt;!--<br />WARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE<br />OVERWRITTEN AND LOST. Changes to this xml configuration should be made using:<br />&#160; virsh edit Windows7-test2<br />or other application using the libvirt API.<br />--&gt;</p><p>&lt;domain type=&#039;kvm&#039; xmlns:qemu=&#039;http://libvirt.org/schemas/domain/qemu/1.0&#039;&gt;<br />&#160; &lt;name&gt;Windows7-test2&lt;/name&gt;<br />&#160; &lt;uuid&gt;652e4382-4dc8-7349-cdbf-359d333aba08&lt;/uuid&gt;<br />&#160; &lt;memory unit=&#039;KiB&#039;&gt;8388608&lt;/memory&gt;<br />&#160; &lt;currentMemory unit=&#039;KiB&#039;&gt;8388608&lt;/currentMemory&gt;<br />&#160; &lt;memoryBacking&gt;<br />&#160; &#160; &lt;nosharepages/&gt;<br />&#160; &lt;/memoryBacking&gt; <br />&#160; &lt;vcpu placement=&#039;static&#039;&gt;4&lt;/vcpu&gt;<br />&#160; &lt;os&gt;<br />&#160; &#160; &lt;type arch=&#039;x86_64&#039; machine=&#039;pc-q35-1.7&#039;&gt;hvm&lt;/type&gt;<br />&#160; &#160; &lt;boot dev=&#039;hd&#039;/&gt;<br />&#160; &#160; &lt;smbios mode=&#039;host&#039;/&gt;<br />&#160; &lt;/os&gt;<br />&#160; &lt;features&gt;<br />&#160; &#160; &lt;acpi/&gt;<br />&#160; &#160; &lt;apic/&gt;<br />&#160; &#160; &lt;pae/&gt;<br />&#160; &lt;/features&gt;<br />&#160; &lt;cpu mode=&#039;custom&#039; match=&#039;exact&#039;&gt;<br />&#160; &#160; &lt;model fallback=&#039;allow&#039;&gt;Haswell&lt;/model&gt;<br />&#160; &#160; &lt;vendor&gt;Intel&lt;/vendor&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;abm&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;pdpe1gb&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;rdrand&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;f16c&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;osxsave&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;pdcm&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;xtpr&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;tm2&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;est&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;smx&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;vmx&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;ds_cpl&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;monitor&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;dtes64&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;pbe&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;tm&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;ht&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;ss&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;acpi&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;ds&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;vme&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;rtm&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;invpcid&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;erms&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;bmi2&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;smep&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;avx2&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;hle&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;bmi1&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;fsgsbase&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;lahf_lm&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;rdtscp&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;avx&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;xsave&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;aes&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;tsc-deadline&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;popcnt&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;movbe&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;x2apic&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;sse4.2&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;sse4.1&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;pcid&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;cx16&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;fma&#039;/&gt;<br />&#160; &#160; &lt;feature policy=&#039;require&#039; name=&#039;pclmuldq&#039;/&gt;<br />&#160; &lt;/cpu&gt;<br />&#160; &lt;clock offset=&#039;localtime&#039;/&gt;<br />&#160; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;<br />&#160; &lt;on_reboot&gt;restart&lt;/on_reboot&gt;<br />&#160; &lt;on_crash&gt;restart&lt;/on_crash&gt;<br />&#160; &lt;devices&gt;<br />&#160; &#160; &lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;<br />&#160; &#160; &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt;<br />&#160; &#160; &#160; &lt;driver name=&#039;qemu&#039; type=&#039;qcow2&#039; cache=&#039;writethrough&#039; io=&#039;native&#039;/&gt;<br />&#160; &#160; &#160; &lt;source file=&#039;/home/val/windows2&#039;/&gt;<br />&#160; &#160; &#160; &lt;target dev=&#039;sda&#039; bus=&#039;sata&#039;/&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt;<br />&#160; &#160; &lt;/disk&gt;<br />&#160; &#160; &lt;controller type=&#039;pci&#039; index=&#039;0&#039; model=&#039;pcie-root&#039;/&gt;<br />&#160; &#160; &lt;controller type=&#039;pci&#039; index=&#039;1&#039; model=&#039;dmi-to-pci-bridge&#039;&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x02&#039; function=&#039;0x0&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;controller type=&#039;pci&#039; index=&#039;2&#039; model=&#039;pci-bridge&#039;&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x01&#039; slot=&#039;0x01&#039; function=&#039;0x0&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;controller type=&#039;sata&#039; index=&#039;0&#039;&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1f&#039; function=&#039;0x2&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-ehci1&#039;&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x01&#039; function=&#039;0x7&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci1&#039;&gt;<br />&#160; &#160; &#160; &lt;master startport=&#039;0&#039;/&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x05&#039; function=&#039;0x0&#039; multifunction=&#039;on&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci2&#039;&gt;<br />&#160; &#160; &#160; &lt;master startport=&#039;2&#039;/&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x05&#039; function=&#039;0x1&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci3&#039;&gt;<br />&#160; &#160; &#160; &lt;master startport=&#039;4&#039;/&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x05&#039; function=&#039;0x2&#039;/&gt;<br />&#160; &#160; &lt;/controller&gt;<br />&#160; &#160; &lt;interface type=&#039;bridge&#039;&gt;<br />&#160; &#160; &#160; &lt;mac address=&#039;52:54:00:07:1c:aa&#039;/&gt;<br />&#160; &#160; &#160; &lt;source bridge=&#039;br0&#039;/&gt;<br />&#160; &#160; &#160; &lt;model type=&#039;e1000&#039;/&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x03&#039; function=&#039;0x0&#039;/&gt;<br />&#160; &#160; &lt;/interface&gt;<br />&#160; &#160; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt;<br />&#160; &#160; &#160; &lt;source&gt;<br />&#160; &#160; &#160; &#160; &lt;vendor id=&#039;0x0603&#039;/&gt;<br />&#160; &#160; &#160; &#160; &lt;product id=&#039;0x00f2&#039;/&gt;<br />&#160; &#160; &#160; &lt;/source&gt;<br />&#160; &#160; &lt;/hostdev&gt;<br />&#160; &#160; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt;<br />&#160; &#160; &#160; &lt;source&gt;<br />&#160; &#160; &#160; &#160; &lt;vendor id=&#039;0x046d&#039;/&gt;<br />&#160; &#160; &#160; &#160; &lt;product id=&#039;0xc019&#039;/&gt;<br />&#160; &#160; &#160; &lt;/source&gt;<br />&#160; &#160; &lt;/hostdev&gt;<br />&#160; &#160; &lt;memballoon model=&#039;none&#039;/&gt;<br />&#160; &lt;/devices&gt;<br />&#160; &lt;seclabel type=&#039;none&#039;/&gt;<br />&#160; &lt;qemu:commandline&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;-device&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;-device&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;-device&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.1,bus=root.1,addr=00.1&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;-bios&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;bios.bin&#039;/&gt;<br />&#160; &lt;/qemu:commandline&gt;<br />&lt;/domain&gt;</p></div></blockquote></div><p>I get a BSOD 0x00000116&#160; atikmpag.sys if i remove the ati driver, the VM work good but no graphique acceleration.</p><p>Any idea ?</p><p>Edit: I found the problem to slove it juste put clear_emulator_capabilities=0 in qemu.conf</p> <p class="postedit"><em>Last edited by Val532 (2013-11-14 21:00:27)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349595">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349596" class="blockpost rowodd"> <h2><span><span class="conr">#757</span> <a href="viewtopic.php?pid=1349596#p1349596">2013-11-14 20:44:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Norcoen wrote:</cite><blockquote><div><p>I&#039;m trying to rebuilt qemu as provided in the first post now.<br /> I&#039;m a bit stuck with configure now.</p><p>I&#039;m getting this error:</p><div class="codebox"><pre><code>ERROR: pa check failed Make sure to have the pa libs and headers installed.</code></pre></div><p>using</p><div class="codebox"><pre><code>./configure --prefix=/home/user/qemu-1.7.r29486.g5c5432e --sysconfdir=/etc --audio-drv-list=&#039;pa alsa sdl oss&#039; \ --python=/usr/bin/python2 --smbd=/usr/bin/smbd \ --enable-docs --libexecdir=/usr/lib/qemu \ --disable-gtk --enable-linux-aio --enable-seccomp \ --enable-spice --localstatedir=/var</code></pre></div><p>Do I need &quot;pa&quot; - what does it do?<br />Also, what do I set my --libexecdir to, with my given prefix? Or is it just fine?<br />I don&#039;t have /usr/bin/smbd, is that the samba daemon?</p></div></blockquote></div><p>pa is pulseaudio, you have to install the pulseaudio-libs package i think</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349596">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349604" class="blockpost roweven"> <h2><span><span class="conr">#758</span> <a href="viewtopic.php?pid=1349604#p1349604">2013-11-14 20:53:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76479">Norcoen</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Norway</span></dd> <dd><span>Registered: 2013-11-02</span></dd> <dd><span>Posts: 23</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:frankmoll@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Yes, I needed the lib-pulseaudio-devel package, also alsa and oss devel libs after that...^^</p><p>//edit2:<br />After some more missing libs, configure succeeded.<br />Now when I&#039;m trying to compile it with male I&#039;m getting this SDL error:</p><div class="codebox"><pre class="vscroll"><code>$ make GEN alpha-softmmu/config-devices.mak GEN arm-softmmu/config-devices.mak GEN cris-softmmu/config-devices.mak GEN i386-softmmu/config-devices.mak GEN lm32-softmmu/config-devices.mak GEN m68k-softmmu/config-devices.mak GEN microblazeel-softmmu/config-devices.mak GEN microblaze-softmmu/config-devices.mak GEN mips64el-softmmu/config-devices.mak GEN mips64-softmmu/config-devices.mak GEN mipsel-softmmu/config-devices.mak GEN mips-softmmu/config-devices.mak GEN moxie-softmmu/config-devices.mak GEN or32-softmmu/config-devices.mak GEN ppc64-softmmu/config-devices.mak GEN ppcemb-softmmu/config-devices.mak GEN ppc-softmmu/config-devices.mak GEN s390x-softmmu/config-devices.mak GEN sh4eb-softmmu/config-devices.mak GEN sh4-softmmu/config-devices.mak GEN sparc64-softmmu/config-devices.mak GEN sparc-softmmu/config-devices.mak GEN unicore32-softmmu/config-devices.mak GEN x86_64-softmmu/config-devices.mak GEN xtensaeb-softmmu/config-devices.mak GEN xtensa-softmmu/config-devices.mak GEN alpha-linux-user/config-devices.mak GEN armeb-linux-user/config-devices.mak GEN arm-linux-user/config-devices.mak GEN cris-linux-user/config-devices.mak GEN i386-linux-user/config-devices.mak GEN m68k-linux-user/config-devices.mak GEN microblazeel-linux-user/config-devices.mak GEN microblaze-linux-user/config-devices.mak GEN mips64el-linux-user/config-devices.mak GEN mips64-linux-user/config-devices.mak GEN mipsel-linux-user/config-devices.mak GEN mips-linux-user/config-devices.mak GEN mipsn32el-linux-user/config-devices.mak GEN mipsn32-linux-user/config-devices.mak GEN or32-linux-user/config-devices.mak GEN ppc64abi32-linux-user/config-devices.mak GEN ppc64-linux-user/config-devices.mak GEN ppc-linux-user/config-devices.mak GEN s390x-linux-user/config-devices.mak GEN sh4eb-linux-user/config-devices.mak GEN sh4-linux-user/config-devices.mak GEN sparc32plus-linux-user/config-devices.mak GEN sparc64-linux-user/config-devices.mak GEN sparc-linux-user/config-devices.mak GEN unicore32-linux-user/config-devices.mak GEN x86_64-linux-user/config-devices.mak GEN config-all-devices.mak GEN config-host.h DEP tests/dumptrees.c DEP tests/trees.S DEP tests/testutils.c DEP tests/value-labels.c DEP tests/asm_tree_dump.c DEP tests/truncated_property.c DEP tests/path_offset_aliases.c DEP tests/add_subnode_with_nops.c DEP tests/dtbs_equal_unordered.c DEP tests/dtb_reverse.c DEP tests/dtbs_equal_ordered.c DEP tests/extra-terminating-null.c DEP tests/incbin.c DEP tests/boot-cpuid.c DEP tests/phandle_format.c DEP tests/path-references.c DEP tests/references.c DEP tests/string_escapes.c DEP tests/del_node.c DEP tests/del_property.c DEP tests/setprop.c DEP tests/set_name.c DEP tests/rw_tree1.c DEP tests/open_pack.c DEP tests/nopulate.c DEP tests/mangle-layout.c DEP tests/move_and_save.c DEP tests/sw_tree1.c DEP tests/nop_node.c DEP tests/nop_property.c DEP tests/setprop_inplace.c DEP tests/notfound.c DEP tests/get_alias.c DEP tests/node_offset_by_compatible.c DEP tests/node_check_compatible.c DEP tests/node_offset_by_phandle.c DEP tests/node_offset_by_prop_value.c DEP tests/parent_offset.c DEP tests/supernode_atdepth_offset.c DEP tests/get_path.c DEP tests/get_phandle.c DEP tests/getprop.c DEP tests/get_name.c DEP tests/path_offset.c DEP tests/subnode_offset.c DEP tests/find_property.c DEP tests/root_node.c DEP tests/get_mem_rsv.c DEP libfdt/fdt_strerror.c DEP libfdt/fdt_rw.c DEP libfdt/fdt_sw.c DEP libfdt/fdt_wip.c DEP libfdt/fdt_ro.c DEP libfdt/fdt.c DEP ftdump.c LEX convert-dtsv0-lexer.lex.c DEP convert-dtsv0-lexer.lex.c DEP util.c DEP srcpos.c BISON dtc-parser.tab.c DEP dtc-parser.tab.c LEX dtc-lexer.lex.c DEP dtc-lexer.lex.c DEP treesource.c DEP livetree.c DEP fstree.c DEP flattree.c DEP dtc.c DEP data.c DEP checks.c CHK version_gen.h UPD version_gen.h DEP dtc.c CHK version_gen.h CC libfdt/fdt.o CC libfdt/fdt_ro.o CC libfdt/fdt_wip.o CC libfdt/fdt_sw.o CC libfdt/fdt_rw.o CC libfdt/fdt_strerror.o AR libfdt/libfdt.a ar: creating libfdt/libfdt.a a - libfdt/fdt.o a - libfdt/fdt_ro.o a - libfdt/fdt_wip.o a - libfdt/fdt_sw.o a - libfdt/fdt_rw.o a - libfdt/fdt_strerror.o GEN qemu-options.def GEN qmp-commands.h GEN qapi-types.h GEN qapi-visit.h GEN trace/generated-events.h GEN trace/generated-tracers.h GEN tests/test-qapi-types.h GEN tests/test-qapi-visit.h GEN tests/test-qmp-commands.h CHK version_gen.h CC tests/qemu-iotests/socket_scm_helper.o LINK tests/qemu-iotests/socket_scm_helper lt CC stubs/arch-query-cpu-def.lo lt CC stubs/clock-warp.lo lt CC stubs/cpu-get-clock.lo lt CC stubs/cpu-get-icount.lo lt CC stubs/dump.lo lt CC stubs/fdset-add-fd.lo lt CC stubs/fdset-find-fd.lo lt CC stubs/fdset-get-fd.lo lt CC stubs/fdset-remove-fd.lo lt CC stubs/gdbstub.lo lt CC stubs/get-fd.lo lt CC stubs/get-vm-name.lo lt CC stubs/iothread-lock.lo lt CC stubs/migr-blocker.lo lt CC stubs/mon-is-qmp.lo lt CC stubs/mon-printf.lo lt CC stubs/mon-print-filename.lo lt CC stubs/mon-protocol-event.lo lt CC stubs/mon-set-error.lo lt CC stubs/pci-drive-hot-add.lo lt CC stubs/reset.lo lt CC stubs/set-fd-handler.lo lt CC stubs/slirp.lo lt CC stubs/sysbus.lo lt CC stubs/uuid.lo lt CC stubs/vm-stop.lo lt CC stubs/vmstate.lo lt CC stubs/cpus.lo lt CC libcacard/cac.lo lt CC libcacard/event.lo lt CC libcacard/vcard.lo lt CC libcacard/vreader.lo lt CC libcacard/vcard_emul_nss.lo lt CC libcacard/vcard_emul_type.lo lt CC libcacard/card_7816.lo lt CC libcacard/vcardt.lo lt CC util/osdep.lo lt CC util/cutils.lo lt CC util/qemu-timer-common.lo lt CC util/error.lo lt CC util/qemu-error.lo lt CC util/oslib-posix.lo lt CC util/qemu-thread-posix.lo GEN trace/generated-events.c lt CC trace/generated-events.lo lt CC trace/default.lo lt CC trace/control.lo GEN trace/generated-tracers.c lt CC trace/generated-tracers.lo lt LINK libcacard.la GEN libcacard.pc GEN qemu-options.texi GEN qemu-monitor.texi GEN qemu-img-cmds.texi GEN qemu-doc.html GEN qemu-tech.html GEN qemu.1 GEN qemu-img.1 GEN qemu-nbd.8 GEN qmp-commands.txt GEN fsdev/virtfs-proxy-helper.1 GEN qapi-types.c GEN qga/qapi-generated/qga-qapi-types.h GEN qga/qapi-generated/qga-qapi-visit.h GEN qga/qapi-generated/qga-qmp-commands.h CC qapi-types.o GEN qapi-visit.c CC qapi-visit.o CC qga/commands.o CC qga/guest-agent-command-state.o CC qga/main.o CC qga/commands-posix.o CC qga/channel-posix.o GEN qga/qapi-generated/qga-qapi-types.c CC qga/qapi-generated/qga-qapi-types.o GEN qga/qapi-generated/qga-qapi-visit.c CC qga/qapi-generated/qga-qapi-visit.o GEN qga/qapi-generated/qga-qmp-marshal.c CC qga/qapi-generated/qga-qmp-marshal.o CC qapi/qapi-visit-core.o CC qapi/qapi-dealloc-visitor.o CC qapi/qmp-input-visitor.o CC qapi/qmp-output-visitor.o CC qapi/qmp-registry.o CC qapi/qmp-dispatch.o CC qapi/string-input-visitor.o CC qapi/string-output-visitor.o CC qapi/opts-visitor.o CC qobject/qint.o CC qobject/qstring.o CC qobject/qdict.o CC qobject/qlist.o CC qobject/qfloat.o CC qobject/qbool.o CC qobject/qjson.o CC qobject/json-lexer.o CC qobject/json-streamer.o CC qobject/json-parser.o CC qobject/qerror.o CC trace/generated-events.o CC util/unicode.o CC util/event_notifier-posix.o CC util/qemu-openpty.o CC util/envlist.o CC util/path.o CC util/host-utils.o CC util/cache-utils.o CC util/module.o CC util/bitmap.o CC util/bitops.o CC util/hbitmap.o CC util/fifo8.o CC util/acl.o CC util/compatfd.o CC util/iov.o CC util/aes.o CC util/qemu-config.o CC util/qemu-sockets.o CC util/uri.o CC util/notify.o CC util/qemu-option.o CC util/qemu-progress.o CC util/hexdump.o CC util/crc32c.o CC util/throttle.o AR libqemuutil.a AR libqemustub.a LINK qemu-ga CC qemu-nbd.o CC async.o CC thread-pool.o CC nbd.o CC block.o CC blockjob.o CC main-loop.o CC iohandler.o CC qemu-timer.o CC aio-posix.o CC qemu-io-cmds.o CC qemu-coroutine.o CC qemu-coroutine-lock.o CC qemu-coroutine-io.o CC qemu-coroutine-sleep.o CC coroutine-ucontext.o CC block/raw_bsd.o CC block/cow.o CC block/qcow.o CC block/vdi.o CC block/vmdk.o CC block/cloop.o CC block/dmg.o CC block/bochs.o CC block/vpc.o CC block/vvfat.o CC block/qcow2.o CC block/qcow2-refcount.o CC block/qcow2-cluster.o CC block/qcow2-snapshot.o CC block/qcow2-cache.o CC block/qed.o CC block/qed-gencb.o CC block/qed-l2-cache.o CC block/qed-table.o CC block/qed-cluster.o CC block/qed-check.o CC block/parallels.o CC block/blkdebug.o CC block/blkverify.o CC block/snapshot.o CC block/qapi.o CC block/raw-posix.o CC block/linux-aio.o CC block/nbd.o CC block/sheepdog.o CC block/curl.o LINK qemu-nbd GEN qemu-img-cmds.h CC qemu-img.o LINK qemu-img CC qemu-io.o LINK qemu-io CC fsdev/virtfs-proxy-helper.o CC fsdev/virtio-9p-marshal.o LINK fsdev/virtfs-proxy-helper CC libcacard/vscclient.o lt LINK vscclient CC qemu-bridge-helper.o LINK qemu-bridge-helper CC blockdev.o CC blockdev-nbd.o CC readline.o CC qdev-monitor.o CC device-hotplug.o CC os-posix.o CC migration.o CC migration-tcp.o CC qemu-char.o CC block-migration.o CC page_cache.o CC xbzrle.o CC migration-exec.o CC migration-unix.o CC migration-fd.o CC spice-qemu-char.o CC bt-host.o CC bt-vhci.o CC dma-helpers.o CC vl.o CC tpm.o CC qemu-seccomp.o GEN qmp-marshal.c CC qmp-marshal.o CC qmp.o CC hmp.o CC qemu-log.o CC tcg-runtime.o CC audio/audio.o CC audio/noaudio.o CC audio/wavaudio.o CC audio/mixeng.o CC audio/sdlaudio.o audio/sdlaudio.c:24:17: schwerwiegender Fehler: SDL.h: Datei oder Verzeichnis nicht gefunden #include &lt;SDL.h&gt; ^ Kompilierung beendet. make: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_3.html topic_4.html topic_5.html topic_6.html topic_7.html topic_8.html topic_9.html [audio/sdlaudio.o] Fehler 1</code></pre></div><p>I have installed all the sdl-devel libs. What am I missing?</p> <p class="postedit"><em>Last edited by Norcoen (2013-11-14 21:17:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349604">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349616" class="blockpost rowodd"> <h2><span><span class="conr">#759</span> <a href="viewtopic.php?pid=1349616#p1349616">2013-11-14 21:26:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Couldnt hold myself from playing around a bit more <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Installed windows, initial BSOD was because of -cpu host , needed -cpu SandyBridge instead.</p><p>Installed NVidia drivers but they give me Error 43. I think aw had more patches around that might solve this. Also GTX 680 is now my secondary GPU, this might be the problem.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349616">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349619" class="blockpost roweven"> <h2><span><span class="conr">#760</span> <a href="viewtopic.php?pid=1349619#p1349619">2013-11-14 21:30:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Norcoen wrote:</cite><blockquote><div><p>I have installed all the sdl-devel libs. What am I missing?</p></div></blockquote></div><p>Most distros have some sort of build dependency tool, ex:</p><p>yum-builddep qemu<br />apt-get build-dep qemu</p><p>It&#039;s generally a better starting point that recursively trying to build and installing missing dependencies.&#160; I&#039;ve never used arch, but I&#039;d guess it has a similar tool</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349619">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349620" class="blockpost rowodd"> <h2><span><span class="conr">#761</span> <a href="viewtopic.php?pid=1349620#p1349620">2013-11-14 21:33:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p>Couldnt hold myself from playing around a bit more <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Installed windows, initial BSOD was because of -cpu host , needed -cpu SandyBridge instead.</p><p>Installed NVidia drivers but they give me Error 43. I think aw had more patches around that might solve this. Also GTX 680 is now my secondary GPU, this might be the problem.</p></div></blockquote></div><p>Code 43 error - <a href="http://lists.nongnu.org/archive/html/qemu-devel/2013-10/msg01417.html" rel="nofollow">http://lists.nongnu.org/archive/html/qe … 01417.html</a></p><p>This didn&#039;t end up being the final solution, but it works for Geforce cards.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349620">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349627" class="blockpost roweven"> <h2><span><span class="conr">#762</span> <a href="viewtopic.php?pid=1349627#p1349627">2013-11-14 21:42:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Code 43 error - <a href="http://lists.nongnu.org/archive/html/qemu-devel/2013-10/msg01417.html" rel="nofollow">http://lists.nongnu.org/archive/html/qe … 01417.html</a><br />This didn&#039;t end up being the final solution, but it works for Geforce cards.</p></div></blockquote></div><p>Isnt this vfio_disallow_device_from_using_nosnoop_transactions.patch ? I have pulled qemu from git and applied this patch successfully before testing. </p><p>Is there any way to debug this?</p> <p class="postedit"><em>Last edited by ilya80 (2013-11-14 22:24:25)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349627">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349724" class="blockpost rowodd"> <h2><span><span class="conr">#763</span> <a href="viewtopic.php?pid=1349724#p1349724">2013-11-15 03:44:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Code 43 error - <a href="http://lists.nongnu.org/archive/html/qemu-devel/2013-10/msg01417.html" rel="nofollow">http://lists.nongnu.org/archive/html/qe … 01417.html</a><br />This didn&#039;t end up being the final solution, but it works for Geforce cards.</p></div></blockquote></div><p>Isnt this vfio_disallow_device_from_using_nosnoop_transactions.patch ? I have pulled qemu from git and applied this patch successfully before testing. </p><p>Is there any way to debug this?</p></div></blockquote></div><p>Yes, those are the same patches.&#160; Code 43 is pretty difficult to debug, google for it and you&#039;ll find videos of people baking their GPU to try to re-flow the solder.&#160; If you have the nosnoop patch, looks at the GPU in the host with &#039;lspci -vvv&#039; while Windows is running.&#160; You should see NoSnoop with a + or - next to it.&#160; If it&#039;s - then the nosnoop patch is doing it&#039;s job.&#160; If it&#039;s + I can point you at some other patches.&#160; Otherwise I&#039;d suggest comparing your VM setup versus others that have reported success with similar cards.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349724">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349762" class="blockpost roweven"> <h2><span><span class="conr">#764</span> <a href="viewtopic.php?pid=1349762#p1349762">2013-11-15 07:48:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Right I got to check it while Windows is running.</p> <p class="postedit"><em>Last edited by ilya80 (2013-11-15 08:23:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349762">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349782" class="blockpost rowodd"> <h2><span><span class="conr">#765</span> <a href="viewtopic.php?pid=1349782#p1349782">2013-11-15 09:44:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>OK, when VM is running, Nvidia VGA Adapter has NoSnoop-, but Nvidia HDMI Audio has NoSnoop+</p><p>Can that affect the drivers in guest?</p><p>Also, I wonder would saving the card BIOS and then supplying it to qemu make any difference?</p><p>Thanks,<br />Ilya.</p> <p class="postedit"><em>Last edited by ilya80 (2013-11-15 11:25:36)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349782">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349817" class="blockpost roweven"> <h2><span><span class="conr">#766</span> <a href="viewtopic.php?pid=1349817#p1349817">2013-11-15 11:38:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p> Also GTX 680 is now my secondary GPU, this might be the problem.</p></div></blockquote></div><p>Have you disabled the emulated vga?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349817">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349819" class="blockpost rowodd"> <h2><span><span class="conr">#767</span> <a href="viewtopic.php?pid=1349819#p1349819">2013-11-15 11:44:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p> Also GTX 680 is now my secondary GPU, this might be the problem.</p></div></blockquote></div><p>Have you disabled the emulated vga?</p></div></blockquote></div><p>Yes, I`ve got -vga none in qemu command line. Without it passthrough doesnt work I think. Here&#039;s how I start qemu:</p><div class="codebox"><pre><code>kalujny@cave-lin:~$ sudo qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu SandyBridge -smp 3,sockets=1,cores=3,threads=1 -vga none -bios /opt/kalujny/kernel/seabios/out/bios.bin -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 -device ahci,bus=pcie.0,id=ahci -drive file=/opt/kalujny/thrash/windows.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk -usbdevice tablet -usb -usbdevice host:046d:c311 -net nic -net user VNC server running on `::1:5900&#039;</code></pre></div> <p class="postedit"><em>Last edited by ilya80 (2013-11-15 11:46:28)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349819">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349858" class="blockpost roweven"> <h2><span><span class="conr">#768</span> <a href="viewtopic.php?pid=1349858#p1349858">2013-11-15 14:20:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p>OK, when VM is running, Nvidia VGA Adapter has NoSnoop-, but Nvidia HDMI Audio has NoSnoop+</p><p>Can that affect the drivers in guest?</p><p>Also, I wonder would saving the card BIOS and then supplying it to qemu make any difference?</p></div></blockquote></div><p>I don&#039;t know if these will make a difference, but should eliminate the question of whether the problem is related to NoSnoop.&#160; This is the current upstream solution.&#160; Kernel:<br /><a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=ec53500fae421e07c5d035918ca454a429732ef4" rel="nofollow">https://git.kernel.org/cgit/linux/kerne … a429732ef4</a><br /><a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=d96eb2c6f480769bff32054e78b964860dae4d56" rel="nofollow">https://git.kernel.org/cgit/linux/kerne … 860dae4d56</a><br /><a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=e0f0bbc527f6e9c0261f1d16b2a0b47612b7f235" rel="nofollow">https://git.kernel.org/cgit/linux/kerne … 7612b7f235</a></p><p>QEMU:<br /><a href="http://lists.nongnu.org/archive/html/qemu-devel/2013-11/msg00090.html" rel="nofollow">http://lists.nongnu.org/archive/html/qe … 00090.html</a><br /><a href="http://lists.nongnu.org/archive/html/qemu-devel/2013-11/msg00091.html" rel="nofollow">http://lists.nongnu.org/archive/html/qe … 00091.html</a></p><p>Remove the previous QEMU nosnoop patch with these fixes.&#160; I doubt saving the card BIOS would make any difference.&#160; If you get seabios output to the monitor and the windows boot animation then it&#039;s working correctly.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349858">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349859" class="blockpost rowodd"> <h2><span><span class="conr">#769</span> <a href="viewtopic.php?pid=1349859#p1349859">2013-11-15 14:22:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks a lot! I`ll try these and see what comes out of it. </p><p>There&#039;s always an option of hardmodding the card into GRID K2</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349859">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349917" class="blockpost roweven"> <h2><span><span class="conr">#770</span> <a href="viewtopic.php?pid=1349917#p1349917">2013-11-15 17:14:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76843">gentoo-nut</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-14</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76843">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello all</p><p>I am very close to a fully working VFIO passthrough.&#160; I had been using the legacy KVM pci-assign in the past but it&#039;s just not reliable enough - having to reboot the host is unnacceptable to me.&#160; nbhs, I believe we know each other from a <em>certain other forum</em>, under a <em>certain other aliases</em> -- thank you for your reply the other day.&#160; I am making good progress.</p><p>I am using all of the software versions and patches linked in the first post.&#160; The windows guest works perfectly, I can stop and restart it many times with the x-vga card and the host thankfully remains quite healthy.&#160; I do not have any error messages in dmesg or the qemu logs, I believe everything is in good shape.</p><p>I&#039;m just having an issue getting the guest to behave with the official AMD GPU drivers installed.&#160; If I don&#039;t install these, again everything is fine but there&#039;s no 3d acceleration and that&#039;s the whole point here.&#160; <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&#160; &#160;</p><p>Originally I was not using the ioh3420 device.&#160; When I installed the guest drivers, windows would always say &quot;code 10&quot; on the GPU -- which I&#039;ve found means that it thinks it is not &quot;properly connected to a root port&quot;, so enter the ioh3420.</p><p>I&#039;ve added the ioh3420 to my command line and send the vga/hdmi device through that controller instead. However now I see the &quot;starting windows&quot; animated logo for about 3 seconds, and it just blacks out and reboots at &quot;launch startup repair&quot;.&#160; It&#039;s possible there is a blue screen here but I am just not seeing it.&#160; If I use send-key KEY_DOWN KEY_ENTER I again get the logo for 3 seconds, rinse repeat.&#160; I would guess this is right at the point where the AMD driver loads and tries to get a hold of the GPU.&#160; Unfortunately I do not see any text or info to tell me why it&#039;s restarting....</p><p>Any ideas what I&#039;m running into here?&#160; &#160;Unfortunately I am at work now and cannot share any logs/commands used, but I can later.&#160; I guess I could try re-installing the guest with the ioh3420 present from the get-go, but I&#039;m wondering if anybody has any thoughts on what could be going on and/or how to debug it.&#160; </p><p>ASUS Z9PE-D8WS<br />2x E5-2687w<br />EVGA Nvidia GTX570&#160; used for host<br />ASUS AMD 7870HD passed to guest<br />IOMMU group 32:&#160; &#160;0000:82:00.0&#160; pci bridge of some sort, { 0000:83:00.0, 0000:83:00.1, 0000:83:00.2 } nec usb controller passed to guest (works perfect, cannot pass the 82)<br />IOMMU group 33:&#160; &#160;0000:84:00.0&#160; pci bridge of some sort, { 0000:85:00.0, 0000:85:00.1, 0000:85:00.2 } second nec usb controller passed to guest (works perfect, cannot pass the 84)<br />IOMMU group 34:&#160; { 0000:86:00.0, 0000:86:00.1 } ASUS 7870, passed to guest - almost works right.</p><p>I am using aw&#039;s scripts on the previous page to bind those three groups to vfio on startup, works great.</p><p>Interestingly, nbhs pointed me towards patching the nvidia-drivers for a VGA_ARB fix.&#160; I&#039;m not sure if I still need this or not.&#160; When I apply the patch, the windows installer never gets past the starting windows animated logo - when it tries to flip the display mode for the &quot;blue install now screen&quot;, it never gets there.&#160; When I don&#039;t apply the patch, everything works - but I have seen ARTIFACTS on my screen for the host occasionally, but not recently since getting everything set right.&#160; Perhaps nvidia is the problem with the guest.&#160; </p><p>Another question -- if you were to do this from scratch, which cards would you use for the host, and which for the guest?&#160; I have too much time and money invested in this for it to not work, I don&#039;t mind exchanging cards.&#160; I do have an AST onboard video, I could go with a 3 way setup of onboard for host, AMD for guest1, NVIDIA for guest2.</p><p>Thanks for any input!!</p> <p class="postedit"><em>Last edited by gentoo-nut (2013-11-15 17:22:38)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349917">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349922" class="blockpost rowodd"> <h2><span><span class="conr">#771</span> <a href="viewtopic.php?pid=1349922#p1349922">2013-11-15 17:21:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>gentoo-nut wrote:</cite><blockquote><div><p>I guess I could try reinstalling the guest with the ioh3420 present from the get-go</p></div></blockquote></div><p>I guess this is a good idea.</p><p>Also in the first post in troubleshooting area there were portions about running host with dedicated cards. Have you gone through that?</p><p>Also AST onboard video may be the trouble. I have this weird idea of assigning it to pci-stub in kernel boot options.</p> <p class="postedit"><em>Last edited by ilya80 (2013-11-15 17:24:43)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349922">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349932" class="blockpost roweven"> <h2><span><span class="conr">#772</span> <a href="viewtopic.php?pid=1349932#p1349932">2013-11-15 17:41:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76843">gentoo-nut</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-14</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76843">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>^ The AST card is currently disabled in the bios and the VGA backplate is unplugged from the board - so that is all well out of the picture for the time being.&#160; But yes, if I did elect to add it back in, I would put it in the pci-stub-ids listing in grub.conf.&#160; I may eventually go to that 3 way model and use the host as a &quot;pure host&quot; - not a desktop at all.&#160; If I could find out the ideal cards to pass to a linux and windows guests I may go that way in a month or so.&#160; For now I just want to get my golf simulator software rolling with existing hardware...&#160; <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I will review the first post again (has to be the 5th time now... <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> ) and I will certainly wipe the guest install and try again with the ioh3420 for starters when I get home. </p><p>Thank you for the quick reply!!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349932">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349938" class="blockpost rowodd"> <h2><span><span class="conr">#773</span> <a href="viewtopic.php?pid=1349938#p1349938">2013-11-15 18:00:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>gentoo-nut wrote:</cite><blockquote><div><p>Hello all</p><p>I am very close to a fully working VFIO passthrough.&#160; I had been using the legacy KVM pci-assign in the past but it&#039;s just not reliable enough - having to reboot the host is unnacceptable to me.&#160; nbhs, I believe we know each other from a <em>certain other forum</em>, under a <em>certain other aliases</em> -- thank you for your reply the other day.&#160; I am making good progress.</p><p>I am using all of the software versions and patches linked in the first post.&#160; The windows guest works perfectly, I can stop and restart it many times with the x-vga card and the host thankfully remains quite healthy.&#160; I do not have any error messages in dmesg or the qemu logs, I believe everything is in good shape.</p><p>I&#039;m just having an issue getting the guest to behave with the official AMD GPU drivers installed.&#160; If I don&#039;t install these, again everything is fine but there&#039;s no 3d acceleration and that&#039;s the whole point here.&#160; <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&#160; &#160;</p><p>Originally I was not using the ioh3420 device.&#160; When I installed the guest drivers, windows would always say &quot;code 10&quot; on the GPU -- which I&#039;ve found means that it thinks it is not &quot;properly connected to a root port&quot;, so enter the ioh3420.</p><p>I&#039;ve added the ioh3420 to my command line and send the vga/hdmi device through that controller instead. However now I see the &quot;starting windows&quot; animated logo for about 3 seconds, and it just blacks out and reboots at &quot;launch startup repair&quot;.&#160; It&#039;s possible there is a blue screen here but I am just not seeing it.&#160; If I use send-key KEY_DOWN KEY_ENTER I again get the logo for 3 seconds, rinse repeat.&#160; I would guess this is right at the point where the AMD driver loads and tries to get a hold of the GPU.&#160; Unfortunately I do not see any text or info to tell me why it&#039;s restarting....</p><p>Any ideas what I&#039;m running into here?&#160; &#160;Unfortunately I am at work now and cannot share any logs/commands used, but I can later.&#160; I guess I could try re-installing the guest with the ioh3420 present from the get-go, but I&#039;m wondering if anybody has any thoughts on what could be going on and/or how to debug it.</p></div></blockquote></div><p>Windows doesn&#039;t much like hardware changes, so it&#039;s worth a shot to reinstall.&#160; Others have noted success with Radeon cards when they attach the audio device to bus=pcie.0 rather than as function 1 of the GPU behind the root port.</p><div class="quotebox"><cite>gentoo-nut wrote:</cite><blockquote><div><p>ASUS Z9PE-D8WS<br />2x E5-2687w<br />EVGA Nvidia GTX570&#160; used for host<br />ASUS AMD 7870HD passed to guest<br />IOMMU group 32:&#160; &#160;0000:82:00.0&#160; pci bridge of some sort, { 0000:83:00.0, 0000:83:00.1, 0000:83:00.2 } nec usb controller passed to guest (works perfect, cannot pass the 82)<br />IOMMU group 33:&#160; &#160;0000:84:00.0&#160; pci bridge of some sort, { 0000:85:00.0, 0000:85:00.1, 0000:85:00.2 } second nec usb controller passed to guest (works perfect, cannot pass the 84)<br />IOMMU group 34:&#160; { 0000:86:00.0, 0000:86:00.1 } ASUS 7870, passed to guest - almost works right.</p><p>I am using aw&#039;s scripts on the previous page to bind those three groups to vfio on startup, works great.</p><p>Interestingly, nbhs pointed me towards patching the nvidia-drivers for a VGA_ARB fix.&#160; I&#039;m not sure if I still need this or not.&#160; When I apply the patch, the windows installer never gets past the starting windows animated logo - when it tries to flip the display mode for the &quot;blue install now screen&quot;, it never gets there.&#160; When I don&#039;t apply the patch, everything works - but I have seen ARTIFACTS on my screen for the host occasionally, but not recently since getting everything set right.&#160; Perhaps nvidia is the problem with the guest.</p></div></blockquote></div><p>The nvidia VGA arbiter fix is required if you intend to use the nvidia driver in the host.&#160; Without this the host driver will lock the VGA resources and never release them.&#160; If you were experiencing this problem the guest would be blocked as soon as it tries to do a VGA access, so it sounds like you must not be running nvidia in the host.</p><div class="quotebox"><cite>gentoo-nut wrote:</cite><blockquote><div><p>Another question -- if you were to do this from scratch, which cards would you use for the host, and which for the guest?&#160; I have too much time and money invested in this for it to not work, I don&#039;t mind exchanging cards.&#160; I do have an AST onboard video, I could go with a 3 way setup of onboard for host, AMD for guest1, NVIDIA for guest2.</p><p>Thanks for any input!!</p></div></blockquote></div><p>Surprisingly I&#039;d say we have a bit better success assigning Nvidia cards than we do Radeon cards.&#160; Possibly due to the better reverse engineered hardware documentation through the nouveau project.&#160; So, you might have better luck using the Radeon for the host and assigning the Nvidia.&#160; Your 3-headed approach may work, but it depends on what the graphics is onboard and how well it participates in VGA arbitration.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349938">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349960" class="blockpost roweven"> <h2><span><span class="conr">#774</span> <a href="viewtopic.php?pid=1349960#p1349960">2013-11-15 18:45:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76843">gentoo-nut</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-14</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76843">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Windows doesn&#039;t much like hardware changes, so it&#039;s worth a shot to reinstall.&#160; Others have noted success with Radeon cards when they attach the audio device to bus=pcie.0 rather than as function 1 of the GPU behind the root port.</p><p>The nvidia VGA arbiter fix is required if you intend to use the nvidia driver in the host.&#160; Without this the host driver will lock the VGA resources and never release them.&#160; If you were experiencing this problem the guest would be blocked as soon as it tries to do a VGA access, so it sounds like you must not be running nvidia in the host.</p><p>Surprisingly I&#039;d say we have a bit better success assigning Nvidia cards than we do Radeon cards.&#160; Possibly due to the better reverse engineered hardware documentation through the nouveau project.&#160; So, you might have better luck using the Radeon for the host and assigning the Nvidia.&#160; Your 3-headed approach may work, but it depends on what the graphics is onboard and how well it participates in VGA arbitration.</p></div></blockquote></div><p>Thanks, if the reinstall doesn&#039;t work I will also try moving the hdmi audio device over.</p><p>I AM using the nvidia-drivers package with the nvidia module loaded and working.&#160; I am using version 331.20 from gentoo portage ~amd64.&#160; Without the patch it <em>seems</em> to be fine.&#160; With the patch I can&#039;t get through the installer.&#160; &#160;Perhaps they just fixed the problem in this version?&#160; I cannot get a version prior to 331.20 to compile against kernel 3.12.&#160; (Without at least hacking the build to say - &lt;=kernel-3.11&#160; + &lt;=kernel-3.12&#160; -- or probably updating the old code to be compatible with a changed kernel API, which I&#039;m not going to attempt).&#160; Which version of the driver are you using that requires the patch? The patch does still apply cleanly to 331.20.</p><p>If I still run into issues, I will try switching the Nvidia / AMD cards in the slots and give that a shot as you suggested.&#160; Either way is fine with me.&#160; I also have a second 7870 sitting here from when I was experimenting with Xen last year, so I could try that with nvidia totally out of the picture.&#160; However when I tried that last year, the fglrx driver would ALWAYS forcefully claim both cards despite pci-stub already claiming one, so I was never able to try passing one and keeping one.&#160; I don&#039;t remember what happened when trying the radeon module, I think that was about the point where I got fed up with Xen in general and did something else.&#160; <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&#160; I do remember the nvidia card was a big no go for dom0 and domU.</p><p>Let me ask this very simply:&#160; if anyone has this working perfectly - what exact model card do you have in the host, what driver, and which for the guest?&#160; I am totally fine with ebay-ing all of my graphics cards and starting fresh with a known good setup.</p><p>Thanks again for the replies!!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349960">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1349984" class="blockpost rowodd"> <h2><span><span class="conr">#775</span> <a href="viewtopic.php?pid=1349984#p1349984">2013-11-15 19:41:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I could only wish someone at NVidia with access to drivers development environment took sometime to repro the code 43 stuff to check whats actually going wrong. Dreams, dreams...</p><p>Wonder if installing linux guest with nouveau drivers &amp; debug enabled kernel would do us any good. I think I could pull that off.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1349984">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=30">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=29">29</a> <a href="viewtopic.php?id=162768&amp;p=30">30</a> <strong>31</strong> <a href="viewtopic.php?id=162768&amp;p=32">32</a> <a href="viewtopic.php?id=162768&amp;p=33">33</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=32">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
