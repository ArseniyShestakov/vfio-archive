<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 6) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=6" title="Page 6" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=5" title="Page 5" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=7" title="Page 7" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=5">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=4">4</a> <a href="viewtopic.php?id=162768&amp;p=5">5</a> <strong>6</strong> <a href="viewtopic.php?id=162768&amp;p=7">7</a> <a href="viewtopic.php?id=162768&amp;p=8">8</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=7">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1280259" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#126</span> <a href="viewtopic.php?pid=1280259#p1280259">2013-05-30 18:54:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Diggo wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>The redhat dev recommends using q35 chipset and the gpu behind a pcie root port, i dont use hdmi, so i have no experience with it, i havent experienced stutter in flash but i did experience some in games, i solved this by disabling nested page tables and tweaking the kernel config (see my second post on first page).</p><p>Xen 3dmark vs kvm is about the same with the above tweaks.</p></div></blockquote></div><p>Okay, i´ll try out Q35 when i´ll have more time. I was going to try the NPT Flag when i first found this thread and today i had some spare time to test ist. Just to give an Impression how much this did improve my results (maybe for some other thread readers):</p><p>Unigine Heaven Benchmark 4.0:<br />Settings were Direct3D11, 1920x1080 fullscreen, Quality low, Tesselation disabled:</p><p>1. Run (with running, but stuttering config)<br />FPS: 9.5<br />Core: 239<br />Min FPS: 4.9<br />Max FPS: 16.5<br />Impression: Overall Stuttering, stuttering in sound too</p><p>2. Run, now NPT disabled:<br />FPS: 39.2<br />Score: 988<br />Min FPS: 7.8<br />Max FPS: 83.0<br />Impression: Seems smooth, but sometimes frames seem to get into a jam: then it looks like someone is playing a movie in fast forward for some microseconds.</p><p>3. Run, NPT disabled and now Governor set to performance:<br />FPS: 62.8<br />Score: 1582<br />Min FPS: 8.7<br />Max FPS: 103.8<br />Impression: Really smooth, good FPS <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Still running on stock kernel and so on, but still i am impressed by these improvements. Thanks for the good advices with nested page tables and the governor <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Sadly flash is still not running good. Looks better, but still stuttering. At least the sound seems to play continously.</p></div></blockquote></div><p>Try using my kernel config and disabling dynticks on your bootloader (nohz=off)&#160; + q35 and gpu behind pcie root port, i got a massive boost using that.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1280259">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1280760" class="blockpost roweven"> <h2><span><span class="conr">#127</span> <a href="viewtopic.php?pid=1280760#p1280760">2013-06-01 00:46:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71361">apoapo</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-16</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71361">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>I think this bug is related to this: <a href="https://bugzilla.kernel.org/show_bug.cgi?id=44881" rel="nofollow">https://bugzilla.kernel.org/show_bug.cgi?id=44881</a></p><p>Here&#039;s the solution: <a href="http://www.spinics.net/lists/linux-pci/msg22136.html" rel="nofollow">http://www.spinics.net/lists/linux-pci/msg22136.html</a></p></div></blockquote></div><p>Hi. tested the patches.<br />The warning output with the trace is gone, but I have not seen any changed behavior <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" />.<br />Edit: But I have only tested with intel GPU as host.</p><p>Did also a benchmark test with pci-assign and no changes to my kvm-start:</p><div class="codebox"><pre><code>qemu-system-x86_64 --enable-kvm -m 6G -cpu host \ -smp 4,sockets=1,cores=4,threads=1 \ -device pci-assign,host=01:00.0 \ -device pci-assign,host=01:00.1 \ -drive file=/var/lib/libvirt/images/win-test.img \ -hdb /dev/sda3</code></pre></div><p>Unigine Heaven Benchmark 4.0. settings like diggo:<br />Settings were Direct3D11, 1920x1080 fullscreen, Quality low, Tesselation disabled:<br />Hardware is a AMD HD 7950 </p><p>FPS: 117,5<br />Score: 2959<br />Min FPS: 9,2<br />Max FPS: 194,3</p> <p class="postedit"><em>Last edited by apoapo (2013-06-01 01:10:18)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1280760">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1280774" class="blockpost rowodd"> <h2><span><span class="conr">#128</span> <a href="viewtopic.php?pid=1280774#p1280774">2013-06-01 02:11:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apoapo wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>I think this bug is related to this: <a href="https://bugzilla.kernel.org/show_bug.cgi?id=44881" rel="nofollow">https://bugzilla.kernel.org/show_bug.cgi?id=44881</a></p><p>Here&#039;s the solution: <a href="http://www.spinics.net/lists/linux-pci/msg22136.html" rel="nofollow">http://www.spinics.net/lists/linux-pci/msg22136.html</a></p></div></blockquote></div><p>Hi. tested the patches.<br />The warning output with the trace is gone, but I have not seen any changed behavior <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" />.<br />Edit: But I have only tested with intel GPU as host.</p><p>Did also a benchmark test with pci-assign and no changes to my kvm-start:</p><div class="codebox"><pre><code>qemu-system-x86_64 --enable-kvm -m 6G -cpu host \ -smp 4,sockets=1,cores=4,threads=1 \ -device pci-assign,host=01:00.0 \ -device pci-assign,host=01:00.1 \ -drive file=/var/lib/libvirt/images/win-test.img \ -hdb /dev/sda3</code></pre></div><p>Unigine Heaven Benchmark 4.0. settings like diggo:<br />Settings were Direct3D11, 1920x1080 fullscreen, Quality low, Tesselation disabled:<br />Hardware is a AMD HD 7950 </p><p>FPS: 117,5<br />Score: 2959<br />Min FPS: 9,2<br />Max FPS: 194,3</p></div></blockquote></div><p>Too bad it didnt work <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> im gonna try unigine and see what i get.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1280774">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1281169" class="blockpost roweven"> <h2><span><span class="conr">#129</span> <a href="viewtopic.php?pid=1281169#p1281169">2013-06-01 22:50:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well i ran the benchmark</p><p>Unigine 4.0 on radeon 6950</p><p>resolution 1980x1080</p><p>Low settings &amp; tessellation off: ~1680<br />Extreme settings &amp; tessellation normal: ~660</p> <p class="postedit"><em>Last edited by nbhs (2013-06-01 22:51:57)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1281169">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1281291" class="blockpost rowodd"> <h2><span><span class="conr">#130</span> <a href="viewtopic.php?pid=1281291#p1281291">2013-06-02 10:00:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apocolypse600 wrote:</cite><blockquote><div><p>Firstly, cheers for the tutorial. That must have taken awhile to write, and the effort is appreciated.</p><p>I&#039;ve been looking into setting up a VGA passthrough setup under Xen for my next build for awhile now. I&#039;m trying to work out what the advantages of this setup are over a setup under Xen. From what I&#039;ve seen thrown around in different places, the main advantages are:</p><ul><li><p>a less hacky setup for the passthrough, requiring less patches (once all this stuff gets released)</p></li><li><p>better support for NVIDIA cards? I&#039;ve seen a few people say this, but nothing official to confirm it.</p></li><li><p>KVM receives more support than Xen, mainly due to Red Hat</p></li><li><p>Xen has a (relatively small) impact on the speed of the host, whereas KVM has no impact</p></li><li><p>not having to mess around with xl vs xm under Xen</p></li></ul><p>Am I missing anything? I&#039;ve seen a lot of people getting excited about using KVM over Xen for VGA passthrough, but not many people saying why they are so excited.</p></div></blockquote></div><p>I&#039;m doing VGA passthrough on Xen 4.1 (Linux Mint 14 / Ubuntu 12.10) and here some observations:</p><ul><li><p>Works well with a number of AMD (ATI) as well as some Nvidia Quadro video cards doing secondary passthrough - no patches, no nothing!</p></li><li><p>I&#039;ve been using standard Xen packages from the Ubuntu / Linux Mint repos</p></li><li><p>Xen doesn&#039;t play well with Nvidia cards under dom0 - only Nouveau driver, no proprietary drivers (there may be a work-around, but I haven&#039;t found/tested it yet)</p></li><li><p>The latest Xen versions in the Ubuntu 12.10 and 13 repos break PCI passthrough - &quot;force version&quot; provides a work-around</p></li><li><p>Except for some expensive Quadro etc. cards, VGA passthrough using Nvidia cards usually require patches</p></li><li><p>I&#039;ve seen reports that AMD CPUs may have issues with CPU power management/frequency settings under Xen - this may already be solved</p></li><li><p>Xen and specifically VGA passthrough under Xen is better documented (KVM is quite new to VGA passthrough)</p></li><li><p>Regarding performance, I wouldn&#039;t pay attention to the Phoronix benchmarks (they are unclear at best and inaccurate at worst) - I believe the OP gave some comparisons between KVM and Xen. My experiences with Xen are very good with regard to performance.</p></li><li><p>I&#039;m using xm and will wait until xl provides the features I&#039;m using now (specifically pci reattach)</p></li></ul><p>To sum it up, with Xen you can get a working system with VGA passthrough using standard (unpatched) packages from a number of distros, as long as you got the right hardware. Using KVM, you will have to patch and built your own system, often using experimental code. The benefit of KVM is that it supports more Nvidia cards and that it might be less tricky with video cards/drivers in general.</p><p>By the way, this (nbhs) how-to is probably the most useful guide I found on KVM VGA passthrough so far.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1281291">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1282272" class="blockpost roweven"> <h2><span><span class="conr">#131</span> <a href="viewtopic.php?pid=1282272#p1282272">2013-06-04 04:05:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>To sum it up, with Xen you can get a working system with VGA passthrough using standard (unpatched) packages from a number of distros, as long as you got the right hardware. Using KVM, you will have to patch and built your own system, often using experimental code. The benefit of KVM is that it supports more Nvidia cards and that it might be less tricky with video cards/drivers in general.</p><p>By the way, this (nbhs) how-to is probably the most useful guide I found on KVM VGA passthrough so far.</p></div></blockquote></div><p>Actually vanilla kvm/qemu has supported, for a long time, secondary vga passthrough of quadro and radeon cards, the only patching needed atm ( for primary passthrough using vfio ) is if you&#039;re using radeon cards to allow the card to properly reset, XEN also has this problem but unfortunately the only solution is to eject the card before rebooting/shutting down the guest, which can also be applied to kvm/qemu without patching</p> <p class="postedit"><em>Last edited by nbhs (2013-06-04 04:12:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1282272">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1283023" class="blockpost rowodd"> <h2><span><span class="conr">#132</span> <a href="viewtopic.php?pid=1283023#p1283023">2013-06-05 02:39:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>To sum it up, with Xen you can get a working system with VGA passthrough using standard (unpatched) packages from a number of distros, as long as you got the right hardware. Using KVM, you will have to patch and built your own system, often using experimental code. The benefit of KVM is that it supports more Nvidia cards and that it might be less tricky with video cards/drivers in general.</p><p>By the way, this (nbhs) how-to is probably the most useful guide I found on KVM VGA passthrough so far.</p></div></blockquote></div><p>Actually vanilla kvm/qemu has supported, for a long time, secondary vga passthrough of quadro and radeon cards, the only patching needed atm ( for primary passthrough using vfio ) is if you&#039;re using radeon cards to allow the card to properly reset, XEN also has this problem but unfortunately the only solution is to eject the card before rebooting/shutting down the guest, which can also be applied to kvm/qemu without patching</p></div></blockquote></div><p>Thanks! I&#039;m learning every day.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1283023">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1284881" class="blockpost roweven"> <h2><span><span class="conr">#133</span> <a href="viewtopic.php?pid=1284881#p1284881">2013-06-08 06:12:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=24068">dalingrin</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2009-03-18</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=24068">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>To sum it up, with Xen you can get a working system with VGA passthrough using standard (unpatched) packages from a number of distros, as long as you got the right hardware. Using KVM, you will have to patch and built your own system, often using experimental code. The benefit of KVM is that it supports more Nvidia cards and that it might be less tricky with video cards/drivers in general.</p><p>By the way, this (nbhs) how-to is probably the most useful guide I found on KVM VGA passthrough so far.</p></div></blockquote></div><p>Actually vanilla kvm/qemu has supported, for a long time, secondary vga passthrough of quadro and radeon cards, the only patching needed atm ( for primary passthrough using vfio ) is if you&#039;re using radeon cards to allow the card to properly reset, XEN also has this problem but unfortunately the only solution is to eject the card before rebooting/shutting down the guest, which can also be applied to kvm/qemu without patching</p></div></blockquote></div><p>I can confirm that KVM without vfio has VGA reset issues with Radeon on cards. However, Xen ~4.2 does not have issues with reset on my Radeon 7970. I used Xen VGA pass through for the better part of a year as my daily driver for games without issue.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1284881">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1284902" class="blockpost rowodd"> <h2><span><span class="conr">#134</span> <a href="viewtopic.php?pid=1284902#p1284902">2013-06-08 07:56:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>dalingrin wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>To sum it up, with Xen you can get a working system with VGA passthrough using standard (unpatched) packages from a number of distros, as long as you got the right hardware. Using KVM, you will have to patch and built your own system, often using experimental code. The benefit of KVM is that it supports more Nvidia cards and that it might be less tricky with video cards/drivers in general.</p><p>By the way, this (nbhs) how-to is probably the most useful guide I found on KVM VGA passthrough so far.</p></div></blockquote></div><p>Actually vanilla kvm/qemu has supported, for a long time, secondary vga passthrough of quadro and radeon cards, the only patching needed atm ( for primary passthrough using vfio ) is if you&#039;re using radeon cards to allow the card to properly reset, XEN also has this problem but unfortunately the only solution is to eject the card before rebooting/shutting down the guest, which can also be applied to kvm/qemu without patching</p></div></blockquote></div><p>I can confirm that KVM without vfio has VGA reset issues with Radeon on cards. However, Xen ~4.2 does not have issues with reset on my Radeon 7970. I used Xen VGA pass through for the better part of a year as my daily driver for games without issue.</p></div></blockquote></div><p>Using the xl or the xm toolkit?</p><p>I didnt have this issue on xen using the xm toolkit but i experienced performance degradation using xl</p> <p class="postedit"><em>Last edited by nbhs (2013-06-08 08:06:27)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1284902">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285201" class="blockpost roweven"> <h2><span><span class="conr">#135</span> <a href="viewtopic.php?pid=1285201#p1285201">2013-06-08 21:11:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=64462">mastersplinter777</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-10-09</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=64462">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi! I&#039;m also interested in passing thru my VGA to VM. But I get an error 12 (Not enough system resources) and can&#039;t solve this problem. My HW is: ASRock Z77 Extreme 6 (BIOS 2.70), Intel Core i5 3470, GPUS: Intel HD 2500 (host), AMD Sapphire Radeon 6750 (68bf), ATI Radeon 4850 (9442).</p><p>I use kernel version 3.9.4 with applied kvm polarity patch (to properly run OSX) and</p><div class="codebox"><pre><code> CONFIG_VFIO_IOMMU_TYPE1=m CONFIG_VFIO=m CONFIG_VFIO_PCI=m CONFIG_VFIO_PCI_VGA=y</code></pre></div><p>(i tried to do everything exactly as written in this article with the same result)</p><div class="codebox"><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet ipv6.disable=1 intel_iommu=on iommu=group_mf pci-stub.ids=1002:68bf,1002:9442 vfio_iommu_type1.allow_unsafe_interrupts=1 kvm_intel.emulate_invalid_guest_state=0&quot;</code></pre></div><p>mkinitcpio.conf MODULES:</p><div class="codebox"><pre><code>MODULES=&quot;pci-stub kvm kvm-intel i915 tun bridge fuse&quot;</code></pre></div><p>QEMU Win7 conf:</p><div class="codebox"><pre><code>sudo qemu-system-x86_64 --enable-kvm -M q35 -m 2048 -cpu host \ -boot menu=on \ -uuid 91848507-02ce-7d89-1ed4-40039265bbf9 \ -smp 2,sockets=1,cores=2,threads=1 \ -vga qxl \ -spice port=5902,disable-ticketing \ -device virtio-serial \ -chardev spicevmc,id=vdagent,name=vdagent \ -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 \ -readconfig /etc/qemu/ich9-ehci-uhci.cfg \ -chardev spicevmc,name=usbredir,id=usbredirchardev1 \ -device usb-redir,chardev=usbredirchardev1,id=usbredirdev1 \ -chardev spicevmc,name=usbredir,id=usbredirchardev2 \ -device usb-redir,chardev=usbredirchardev2,id=usbredirdev2 \ -chardev spicevmc,name=usbredir,id=usbredirchardev3 \ -device usb-redir,chardev=usbredirchardev3,id=usbredirdev3 \ -device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 \ -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \ -net nic,macaddr=00:00:00:0a:5b:2c,model=virtio \ -net user \ -device ahci,bus=pcie.0,id=ahci \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=01.0,multifunction=on,x-vga=on \ -drive file=&#039;/home/splinter/Qemu/Win7/win7.img&#039;,if=virtio</code></pre></div><p>(also I tried with -bios &quot;/path/to/patched-bios/&quot; and -vga none options - got &quot;VM has no graphics card&quot; message without any output to the secondary display)</p><div class="codebox"><pre><code>dmesg | grep IOMMU [ 0.000000] Intel-IOMMU: enabled [ 0.018497] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020e60262 ecap f0101a [ 0.018502] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap c9008020660262 ecap f0105a [ 0.018572] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.326767] IOMMU 0 0xfed90000: using Queued invalidation [ 0.326768] IOMMU 1 0xfed91000: using Queued invalidation [ 0.326770] IOMMU: Setting RMRR: [ 0.326779] IOMMU: Setting identity map for device 0000:00:02.0 [0xaf800000 - 0xbf9fffff] [ 0.327898] IOMMU: Setting identity map for device 0000:00:1d.0 [0xad6f5000 - 0xad721fff] [ 0.327915] IOMMU: Setting identity map for device 0000:00:1a.0 [0xad6f5000 - 0xad721fff] [ 0.327929] IOMMU: Setting identity map for device 0000:00:14.0 [0xad6f5000 - 0xad721fff] [ 0.327938] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.327944] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff] dmesg | grep vfio [ 16.812467] vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) dmesg | grep DMAR [ 0.000000] ACPI: DMAR 00000000adafee70 000B8 (v01 INTEL SNB 00000001 INTL 00000001) [ 0.326743] DMAR: No ATSR found [ 0.765236] dmar: DMAR:[DMA Read] Request device [0c:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear</code></pre></div><p>Thx for your help! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by mastersplinter777 (2013-06-08 21:47:11)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285201">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285355" class="blockpost rowodd"> <h2><span><span class="conr">#136</span> <a href="viewtopic.php?pid=1285355#p1285355">2013-06-09 05:03:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mastersplinter777 wrote:</cite><blockquote><div><p>Hi! I&#039;m also interested in passing thru my VGA to VM. But I get an error 12 (Not enough system resources) and can&#039;t solve this problem. My HW is: ASRock Z77 Extreme 6 (BIOS 2.70), Intel Core i5 3470, GPUS: Intel HD 2500 (host), AMD Sapphire Radeon 6750 (68bf), ATI Radeon 4850 (9442).</p><p>I use kernel version 3.9.4 with applied kvm polarity patch (to properly run OSX) and</p><div class="codebox"><pre><code> CONFIG_VFIO_IOMMU_TYPE1=m CONFIG_VFIO=m CONFIG_VFIO_PCI=m CONFIG_VFIO_PCI_VGA=y</code></pre></div><p>(i tried to do everything exactly as written in this article with the same result)</p><div class="codebox"><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet ipv6.disable=1 intel_iommu=on iommu=group_mf pci-stub.ids=1002:68bf,1002:9442 vfio_iommu_type1.allow_unsafe_interrupts=1 kvm_intel.emulate_invalid_guest_state=0&quot;</code></pre></div><p>mkinitcpio.conf MODULES:</p><div class="codebox"><pre><code>MODULES=&quot;pci-stub kvm kvm-intel i915 tun bridge fuse&quot;</code></pre></div><p>QEMU Win7 conf:</p><div class="codebox"><pre><code>sudo qemu-system-x86_64 --enable-kvm -M q35 -m 2048 -cpu host \ -boot menu=on \ -uuid 91848507-02ce-7d89-1ed4-40039265bbf9 \ -smp 2,sockets=1,cores=2,threads=1 \ -vga qxl \ -spice port=5902,disable-ticketing \ -device virtio-serial \ -chardev spicevmc,id=vdagent,name=vdagent \ -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 \ -readconfig /etc/qemu/ich9-ehci-uhci.cfg \ -chardev spicevmc,name=usbredir,id=usbredirchardev1 \ -device usb-redir,chardev=usbredirchardev1,id=usbredirdev1 \ -chardev spicevmc,name=usbredir,id=usbredirchardev2 \ -device usb-redir,chardev=usbredirchardev2,id=usbredirdev2 \ -chardev spicevmc,name=usbredir,id=usbredirchardev3 \ -device usb-redir,chardev=usbredirchardev3,id=usbredirdev3 \ -device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 \ -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \ -net nic,macaddr=00:00:00:0a:5b:2c,model=virtio \ -net user \ -device ahci,bus=pcie.0,id=ahci \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=01.0,multifunction=on,x-vga=on \ -drive file=&#039;/home/splinter/Qemu/Win7/win7.img&#039;,if=virtio</code></pre></div><p>(also I tried with -bios &quot;/path/to/patched-bios/&quot; and -vga none options - got &quot;VM has no graphics card&quot; message without any output to the secondary display)</p><div class="codebox"><pre><code>dmesg | grep IOMMU [ 0.000000] Intel-IOMMU: enabled [ 0.018497] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020e60262 ecap f0101a [ 0.018502] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap c9008020660262 ecap f0105a [ 0.018572] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.326767] IOMMU 0 0xfed90000: using Queued invalidation [ 0.326768] IOMMU 1 0xfed91000: using Queued invalidation [ 0.326770] IOMMU: Setting RMRR: [ 0.326779] IOMMU: Setting identity map for device 0000:00:02.0 [0xaf800000 - 0xbf9fffff] [ 0.327898] IOMMU: Setting identity map for device 0000:00:1d.0 [0xad6f5000 - 0xad721fff] [ 0.327915] IOMMU: Setting identity map for device 0000:00:1a.0 [0xad6f5000 - 0xad721fff] [ 0.327929] IOMMU: Setting identity map for device 0000:00:14.0 [0xad6f5000 - 0xad721fff] [ 0.327938] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.327944] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff] dmesg | grep vfio [ 16.812467] vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) dmesg | grep DMAR [ 0.000000] ACPI: DMAR 00000000adafee70 000B8 (v01 INTEL SNB 00000001 INTL 00000001) [ 0.326743] DMAR: No ATSR found [ 0.765236] dmar: DMAR:[DMA Read] Request device [0c:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear</code></pre></div><p>Thx for your help! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>A lot of people have reported problems using the intel igp as the host boot device you might want try to disable it and use one of your radeon cards for the host</p> <p class="postedit"><em>Last edited by nbhs (2013-06-09 05:06:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285355">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285434" class="blockpost roweven"> <h2><span><span class="conr">#137</span> <a href="viewtopic.php?pid=1285434#p1285434">2013-06-09 10:51:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72148">thelatios</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-06-09</span></dd> <dd><span>Posts: 2</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello,</p><p>Thanks a lot for your guide, it helped a lot!</p><p>Even though VGA passthrough with VFIO is working (I got seabios output on my passthroughed card), a detail is bothering me.</p><p>I found this in my dmesg output:</p><div class="codebox"><pre><code>[ 0.277175] [Firmware Bug]: AMD-Vi: IOAPIC[9] not in IVRS table [ 0.277207] [Firmware Bug]: AMD-Vi: IOAPIC[10] not in IVRS table [ 0.277237] [Firmware Bug]: AMD-Vi: No southbridge IOAPIC found in IVRS table [ 0.277268] AMD-Vi: Disabling interrupt remapping due to BIOS Bug(s)</code></pre></div><p>I guess I have to add something in my kernel command line like you did (ivrs_ioapic[9]=...), but I&#039;m kind of confused on how you got the right values to put there. Could you give me a hint?</p><p>My motherboard is a Asus Sabertooth 990FX R2.0 with a AMD Athlon FX 8350 CPU.</p><p>Thanks again for the great guide!</p> <p class="postedit"><em>Last edited by thelatios (2013-06-09 10:52:28)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285434">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285463" class="blockpost rowodd"> <h2><span><span class="conr">#138</span> <a href="viewtopic.php?pid=1285463#p1285463">2013-06-09 11:39:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>thelatios wrote:</cite><blockquote><div><p>Hello,</p><p>Thanks a lot for your guide, it helped a lot!</p><p>Even though VGA passthrough with VFIO is working (I got seabios output on my passthroughed card), a detail is bothering me.</p><p>I found this in my dmesg output:</p><div class="codebox"><pre><code>[ 0.277175] [Firmware Bug]: AMD-Vi: IOAPIC[9] not in IVRS table [ 0.277207] [Firmware Bug]: AMD-Vi: IOAPIC[10] not in IVRS table [ 0.277237] [Firmware Bug]: AMD-Vi: No southbridge IOAPIC found in IVRS table [ 0.277268] AMD-Vi: Disabling interrupt remapping due to BIOS Bug(s)</code></pre></div><p>I guess I have to add something in my kernel command line like you did (ivrs_ioapic[9]=...), but I&#039;m kind of confused on how you got the right values to put there. Could you give me a hint?</p><p>My motherboard is a Asus Sabertooth 990FX R2.0 with a AMD Athlon FX 8350 CPU.</p><p>Thanks again for the great guide!</p></div></blockquote></div><p>You&#039;ll need to add &quot;ivrs_ioapic[9]=00:14.0 ivrs_ioapic[10]=00:00.1&quot; to your grub configuration, also you&#039;ll need either kernel 3.10 or 3.9 with this patch&#160; <a href="http://www.filesend.net/download.php?f=1235d9b1277c65672c3d01a6933f9356" rel="nofollow">amd_iommu_fixes.patch.tar.gz</a>, this will enable interrupt remapping on your board so you wont need this line anymore: </p><div class="codebox"><pre><code>vfio_iommu_type1.allow_unsafe_interrupts=1</code></pre></div><p>Would you mind sharing which card you passed thru&#039;?</p> <p class="postedit"><em>Last edited by nbhs (2013-06-09 11:40:24)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285463">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285492" class="blockpost roweven"> <h2><span><span class="conr">#139</span> <a href="viewtopic.php?pid=1285492#p1285492">2013-06-09 12:44:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72148">thelatios</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-06-09</span></dd> <dd><span>Posts: 2</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>You&#039;ll need to add &quot;ivrs_ioapic[9]=00:14.0 ivrs_ioapic[10]=00:00.1&quot; to your grub configuration, also you&#039;ll need either kernel 3.10 or 3.9 with this patch&#160; <a href="http://www.filesend.net/download.php?f=1235d9b1277c65672c3d01a6933f9356" rel="nofollow">amd_iommu_fixes.patch.tar.gz</a>, this will enable interrupt remapping on your board so you wont need this line anymore: </p><div class="codebox"><pre><code>vfio_iommu_type1.allow_unsafe_interrupts=1</code></pre></div><p>Would you mind sharing which card you passed thru&#039;?</p></div></blockquote></div><p>Thanks for the patch. Do you know why 00:14.0 and 00:00.1 are the correct devices for those parameters?<br />On my motherboard,<br />- 00:14.0 is SMBus: Advanced Micro Devices [AMD] nee ATI SBx00 SMBus Controller (rev 42)<br />- 00:00.1 doesn&#039;t exist in lspci...</p><p>The passed thru&#039; card is a Radeon HD5450.</p><p>Thanks!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285492">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285511" class="blockpost rowodd"> <h2><span><span class="conr">#140</span> <a href="viewtopic.php?pid=1285511#p1285511">2013-06-09 13:10:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>thelatios wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>You&#039;ll need to add &quot;ivrs_ioapic[9]=00:14.0 ivrs_ioapic[10]=00:00.1&quot; to your grub configuration, also you&#039;ll need either kernel 3.10 or 3.9 with this patch&#160; <a href="http://www.filesend.net/download.php?f=1235d9b1277c65672c3d01a6933f9356" rel="nofollow">amd_iommu_fixes.patch.tar.gz</a>, this will enable interrupt remapping on your board so you wont need this line anymore: </p><div class="codebox"><pre><code>vfio_iommu_type1.allow_unsafe_interrupts=1</code></pre></div><p>Would you mind sharing which card you passed thru&#039;?</p></div></blockquote></div><p>Thanks for the patch. Do you know why 00:14.0 and 00:00.1 are the correct devices for those parameters?<br />On my motherboard,<br />- 00:14.0 is SMBus: Advanced Micro Devices [AMD] nee ATI SBx00 SMBus Controller (rev 42)<br />- 00:00.1 doesn&#039;t exist in lspci...</p><p>The passed thru&#039; card is a Radeon HD5450.</p><p>Thanks!</p></div></blockquote></div><p>Yes they wont show up on lspci but those are the addresses of the sb ioapic and nb ioapic</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285511">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1285910" class="blockpost roweven"> <h2><span><span class="conr">#141</span> <a href="viewtopic.php?pid=1285910#p1285910">2013-06-10 01:56:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=47675">jgott</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-04-10</span></dd> <dd><span>Posts: 21</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=47675">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>For anyone else who&#039;s gotten video passthrough to work but is annoyed by stuttery or inconsistent video/audio performance, I may have some useful information.</p><p>Passing through real devices to virtual machines provides essentially full throughput (average performance over time), but the problem is that the worst-case latency can be very bad for important things like interrupt handlers and deferred procedure calls. (Interrupt handlers allow hardware to quickly inform its driver of something; DPCs are used by Windows drivers to delay time-consuming work that would otherwise be done in the int handler). If a hardware interrupt or DPC is delayed for some reason, then the hardware driver in question basically just has to wait it out until the delay is over, and then maybe try to catch up afterward. But for latency-sensitive things like audio or video, a delay of even a few milliseconds can result in a break in the audio stream or a long video frame. For storage hardware, it can result in longer access times, and therefore poor random access performance.</p><p>On real hardware, interrupt or DPC latency are almost always consistently good (unless you have a hardware or driver problem) because the kernel gives these tasks very high priority. Within a virtual machine, though, things can get weird because interrupts have to get handled by the host kernel before being passed to the guest kernel, and because interrupt handlers and DPCs that need to be handled immediately by the guest kernel may get preempted by unimportant tasks on the host.</p><p>Here are some tools for measuring DPC and interrupt latency in Windows that should allow you to get an idea if this is a problem for you:<br /><a href="http://www.resplendence.com/latencymon" rel="nofollow">LatencyMon</a><br /><a href="http://www.thesycon.de/deu/latency_check.shtml" rel="nofollow">DPC Latency Checker</a><br /><a href="http://www.msfn.org/board/topic/140263-how-to-get-the-cause-of-high-cpu-usage-by-dpc-interrupt/" rel="nofollow">Windows Performance Analyzer</a> (surprisingly powerful)</p><p>The single most effective thing I was able to do to make the guest&#039;s latency more consistent was to run the qemu process under one of Linux&#039;s <a href="https://wiki.archlinux.org/index.php/Realtime_process_management" rel="nofollow">realtime scheduler classes</a>. This will probably make the biggest difference if you haven&#039;t dedicated CPU cores exclusively to the guest operating system, because the host and guest are in competition for the same CPU resources. Under normal conditions, the scheduler may allow processes on the host to preempt the guest and doesn&#039;t make any guarantees about how long the guest might have to wait to get a time slice.</p><p>Of the two realtime classes available, round-robin is preferable to fifo. Exactly how to run the qemu process with a realtime scheduling class is complicated by a number of things, including whether your VM is running in its own cgroup, so I can&#039;t give instructions that are universally applicable. Because I happen to run my VM as a systemd service, it involved adding this to the service file:</p><div class="codebox"><pre><code>CPUSchedulingPolicy=rr</code></pre></div><p>Another tweak that may be effective if your guest OS is Windows 8 is to <a href="http://forums.guru3d.com/showthread.php?t=374210" rel="nofollow">turn off dynamic ticks</a>. Linux has had dynamic ticks for a while (called tickless operation, NOHZ, etc.) but it&#039;s new in Windows 8 because of Microsoft&#039;s shift in focus toward mobile devices. Unfortunately, it&#039;s turned on by default. It&#039;s primarily a power optimization, and supposedly it shouldn&#039;t make any noticeable impact on the system&#039;s latency, but it has the potential to cause issues, so I recommend disabling it.</p><p>Also, be sure to read nbhs&#039;s performance tuning advice in the first two posts of this thread. In particular, if you&#039;re using your own kernel configuration, definitely try turning on kernel preemption, increasing the tick frequency, and turning off dynamic ticks. These host kernel tweaks all have the potential to improve latency for the guest.</p> <p class="postedit"><em>Last edited by jgott (2013-06-10 02:02:02)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1285910">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1288604" class="blockpost rowodd"> <h2><span><span class="conr">#142</span> <a href="viewtopic.php?pid=1288604#p1288604">2013-06-16 03:58:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Intel users having problems with vfio grabbing a lot of devices like <a href="https://bbs.archlinux.org/viewtopic.php?pid=1274378#p1274378" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 8#p1274378</a>, might want to check this out: <a href="http://marc.info/?l=linux-kernel&amp;m=136993923507507&amp;w=2" rel="nofollow">http://marc.info/?l=linux-kernel&amp;m=136993923507507&amp;w=2</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1288604">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1288617" class="blockpost roweven"> <h2><span><span class="conr">#143</span> <a href="viewtopic.php?pid=1288617#p1288617">2013-06-16 06:59:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71645">apocolypse600</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-26</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71645">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Where does everyone keep up to date with news about VGA passthrough? I follow this thread, <a href="http://forums.linuxmint.com/viewtopic.php?f=42&amp;t=112013" rel="nofollow">http://forums.linuxmint.com/viewtopic.php?f=42&amp;t=112013</a> and <a href="http://www.overclock.net/t/1205216/guide-create-a-gaming-virtual-machine" rel="nofollow">http://www.overclock.net/t/1205216/guid … al-machine</a> , although those are both aimed at passthrough via Xen rather than KVM. I also follow the xen-users, xen-devel and kvm general mailing lists. I notice that nbhs sometimes posts from a different mailing list (like the post directly before this one), but I can&#039;t find an easy way to navigate that list. Mailing lists aren&#039;t really my thing though, so that could be why. The KVM irc on freenode is pretty quiet most of the time, but I usually lurk there aswell.</p><p>It looks like Xen 4.3 is coming out very soon (wiki says release date of tomorrow, and they are definitely into the RC phase), and according to <a href="http://wiki.xen.org/wiki/Xen_Roadmap/4.3" rel="nofollow">http://wiki.xen.org/wiki/Xen_Roadmap/4.3</a> it&#039;s defaulting to upstream Qemu (although it has partial in brackets next to it, so I&#039;m not entirely sure what that means), so it&#039;ll be interesting to see how well it works. Although in the Linux Mint thread I posted, they were reporting issues doing the passthrough with newer versions of Xen 4.2, so who knows what a new version might bring.</p><p>I like the idea of using a NVIDIA card over an AMD card, so that if for some reason I can&#039;t get the passthrough to work, I can fall back on the propriety NVIDIA drivers under Linux, and just continue to use wine for games like I have been doing. That&#039;s why I was leaning towards KVM over Xen for my first stab at this. Also maybe it&#039;s the cynic in me, but I&#039;m not sure many projects that the Linux Foundation has worked with have ever lasted all that long, so I&#039;m assuming KVM (with the backing of Redhat) is a better option for support in the long run. No offence meant to the Linux Foundation by that, just an observation. Maybe I&#039;m just still bitter about MeeGo.</p><p>I haven&#039;t actually bought any hardware yet, as I was hoping for passthrough techniques to mature a little before I try and get it to work. I tested using Synergy to share a keyboard and mouse between a laptop and a desktop, and that worked really well, so I imagine that should work find for sharing the keyboard and mouse with the virtual machine host and guest. I&#039;m not entirely sure about audio yet, but I&#039;d rather not have to passthrough a USB controller and switch my USB headset from one USB port to another when switching from host to guest, but I could probably live with it. Can anyone see any immediate problems with using Synergy to share the keyboard and mouse, either integrated graphics (I&#039;ve seen some reports of issues with this in this thread) or my current GTS 250 to serve the Linux host and feeding a newer GPU through to a Windows guest (Probably Windows 7, but I do still have an install disk for XP)? I&#039;d probably pass a hard-drive through directly. It&#039;s a bit hard to make comments without the exact hardware specifics I know, I just want to make sure I&#039;m not missing something glaring when starting to plan for this build.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1288617">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1289367" class="blockpost rowodd"> <h2><span><span class="conr">#144</span> <a href="viewtopic.php?pid=1289367#p1289367">2013-06-18 04:12:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apocolypse600 wrote:</cite><blockquote><div><p>Where does everyone keep up to date with news about VGA passthrough? I follow this thread, <a href="http://forums.linuxmint.com/viewtopic.php?f=42&amp;t=112013" rel="nofollow">http://forums.linuxmint.com/viewtopic.php?f=42&amp;t=112013</a> and <a href="http://www.overclock.net/t/1205216/guide-create-a-gaming-virtual-machine" rel="nofollow">http://www.overclock.net/t/1205216/guid … al-machine</a> , although those are both aimed at passthrough via Xen rather than KVM. I also follow the xen-users, xen-devel and kvm general mailing lists. I notice that nbhs sometimes posts from a different mailing list (like the post directly before this one), but I can&#039;t find an easy way to navigate that list. Mailing lists aren&#039;t really my thing though, so that could be why. The KVM irc on freenode is pretty quiet most of the time, but I usually lurk there aswell.</p><p>It looks like Xen 4.3 is coming out very soon (wiki says release date of tomorrow, and they are definitely into the RC phase), and according to <a href="http://wiki.xen.org/wiki/Xen_Roadmap/4.3" rel="nofollow">http://wiki.xen.org/wiki/Xen_Roadmap/4.3</a> it&#039;s defaulting to upstream Qemu (although it has partial in brackets next to it, so I&#039;m not entirely sure what that means), so it&#039;ll be interesting to see how well it works. Although in the Linux Mint thread I posted, they were reporting issues doing the passthrough with newer versions of Xen 4.2, so who knows what a new version might bring.</p><p>I like the idea of using a NVIDIA card over an AMD card, so that if for some reason I can&#039;t get the passthrough to work, I can fall back on the propriety NVIDIA drivers under Linux, and just continue to use wine for games like I have been doing. That&#039;s why I was leaning towards KVM over Xen for my first stab at this. Also maybe it&#039;s the cynic in me, but I&#039;m not sure many projects that the Linux Foundation has worked with have ever lasted all that long, so I&#039;m assuming KVM (with the backing of Redhat) is a better option for support in the long run. No offence meant to the Linux Foundation by that, just an observation. Maybe I&#039;m just still bitter about MeeGo.</p><p>I haven&#039;t actually bought any hardware yet, as I was hoping for passthrough techniques to mature a little before I try and get it to work. I tested using Synergy to share a keyboard and mouse between a laptop and a desktop, and that worked really well, so I imagine that should work find for sharing the keyboard and mouse with the virtual machine host and guest. I&#039;m not entirely sure about audio yet, but I&#039;d rather not have to passthrough a USB controller and switch my USB headset from one USB port to another when switching from host to guest, but I could probably live with it. Can anyone see any immediate problems with using Synergy to share the keyboard and mouse, either integrated graphics (I&#039;ve seen some reports of issues with this in this thread) or my current GTS 250 to serve the Linux host and feeding a newer GPU through to a Windows guest (Probably Windows 7, but I do still have an install disk for XP)? I&#039;d probably pass a hard-drive through directly. It&#039;s a bit hard to make comments without the exact hardware specifics I know, I just want to make sure I&#039;m not missing something glaring when starting to plan for this build.</p></div></blockquote></div><p>Well i read the mailing lists you can also subscribe if you want.<br />I dont think the xen devs are really interested in getting vga passthrough to work on non pro cards (quadro) atm, i havent seen any real activity since 4.0. <br />Right now most success reports have been from AMD users like me, you should expect this to change in the coming months since pci-assign is deprecated on kvm in favor of vfio-pci</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1289367">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1290373" class="blockpost roweven"> <h2><span><span class="conr">#145</span> <a href="viewtopic.php?pid=1290373#p1290373">2013-06-20 20:39:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks for this post! i was looking for this.</p><p>The default kernel settings in 3.9.6 are like this</p><p>CONFIG_VFIO_IOMMU_TYPE1=m<br />CONFIG_VFIO=m<br />CONFIG_VFIO_PCI=m<br />CONFIG_VFIO_PCI_VGA=y</p><p>Do i need to recompile it or is it enough to load that stuff as modules?</p><p>Seabios and Qemu conflict because Qemu already comes with seabios, what should i do in that regard? is it ok to just use the seabios version that came with qemu?</p> <p class="postedit"><em>Last edited by rabcor (2013-06-20 20:39:30)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1290373">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1290409" class="blockpost rowodd"> <h2><span><span class="conr">#146</span> <a href="viewtopic.php?pid=1290409#p1290409">2013-06-20 22:17:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>rabcor wrote:</cite><blockquote><div><p>Thanks for this post! i was looking for this.</p><p>The default kernel settings in 3.9.6 are like this</p><p>CONFIG_VFIO_IOMMU_TYPE1=m<br />CONFIG_VFIO=m<br />CONFIG_VFIO_PCI=m<br />CONFIG_VFIO_PCI_VGA=y</p><p>Do i need to recompile it or is it enough to load that stuff as modules?</p><p>Seabios and Qemu conflict because Qemu already comes with seabios, what should i do in that regard? is it ok to just use the seabios version that came with qemu?</p></div></blockquote></div><p>Yes its ok.</p><p>You&#039;ll need a patched seabios, this is the packages i currently use:</p><p><a href="http://www.filesend.net/download.php?f=6578e5a368eb5226399c3b468af53600" rel="nofollow">linux-mainline.zip</a><br /><a href="http://www.filesend.net/download.php?f=1aae70b98b045bfc620020d1deacc3f0" rel="nofollow">qemu.zip</a><br /><a href="http://www.filesend.net/download.php?f=709d6f936f611efbc13f6256126817ad" rel="nofollow">seabios.zip</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1290409">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1290465" class="blockpost roweven"> <h2><span><span class="conr">#147</span> <a href="viewtopic.php?pid=1290465#p1290465">2013-06-21 01:24:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I can&#039;t build that qemu package, breaks on compilation.</p><p>Since the latest version of qemu (1.6) includes seabios wouldn&#039;t it be best to just patch that included seabios with <a href="http://code.coreboot.org/p/seabios/source/commit/7adfd712d031e5b4bbd0865f32c99f397fbab821/" rel="nofollow">this</a> before compilation? (but i don&#039;t know how to do that, since i can&#039;t find the seabios files in there)</p> <p class="postedit"><em>Last edited by rabcor (2013-06-21 03:38:32)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1290465">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1290652" class="blockpost rowodd"> <h2><span><span class="conr">#148</span> <a href="viewtopic.php?pid=1290652#p1290652">2013-06-21 15:17:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>rabcor wrote:</cite><blockquote><div><p>I can&#039;t build that qemu package, breaks on compilation.</p><p>Since the latest version of qemu (1.6) includes seabios wouldn&#039;t it be best to just patch that included seabios with <a href="http://code.coreboot.org/p/seabios/source/commit/7adfd712d031e5b4bbd0865f32c99f397fbab821/" rel="nofollow">this</a> before compilation? (but i don&#039;t know how to do that, since i can&#039;t find the seabios files in there)</p></div></blockquote></div><p>Have you updated your system? i just tried to build it ant it seems there was a problem with bluez dependency but it builds ok, i uploaded it again just in case</p><p><a href="http://www.filesend.net/download.php?f=d566914d149f1232fee20675a09a3bc9" rel="nofollow">qemu.zip</a></p><p>I suppose you can patch the included seabios but on arch seabios comes as its own package, so you might break something</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1290652">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1290707" class="blockpost roweven"> <h2><span><span class="conr">#149</span> <a href="viewtopic.php?pid=1290707#p1290707">2013-06-21 18:15:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>failed again, same error, and yes i updated my system only yesterday.</p><div class="codebox"><pre class="vscroll"><code>In file included from /usr/include/libfdt.h:55:0, from /home/illustrious/qemu/src/qemu-1.5.0/device_tree.c:28: /usr/include/fdt.h:58:2: error: unknown type name ‘fdt32_t’ fdt32_t magic; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup magic word FDT_MAGIC */ ^ /usr/include/fdt.h:59:2: error: unknown type name ‘fdt32_t’ fdt32_t totalsize; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup total size of DT block */ ^ /usr/include/fdt.h:60:2: error: unknown type name ‘fdt32_t’ fdt32_t off_dt_struct; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup offset to structure */ ^ /usr/include/fdt.h:61:2: error: unknown type name ‘fdt32_t’ fdt32_t off_dt_strings; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup offset to strings */ ^ /usr/include/fdt.h:62:2: error: unknown type name ‘fdt32_t’ fdt32_t off_mem_rsvmap; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup offset to memory reserve map */ ^ /usr/include/fdt.h:63:2: error: unknown type name ‘fdt32_t’ fdt32_t version; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup format version */ ^ /usr/include/fdt.h:64:2: error: unknown type name ‘fdt32_t’ fdt32_t last_comp_version; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup last compatible version */ ^ /usr/include/fdt.h:67:2: error: unknown type name ‘fdt32_t’ fdt32_t boot_cpuid_phys; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Which physical CPU id we&#039;re ^ /usr/include/fdt.h:70:2: error: unknown type name ‘fdt32_t’ fdt32_t size_dt_strings; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup size of the strings block */ ^ /usr/include/fdt.h:73:2: error: unknown type name ‘fdt32_t’ fdt32_t size_dt_struct; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup size of the structure block */ ^ /usr/include/fdt.h:77:2: error: unknown type name ‘fdt64_t’ fdt64_t address; ^ /usr/include/fdt.h:78:2: error: unknown type name ‘fdt64_t’ fdt64_t size; ^ /usr/include/fdt.h:82:2: error: unknown type name ‘fdt32_t’ fdt32_t tag; ^ /usr/include/fdt.h:87:2: error: unknown type name ‘fdt32_t’ fdt32_t tag; ^ /usr/include/fdt.h:88:2: error: unknown type name ‘fdt32_t’ fdt32_t len; ^ /usr/include/fdt.h:89:2: error: unknown type name ‘fdt32_t’ fdt32_t nameoff; ^ In file included from /home/illustrious/qemu/src/qemu-1.5.0/device_tree.c:28:0: /usr/include/libfdt.h: In function ‘fdt_setprop_inplace_u32’: /usr/include/libfdt.h:921:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_setprop_inplace_u64’: /usr/include/libfdt.h:956:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ /usr/include/libfdt.h: In function ‘fdt_property_u32’: /usr/include/libfdt.h:1032:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_property_u64’: /usr/include/libfdt.h:1037:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ /usr/include/libfdt.h: In function ‘fdt_setprop_u32’: /usr/include/libfdt.h:1193:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_setprop_u64’: /usr/include/libfdt.h:1228:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ /usr/include/libfdt.h: In function ‘fdt_appendprop_u32’: /usr/include/libfdt.h:1335:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_appendprop_u64’: /usr/include/libfdt.h:1370:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ make[1]: 1.sh topic_1.html topic_2.html topic_3.html topic_4.html topic_5.html [device_tree.o] Error 1 make: 1.sh topic_1.html topic_2.html topic_3.html topic_4.html topic_5.html [subdir-i386-softmmu] Error 2 ==&gt; ERROR: A failure occurred in build().</code></pre></div><p>if that&#039;s the case with seabios, can&#039;t the latest qemu version somehow be modified to not include seabios so it can be installed seperately like in older versions? (i would try to patch the seabios in qemu and hope nothing breaks in arch, but i don&#039;t know how i can find the right file, all i could find was an automated config script of some sort, but i&#039;m at a loss of how i could force qemu to use an independantly installed version of seabios rather than installing it on its own, i figure it can&#039;t be that hard though, shouldn&#039;t it be possible to just copy old code and replace some of the new code to do that? or is it maybe more complicated than that?)</p> <p class="postedit"><em>Last edited by rabcor (2013-06-22 04:10:29)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1290707">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1290841" class="blockpost rowodd"> <h2><span><span class="conr">#150</span> <a href="viewtopic.php?pid=1290841#p1290841">2013-06-22 04:10:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>rabcor wrote:</cite><blockquote><div><p>failed again, same error, and yes i updated my system only yesterday.</p><div class="codebox"><pre class="vscroll"><code>In file included from /usr/include/libfdt.h:55:0, from /home/illustrious/qemu/src/qemu-1.5.0/device_tree.c:28: /usr/include/fdt.h:58:2: error: unknown type name ‘fdt32_t’ fdt32_t magic; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup magic word FDT_MAGIC */ ^ /usr/include/fdt.h:59:2: error: unknown type name ‘fdt32_t’ fdt32_t totalsize; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup total size of DT block */ ^ /usr/include/fdt.h:60:2: error: unknown type name ‘fdt32_t’ fdt32_t off_dt_struct; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup offset to structure */ ^ /usr/include/fdt.h:61:2: error: unknown type name ‘fdt32_t’ fdt32_t off_dt_strings; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup offset to strings */ ^ /usr/include/fdt.h:62:2: error: unknown type name ‘fdt32_t’ fdt32_t off_mem_rsvmap; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup offset to memory reserve map */ ^ /usr/include/fdt.h:63:2: error: unknown type name ‘fdt32_t’ fdt32_t version; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup format version */ ^ /usr/include/fdt.h:64:2: error: unknown type name ‘fdt32_t’ fdt32_t last_comp_version; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup last compatible version */ ^ /usr/include/fdt.h:67:2: error: unknown type name ‘fdt32_t’ fdt32_t boot_cpuid_phys; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Which physical CPU id we&#039;re ^ /usr/include/fdt.h:70:2: error: unknown type name ‘fdt32_t’ fdt32_t size_dt_strings; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup size of the strings block */ ^ /usr/include/fdt.h:73:2: error: unknown type name ‘fdt32_t’ fdt32_t size_dt_struct; /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup size of the structure block */ ^ /usr/include/fdt.h:77:2: error: unknown type name ‘fdt64_t’ fdt64_t address; ^ /usr/include/fdt.h:78:2: error: unknown type name ‘fdt64_t’ fdt64_t size; ^ /usr/include/fdt.h:82:2: error: unknown type name ‘fdt32_t’ fdt32_t tag; ^ /usr/include/fdt.h:87:2: error: unknown type name ‘fdt32_t’ fdt32_t tag; ^ /usr/include/fdt.h:88:2: error: unknown type name ‘fdt32_t’ fdt32_t len; ^ /usr/include/fdt.h:89:2: error: unknown type name ‘fdt32_t’ fdt32_t nameoff; ^ In file included from /home/illustrious/qemu/src/qemu-1.5.0/device_tree.c:28:0: /usr/include/libfdt.h: In function ‘fdt_setprop_inplace_u32’: /usr/include/libfdt.h:921:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_setprop_inplace_u64’: /usr/include/libfdt.h:956:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ /usr/include/libfdt.h: In function ‘fdt_property_u32’: /usr/include/libfdt.h:1032:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_property_u64’: /usr/include/libfdt.h:1037:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ /usr/include/libfdt.h: In function ‘fdt_setprop_u32’: /usr/include/libfdt.h:1193:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_setprop_u64’: /usr/include/libfdt.h:1228:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ /usr/include/libfdt.h: In function ‘fdt_appendprop_u32’: /usr/include/libfdt.h:1335:2: error: unknown type name ‘fdt32_t’ fdt32_t tmp = cpu_to_fdt32(val); ^ /usr/include/libfdt.h: In function ‘fdt_appendprop_u64’: /usr/include/libfdt.h:1370:2: error: unknown type name ‘fdt64_t’ fdt64_t tmp = cpu_to_fdt64(val); ^ make[1]: 1.sh topic_1.html topic_2.html topic_3.html topic_4.html topic_5.html [device_tree.o] Error 1 make: 1.sh topic_1.html topic_2.html topic_3.html topic_4.html topic_5.html [subdir-i386-softmmu] Error 2 ==&gt; ERROR: A failure occurred in build().</code></pre></div><p>if that&#039;s the case with seabios, can&#039;t the latest qemu version somehow be modified to not include seabios so it can be installed seperately like in older versions?</p></div></blockquote></div><br /><p>I managed to reproduce your error by installing dtc-git try this patched build:</p><p><a href="http://www.fileswap.com/dl/9xrXfhArNr/" rel="nofollow">qemu.zip</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1290841">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=5">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=4">4</a> <a href="viewtopic.php?id=162768&amp;p=5">5</a> <strong>6</strong> <a href="viewtopic.php?id=162768&amp;p=7">7</a> <a href="viewtopic.php?id=162768&amp;p=8">8</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=7">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
