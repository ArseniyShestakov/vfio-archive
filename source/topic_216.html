<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 216) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=216" title="Page 216" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=215" title="Page 215" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=217" title="Page 217" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=215">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=214">214</a> <a href="viewtopic.php?id=162768&amp;p=215">215</a> <strong>216</strong> <a href="viewtopic.php?id=162768&amp;p=217">217</a> <a href="viewtopic.php?id=162768&amp;p=218">218</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=217">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1537712" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5376</span> <a href="viewtopic.php?pid=1537712#p1537712">2015-06-17 22:03:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@garnerlogan65</p><p>See post #5365 and #5367.&#160; I&#039;m not interested in guessing the details of the problem, repeating request that were not followed, or holding hands through reboots.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1537712">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1537728" class="blockpost roweven"> <h2><span><span class="conr">#5377</span> <a href="viewtopic.php?pid=1537728#p1537728">2015-06-17 23:13:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>FWIW, the kernel handles the boot VGA ROM differently than secondary ROMs.&#160; You actually get the shadow copy that might be modified during the execution of the ROM code.&#160; So, somehow getting a copy of the real, untouched ROM and passing it as a file would be encouraged for this scenario.</p></div></blockquote></div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>You&#039;re assigning an AMD card to a 440FX VM running Linux.&#160; That&#039;s pretty much the one case where I recommend Q35.&#160; I&#039;ve posted patches for this, but I lost track of whether they&#039;ve all been accepted.&#160; The problem is that the radeon driver blindly assumes that a downstream port exists above the device because that&#039;s the way it appears on real hardware.&#160; It then goes trying to read link speed info on a device that doesn&#039;t exist and you get the above oops.&#160; You need to switch to Q35, add a root port and put the GPU below the root port.</p></div></blockquote></div><p>And now it seems to be working.&#160; I downloaded the ROM from a site upstream but using it didn&#039;t work, so I just dropped that and I finally managed to log into a guest system (&quot;yay!!&quot;).</p><p>qemu command:</p><div class="codebox"><pre><code>#!/bin/bash # archbang guest qemu-system-x86_64 \ -enable-kvm -M q35 -m 6144 \ -smp 5,sockets=1,cores=5,threads=1 -cpu host,kvm=off \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=fakeRoot.1 \ -device vfio-pci,host=03:00.0,bus=fakeRoot.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=03:00.1,bus=fakeRoot.1,addr=00.1 \ -cdrom /root/archbang-150516-i686.iso \ -usb -usbdevice host:045e:0768 -usbdevice host:3842:2410 \ -rtc base=localtime \ -vga none -display none \ $@</code></pre></div><p>There are two minor hiccups I&#039;ve noticed thus far:<br />1) the arch guest I previously set up has an ethernet device, but didn&#039;t automatically grab a IP address.&#160; The archbang one did however, so I&#039;m assuming a reinstall will fix it.<br />2) Previously the keyboard was supported at the boot loader screen, now it doesn&#039;t seem to be. May be a non-issue in the end but I figured I should write down for my later tinkering.</p><p>Anyhow, now to get sound, networking, and a handful of other things set up (passing the bluray player directly to the vm for one) and then toss it into virsh.&#160; Thanks for your help, aw; I owe you a beer if you are ever in the RTP area.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1537728">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1537927" class="blockpost rowodd"> <h2><span><span class="conr">#5378</span> <a href="viewtopic.php?pid=1537927#p1537927">2015-06-18 17:39:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86845">garnerlogan65</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-11-22</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:garnerlogan65@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>aw, I already gave you the information you asked for (whether vfio was static or not), and I&#039;m not sure what else to do from here, if I knew what to do I would have done it, I can&#039;t really do anything with vfio files missing. The last thing I tried to do was near the end of part 3 of your guide, and install options to dracut and generating an initramfs, which did not work. It said that it was unable to install vfio and such. Not sure how to proceed from here.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1537927">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1537955" class="blockpost roweven"> <h2><span><span class="conr">#5379</span> <a href="viewtopic.php?pid=1537955#p1537955">2015-06-18 19:22:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>garnerlogan65 wrote:</cite><blockquote><div><p>aw, I already gave you the information you asked for (whether vfio was static or not), and I&#039;m not sure what else to do from here, if I knew what to do I would have done it, I can&#039;t really do anything with vfio files missing. The last thing I tried to do was near the end of part 3 of your guide, and install options to dracut and generating an initramfs, which did not work. It said that it was unable to install vfio and such. Not sure how to proceed from here.</p></div></blockquote></div><p>If your having difficulties with a certain part, there are other guides out there that are not made specefically for VFIO, but should give you a hint into what your doing wrong and how you can correct it.</p><p>Also, don&#039;t forget to do you &#039;man&#039; page pushups.&#160; Like: </p><div class="codebox"><pre><code>man grep</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1537955">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1537988" class="blockpost rowodd"> <h2><span><span class="conr">#5380</span> <a href="viewtopic.php?pid=1537988#p1537988">2015-06-18 21:28:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@garnerlogan65</p><p>Here&#039;s a trivial example:</p><div class="quotebox"><cite>garnerlogan65 wrote:</cite><blockquote><div><p>I can&#039;t really do anything with vfio files missing. The last thing I tried to do was near the end of part 3 of your guide, and install options to dracut and generating an initramfs, which did not work. It said that it was unable to install vfio and such. Not sure how to proceed from here.</p></div></blockquote></div><p>What vfio files are missing?&#160; What exactly are you trying to do &quot;near the end of part 3 of your guide&quot;?&#160; What exactly didn&#039;t work generating an initramfs?&#160; Give the error message, screen log, anything!&#160; If you can&#039;t bother to provide enough background on what you&#039;ve done, what you&#039;re trying to do, what you&#039;re expecting and what actually happened, then I can&#039;t be bothered to spend time on your problems.&#160; Sorry.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1537988">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538205" class="blockpost roweven"> <h2><span><span class="conr">#5381</span> <a href="viewtopic.php?pid=1538205#p1538205">2015-06-19 22:11:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>@Denso</p><p>Are you rebuilding your initramfs between each of these changes?&#160; What shows up in dmesg if you run &#039;modprobe -r vfio-pci; modprobe vfio-pci&#039; with modprobe.d as in the previous post?</p></div></blockquote></div><p>Yes . Whenever I do changes to initramfs config file , I rebuild it .</p><div class="codebox"><pre><code>modprobe -r vfio-pci modprobe: FATAL: Module vfio_pci is in use.</code></pre></div><p>Of course , VFIO is in use already (being bound to Intel Audio , Intel NIC for my VM) . It just won&#039;t get bound to GPUs using modprobe.d .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538205">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538208" class="blockpost rowodd"> <h2><span><span class="conr">#5382</span> <a href="viewtopic.php?pid=1538208#p1538208">2015-06-19 22:26:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Denso</p><p>Well obviously you can&#039;t remove the module while a VM is running and using it...&#160; I don&#039;t know what to tell you, I&#039;ve got a system running with exactly this right now:</p><div class="codebox"><pre><code>pci-stub.ids=10de:ffffffff:ffffffff:ffffffff:00030000:ffff00ff,10de:ffffffff:ffffffff:ffffffff:00040300:ffffffff,6549:ffffffff,11c1:5811</code></pre></div><p>It works exactly like it&#039;s supposed to, claiming all the Nvidia VGA and audio devices, plus all Teradici devices, and then a random firewire controller that shares a group with a NIC.&#160; Double check everything.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538208">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538227" class="blockpost roweven"> <h2><span><span class="conr">#5383</span> <a href="viewtopic.php?pid=1538227#p1538227">2015-06-19 23:49:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@aw :</p><p>Umm , I&#039;m not using pci-stub.ids .</p><p>I&#039;m using &quot;options vfio-pci ids =&quot; inside a modprobe.d conf file (Kernel 4.1-rc7) .</p><p>I&#039;m skipping pci-stub altogether and binding the devices directly to vfio . It works for the Intel Audio , Intel NIC and a PCI-E USB3 controller . Just not the GPUs .</p><p>I think I&#039;ll compile a 4.1-rc1 and see if it would work . It used to work on that version like a charm .</p><p>I&#039;ll keep you posted ! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538227">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538261" class="blockpost rowodd"> <h2><span><span class="conr">#5384</span> <a href="viewtopic.php?pid=1538261#p1538261">2015-06-20 04:14:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>vfio-pci and pci-stub use pretty much the same code for the ids option, the difference is that pci-stub is usually builtin and vfio-pci is usually a module.&#160; So, if you get different results, it probably has something to do with that.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538261">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538305" class="blockpost roweven"> <h2><span><span class="conr">#5385</span> <a href="viewtopic.php?pid=1538305#p1538305">2015-06-20 11:57:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@aw :</p><p>Even 4.0-rc1 didn&#039;t work , which was working perfectly fine before I install this motherboard (X99-E WS) . Perhaps it is because it uses PLX chips ? I read a previous post that vfio-bind can bind bridges while modprobe.d can&#039;t right ?</p><p>Here is the tree :</p><div class="codebox"><pre class="vscroll"><code>root ~ lspci -t -+-[0000:ff]-+-0b.0 | +-0b.1 | +-0b.2 | +-0c.0 | +-0c.1 | +-0c.2 | +-0c.3 | +-0c.4 | +-0c.5 | +-0f.0 | +-0f.1 | +-0f.4 | +-0f.5 | +-0f.6 | +-10.0 | +-10.1 | +-10.5 | +-10.6 | +-10.7 | +-12.0 | +-12.1 | +-13.0 | +-13.1 | +-13.2 | +-13.3 | +-13.4 | +-13.5 | +-13.6 | +-13.7 | +-14.0 | +-14.1 | +-14.2 | +-14.3 | +-14.6 | +-14.7 | +-15.0 | +-15.1 | +-15.2 | +-15.3 | +-16.0 | +-16.6 | +-16.7 | +-17.0 | +-17.4 | +-17.5 | +-17.6 | +-17.7 | +-1e.0 | +-1e.1 | +-1e.2 | +-1e.3 | +-1e.4 | +-1f.0 | \-1f.2 \-[0000:00]-+-00.0 +-01.0-[01]-- +-01.1-[02]-- +-02.0-[07-11]----00.0-[08-11]--+-08.0-[0b]----00.0 | +-09.0-[0c-11]----00.0-[0d-11]--+-01.0-[0e]----00.0 | | +-05.0-[0f]----00.0 | | +-07.0-[10]----00.0 | | \-09.0-[11]----00.0 | +-10.0-[09]--+-00.0 | | \-00.1 | \-11.0-[0a]-- +-03.0-[03-06]----00.0-[04-06]--+-08.0-[06]-- | \-10.0-[05]--+-00.0 | \-00.1 +-05.0 +-05.1 +-05.2 +-05.4 +-11.0 +-11.4 +-14.0 +-16.0 +-19.0 +-1a.0 +-1b.0 +-1c.0-[12]-- +-1c.3-[13-16]----00.0-[14-16]--+-01.0-[15]----00.0 | \-05.0-[16]----00.0 +-1c.4-[17]----00.0 +-1c.6-[18]----00.0 +-1d.0 +-1f.0 +-1f.2 \-1f.3</code></pre></div><div class="codebox"><pre class="vscroll"><code>root ~ lspci 00:00.0 Host bridge: Intel Corporation Xeon E5 v3/Core i7 DMI2 (rev 02) 00:01.0 PCI bridge: Intel Corporation Xeon E5 v3/Core i7 PCI Express Root Port 1 (rev 02) 00:01.1 PCI bridge: Intel Corporation Xeon E5 v3/Core i7 PCI Express Root Port 1 (rev 02) 00:02.0 PCI bridge: Intel Corporation Xeon E5 v3/Core i7 PCI Express Root Port 2 (rev 02) 00:03.0 PCI bridge: Intel Corporation Xeon E5 v3/Core i7 PCI Express Root Port 3 (rev 02) 00:05.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Address Map, VTd_Misc, System Management (rev 02) 00:05.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Hot Plug (rev 02) 00:05.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 RAS, Control Status and Global Errors (rev 02) 00:05.4 PIC: Intel Corporation Xeon E5 v3/Core i7 I/O APIC (rev 02) 00:11.0 Unassigned class [ff00]: Intel Corporation C610/X99 series chipset SPSR (rev 05) 00:11.4 SATA controller: Intel Corporation C610/X99 series chipset sSATA Controller [AHCI mode] (rev 05) 00:14.0 USB controller: Intel Corporation C610/X99 series chipset USB xHCI Host Controller (rev 05) 00:16.0 Communication controller: Intel Corporation C610/X99 series chipset MEI Controller #1 (rev 05) 00:19.0 Ethernet controller: Intel Corporation Ethernet Connection (2) I218-LM (rev 05) 00:1a.0 USB controller: Intel Corporation C610/X99 series chipset USB Enhanced Host Controller #2 (rev 05) 00:1b.0 Audio device: Intel Corporation C610/X99 series chipset HD Audio Controller (rev 05) 00:1c.0 PCI bridge: Intel Corporation C610/X99 series chipset PCI Express Root Port #1 (rev d5) 00:1c.3 PCI bridge: Intel Corporation C610/X99 series chipset PCI Express Root Port #4 (rev d5) 00:1c.4 PCI bridge: Intel Corporation C610/X99 series chipset PCI Express Root Port #5 (rev d5) 00:1c.6 PCI bridge: Intel Corporation C610/X99 series chipset PCI Express Root Port #7 (rev d5) 00:1d.0 USB controller: Intel Corporation C610/X99 series chipset USB Enhanced Host Controller #1 (rev 05) 00:1f.0 ISA bridge: Intel Corporation C610/X99 series chipset LPC Controller (rev 05) 00:1f.2 SATA controller: Intel Corporation C610/X99 series chipset 6-Port SATA Controller [AHCI mode] (rev 05) 00:1f.3 SMBus: Intel Corporation C610/X99 series chipset SMBus Controller (rev 05) 03:00.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 04:08.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 04:10.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 05:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 770] (rev a1) 05:00.1 Audio device: NVIDIA Corporation GK104 HDMI Audio Controller (rev a1) 07:00.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 08:08.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 08:09.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 08:10.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 08:11.0 PCI bridge: PLX Technology, Inc. PEX 8747 48-Lane, 5-Port PCI Express Gen 3 (8.0 GT/s) Switch (rev ca) 09:00.0 VGA compatible controller: NVIDIA Corporation GM107 [GeForce GTX 750] (rev a2) 09:00.1 Audio device: NVIDIA Corporation Device 0fbc (rev a1) 0b:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS2008 PCI-Express Fusion-MPT SAS-2 [Falcon] (rev 03) 0c:00.0 PCI bridge: PLX Technology, Inc. PEX 8608 8-lane, 8-Port PCI Express Gen 2 (5.0 GT/s) Switch (rev ba) 0d:01.0 PCI bridge: PLX Technology, Inc. PEX 8608 8-lane, 8-Port PCI Express Gen 2 (5.0 GT/s) Switch (rev ba) 0d:05.0 PCI bridge: PLX Technology, Inc. PEX 8608 8-lane, 8-Port PCI Express Gen 2 (5.0 GT/s) Switch (rev ba) 0d:07.0 PCI bridge: PLX Technology, Inc. PEX 8608 8-lane, 8-Port PCI Express Gen 2 (5.0 GT/s) Switch (rev ba) 0d:09.0 PCI bridge: PLX Technology, Inc. PEX 8608 8-lane, 8-Port PCI Express Gen 2 (5.0 GT/s) Switch (rev ba) 0e:00.0 USB controller: Renesas Technology Corp. uPD720202 USB 3.0 Host Controller (rev 02) 0f:00.0 USB controller: Renesas Technology Corp. uPD720202 USB 3.0 Host Controller (rev 02) 10:00.0 USB controller: Renesas Technology Corp. uPD720202 USB 3.0 Host Controller (rev 02) 11:00.0 USB controller: Renesas Technology Corp. uPD720202 USB 3.0 Host Controller (rev 02) 13:00.0 PCI bridge: ASMedia Technology Inc. Device 1184 14:01.0 PCI bridge: ASMedia Technology Inc. Device 1184 14:05.0 PCI bridge: ASMedia Technology Inc. Device 1184 15:00.0 Ethernet controller: Intel Corporation I210 Gigabit Network Connection (rev 03) 16:00.0 SATA controller: ASMedia Technology Inc. ASM1062 Serial ATA Controller (rev 02) 17:00.0 SATA controller: ASMedia Technology Inc. ASM1062 Serial ATA Controller (rev 02) 18:00.0 USB controller: ASMedia Technology Inc. ASM1042A USB 3.0 Host Controller ff:0b.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 R3 QPI Link 0 &amp; 1 Monitoring (rev 02) ff:0b.1 Performance counters: Intel Corporation Xeon E5 v3/Core i7 R3 QPI Link 0 &amp; 1 Monitoring (rev 02) ff:0b.2 Performance counters: Intel Corporation Xeon E5 v3/Core i7 R3 QPI Link 0 &amp; 1 Monitoring (rev 02) ff:0c.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Unicast Registers (rev 02) ff:0c.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Unicast Registers (rev 02) ff:0c.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Unicast Registers (rev 02) ff:0c.3 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Unicast Registers (rev 02) ff:0c.4 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Unicast Registers (rev 02) ff:0c.5 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Unicast Registers (rev 02) ff:0f.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Buffered Ring Agent (rev 02) ff:0f.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Buffered Ring Agent (rev 02) ff:0f.4 System peripheral: Intel Corporation Xeon E5 v3/Core i7 System Address Decoder &amp; Broadcast Registers (rev 02) ff:0f.5 System peripheral: Intel Corporation Xeon E5 v3/Core i7 System Address Decoder &amp; Broadcast Registers (rev 02) ff:0f.6 System peripheral: Intel Corporation Xeon E5 v3/Core i7 System Address Decoder &amp; Broadcast Registers (rev 02) ff:10.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 PCIe Ring Interface (rev 02) ff:10.1 Performance counters: Intel Corporation Xeon E5 v3/Core i7 PCIe Ring Interface (rev 02) ff:10.5 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Scratchpad &amp; Semaphore Registers (rev 02) ff:10.6 Performance counters: Intel Corporation Xeon E5 v3/Core i7 Scratchpad &amp; Semaphore Registers (rev 02) ff:10.7 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Scratchpad &amp; Semaphore Registers (rev 02) ff:12.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Home Agent 0 (rev 02) ff:12.1 Performance counters: Intel Corporation Xeon E5 v3/Core i7 Home Agent 0 (rev 02) ff:13.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Target Address, Thermal &amp; RAS Registers (rev 02) ff:13.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Target Address, Thermal &amp; RAS Registers (rev 02) ff:13.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel Target Address Decoder (rev 02) ff:13.3 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel Target Address Decoder (rev 02) ff:13.4 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel Target Address Decoder (rev 02) ff:13.5 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel Target Address Decoder (rev 02) ff:13.6 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO Channel 0/1 Broadcast (rev 02) ff:13.7 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO Global Broadcast (rev 02) ff:14.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 0 Thermal Control (rev 02) ff:14.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 1 Thermal Control (rev 02) ff:14.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 0 ERROR Registers (rev 02) ff:14.3 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 1 ERROR Registers (rev 02) ff:14.6 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO (VMSE) 0 &amp; 1 (rev 02) ff:14.7 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO (VMSE) 0 &amp; 1 (rev 02) ff:15.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 2 Thermal Control (rev 02) ff:15.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 3 Thermal Control (rev 02) ff:15.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 2 ERROR Registers (rev 02) ff:15.3 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 0 Channel 3 ERROR Registers (rev 02) ff:16.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 1 Target Address, Thermal &amp; RAS Registers (rev 02) ff:16.6 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO Channel 2/3 Broadcast (rev 02) ff:16.7 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO Global Broadcast (rev 02) ff:17.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Integrated Memory Controller 1 Channel 0 Thermal Control (rev 02) ff:17.4 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO (VMSE) 2 &amp; 3 (rev 02) ff:17.5 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO (VMSE) 2 &amp; 3 (rev 02) ff:17.6 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO (VMSE) 2 &amp; 3 (rev 02) ff:17.7 System peripheral: Intel Corporation Xeon E5 v3/Core i7 DDRIO (VMSE) 2 &amp; 3 (rev 02) ff:1e.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Power Control Unit (rev 02) ff:1e.1 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Power Control Unit (rev 02) ff:1e.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Power Control Unit (rev 02) ff:1e.3 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Power Control Unit (rev 02) ff:1e.4 System peripheral: Intel Corporation Xeon E5 v3/Core i7 Power Control Unit (rev 02) ff:1f.0 System peripheral: Intel Corporation Xeon E5 v3/Core i7 VCU (rev 02) ff:1f.2 System peripheral: Intel Corporation Xeon E5 v3/Core i7 VCU (rev 02)</code></pre></div><p>I&#039;m sorry for bothering you this much Alex <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538305">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538327" class="blockpost rowodd"> <h2><span><span class="conr">#5386</span> <a href="viewtopic.php?pid=1538327#p1538327">2015-06-20 14:29:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>It was a mistake for vfio-bind to try to bind bridges and a bug in vfio-pci to allow bridges.&#160; The latter has since been corrected in vfio-pci.&#160; That means that if you use vfio-bind, you may end up with bridges without a driver since vfio-pci won&#039;t let them bind.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538327">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538329" class="blockpost roweven"> <h2><span><span class="conr">#5387</span> <a href="viewtopic.php?pid=1538329#p1538329">2015-06-20 14:48:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@ aw :</p><p>After using vfio-bind and starting all of my VMs , checking all of the bridges&#039; drivers in use , they are all using &quot;pcieport&quot; . So I guess I&#039;m fine for now <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Let&#039;s see if I can hunt and fix the modprobe.d ids issue .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538329">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538371" class="blockpost rowodd"> <h2><span><span class="conr">#5388</span> <a href="viewtopic.php?pid=1538371#p1538371">2015-06-20 18:30:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91723">supertrampx</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-07</span></dd> <dd><span>Posts: 11</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:joe.cayouette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have checked MSI enable on my GTx 970. In linux it reports MSI: enable-&#160; &#160; in windows when I view the connection type pci, i see the card after driver install using msi. </p><br /><p>I am getting this error occasionally after a freeze and vm crashes, usually when I am installing, or accessing the graphics card.</p><p>qemu-system-x86_64: vfio_err_notifier_handler(0000:04:00.0) Unrecoverable error detected.&#160; Please collect any data possible and then kill the guest</p><p>any thoughts or ideas?</p> <p class="postedit"><em>Last edited by supertrampx (2015-06-20 18:35:05)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538371">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538385" class="blockpost roweven"> <h2><span><span class="conr">#5389</span> <a href="viewtopic.php?pid=1538385#p1538385">2015-06-20 19:19:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>The latest time I tried to reset my radeon via suspend (because the workaround seemed to have failed), I got this message when trying to start the VM after resume:<br />Error starting domain: Requested operation is not valid: PCI device 0000:08:00.0 is not assignable</p><p>Syslog showed the following message:<br />libvirtd[2036]: internal error: Device 0000:08:00.0 is behind a switch lacking ACS and cannot be assigned</p><p>That&#039;s coming from libvirt, not the kernel.&#160; Oddly, it didn&#039;t complain about the same device <em>before</em> suspend.<br />I know I can just set relaxed_acs_check=1 in libvirtd.conf, but it would be good to find out why it suddenly decides to complain.</p><p>lspci -tv (with 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_206.html topic_207.html topic_208.html topic_209.html topic_20.html topic_210.html topic_211.html topic_212.html topic_213.html topic_214.html topic_215.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html denoting devices I&#039;m forwarding to this VM):</p><div class="codebox"><pre><code>-[0000:00]-+-00.0 Intel Corporation Xeon E3-1200 v3 Processor DRAM Controller +-01.0-[01]--+-00.0 Advanced Micro Devices, Inc. [AMD/ATI] Hawaii PRO [Radeon R9 290] | \-00.1 Advanced Micro Devices, Inc. [AMD/ATI] Device aac8 +-02.0 Intel Corporation Xeon E3-1200 v3 Processor Integrated Graphics Controller +-03.0 Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor HD Audio Controller +-14.0 Intel Corporation 8 Series/C220 Series Chipset Family USB xHCI +-16.0 Intel Corporation 8 Series/C220 Series Chipset Family MEI Controller #1 +-16.3 Intel Corporation 8 Series/C220 Series Chipset Family KT Controller +-19.0 Intel Corporation Ethernet Connection I217-LM +-1a.0 Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #2 *-1b.0 Intel Corporation 8 Series/C220 Series Chipset High Definition Audio Controller *-1c.0-[02]----00.0 ASMedia Technology Inc. ASM1062 Serial ATA Controller +-1c.1-[03-0a]----00.0-[04-0a]--+-01.0-[05]-- | +-04.0-[06]-- | +-05.0-[07]-- | *-07.0-[08]----00.0 Renesas Technology Corp. uPD720201 USB 3.0 Host Controller | \-09.0-[09-0a]----00.0-[0a]----00.0 Texas Instruments XIO2213A/B/XIO2221 IEEE-1394b OHCI Controller [Cheetah Express] *-1c.3-[0b]----00.0 Intel Corporation I210 Gigabit Network Connection +-1c.4-[0c-44]-- +-1d.0 Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #1 +-1f.0 Intel Corporation C226 Series Chipset Family Server Advanced SKU LPC Controller +-1f.2 Intel Corporation 8 Series/C220 Series Chipset Family 6-port SATA Controller 1 [AHCI mode] +-1f.3 Intel Corporation 8 Series/C220 Series Chipset Family SMBus Controller \-1f.6 Intel Corporation 8 Series Chipset Family Thermal Management Controller</code></pre></div><p>lspci -nnv for the path involving that device, after suspend/resume:</p><div class="codebox"><pre class="vscroll"><code>00:00.0 Host bridge [0600]: Intel Corporation Xeon E3-1200 v3 Processor DRAM Controller [8086:0c08] (rev 06) Subsystem: Super Micro Computer Inc Device [15d9:0818] Flags: bus master, fast devsel, latency 0 Capabilities: [e0] Vendor Specific Information: Len=0c &lt;?&gt; Kernel driver in use: ie31200_edac 00:1c.1 PCI bridge [0604]: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #2 [8086:8c12] (rev d5) (prog-if 00 [Normal decode]) Flags: bus master, fast devsel, latency 0 Bus: primary=00, secondary=03, subordinate=0a, sec-latency=0 Memory behind bridge: ee800000-eebfffff Capabilities: [40] Express Root Port (Slot+), MSI 00 Capabilities: [80] MSI: Enable- Count=1/1 Maskable- 64bit- Capabilities: [90] Subsystem: Super Micro Computer Inc Device [15d9:0818] Capabilities: [a0] Power Management version 3 Kernel driver in use: pcieport 03:00.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) (prog-if 00 [Normal decode]) Flags: bus master, fast devsel, latency 0 Memory at eeb00000 (32-bit, non-prefetchable) [size=128K] Bus: primary=03, secondary=04, subordinate=0a, sec-latency=0 Memory behind bridge: ee800000-eeafffff Capabilities: [40] Power Management version 3 Capabilities: [48] MSI: Enable+ Count=1/4 Maskable+ 64bit+ Capabilities: [68] Express Upstream Port, MSI 00 Capabilities: [a4] Subsystem: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] Capabilities: [100] Device Serial Number ba-86-01-10-b5-df-0e-00 Capabilities: [fb4] Advanced Error Reporting Capabilities: [138] Power Budgeting &lt;?&gt; Capabilities: [148] Virtual Channel Capabilities: [448] Vendor Specific Information: ID=0000 Rev=0 Len=0cc &lt;?&gt; Capabilities: [950] Vendor Specific Information: ID=0001 Rev=0 Len=010 &lt;?&gt; Kernel driver in use: pcieport 04:07.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) (prog-if 00 [Normal decode]) Flags: bus master, fast devsel, latency 0 Bus: primary=04, secondary=08, subordinate=08, sec-latency=0 Memory behind bridge: eea00000-eeafffff Capabilities: [40] Power Management version 3 Capabilities: [48] MSI: Enable+ Count=1/4 Maskable+ 64bit+ Capabilities: [68] Express Downstream Port (Slot+), MSI 00 Capabilities: [a4] Subsystem: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] Capabilities: [100] Device Serial Number ba-86-01-10-b5-df-0e-00 Capabilities: [fb4] Advanced Error Reporting Capabilities: [148] Virtual Channel Capabilities: [520] Access Control Services Capabilities: [950] Vendor Specific Information: ID=0001 Rev=0 Len=010 &lt;?&gt; Kernel driver in use: pcieport 08:00.0 USB controller [0c03]: Renesas Technology Corp. uPD720201 USB 3.0 Host Controller [1912:0014] (rev 03) (prog-if 30 [XHCI]) Subsystem: Super Micro Computer Inc Device [15d9:0818] Flags: bus master, fast devsel, latency 0, IRQ 16 Memory at eea00000 (64-bit, non-prefetchable) [size=8K] Capabilities: [50] Power Management version 3 Capabilities: [70] MSI: Enable- Count=1/8 Maskable- 64bit+ Capabilities: [90] MSI-X: Enable+ Count=8 Masked- Capabilities: [a0] Express Endpoint, MSI 00 Capabilities: [100] Advanced Error Reporting Capabilities: [150] Latency Tolerance Reporting Kernel driver in use: xhci_hcd</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538385">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538386" class="blockpost rowodd"> <h2><span><span class="conr">#5390</span> <a href="viewtopic.php?pid=1538386#p1538386">2015-06-20 19:23:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>supertrampx wrote:</cite><blockquote><div><p>I have checked MSI enable on my GTx 970. In linux it reports MSI: enable-&#160; &#160; in windows when I view the connection type pci, i see the card after driver install using msi. </p><br /><p>I am getting this error occasionally after a freeze and vm crashes, usually when I am installing, or accessing the graphics card.</p><p>qemu-system-x86_64: vfio_err_notifier_handler(0000:04:00.0) Unrecoverable error detected.&#160; Please collect any data possible and then kill the guest</p><p>any thoughts or ideas?</p></div></blockquote></div><p>You got a fatal AER error.&#160; Are you overclocking?&#160; You can boot the host with pci=noaer to disable it, but that&#039;s no guarantee that the you&#039;re not still getting bus errors.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538386">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538430" class="blockpost roweven"> <h2><span><span class="conr">#5391</span> <a href="viewtopic.php?pid=1538430#p1538430">2015-06-21 01:50:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi ...</p><p>Anyone else is having trouble with their beidged networking ? Both of my VMs are now unreachable , and they can&#039;t reach the outer network .</p><p>Commands I use to set the bridge up :</p><div class="codebox"><pre><code>ip link add name br0 type bridge ip link set dev br0 up ip link set dev eth0 promisc on ip link set dev eth0 up ip link set dev eth0 master br0 ip link set dev br0 up ip addr add 10.0.1.240/24 broadcast 10.0.1.255 dev br0 ip route add default via 10.0.1.1</code></pre></div><p>The part of code to start the VM (the net bit) :</p><div class="codebox"><pre><code>-netdev bridge,id=br0 -device virtio-net-pci,netdev=br0,id=nic0,mac=B8:A7:2A:6E:09:B2</code></pre></div><p>Even using the legacy method doesn&#039;t work :</p><div class="codebox"><pre><code>-net nic,model=virtio,macaddr=B8:A7:2A:6E:09:B2 -net bridge,br=br0</code></pre></div><p>Windows guests can&#039;t identify the network or connect to the outside world , I even set the adapter&#039;s IP/Subnet/Gateway/DNS manually (Yes , I know what I&#039;m doing) .</p><p>Dmesg doesn&#039;t show anything not familier :</p><div class="codebox"><pre class="vscroll"><code>[Sun Jun 21 02:53:51 2015] br0: port 1(eth0) entered forwarding state [Sun Jun 21 02:53:51 2015] br0: port 1(eth0) entered forwarding state [Sun Jun 21 02:54:06 2015] br0: port 1(eth0) entered forwarding state [Sun Jun 21 02:56:03 2015] device tap0 entered promiscuous mode [Sun Jun 21 02:56:03 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 02:56:03 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 02:56:07 2015] kvm: zapping shadow pages for mmio generation wraparound [Sun Jun 21 02:56:18 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 02:57:12 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 02:57:12 2015] device tap0 left promiscuous mode [Sun Jun 21 02:57:12 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 03:03:04 2015] device tap0 entered promiscuous mode [Sun Jun 21 03:03:04 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:03:04 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:03:08 2015] kvm: zapping shadow pages for mmio generation wraparound [Sun Jun 21 03:03:19 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:04:33 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 03:04:33 2015] device tap0 left promiscuous mode [Sun Jun 21 03:04:33 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 03:15:35 2015] device tap0 entered promiscuous mode [Sun Jun 21 03:15:35 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:15:35 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:15:39 2015] kvm: zapping shadow pages for mmio generation wraparound [Sun Jun 21 03:15:50 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:16:37 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 03:16:37 2015] device tap0 left promiscuous mode [Sun Jun 21 03:16:37 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 03:48:07 2015] device tap0 entered promiscuous mode [Sun Jun 21 03:48:07 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:48:07 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 03:48:12 2015] kvm: zapping shadow pages for mmio generation wraparound [Sun Jun 21 03:48:22 2015] br0: port 2(tap0) entered forwarding state [Sun Jun 21 04:33:41 2015] br0: port 2(tap0) entered disabled state [Sun Jun 21 04:33:41 2015] device tap0 left promiscuous mode [Sun Jun 21 04:33:41 2015] br0: port 2(tap0) entered disabled state</code></pre></div><p>Note that the &quot;disabled state&quot; messages are when I actually shutdown the VM to test , so it doesn&#039;t go to the disabled state out of spite .</p><p>Kernel is 4.1-rc7 with Qemu-git compiled 7 hours ago . (It didn&#039;t work with the pervious version compiled a week ago either) .</p><p>Any light ?</p> <p class="postedit"><em>Last edited by Denso (2015-06-21 01:54:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538430">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538434" class="blockpost rowodd"> <h2><span><span class="conr">#5392</span> <a href="viewtopic.php?pid=1538434#p1538434">2015-06-21 02:10:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91279">ghormoon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-20</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>what if you manually create the tap? did you try? I start my vm with<br />-netdev tap,id=netdev0,ifname=vmtap10,script=no,downscript=no<br />-device virtio-net-pci,netdev=netdev0,id=net0,mac=xx:xx:xx:xx:xx:xx,bus=pci.2,addr=0x1<br />the tap has to exist of course <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538434">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538438" class="blockpost roweven"> <h2><span><span class="conr">#5393</span> <a href="viewtopic.php?pid=1538438#p1538438">2015-06-21 02:30:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@ghormoon :</p><p>Thanks , I&#039;ve never tried to create taps manually because QEMU was doing it automatically . And I still prefer to set up one bridge and let QEMU create as many taps as it needs when I run new VMs .</p><p>Regards <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538438">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538439" class="blockpost rowodd"> <h2><span><span class="conr">#5394</span> <a href="viewtopic.php?pid=1538439#p1538439">2015-06-21 02:32:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91279">ghormoon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-20</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>it&#039;s ok to make it automatically if it works and suits you. the point was to test out, where the problem is, if the creation, or something entirely different <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538439">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538442" class="blockpost roweven"> <h2><span><span class="conr">#5395</span> <a href="viewtopic.php?pid=1538442#p1538442">2015-06-21 02:45:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@ ghormoon :</p><p>I tried what you suggested just now , and the result is the same .</p><p>I can&#039;t believe that just changing the motherboard would result in this much hassle . -_-</p><p>EDIT :</p><p>THe first thing I did after installing this motherboard was compiling Qemu + OVMF + Kernel using <strong>GCC 5.1</strong> which was in the stable repos for Arch at that time . Could it be the reason for these unusual issues I&#039;m having thus far ?!</p> <p class="postedit"><em>Last edited by Denso (2015-06-21 07:01:37)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538442">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538567" class="blockpost rowodd"> <h2><span><span class="conr">#5396</span> <a href="viewtopic.php?pid=1538567#p1538567">2015-06-21 21:08:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81197">scoobydog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-04-14</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81197">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>hi,</p><p>after some experiences with my socket 2011 CPU and x79 chipset I checked the new 1150 Socket CPU with a z97 chipset, and it works with the i915 patch and seabios and without patching only with OVMF on Debian 8 Jessie.</p><p>I was so happy that I create some Tutorials for all how want to start with this.</p><p>my system is build on:<br />Intel(R) Core(TM) i5-4590 CPU @ 3.30GHz socket 1150<br />Gigabyte GA-Z97X-UD3H-BK <br />16GB DDR3 Memory<br />512GB SSD<br />NVIDIA GeForce GTX 780 (ASUS GTX780-DC2OC-3GD5) for passthrugh</p><p>Debian 8.1 Jessie</p><p>Linux&#160; 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24) x86_64 GNU/Linux<br />QEMU emulator version 2.1.2 (Debian 1:2.1+dfsg-12+deb8u1), Copyright (c) 2003-2008 Fabrice Bellard<br />ovmf&#160; &#160; 0~20150106.5c2d456b-1 from SID repository</p><p>English tutorial:<br /><a href="https://www.youtube.com/watch?v=r-AN8E8ADL0" rel="nofollow">Tutorial Debian 8, passthrough you physical video card to your virtual Windows7 with KVM and OVMF</a></p><p>German Tutorial:<br /><a href="https://www.youtube.com/watch?v=vO-aqg0LxeI" rel="nofollow">Tutorial: Debian 8, mit KVM und OVMF die Physikalische Grafikkarte im virtuellen Windows7 benutzen</a></p><p>for Kernel Patching<br /><a href="http://kvm-exp.blogspot.de/2015/06/howto-debian-kernel-i915-vga-arbiter.html" rel="nofollow">HOWTO Debian Jessie 8 Kernel patch i915 VGA arbiter</a></p><br /><p><a href="http://kvm-exp.blogspot.de" rel="nofollow">kvm-exp.blogspot.de</a></p> <p class="postedit"><em>Last edited by scoobydog (2015-06-21 21:44:28)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538567">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538578" class="blockpost roweven"> <h2><span><span class="conr">#5397</span> <a href="viewtopic.php?pid=1538578#p1538578">2015-06-21 22:18:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>EDIT :</p><p>THe first thing I did after installing this motherboard was compiling Qemu + OVMF + Kernel using <strong>GCC 5.1</strong> which was in the stable repos for Arch at that time . Could it be the reason for these unusual issues I&#039;m having thus far ?!</p></div></blockquote></div><p>The gentooist within me speaks: &quot;Look for the build log, luke&quot;.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538578">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538588" class="blockpost rowodd"> <h2><span><span class="conr">#5398</span> <a href="viewtopic.php?pid=1538588#p1538588">2015-06-21 23:16:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>scoobydog wrote:</cite><blockquote><div><p>hi,</p><p>after some experiences with my socket 2011 CPU and x79 chipset I checked the new 1150 Socket CPU with a z97 chipset, and it works with the i915 patch and seabios and without patching only with OVMF on Debian 8 Jessie.</p><p>I was so happy that I create some Tutorials for all how want to start with this.</p><p>my system is build on:<br />Intel(R) Core(TM) i5-4590 CPU @ 3.30GHz socket 1150<br />Gigabyte GA-Z97X-UD3H-BK <br />16GB DDR3 Memory<br />512GB SSD<br />NVIDIA GeForce GTX 780 (ASUS GTX780-DC2OC-3GD5) for passthrugh</p><p>Debian 8.1 Jessie</p><p>Linux&#160; 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24) x86_64 GNU/Linux<br />QEMU emulator version 2.1.2 (Debian 1:2.1+dfsg-12+deb8u1), Copyright (c) 2003-2008 Fabrice Bellard<br />ovmf&#160; &#160; 0~20150106.5c2d456b-1 from SID repository</p><p>English tutorial:<br /><a href="https://www.youtube.com/watch?v=r-AN8E8ADL0" rel="nofollow">Tutorial Debian 8, passthrough you physical video card to your virtual Windows7 with KVM and OVMF</a></p><p>German Tutorial:<br /><a href="https://www.youtube.com/watch?v=vO-aqg0LxeI" rel="nofollow">Tutorial: Debian 8, mit KVM und OVMF die Physikalische Grafikkarte im virtuellen Windows7 benutzen</a></p><p>for Kernel Patching<br /><a href="http://kvm-exp.blogspot.de/2015/06/howto-debian-kernel-i915-vga-arbiter.html" rel="nofollow">HOWTO Debian Jessie 8 Kernel patch i915 VGA arbiter</a></p><br /><p><a href="http://kvm-exp.blogspot.de" rel="nofollow">kvm-exp.blogspot.de</a></p></div></blockquote></div><p>Hi ! Thank you for spending the time writing those posts ! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>@Duelist :</p><p>I am certain that if there were problems with the building proccess , the whole thing would throw and error and ask if you would like to start from the begining . </p><p>Anyone here compiled these packages using GCC 5.1 ?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538588">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538598" class="blockpost roweven"> <h2><span><span class="conr">#5399</span> <a href="viewtopic.php?pid=1538598#p1538598">2015-06-22 00:52:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>@Duelist :</p><p>I am certain that if there were problems with the building proccess , the whole thing would throw and error and ask if you would like to start from the begining .</p></div></blockquote></div><p>Gentooist in me speaks again: &quot;Nope. If you&#039;re missing some dependencies, make could just say something &quot;oh, you don&#039;t have that software, well, i&#039;ll just drop it&#039;s support out completely&quot; and continue building. Moreover, in gentoo there&#039;s a feature called USE-flags to specifically tell the toolchain that you want some select features.&quot;</p><p>And also, you can check your iptables.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538598">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538605" class="blockpost rowodd"> <h2><span><span class="conr">#5400</span> <a href="viewtopic.php?pid=1538605#p1538605">2015-06-22 02:05:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Gentooist in me speaks again: &quot;Nope. If you&#039;re missing some dependencies, make could just say something &quot;oh, you don&#039;t have that software, well, i&#039;ll just drop it&#039;s support out completely&quot; and continue building. Moreover, in gentoo there&#039;s a feature called USE-flags to specifically tell the toolchain that you want some select features.&quot;</p><p>And also, you can check your iptables.</p></div></blockquote></div><p>Well , I&#039;ll build em packages again using yaourt . How can I save the build log for examining it later ?</p><p>Oh , and I don&#039;t use iptaples or any other firewalls for the time being , so its not the cause for this issue .</p><p>Cheers !</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538605">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=215">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=214">214</a> <a href="viewtopic.php?id=162768&amp;p=215">215</a> <strong>216</strong> <a href="viewtopic.php?id=162768&amp;p=217">217</a> <a href="viewtopic.php?id=162768&amp;p=218">218</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=217">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
