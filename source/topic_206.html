<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 206) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=206" title="Page 206" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=205" title="Page 205" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=207" title="Page 207" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=205">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=204">204</a> <a href="viewtopic.php?id=162768&amp;p=205">205</a> <strong>206</strong> <a href="viewtopic.php?id=162768&amp;p=207">207</a> <a href="viewtopic.php?id=162768&amp;p=208">208</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=207">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1529858" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5126</span> <a href="viewtopic.php?pid=1529858#p1529858">2015-05-18 15:43:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mostlyharmless wrote:</cite><blockquote><div><p>I&#039;ll give the VMT option a try, but Windows isn&#039;t complaining about lack of virtualization ability.&#160; It has a DCOM error in the Event viewer similar to <a href="http://superuser.com/questions/282994/windows-xp-mode-wont-start-in-win7-64-bit-server-execution-failed" rel="nofollow">http://superuser.com/questions/282994/w … ion-failed</a> Bear in mind that the same installation worked under qemu script.</p></div></blockquote></div><p>You can find the resulting qemu command line that libvirt uses in /var/log/libvirt (or simply using ps while the VM is running) to compare to your script</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1529858">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530002" class="blockpost roweven"> <h2><span><span class="conr">#5127</span> <a href="viewtopic.php?pid=1530002#p1530002">2015-05-18 23:34:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91253">lefta</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/91253.jpg?m=1431990766" width="80" height="80" alt="" /></dd> <dd><span>Registered: 2015-05-18</span></dd> <dd><span>Posts: 1</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello there,</p><p>Some months ago, I managed to make a virtual machine with Qemu/KVM/VGA passthrough. Everything went fine.<br />One or two months ago, I started my VM, but Windows 7 froze right after openning a session. I couldn&#039;t find a way to get past this freeze. <br />On freeze, Qemu outputs &quot;main-loop: WARNING: I/O thread spun for 1000 iterations&quot;. <br />Waiting past the loop is not an option, as Windows crashes complaining for missed clock interrupts. <br />However, the installation CD does not crash, but freezes every few seconds (without redisplaying the error message though). </p><p>I stripped down the command line to: </p><div class="codebox"><pre><code>qemu-system-x86_64 \ -m 1G \ -vga none \ -boot d \ -drive file=/home/ced/Documents/iso/windows7.iso,id=virtdrv,if=none,format=raw -device ide-cd,bus=ide.1,drive=virtdrv \ -enable-kvm \ -cpu host -smp 1,sockets=1,cores=1,threads=1</code></pre></div><p>dmesg: </p><div class="codebox"><pre><code>[ 1684.510717] kvm: zapping shadow pages for mmio generation wraparound</code></pre></div><p>Prentend installing QEmu (-x means disabled, it is a gentoo)</p><div class="codebox"><pre><code>app-emulation/qemu-2.3.0::gentoo USE=&quot;aio alsa bluetooth caps curl fdt jpeg ncurses nls opengl pin-upstream-blobs png python seccomp threads usb uuid vhost-net vnc -accessibility -debug -filecaps -glusterfs -gtk -gtk2 -infiniband -iscsi -lzo -nfs -numa -pulseaudio -rbd -sasl -sdl (-selinux) -smartcard -snappy -spice -ssh -static -static-softmmu -static-user -systemtap -tci {-test} -tls -usbredir -vde -virtfs -xattr -xen -xfs&quot; PYTHON_TARGETS=&quot;python2_7&quot; QEMU_SOFTMMU_TARGETS=&quot;x86_64 -aarch64 -alpha -arm -cris -i386 -lm32 -m68k -microblaze -microblazeel -mips -mips64 -mips64el -mipsel -moxie -or32 -ppc -ppc64 -ppcemb -s390x -sh4 -sh4eb -sparc -sparc64 -unicore32 -xtensa -xtensaeb&quot; QEMU_USER_TARGETS=&quot;-aarch64 -alpha -arm -armeb -cris -i386 -m68k -microblaze -microblazeel -mips -mips64 -mips64el -mipsel -mipsn32 -mipsn32el -or32 -ppc -ppc64 -ppc64abi32 -s390x -sh4 -sh4eb -sparc -sparc32plus -sparc64 -unicore32 -x86_64&quot;</code></pre></div><p>Before this problem, I updated my system. As I don&#039;t update it so often, I had about 200 updates (1/3 of my system), so I suspect an upgrade to be the culprit. But if I&#039;m right, which one? <br />Google did not give any usefull result. </p><p>Hints : <br />- SystemRescueCD (x86) and Gentoo live CD (amd64) do not have the problem. <br />- Windows 7 installation CD (x86 &amp; amd64) freezes. <br />- Windows 7 installation CD (x86) without KVM freezes even faster. <br />- All 2.x QEmu versions in portage tree suffer from the same problem (so from 2.1 to 2.3). <br />- Seabios 1.7.5 and 1.7.4 don&#039;t work. <br />- Linux kernels from 3.18.2 to 4.0.3 have the problem too. </p><p>My guesses : <br />- It is not KVM related (obviously). <br />- KVM seems to delay the freeze (why?). <br />- It does not seem to be directly QEmu related (but I could be wrong). <br />- It should be QEmu dependency related (but I&#039;m not sure at all). </p><p>What can make Windows freeze but not Linux? ( Trolls, keep away please... )</p><p>Specs :<br />Gentoo Linux<br />QEmu 2.3.0 (I can downgrade/upgrade if needed)<br />Seabios 1.7.5 (I know 1.8 is out, but I couldn&#039;t install it on my gentoo)<br />CPU Intel i5-3470</p><p>I know it is not VGA passthrough related, but I though you were the most able to help me.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530002">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530019" class="blockpost rowodd"> <h2><span><span class="conr">#5128</span> <a href="viewtopic.php?pid=1530019#p1530019">2015-05-19 01:05:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75818">ceri</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-12</span></dd> <dd><span>Posts: 44</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>ceri wrote:</cite><blockquote><div><p>I don&#039;t really know/understand the architecture of the interaction between PCI/e ports and the CPU &amp; MB, and so I&#039;m confused about the ACS isolation stuff, but from what you&#039;ve written here and on your blog, would I be correct in assuming that:</p><p>a) if i wanted to use discrete graphics (w/ a UEFI bios) on a single guest, and intel integrated graphics on the host (with no other PCI/PCIe devices), I wouldn&#039;t have to worry about using any patches or isolation, nor the type of CPU/motherboard I get (except for CPU/GFX compatibility with the MB and VT-d, etc)?</p></div></blockquote></div><p>Yes, if the discrete graphics card for the guest is the only plugin card, then pretty much anything will work.&#160; If your chipset is not quirked for PCH root port isolation, then you&#039;d need to install it in a processor root port slot to keep it from getting grouped with onboard devices, if it is quirked, then any slot will work.</p><p>*snip*</p></div></blockquote></div><p>Thanks for the clarifications!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530019">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530152" class="blockpost roweven"> <h2><span><span class="conr">#5129</span> <a href="viewtopic.php?pid=1530152#p1530152">2015-05-19 15:52:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91096">corna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-13</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:nicola@corna.info">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi again<br />First, thanks for your help! Now I can run a Windows 7 guest for gaming and everything works almost perfectly!<br />The only problem is due to the i915 vga arbitration patch: enabling it causes lots of animation problems on my GNOME host. I&#039;m trying to understand if I can use OVMF<br />Currently I can&#039;t run QEMU with OVMF:<br /> 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html if I don&#039;t specify any vga passthrough in my QEMU configuration it works fine and it outputs everything in its window<br /> 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html if I specify a vga passthrough it does not produce any output<br />I have a Zotac GTX660 Ti and, using <a href="http://vfio.blogspot.com/2014/08/does-my-graphics-card-rom-support-efi.html" rel="nofollow">this</a> tool, it seems that it doesn&#039;t support UEFI (but I can run Windows in UEFI mode without the virtualization, does it matter?). But according to a post on this thread (that I can&#039;t find now), there is a chance of making a non-UEFI card work with UEFI by using a romfile of another card. The problem is that, also in BIOS mode, if I specify ANY romfile the vga passthrough does not work anymore... Do you have any idea?<br />This is my system:</p><div class="quotebox"><blockquote><div><p>MB: Sapphire H61 Pure Platinum ITX<br />CPU: i7-3770<br />RAM: 8GB DDR3 1600MHz<br />GPU: Zotac Nvidia GTX660 Ti</p></div></blockquote></div><p>and this is my QEMU configuration (in BIOS mode)</p><div class="quotebox"><blockquote><div><p>#!/bin/sh<br />QEMU_AUDIO_DRV=alsa<br />DISKIMG=&quot;/media/nicola/data/qemu/WindowsVM.img&quot;<br />qemu-system-x86_64 --enable-kvm -M q35 -smp 8,sockets=1,cores=4,threads=2 -drive file=${DISKIMG},if=virtio&#160; -m 6144 \<br />-soundhw hda -cpu host,kvm=off \<br />-net nic,model=virtio -net user,hostname=windowsvm \<br />-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />-device vfio-pci,host=01:00.0,bus=root.1,multifunction=on,x-vga=on \<br />-device vfio-pci,host=01:00.1,bus=root.1 -vga none</p></div></blockquote></div><p>Thanks!</p> <p class="postedit"><em>Last edited by corna (2015-05-19 15:54:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530152">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530182" class="blockpost rowodd"> <h2><span><span class="conr">#5130</span> <a href="viewtopic.php?pid=1530182#p1530182">2015-05-19 17:19:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=29361">Jimi</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/29361.png?m=1431898807" width="80" height="80" alt="" /></dd> <dd><span>From: Brooklyn, NY</span></dd> <dd><span>Registered: 2009-09-25</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=29361">Email</a></span> <span class="website"><a href="http://jzelinskie.com" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Has anyone tried to pass two GPUs and use SLI on a VM?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://github.com/jzelinskie" rel="nofollow">github</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530182">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530196" class="blockpost roweven"> <h2><span><span class="conr">#5131</span> <a href="viewtopic.php?pid=1530196#p1530196">2015-05-19 18:08:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75548">Schlunze</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-03</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ts_reload@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi,</p><p>can somebody share a startup.nsh script or link for swiching to pci-e graphic on boot?</p><p>Thanks in advance.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530196">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530244" class="blockpost rowodd"> <h2><span><span class="conr">#5132</span> <a href="viewtopic.php?pid=1530244#p1530244">2015-05-19 21:22:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Jimi wrote:</cite><blockquote><div><p>Has anyone tried to pass two GPUs and use SLI on a VM?</p></div></blockquote></div><p>Not SLI, but XDMA Crossfire setup is running fine on my machine:<br />ASUS F2A55+Athlon X4 750K(trinity)+2xASUS HD7750 Silent. They do crossfire. Performance improvement is same as bare-metal. PCI-E 3.0 needed for improvement.</p><p>And i highly doubt SLI running - i&#039;ve suggested trying HyperSLI to some guy with two GTX980 some pages back, and he failed doing the magic, so i think SLI won&#039;t work.</p><p>I don&#039;t know about regular crossfire, my crossfire setup <span class="bbu">doesn&#039;t require a separate bridge and relies solely on pci-e</span>, so it&#039;s simpler to manage.</p> <p class="postedit"><em>Last edited by Duelist (2015-05-19 21:30:29)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530244">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530245" class="blockpost roweven"> <h2><span><span class="conr">#5133</span> <a href="viewtopic.php?pid=1530245#p1530245">2015-05-19 21:29:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>corna wrote:</cite><blockquote><div><p>Hi again<br />First, thanks for your help! Now I can run a Windows 7 guest for gaming and everything works almost perfectly!<br />The only problem is due to the i915 vga arbitration patch: enabling it causes lots of animation problems on my GNOME host. I&#039;m trying to understand if I can use OVMF<br />Currently I can&#039;t run QEMU with OVMF:<br /> 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html if I don&#039;t specify any vga passthrough in my QEMU configuration it works fine and it outputs everything in its window<br /> 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html if I specify a vga passthrough it does not produce any output<br />I have a Zotac GTX660 Ti and, using <a href="http://vfio.blogspot.com/2014/08/does-my-graphics-card-rom-support-efi.html" rel="nofollow">this</a> tool, it seems that it doesn&#039;t support UEFI (but I can run Windows in UEFI mode without the virtualization, does it matter?). But according to a post on this thread (that I can&#039;t find now), there is a chance of making a non-UEFI card work with UEFI by using a romfile of another card. The problem is that, also in BIOS mode, if I specify ANY romfile the vga passthrough does not work anymore... Do you have any idea?<br />This is my system:</p><div class="quotebox"><blockquote><div><p>MB: Sapphire H61 Pure Platinum ITX<br />CPU: i7-3770<br />RAM: 8GB DDR3 1600MHz<br />GPU: Zotac Nvidia GTX660 Ti</p></div></blockquote></div><p>and this is my QEMU configuration (in BIOS mode)</p><div class="quotebox"><blockquote><div><p>#!/bin/sh<br />QEMU_AUDIO_DRV=alsa<br />DISKIMG=&quot;/media/nicola/data/qemu/WindowsVM.img&quot;<br />qemu-system-x86_64 --enable-kvm -M q35 -smp 8,sockets=1,cores=4,threads=2 -drive file=${DISKIMG},if=virtio&#160; -m 6144 \<br />-soundhw hda -cpu host,kvm=off \<br />-net nic,model=virtio -net user,hostname=windowsvm \<br />-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />-device vfio-pci,host=01:00.0,bus=root.1,multifunction=on,x-vga=on \<br />-device vfio-pci,host=01:00.1,bus=root.1 -vga none</p></div></blockquote></div><p>Thanks!</p></div></blockquote></div><p>Well... Running windows UEFI on bare metal won&#039;t help, chances are you&#039;re just having CSM on and it continues to use VGA.</p><p>Try dumping your card&#039;s ROM using <a href="https://github.com/envytools/envytools" rel="nofollow">envytools</a>(and recheck for UEFI-compatibility) and adding it as a romfile option to your non-OVMF setup. If it works - try searching(i&#039;d ask manufacturer first since my GT610 has GOP(UEFI) in it&#039;s shipped ROM) for UEFI-compatible ROM somewhere <a href="http://www.techpowerup.com/vgabios/index.php" rel="nofollow">there</a>.<br />When you start up your OVMF-VM, it <strong>WON&#039;T USE YOUR GRAPHICS UNTIL WINDOWS DRIVERS KICK IN</strong>.<br />So it boots, shows you all the animations of windows logos and stuff, and only then fires up your GPU and starts outputting.<br />Basically, Schlunze in his posts request a .nsh EFI shell script to make OVMF use PT-d GPU from the very beginning, not relying on QXL(i didn&#039;t even think it&#039;s possible!).</p><p>You won&#039;t get accelerated QEMU Windows Graphics when not doing secondary passthrough.</p><p>And if i recall correctly, i915-patch actually breaks DRI, so... yeah.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530245">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530248" class="blockpost rowodd"> <h2><span><span class="conr">#5134</span> <a href="viewtopic.php?pid=1530248#p1530248">2015-05-19 21:43:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91096">corna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-13</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:nicola@corna.info">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>corna wrote:</cite><blockquote><div><p>Hi again<br />First, thanks for your help! Now I can run a Windows 7 guest for gaming and everything works almost perfectly!<br />The only problem is due to the i915 vga arbitration patch: enabling it causes lots of animation problems on my GNOME host. I&#039;m trying to understand if I can use OVMF<br />Currently I can&#039;t run QEMU with OVMF:<br /> 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html if I don&#039;t specify any vga passthrough in my QEMU configuration it works fine and it outputs everything in its window<br /> 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html if I specify a vga passthrough it does not produce any output<br />I have a Zotac GTX660 Ti and, using <a href="http://vfio.blogspot.com/2014/08/does-my-graphics-card-rom-support-efi.html" rel="nofollow">this</a> tool, it seems that it doesn&#039;t support UEFI (but I can run Windows in UEFI mode without the virtualization, does it matter?). But according to a post on this thread (that I can&#039;t find now), there is a chance of making a non-UEFI card work with UEFI by using a romfile of another card. The problem is that, also in BIOS mode, if I specify ANY romfile the vga passthrough does not work anymore... Do you have any idea?<br />This is my system:</p><div class="quotebox"><blockquote><div><p>MB: Sapphire H61 Pure Platinum ITX<br />CPU: i7-3770<br />RAM: 8GB DDR3 1600MHz<br />GPU: Zotac Nvidia GTX660 Ti</p></div></blockquote></div><p>and this is my QEMU configuration (in BIOS mode)</p><div class="quotebox"><blockquote><div><p>#!/bin/sh<br />QEMU_AUDIO_DRV=alsa<br />DISKIMG=&quot;/media/nicola/data/qemu/WindowsVM.img&quot;<br />qemu-system-x86_64 --enable-kvm -M q35 -smp 8,sockets=1,cores=4,threads=2 -drive file=${DISKIMG},if=virtio&#160; -m 6144 \<br />-soundhw hda -cpu host,kvm=off \<br />-net nic,model=virtio -net user,hostname=windowsvm \<br />-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />-device vfio-pci,host=01:00.0,bus=root.1,multifunction=on,x-vga=on \<br />-device vfio-pci,host=01:00.1,bus=root.1 -vga none</p></div></blockquote></div><p>Thanks!</p></div></blockquote></div><p>Well... Running windows UEFI on bare metal won&#039;t help, chances are you&#039;re just having CSM on and it continues to use VGA.</p><p>Try dumping your card&#039;s ROM using <a href="https://github.com/envytools/envytools" rel="nofollow">envytools</a>(and recheck for UEFI-compatibility) and adding it as a romfile option to your non-OVMF setup. If it works - try searching(i&#039;d ask manufacturer first since my GT610 has GOP(UEFI) in it&#039;s shipped ROM) for UEFI-compatible ROM somewhere <a href="http://www.techpowerup.com/vgabios/index.php" rel="nofollow">there</a>.<br />When you start up your OVMF-VM, it <strong>WON&#039;T USE YOUR GRAPHICS UNTIL WINDOWS DRIVERS KICK IN</strong>.<br />So it boots, shows you all the animations of windows logos and stuff, and only then fires up your GPU and starts outputting.<br />Basically, Schlunze in his posts request a .nsh EFI shell script to make OVMF use PT-d GPU from the very beginning, not relying on QXL(i didn&#039;t even think it&#039;s possible!).</p><p>You won&#039;t get accelerated QEMU Windows Graphics when not doing secondary passthrough.</p><p>And if i recall correctly, i915-patch actually breaks DRI, so... yeah.</p></div></blockquote></div><p>I&#039;ve found 3 UEFI-compatible ROMs:</p><div class="quotebox"><blockquote><div><p>Asus.GTX660Ti.2048.130208.rom<br />Gigabyte.GTX660Ti.2048.130107.rom<br />MSI.GTX660Ti.2048.120828.rom</p></div></blockquote></div><p>The system does not boot with any of these one (in non-OVMF mode)<br />I can&#039;t find any doc about envytools (I suppose I should use nvagetbios), can you please give me the doc&#039;s link or the syntax of the command?<br />Thanks</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530248">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530256" class="blockpost roweven"> <h2><span><span class="conr">#5135</span> <a href="viewtopic.php?pid=1530256#p1530256">2015-05-19 22:45:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>corna wrote:</cite><blockquote><div><p>I&#039;ve found 3 UEFI-compatible ROMs:</p><div class="quotebox"><blockquote><div><p>Asus.GTX660Ti.2048.130208.rom<br />Gigabyte.GTX660Ti.2048.130107.rom<br />MSI.GTX660Ti.2048.120828.rom</p></div></blockquote></div><p>The system does not boot with any of these one (in non-OVMF mode)<br />I can&#039;t find any doc about envytools (I suppose I should use nvagetbios), can you please give me the doc&#039;s link or the syntax of the command?<br />Thanks</p></div></blockquote></div><p>nvagetbios is a part of envytools. You git clone the source, compile it as noted in readme, and use nvagetbios to extract the bios. The instructions on how to use it are output by the program itself as usual.</p><p>Well.. You&#039;ve tried to use regular SeaBios with those ROM and failed? Can you show me how you attach those files to your card?.. It should be something like &quot;romfile=...&quot;...</p><p>OT: yay, my next post is numbered 256!</p> <p class="postedit"><em>Last edited by Duelist (2015-05-19 22:47:25)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530256">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530280" class="blockpost rowodd"> <h2><span><span class="conr">#5136</span> <a href="viewtopic.php?pid=1530280#p1530280">2015-05-20 05:13:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91279">ghormoon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-20</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>hi, did anyone encounter a situation, where passing in VGA into linux guest worked (including X), but windows one (with the same config, except things like disk path etc.) returned in the device manager &quot;Code 12: This device cannot find enough free resources that it can use&quot; ?</p><p>I&#039;m trying with current Arch with libvirt, since I have only one gpu (laptop), it&#039;s possible to blindly write &quot;virsh destroy vmname&quot;, but not to find the qemu, kill it and rebind it myself <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)</p><p>hw:<br />HP Elitebook 8560p, radeon 6470M</p> <p class="postedit"><em>Last edited by ghormoon (2015-05-20 05:13:58)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530280">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530286" class="blockpost roweven"> <h2><span><span class="conr">#5137</span> <a href="viewtopic.php?pid=1530286#p1530286">2015-05-20 05:41:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91096">corna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-13</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:nicola@corna.info">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ghormoon wrote:</cite><blockquote><div><p>hi, did anyone encounter a situation, where passing in VGA into linux guest worked (including X), but windows one (with the same config, except things like disk path etc.) returned in the device manager &quot;Code 12: This device cannot find enough free resources that it can use&quot; ?</p><p>I&#039;m trying with current Arch with libvirt, since I have only one gpu (laptop), it&#039;s possible to blindly write &quot;virsh destroy vmname&quot;, but not to find the qemu, kill it and rebind it myself <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)</p><p>hw:<br />HP Elitebook 8560p, radeon 6470M</p></div></blockquote></div><p>I have the same result if I pass multiple cards (discrete GPU + virtual GPU). I also had the same result when running Windows on bare metal (discrete + integrated), so I suppose is a limitation of Windows. Have you selected -vga none in the QEMU configuration?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530286">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530288" class="blockpost rowodd"> <h2><span><span class="conr">#5138</span> <a href="viewtopic.php?pid=1530288#p1530288">2015-05-20 06:00:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91279">ghormoon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-20</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>yes, even though -vga none doesn&#039;t actually make any difference. it only stops cirrus output from showing on vnc console, but will not remove the cirrus card itself.<br />If I remove the cirrus card, I end up in state, where the qemu will hang and not even try to boot anything. I can either have both, cirrus + passed in gpu, or none, but having only passed in one will hang seabios <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530288">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530292" class="blockpost roweven"> <h2><span><span class="conr">#5139</span> <a href="viewtopic.php?pid=1530292#p1530292">2015-05-20 06:27:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91096">corna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-13</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:nicola@corna.info">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>corna wrote:</cite><blockquote><div><p>I&#039;ve found 3 UEFI-compatible ROMs:</p><div class="quotebox"><blockquote><div><p>Asus.GTX660Ti.2048.130208.rom<br />Gigabyte.GTX660Ti.2048.130107.rom<br />MSI.GTX660Ti.2048.120828.rom</p></div></blockquote></div><p>The system does not boot with any of these one (in non-OVMF mode)<br />I can&#039;t find any doc about envytools (I suppose I should use nvagetbios), can you please give me the doc&#039;s link or the syntax of the command?<br />Thanks</p></div></blockquote></div><p>nvagetbios is a part of envytools. You git clone the source, compile it as noted in readme, and use nvagetbios to extract the bios. The instructions on how to use it are output by the program itself as usual.</p><p>Well.. You&#039;ve tried to use regular SeaBios with those ROM and failed? Can you show me how you attach those files to your card?.. It should be something like &quot;romfile=...&quot;...</p><p>OT: yay, my next post is numbered 256!</p></div></blockquote></div><p>Yes, I should have read the README more carefully ;-)<br />I&#039;ve extracted the BIOS of my GPU with envytools and the VM (in non-OVMF mode) works fine. But my BIOS is 1MB, while the techpowerup BIOSs are about 180KB... Are them in 2 different formats?<br />What do you mean with &quot;it WON&#039;T USE YOUR GRAPHICS UNTIL WINDOWS DRIVERS KICK IN.&quot;? Where does it output before the windows driver?<br />This is my QEMU script</p><div class="quotebox"><blockquote><div><p>#!/bin/sh<br />QEMU_AUDIO_DRV=pa<br />QEMU_PA_SAMPLES=128<br />DISKIMG=&quot;/winvm/winVM_C.img&quot;<br />D_DRIVE=&quot;/home/nicola/Documents/winVM_D.img&quot;<br />ROMFILE=&quot;/winvm/gtx660ti_bios/envytools_Zotac.rom&quot;<br />OVMF_CODE=&quot;/winvm/ovmf-x64/OVMF_CODE-pure-efi.fd&quot;<br />OVMF_VARS=&quot;/winvm/ovmf-x64/OVMF_VARS-pure-efi.fd&quot;</p><p>ulimit -l 8409088</p><p>qemu-system-x86_64 --enable-kvm -M q35 -smp 8,sockets=1,cores=4,threads=2 -m 6144 \<br />-soundhw hda -cpu host,kvm=off -rtc base=localtime,clock=host \<br />-net nic,model=virtio -net user,hostname=windowsvm \<br />-drive file=${DISKIMG},if=virtio -drive file=${D_DRIVE},if=virtio \<br />-drive if=pflash,format=raw,readonly,file=${OVMF_CODE} \<br />-drive if=pflash,format=raw,file=${OVMF_VARS} \<br />-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />-device vfio-pci,host=01:00.0,bus=root.1,x-vga=on,multifunction=on,romfile=${ROMFILE} \<br />-device vfio-pci,host=01:00.1,bus=pcie.0 -vga none $@</p></div></blockquote></div><p>The non-OVMF script is identical, except for the OVMF_CODE and OVMF_VARS lines</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530292">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530365" class="blockpost rowodd"> <h2><span><span class="conr">#5140</span> <a href="viewtopic.php?pid=1530365#p1530365">2015-05-20 13:34:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>corna wrote:</cite><blockquote><div><p>Yes, I should have read the README more carefully ;-)<br />I&#039;ve extracted the BIOS of my GPU with envytools and the VM (in non-OVMF mode) works fine. But my BIOS is 1MB, while the techpowerup BIOSs are about 180KB... Are them in 2 different formats?<br />What do you mean with &quot;it WON&#039;T USE YOUR GRAPHICS UNTIL WINDOWS DRIVERS KICK IN.&quot;? Where does it output before the windows driver?</p></div></blockquote></div><p>A typical GPU ROM is 64 kilobytes, UEFI-enabled one is 128k. That&#039;s on AMD. On Nvidia cards there may be differences, try opening the downloaded files and your own VBIOS in hex editor and look. But actually, have you even bothered asking the manufacturer?<br />Anyway, i think both files should work, the one you&#039;ve extracted and the one you&#039;ve downloaded.</p><p>Where does it outputs? Well, depends on the number of GPUs you&#039;re assigning: when using windows7+OVMF, you&#039;ll have to use QXL GPU additionally. Originally OVMF did output it&#039;s text stuff(and tianocore logo) only to QXL, now it mirrors it to the assigned card. Then windows boot logo comes up and renders itself only on QXL, or, if there&#039;s no QXL present, <span class="bbu">nowhere</span>. That&#039;s why i&#039;ve warned you - there was some occasions where people thought that their VM hung, but it was loading silently with no output. It&#039;s only hanging if it eats 100% of one vCPU.</p> <p class="postedit"><em>Last edited by Duelist (2015-05-20 13:39:27)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530365">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530368" class="blockpost roweven"> <h2><span><span class="conr">#5141</span> <a href="viewtopic.php?pid=1530368#p1530368">2015-05-20 13:39:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ghormoon wrote:</cite><blockquote><div><p>hi, did anyone encounter a situation, where passing in VGA into linux guest worked (including X), but windows one (with the same config, except things like disk path etc.) returned in the device manager &quot;Code 12: This device cannot find enough free resources that it can use&quot; ?</p><p>I&#039;m trying with current Arch with libvirt, since I have only one gpu (laptop), it&#039;s possible to blindly write &quot;virsh destroy vmname&quot;, but not to find the qemu, kill it and rebind it myself <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)</p><p>hw:<br />HP Elitebook 8560p, radeon 6470M</p></div></blockquote></div><p>Surprise-surprise, you have two devices doing their shady VGA stuff, and only ONE VGA memory range! If i understand this correctly, VGA arbitration should manage this, but windows... just disables the second card, be it cirrus or assigned. Try doing OVMF-wa... you have 6470M and a notebook, OVMF will not work.<br />Actually, you should be able to bind one device to the VM and use it. But you have a notebook, i can&#039;t really remember anyone doing this with their laptop, and i do remember aw saying something about mobile GPUs being &quot;not so dedicated&quot; as their discrete counterparts. Or was it about intel integrated gpus?..<br />If it hangs - try looking into dmesg via SSH or into qemu logs or somewhere else, there should be something in dmesg.</p> <p class="postedit"><em>Last edited by Duelist (2015-05-20 13:39:53)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530368">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530371" class="blockpost rowodd"> <h2><span><span class="conr">#5142</span> <a href="viewtopic.php?pid=1530371#p1530371">2015-05-20 13:45:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91279">ghormoon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-20</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>as for the range - yes, I&#039;ve read a tutorial, where they said I have to disable cirrus in the device manager and reboot. but no change, there&#039;s down facing arrow (device disabled), but it still occupies the memory range <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />as for OVMF - I&#039;ve dumped the rom some time ago and it was not OVMF, that&#039;s verified. No idea if there&#039;s any way to get OVMF one which will be compatible. Likely not.<br />This laptop doesn&#039;t even have the intel IGP wired in at all, just this Radeon as PCI device. it works in linux, so it is possible to pass in <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> there are way more problems with laptops that actually can switch between those two.</p><p>for the hang - dmesg won&#039;t be much help, but If I make seabios output debug to console, it hangs at point where seabios tries to initialize the VGA. it looks like this when it boots <a href="http://pastebin.com/t7nRAdNj" rel="nofollow">http://pastebin.com/t7nRAdNj</a> (with cirrus), and like this <a href="http://pastebin.com/hBQm9dme" rel="nofollow">http://pastebin.com/hBQm9dme</a> without cirrus (hangs).</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530371">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530406" class="blockpost roweven"> <h2><span><span class="conr">#5143</span> <a href="viewtopic.php?pid=1530406#p1530406">2015-05-20 16:31:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ghormoon wrote:</cite><blockquote><div><p>as for the range - yes, I&#039;ve read a tutorial, where they said I have to disable cirrus in the device manager and reboot. but no change, there&#039;s down facing arrow (device disabled), but it still occupies the memory range <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />as for OVMF - I&#039;ve dumped the rom some time ago and it was not OVMF, that&#039;s verified. No idea if there&#039;s any way to get OVMF one which will be compatible. Likely not.<br />This laptop doesn&#039;t even have the intel IGP wired in at all, just this Radeon as PCI device. it works in linux, so it is possible to pass in <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> there are way more problems with laptops that actually can switch between those two.</p><p>for the hang - dmesg won&#039;t be much help, but If I make seabios output debug to console, it hangs at point where seabios tries to initialize the VGA. it looks like this when it boots <a href="http://pastebin.com/t7nRAdNj" rel="nofollow">http://pastebin.com/t7nRAdNj</a> (with cirrus), and like this <a href="http://pastebin.com/hBQm9dme" rel="nofollow">http://pastebin.com/hBQm9dme</a> without cirrus (hangs).</p></div></blockquote></div><p>It hangs just after it tries to load VGA ROM. So i think it&#039;s integrated into some other weird place. Check your ROM.<br />Try extracting it via sysfs and attaching it as romfile=... option.</p> <p class="postedit"><em>Last edited by Duelist (2015-05-20 16:35:03)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530406">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530452" class="blockpost rowodd"> <h2><span><span class="conr">#5144</span> <a href="viewtopic.php?pid=1530452#p1530452">2015-05-20 18:21:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75548">Schlunze</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-03</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ts_reload@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi,</p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Basically, Schlunze in his posts request a .nsh EFI shell script to make OVMF use PT-d GPU from the very beginning, not relying on QXL(i didn&#039;t even think it&#039;s possible!).</p></div></blockquote></div><p>The point is, now i have to switch onboard graphics or PCI-E graphics in main UEFI BIOS, then i can choose in the integratetd Bootloader(CSM) or gummiboot, wich OS shoud be started (Dual Boot).</p><p>It might be useful for isolating the &quot;second&quot; OS from scrach too, not fiddling around with wrong OS disk numbers and increases boot time^^.</p><p>The other way is to make fix settings for second OS in main BIOS, mount the EFI partion on two Systems linux nativ win virtualized. That´s a really bad idea i think. I don´t know if EFI stuff is ro by OSses. <br />And IGP graphics maybe not work during boot up linux in this case, thats a no go too. On the other hand is it possible to have two EFi partitons?</p><p>Maybe there is another way without startup.nsa?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530452">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530467" class="blockpost roweven"> <h2><span><span class="conr">#5145</span> <a href="viewtopic.php?pid=1530467#p1530467">2015-05-20 19:15:06</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Schlunze wrote:</cite><blockquote><div><p>Hi,</p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Basically, Schlunze in his posts request a .nsh EFI shell script to make OVMF use PT-d GPU from the very beginning, not relying on QXL(i didn&#039;t even think it&#039;s possible!).</p></div></blockquote></div><p>The point is, now i have to switch onboard graphics or PCI-E graphics in main UEFI BIOS, then i can choose in the integratetd Bootloader(CSM) or gummiboot, wich OS shoud be started (Dual Boot).</p><p>It might be useful for isolating the &quot;second&quot; OS from scrach too, not fiddling around with wrong OS disk numbers and increases boot time^^.</p><p>The other way is to make fix settings for second OS in main BIOS, mount the EFI partion on two Systems linux nativ win virtualized. That´s a really bad idea i think. I don´t know if EFI stuff is ro by OSses. <br />And IGP graphics maybe not work during boot up linux in this case, thats a no go too. On the other hand is it possible to have two EFi partitons?</p><p>Maybe there is another way without startup.nsa?</p></div></blockquote></div><p>Sorry, my mind is a bit blurry, so i&#039;ll answer only one question you&#039;ve asked and i&#039;ve understood:</p><div class="quotebox"><blockquote><div><p>On the other hand is it possible to have two EFi partitons?</p></div></blockquote></div><p>Yes. Moreover, if i recall correctly, you can have two different boot loaders on the same EFI special partition(ESP).</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530467">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530483" class="blockpost rowodd"> <h2><span><span class="conr">#5146</span> <a href="viewtopic.php?pid=1530483#p1530483">2015-05-20 19:54:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75548">Schlunze</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-03</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ts_reload@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks,</p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Yes. Moreover, if i recall correctly, you can have two different boot loaders on the same EFI special partition(ESP).</p></div></blockquote></div><p>I look for a way to get rid of swiching primary graphic output in main bios for dual boot reasons.</p><p>Current standart configuration:<br />Bios setting for primary graphic output is onboard graphics.<br />Linux is bootet in CSM, i can use a win7 uefi vm with vga-passthrough. No need for vga arbitration due to qemu-ovmf on host. (Linux uefi not tested right now, maybe the EFI fat fs gets corrupt if its mountet on host and vm)</p><p>Dual Boot Windows7 UEFI:<br />Bios setting for primary graphic output is onboard graphics.<br />Windows is startet with standart vga-graphic, Intel driver is not installed right now. Pcie card shows up in windows device manger say everything is fine. But I can´ t use the nvidia card in this case. <br />For me it looks like a Windows VGA arbitration problem. </p><p>Dual Boot Windows7 UEFI: (most desired dual boot usecase)<br />Bios setting for primary graphic output is PCI-Express.<br />Pcie card is fully useable, the integrated graphic is turned off, not useable in this case.</p><p>I don´t know a solution for this switching problem.</p><p>Maybe a startup.nsh script to manage the inital switching depending on bootloader entry. Not possible?<br />Maybe boot Linux CSM with pcie as primary graphic output in main bios. Primary graphics is in pci-stub for qemu - i dont know what happens in this case but i will try it.</p><p>Thank you in advance again.</p> <p class="postedit"><em>Last edited by Schlunze (2015-05-20 21:29:00)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530483">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530730" class="blockpost roweven"> <h2><span><span class="conr">#5147</span> <a href="viewtopic.php?pid=1530730#p1530730">2015-05-21 18:42:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=90340">paperinick</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-04-14</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=90340">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Weeeeeeird. I have libvirt and kraxel-org-based jenkins-git images, and it works fine there.</p></div></blockquote></div><p>Can you please share that image somewhere? Thanks!!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530730">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530742" class="blockpost rowodd"> <h2><span><span class="conr">#5148</span> <a href="viewtopic.php?pid=1530742#p1530742">2015-05-21 19:17:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Schlunze wrote:</cite><blockquote><div><p>Thanks,</p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Yes. Moreover, if i recall correctly, you can have two different boot loaders on the same EFI special partition(ESP).</p></div></blockquote></div><p>I look for a way to get rid of swiching primary graphic output in main bios for dual boot reasons.</p><p>...snip...</p><p>Dual Boot Windows7 UEFI: (most desired dual boot usecase)<br />Bios setting for primary graphic output is PCI-Express.<br />Pcie card is fully useable, the integrated graphic is turned off, not useable in this case.</p><p>I don´t know a solution for this switching problem.</p><p>Maybe a startup.nsh script to manage the inital switching depending on bootloader entry. Not possible?<br />Maybe boot Linux CSM with pcie as primary graphic output in main bios. Primary graphics is in pci-stub for qemu - i dont know what happens in this case but i will try it.</p><p>Thank you in advance again.</p></div></blockquote></div><p>Whaaat...<br />I didn&#039;t understand a thing again. Dual Boot - is a term of <span class="bbu">having two separate Operating Systems installed simultaneously. not running them</span>. So you boot up your machine, choose, for example, linux, and use it. To get into windows, you shutdown your linux system, start the PC again and choose windows in your bootloader(usually grub). So dual booting doesn&#039;t involve virtualization at all.</p><p>If you want to pass-through a primary card into the VM - you just do it, considering you&#039;re using OVMF. No need to think about arbitration. Linux host boot loader(UEFI or legacy bios) doesn&#039;t matter at all.<br />So, you select pci-e graphics as your main GPU in your firmware setup(the &quot;bios&quot;), boot up bare metal windows and use it. Then you reboot to your linux host with a second GPU as host output, usually it is intel integrated GPU and having that &quot;primary&quot; discrete card drivers blacklisted and the device itself bound to pci-stub, futher ensuring that it&#039;s not used by anything in the host apart from vfio-pci.<br />Then, when the card is bound to vfio-pci, your start up your VM and live happily. That&#039;s how, i think, you want to live with your system.</p><br /><p>@paperinick:</p><div class="codebox"><pre><code>[user@crossfire ~]$ dnf info edk2.git-ovmf-x64.noarch Using metadata from Sun May 17 15:15:34 2015 (4 days, 6:49:58 hours old) Installed Packages Name : edk2.git-ovmf-x64 Arch : noarch Epoch : 0 Version : 0 Release : 20150518.b1004.g54ae9c0 Size : 11 M Repo : @System From repo : qemu-firmware-jenkins Summary : Open Virtual Machine Firmware URL : http://sourceforge.net/apps/mediawiki/tianocore/index.php?title=EDK2 License : BSD License (no advertising) with restrictions on use and redistribution Description : EFI Development Kit II : Open Virtual Machine Firmware : 64bit version</code></pre></div><p><a href="http://rghost.net/7Tlt6vgl5" rel="nofollow">I was too lazy to fix the paths, so i just did tar -cvz /usr/share/edk2.git/ovmf-x64/*.fd -f ovmf.tar.gz...</a></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530742">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530746" class="blockpost roweven"> <h2><span><span class="conr">#5149</span> <a href="viewtopic.php?pid=1530746#p1530746">2015-05-21 19:38:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91096">corna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-05-13</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:nicola@corna.info">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>A typical GPU ROM is 64 kilobytes, UEFI-enabled one is 128k. That&#039;s on AMD. On Nvidia cards there may be differences, try opening the downloaded files and your own VBIOS in hex editor and look. But actually, have you even bothered asking the manufacturer?<br />Anyway, i think both files should work, the one you&#039;ve extracted and the one you&#039;ve downloaded.</p><p>Where does it outputs? Well, depends on the number of GPUs you&#039;re assigning: when using windows7+OVMF, you&#039;ll have to use QXL GPU additionally. Originally OVMF did output it&#039;s text stuff(and tianocore logo) only to QXL, now it mirrors it to the assigned card. Then windows boot logo comes up and renders itself only on QXL, or, if there&#039;s no QXL present, <span class="bbu">nowhere</span>. That&#039;s why i&#039;ve warned you - there was some occasions where people thought that their VM hung, but it was loading silently with no output. It&#039;s only hanging if it eats 100% of one vCPU.</p></div></blockquote></div><p>Hi<br />I&#039;ve installed Windows in UEFI mode and I&#039;m trying to make it work with OVMF<br />When I have qxl activated it prints error 12, but if I remove it I don&#039;t have any output from the discrete card. I tried with the 3 UEFI-enabled ROMS found on techpowerup and with my Zotac ROM, but the result is always the same<br />How can I retrieve more debug informations?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530746">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1530756" class="blockpost rowodd"> <h2><span><span class="conr">#5150</span> <a href="viewtopic.php?pid=1530756#p1530756">2015-05-21 20:32:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>corna wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>A typical GPU ROM is 64 kilobytes, UEFI-enabled one is 128k. That&#039;s on AMD. On Nvidia cards there may be differences, try opening the downloaded files and your own VBIOS in hex editor and look. But actually, have you even bothered asking the manufacturer?<br />Anyway, i think both files should work, the one you&#039;ve extracted and the one you&#039;ve downloaded.</p><p>Where does it outputs? Well, depends on the number of GPUs you&#039;re assigning: when using windows7+OVMF, you&#039;ll have to use QXL GPU additionally. Originally OVMF did output it&#039;s text stuff(and tianocore logo) only to QXL, now it mirrors it to the assigned card. Then windows boot logo comes up and renders itself only on QXL, or, if there&#039;s no QXL present, <span class="bbu">nowhere</span>. That&#039;s why i&#039;ve warned you - there was some occasions where people thought that their VM hung, but it was loading silently with no output. It&#039;s only hanging if it eats 100% of one vCPU.</p></div></blockquote></div><p>Hi<br />I&#039;ve installed Windows in UEFI mode and I&#039;m trying to make it work with OVMF<br />When I have qxl activated it prints error 12, but if I remove it I don&#039;t have any output from the discrete card. I tried with the 3 UEFI-enabled ROMS found on techpowerup and with my Zotac ROM, but the result is always the same<br />How can I retrieve more debug informations?</p></div></blockquote></div><p>1. What windows do you use? Win 7? Have you followed the instructions from <a href="http://people.redhat.com/~lersek/ovmf-whitepaper-c770f8c.txt" rel="nofollow">OVMF whitepaper?</a> Win 8? Win 8 won&#039;t need QXL at all.<br />2. ISA debug console, like</p><div class="codebox"><pre><code>-debugcon file:debug.log -global isa-debugcon.iobase=0x402 </code></pre></div><p> should produce debug.log with OVMF logging.<br />Have you tried installing windows with QXL and then installing the drivers despite seeing code 12? Maybe QXL will fall off(windows will disable it) and the GPU will fire up nicely(like it happened on my setup).</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1530756">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=205">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=204">204</a> <a href="viewtopic.php?id=162768&amp;p=205">205</a> <strong>206</strong> <a href="viewtopic.php?id=162768&amp;p=207">207</a> <a href="viewtopic.php?id=162768&amp;p=208">208</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=207">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
