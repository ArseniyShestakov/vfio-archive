<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 179) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=179" title="Page 179" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=178" title="Page 178" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=180" title="Page 180" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=178">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=177">177</a> <a href="viewtopic.php?id=162768&amp;p=178">178</a> <strong>179</strong> <a href="viewtopic.php?id=162768&amp;p=180">180</a> <a href="viewtopic.php?id=162768&amp;p=181">181</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=180">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1510167" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#4451</span> <a href="viewtopic.php?pid=1510167#p1510167">2015-03-10 20:31:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>tritron4 wrote:</cite><blockquote><div><p>I wonder if anyone had been using asus A88x-Pro with kvm. I had it setup with xen 4.4.3 and I was able to pass R9 270 and couple of other&#160; ati cards. I was using 1201 bios version. I had flashed latest bios 1701. I can boot windows 8.1 without ati drivers and with vga none my R 270 displays out put but the moment I had installed ati drivers the system only boots to blue screen it get stuck and does not show desktop.&#160; I had to use this options vfio_iommu_type1 disable_hugepages=1. to work around bios bug. <br />Any tips on geting that motherboard working with kvm ? How I can get uefi emulation working under kvm. So far I had it load uefi but i dont see any options to boot from my hard drive,</p></div></blockquote></div><p><a href="https://docs.google.com/spreadsheet/ccc?key=0Aryg5nO-kBebdFozaW9tUWdVd2VHM0lvck95TUlpMlE&amp;usp=drive_web#gid=0" rel="nofollow">https://docs.google.com/spreadsheet/ccc … _web#gid=0</a><br />Check there for A88X. I remember someone did this on A88X.</p><p>BTW, which CPU do you have? Since the Unified North Bridge is hidden inside the CPU, it doesn&#039;t depends much on the motherboard.</p><p>My experience is... flawful, if you can say it like that. I have Athlon x4 750k and asus F2A55, and i experience TONS OF GLITCHES, PERFORMANCE HITS AND STUFF, but at least it works.<br />So far:<br />1. x-vga is semi-working. You might get it working, but eventually i needed the mlock=on force switch(it&#039;s on by default!) and it sometimes crashed resulting in host shutdown.<br />2. i couldn&#039;t get hugepages working using hugetlbfs.<br />3. some guys report performance speed ups when using npt=0, which is counter-intuitive.<br />4. i&#039;ve got myself a fully UEFI-compatible guest with no problems, except for broken GPU rom.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510167">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510168" class="blockpost roweven"> <h2><span><span class="conr">#4452</span> <a href="viewtopic.php?pid=1510168#p1510168">2015-03-10 20:43:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Yep, int10h is a gateway to the legacy VGA BIOS and would imply that you have VGA access to the device.&#160; It&#039;s effectively taking the legacy part of the CSM that we&#039;re trying to avoid and using it anyway.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510168">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510171" class="blockpost rowodd"> <h2><span><span class="conr">#4453</span> <a href="viewtopic.php?pid=1510171#p1510171">2015-03-10 20:54:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Yep, int10h is a gateway to the legacy VGA BIOS and would imply that you have VGA access to the device.&#160; It&#039;s effectively taking the legacy part of the CSM that we&#039;re trying to avoid and using it anyway.</p></div></blockquote></div><p>Okay...<br />But how does windows7 ins<span class="bbs">aner</span>taller outputs video? It works on pure-efi OVMF, but suddenly the real system breaks when trying to output graphics. <br />So, the installer supports GOP, and the system doesn&#039;t? That&#039;s weird as hell, but since it windowns - i could believe that. Maybe there&#039;s a special driver loaded somewhere.. Wait a second, it said &quot;windows can&#039;t continue installation in safe mode&quot; somewhere.. I&#039;ve forgot all the testing i&#039;ve done, dang it.</p><p>BTW, my windowns 8 VM refuses to read my real win7 partition, saying it&#039;s filesystem is &quot;RAW&quot;, while i&#039;m able to boot from that &quot;RAW&quot; filesystem. Heh, broken windows.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510171">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510172" class="blockpost roweven"> <h2><span><span class="conr">#4454</span> <a href="viewtopic.php?pid=1510172#p1510172">2015-03-10 21:02:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=39767">Naruni</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2010-08-05</span></dd> <dd><span>Posts: 29</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Yep, int10h is a gateway to the legacy VGA BIOS and would imply that you have VGA access to the device.&#160; It&#039;s effectively taking the legacy part of the CSM that we&#039;re trying to avoid and using it anyway.</p></div></blockquote></div><p>With all due respect sir, does that mean we will not have the capability (support in tianocore) of a win7 VM using a GPU that has been passed through via OVMF/VFIO?</p><p>That&#039;s a real shame, I don&#039;t have a win8 product key, and I certainly was not going to go buy one. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Edit: I also have not found anything relating as to why the CSM is bad, or why the CSM won&#039;t boot win7. Would you shed some light on that?</p> <p class="postedit"><em>Last edited by Naruni (2015-03-10 21:03:57)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510172">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510174" class="blockpost rowodd"> <h2><span><span class="conr">#4455</span> <a href="viewtopic.php?pid=1510174#p1510174">2015-03-10 21:10:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Naruni wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Yep, int10h is a gateway to the legacy VGA BIOS and would imply that you have VGA access to the device.&#160; It&#039;s effectively taking the legacy part of the CSM that we&#039;re trying to avoid and using it anyway.</p></div></blockquote></div><p>With all due respect sir, does that mean we will not have the capability (support in tianocore) of a win7 VM using a GPU that has been passed through via OVMF/VFIO?</p><p>That&#039;s a real shame, I don&#039;t have a win8 product key, and I certainly was not going to go buy one. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Edit: I also have not found anything relating as to why the CSM is bad, or why the CSM won&#039;t boot win7. Would you shed some light on that?</p></div></blockquote></div><p>Try my theory - fetching the drivers for GPU before the install. Some OEMs do that, so there&#039;s definitely a way to do this. But it seems like windowns 7 can not into UEFI at all.</p><p>Regarding your edit - CSM includes VGA. VGA is <a href="https://awilliam.github.io/presentations/KVM-Forum-2014/#/2/3" rel="nofollow">bad</a>. CSM will boot win7, but you won&#039;t have the advantages of UEFI.</p> <p class="postedit"><em>Last edited by Duelist (2015-03-10 21:12:36)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510174">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510175" class="blockpost roweven"> <h2><span><span class="conr">#4456</span> <a href="viewtopic.php?pid=1510175#p1510175">2015-03-10 21:10:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Naruni wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Yep, int10h is a gateway to the legacy VGA BIOS and would imply that you have VGA access to the device.&#160; It&#039;s effectively taking the legacy part of the CSM that we&#039;re trying to avoid and using it anyway.</p></div></blockquote></div><p>With all due respect sir, does that mean we will not have the capability (support in tianocore) of a win7 VM using a GPU that has been passed through via OVMF/VFIO?</p><p>That&#039;s a real shame, I don&#039;t have a win8 product key, and I certainly was not going to go buy one. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></div></blockquote></div><p>The benefit of OVMF for GPU assignment is when you can use it to avoid the need for VGA access to the device.&#160; That requires a legacy-free ROM on the device, a legacy-free firmware for the VM and a legacy-free guest operating system.&#160; Here you have a non-legacy-free operating system imposing legacy attributes on the VM firmware.&#160; To support that, you need to re-enable VGA arbitration and all the headaches that come with it and you&#039;ve lost the benefit that OVMF was meant to achieve for this use case.&#160; If you don&#039;t have a legacy-free guest OS, don&#039;t go down this path.&#160; Simple as that...</p><p>EDIT: imposing legacy attributes, not legacy-free attributes</p> <p class="postedit"><em>Last edited by aw (2015-03-10 21:23:06)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510175">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510177" class="blockpost rowodd"> <h2><span><span class="conr">#4457</span> <a href="viewtopic.php?pid=1510177#p1510177">2015-03-10 21:23:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=39767">Naruni</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2010-08-05</span></dd> <dd><span>Posts: 29</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Try my theory - fetching the drivers for GPU before the install. Some OEMs do that, so there&#039;s definitely a way to do this. But it seems like windowns 7 can not into UEFI at all.</p><p>Regarding your edit - CSM includes VGA. VGA is <a href="https://awilliam.github.io/presentations/KVM-Forum-2014/#/2/3" rel="nofollow">bad</a>. CSM will boot win7, but you won&#039;t have the advantages of UEFI.</p></div></blockquote></div><p>Thinking about that, the first approach I would try is figuring out if a driver is making that call during the install step, then replacing that driver with something that didn&#039;t make that call. On one of my notes I remember CLASSPNP.SYS causing lots of hangs when trying safe modes and such... I&#039;ll dig in a bit more. </p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>The benefit of OVMF for GPU assignment is when you can use it to avoid the need for VGA access to the device.&#160; That requires a legacy-free ROM on the device, a legacy-free firmware for the VM and a legacy-free guest operating system.&#160; Here you have a non-legacy-free operating system imposing legacy free attributes on the VM firmware.&#160; To support that, you need to re-enable VGA arbitration and all the headaches that come with it and you&#039;ve lost the benefit that OVMF was meant to achieve for this use case.&#160; If you don&#039;t have a legacy-free guest OS, don&#039;t go down this path.&#160; Simple as that...</p></div></blockquote></div><p>I had completely forgotten about arbitration and that OVMF removes VGA and all it&#039;s junk. It just wasnt clicking in my head that needing to do something about the 10h call is going to bring back VGA. Thanks.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510177">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510274" class="blockpost roweven"> <h2><span><span class="conr">#4458</span> <a href="viewtopic.php?pid=1510274#p1510274">2015-03-11 07:08:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89334">efeu</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-06</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89334">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><blockquote><div><p>#!/bin/bash<br />vfio-bind 0000:01:00.0 0000:01:00.1<br />qemu-system-x86_64 -enable-kvm -m 13312 -device virtio-balloon -cpu host,kvm=off -smp 8,sockets=1,cores=4,threads=2 \<br />-pflash /some/directory/OVMF.fd \<br />-rtc base=localtime,clock=host \<br />-vga none \<br />-device vfio-pci,host=01:00.0,multifunction=on,x-vga=on \<br />-device vfio-pci,host=01:00.1 \<br />-device virtio-scsi-pci,id=scsi \<br />-drive file=/some/directory/win81.iso,id=iso_install,if=none -device scsi-cd,drive=iso_install \<br />-drive file=/some/directory/windows81.raw,id=disk,format=raw,if=none,discard=on -device scsi-hd,drive=disk \<br />-cdrom /some/directory/virtio-win-0.1-100.iso \<br />-usb -usbdevice host:046d:c52b \<br />-usb -usbdevice host:413c:2005 \<br />-usb -usbdevice host:046d:c051 \<br />-soundhw hda \<br />-net tap -net nic,model=virtio,macaddr=52:54:00:12:34:57 \<br />-boot d</p><p>exit 0</p></div></blockquote></div><p>I am using the above script to start my VM. I&#039;d like to use virt-manager so can anyone explain to me how i come from the commands to the xml config file?</p> <p class="postedit"><em>Last edited by efeu (2015-03-11 07:24:50)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510274">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510287" class="blockpost rowodd"> <h2><span><span class="conr">#4459</span> <a href="viewtopic.php?pid=1510287#p1510287">2015-03-11 08:54:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p><a href="http://libvirt.org/drvqemu.html#xmlimport" rel="nofollow">http://libvirt.org/drvqemu.html#xmlimport</a></p><p>Try this, or check my posts for XML and change accordingly, but i use qemu-args that you should not do.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510287">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510299" class="blockpost roweven"> <h2><span><span class="conr">#4460</span> <a href="viewtopic.php?pid=1510299#p1510299">2015-03-11 10:49:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Will these provide a full &quot;pre-POST&quot; ROM file ?</p><div class="codebox"><pre><code># cd /sys/bus/pci/devices/0000:01:00.0/ # echo 1 &gt; rom # cat rom &gt; /tmp/image.rom # echo 0 &gt; rom</code></pre></div><p>I found them of AW&#039;s blog , yet they result in a 0 byte file . dmesg afterwards :</p><div class="codebox"><pre class="vscroll"><code>[Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:36 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents [Wed Mar 11 13:46:58 2015] vfio-pci 0000:01:00.0: Invalid ROM contents</code></pre></div><p>Any thoughts ?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510299">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510356" class="blockpost rowodd"> <h2><span><span class="conr">#4461</span> <a href="viewtopic.php?pid=1510356#p1510356">2015-03-11 15:01:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89334">efeu</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-06</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89334">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>With my NVidia 520 and 970 I used GPU-Z to get the romfile.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510356">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510360" class="blockpost roweven"> <h2><span><span class="conr">#4462</span> <a href="viewtopic.php?pid=1510360#p1510360">2015-03-11 15:19:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>efeu wrote:</cite><blockquote><div><p>With my NVidia 520 and 970 I used GPU-Z to get the romfile.</p></div></blockquote></div><p>It would not generate a &quot;pre-POST&quot; ROM as I mentioned earlier .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510360">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510364" class="blockpost rowodd"> <h2><span><span class="conr">#4463</span> <a href="viewtopic.php?pid=1510364#p1510364">2015-03-11 15:29:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=59241">tritron4</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-04-14</span></dd> <dd><span>Posts: 146</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=59241">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>tritron4 wrote:</cite><blockquote><div><p>I wonder if anyone had been using asus A88x-Pro with kvm. I had it setup with xen 4.4.3 and I was able to pass R9 270 and couple of other&#160; ati cards. I was using 1201 bios version. I had flashed latest bios 1701. I can boot windows 8.1 without ati drivers and with vga none my R 270 displays out put but the moment I had installed ati drivers the system only boots to blue screen it get stuck and does not show desktop.&#160; I had to use this options vfio_iommu_type1 disable_hugepages=1. to work around bios bug. <br />Any tips on geting that motherboard working with kvm ? How I can get uefi emulation working under kvm. So far I had it load uefi but i dont see any options to boot from my hard drive,</p></div></blockquote></div><p><a href="https://docs.google.com/spreadsheet/ccc?key=0Aryg5nO-kBebdFozaW9tUWdVd2VHM0lvck95TUlpMlE&amp;usp=drive_web#gid=0" rel="nofollow">https://docs.google.com/spreadsheet/ccc … _web#gid=0</a><br />Check there for A88X. I remember someone did this on A88X.</p><p>BTW, which CPU do you have? Since the Unified North Bridge is hidden inside the CPU, it doesn&#039;t depends much on the motherboard.</p><p>My experience is... flawful, if you can say it like that. I have Athlon x4 750k and asus F2A55, and i experience TONS OF GLITCHES, PERFORMANCE HITS AND STUFF, but at least it works.<br />So far:<br />1. x-vga is semi-working. You might get it working, but eventually i needed the mlock=on force switch(it&#039;s on by default!) and it sometimes crashed resulting in host shutdown.<br />2. i couldn&#039;t get hugepages working using hugetlbfs.<br />3. some guys report performance speed ups when using npt=0, which is counter-intuitive.<br />4. i&#039;ve got myself a fully UEFI-compatible guest with no problems, except for broken GPU rom.</p></div></blockquote></div><p>I have AMD A8-6600K APU&#160; I downgraded bios to 1401 and I can install win 8.1 <br />I get tons of&#160; Event logged [IO_PAGE_FAULT device=04:00.0 domain=0x0022<br />I tried to use ovmf but it just boots to interface and I dont see any way to boot installer</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510364">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510400" class="blockpost roweven"> <h2><span><span class="conr">#4464</span> <a href="viewtopic.php?pid=1510400#p1510400">2015-03-11 17:27:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>tritron4 wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>tritron4 wrote:</cite><blockquote><div><p>I wonder if anyone had been using asus A88x-Pro with kvm. I had it setup with xen 4.4.3 and I was able to pass R9 270 and couple of other&#160; ati cards. I was using 1201 bios version. I had flashed latest bios 1701. I can boot windows 8.1 without ati drivers and with vga none my R 270 displays out put but the moment I had installed ati drivers the system only boots to blue screen it get stuck and does not show desktop.&#160; I had to use this options vfio_iommu_type1 disable_hugepages=1. to work around bios bug. <br />Any tips on geting that motherboard working with kvm ? How I can get uefi emulation working under kvm. So far I had it load uefi but i dont see any options to boot from my hard drive,</p></div></blockquote></div><p><a href="https://docs.google.com/spreadsheet/ccc?key=0Aryg5nO-kBebdFozaW9tUWdVd2VHM0lvck95TUlpMlE&amp;usp=drive_web#gid=0" rel="nofollow">https://docs.google.com/spreadsheet/ccc … _web#gid=0</a><br />Check there for A88X. I remember someone did this on A88X.</p><p>BTW, which CPU do you have? Since the Unified North Bridge is hidden inside the CPU, it doesn&#039;t depends much on the motherboard.</p><p>My experience is... flawful, if you can say it like that. I have Athlon x4 750k and asus F2A55, and i experience TONS OF GLITCHES, PERFORMANCE HITS AND STUFF, but at least it works.<br />So far:<br />1. x-vga is semi-working. You might get it working, but eventually i needed the mlock=on force switch(it&#039;s on by default!) and it sometimes crashed resulting in host shutdown.<br />2. i couldn&#039;t get hugepages working using hugetlbfs.<br />3. some guys report performance speed ups when using npt=0, which is counter-intuitive.<br />4. i&#039;ve got myself a fully UEFI-compatible guest with no problems, except for broken GPU rom.</p></div></blockquote></div><p>I have AMD A8-6600K APU&#160; I downgraded bios to 1401 and I can install win 8.1 <br />I get tons of&#160; Event logged [IO_PAGE_FAULT device=04:00.0 domain=0x0022<br />I tried to use ovmf but it just boots to interface and I dont see any way to boot installer</p></div></blockquote></div><p>Precisely. <strong>AMD APU(and APU-based) products with Trinity and Richland microarchitecture seem to have broken IOMMU.</strong><br />It gets IO_PAGE_FAULT everywhere when using x-vga. However, on rare occasions, when the weather on mars is partly cloudy with mild winds, it might work. Just as i stated before.<br />Check out huge errata list on those CPUs:<br /><a href="http://amd-dev.wpengine.netdna-cdn.com/wordpress/media/2012/10/48931_15h_Mod_10h-1Fh_Rev_Guide.pdf" rel="nofollow">http://amd-dev.wpengine.netdna-cdn.com/ … _Guide.pdf</a></p><p>When using OVMF everything is much more stable.<br />If you can&#039;t find your disks inside OVMF, you&#039;re just doing something wrong.<br />Check out how i attached my disks:</p><div class="codebox"><pre><code>-device ahci \ -device virtio-scsi-pci \ -device scsi-cd,drive=install \ -device ide-cd,bus=ide.1,drive=virtiocd \ -drive file=/mnt/hdd/qemu/windows8.iso,id=install,if=none \ -drive file=/mnt/hdd/qemu/virtio.iso,id=virtiocd,if=none \</code></pre></div><p>Again, i don&#039;t remember which scsi controller works, but since it&#039;s temporary - just add both. You can pin-point that to one, if you want.<br />The main disk is connected that way:</p><div class="codebox"><pre><code>-device virtio-blk-pci,drive=disk1 \ -drive file=/mnt/hdd/qemu/win8.img,id=disk1,format=raw,if=none \</code></pre></div><p>Please note that i am using -M pc and also -boot menu=on(though i&#039;m not sure this option is relevant with OVMF, you can just drop it out after the initial setup).</p><p>You <strong>MUST</strong> have UEFI-bootable iso image. Otherwise it won&#039;t work, obviously. Use ovmf-pure-efi, not -with-csm one.</p><p>Downgrading bios doesn&#039;t matter much - i&#039;ve tried <span class="bbu">every</span> bios for my motherboard with IOMMU support, observing no difference at all, so, i guess, latest is best.</p> <p class="postedit"><em>Last edited by Duelist (2015-03-11 17:30:38)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510400">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510505" class="blockpost rowodd"> <h2><span><span class="conr">#4465</span> <a href="viewtopic.php?pid=1510505#p1510505">2015-03-12 00:24:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=59241">tritron4</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-04-14</span></dd> <dd><span>Posts: 146</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=59241">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well I got kvm working windows 8.1 options vfio_iommu_type1 disable_hugepages=1 I wonder if there is a way to pass</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510505">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510688" class="blockpost roweven"> <h2><span><span class="conr">#4466</span> <a href="viewtopic.php?pid=1510688#p1510688">2015-03-12 18:59:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p><a href="https://msdn.microsoft.com/en-us/library/hh824938.aspx" rel="nofollow">https://msdn.microsoft.com/en-us/library/hh824938.aspx</a><br />Handy link for those who migrate from disk interface to disk interface often.<br />How-to avoid BSOD 7B after changing VM&#039;s configuration.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510688">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1510690" class="blockpost rowodd"> <h2><span><span class="conr">#4467</span> <a href="viewtopic.php?pid=1510690#p1510690">2015-03-12 19:02:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77628">mbirkis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77628">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>mbirkis wrote:</cite><blockquote><div><p>I have been searching abit in this forum and on aw&#039;s vfio blog faq. When going through the talking points you had aw i got the impression that if i switch to using OVMF and UEFI on my windows8.1 guest, the vga arbiter issue with Nvidia proprietary host drivers is a non issue (your faq question 9) and i can install and use the nvidia driver on the host without patching?</p><p>Sorry if this question has been answered before i just had a hard time finding the answer that looked obvious from your talking points &quot;VFIO, OVMF, GPU, and You &quot;.</p></div></blockquote></div><p>It&#039;s my understanding that this is true.&#160; The problem with the nvidia proprietary driver on the host is that it takes the VGA arbiter lock and never releases it.&#160; The expected usage model for the VGA arbiter is that the lock is held only while accesses to the legacy VGA space are being used.&#160; The lock is then released allowing other users of the arbiter a chance to acquire the lock and perform their access.&#160; This is how pseudo-concurrent VGA access works with multiple VGA assignment VMs.&#160; Therefore, so long as our VM is not performing VGA accesses, which can be enforced by disabling CONFIG_VFIO_PCI_VGA (or a vfio-pci module option I intend to add), there is no need to patch the host nvidia driver to prevent VGA locking.</p><p>Note however that while OVMF generally implies legacy-free, there is a legacy compatibility module, the CSM, available in some OVMF builds.&#160; The CSM will potentially do legacy VGA accesses and put you back in the position of needing to patch host drivers for VGA arbitration.&#160; You therefore want to make use of the &quot;pure&quot; version of OVMF to avoid this.&#160; On Fedora, the OVMF file to use is /usr/share/edk2.git/ovmf-x64/OVMF_CODE-pure-efi.fd (avoid the &quot;with-csm&quot; versions).&#160; Your builds may name them differently.</p></div></blockquote></div><p>Just got around to testing this on my setup and so far it works without issues. I am now running standard Arch kernel, libvirt, ovmf etc. With the proprietary Nvidia driver for Host.</p><p>Thank you so much for all the awesome work and guideance you have given on this subject.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1510690">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511177" class="blockpost roweven"> <h2><span><span class="conr">#4468</span> <a href="viewtopic.php?pid=1511177#p1511177">2015-03-14 18:50:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p><strong>A GLORIOUS UPDATE :</strong></p><p>I used <strong>&quot;nvagetbios&quot;</strong> to get a full &quot;pre-POST&quot; ROM dump for BOTH of my NVIDIA cards (GT610 + GTX770) .</p><p>I had to make the cards I want to dump the ROMs from secondary in the host&#039;s perspective for this to succeed .</p><div class="codebox"><pre><code>nvagetbios -c 1 -s prom &gt; /VMs/GT610.rom AND nvagetbios -c 2 -s prom &gt; /VMs/GTX770.rom</code></pre></div><p>-c 1 &amp; -c 2 are the cards numbers which we want to dump . 0 being the host&#039;s primary obviously .</p><p>Each card threw a 1MB ROM file , as opposed to 164K files dumped from GPU-Z .</p><p>I used these in my VMs , and got these results :</p><p>1 - The GT610 no longer have rebooting issues , I can now reboot from within Windows without a problem . (It used to give a black screen) .</p><p>2 - I can now passthrough the GTX770 while it is the PRIMARY GPU of the host ! No issues at all (headless server) .</p><p>nvagetbios is part of envytools-git package (AUR) .</p><p>Hope this helps ! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by Denso (2015-03-14 18:54:24)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511177">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511197" class="blockpost rowodd"> <h2><span><span class="conr">#4469</span> <a href="viewtopic.php?pid=1511197#p1511197">2015-03-14 20:33:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=59241">tritron4</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-04-14</span></dd> <dd><span>Posts: 146</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=59241">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So is there virt manager package that supports ovmf? I am testing my hp server with kvm ovmf and I had installed server 2012 R2 as a test&#160; and it boots and with cirrus it freezes.<br />What I am doing wrong. Is there a special vga bios for radeon R9 270 for uefi ?</p><div class="codebox"><pre><code>#/bin/sh! /usr/bin/qemu-system-x86_64 -enable-kvm -M q35 -m 2048 -cpu host \ -smp 4,sockets=2,cores=2,threads=1 -vga cirrus -spice port=5910,addr=0.0.0.0,disable-ticketing \ -drive if=pflash,format=raw,readonly,file=/usr/share/ovmf/ovmf_x64.bin -drive if=pflash,format=raw,file=/usr/share/ovmf/ovmf_x64.bin \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device virtio-scsi-pci,id=scsi \ -net nic,model=e1000,macaddr=64:C5:63:4D:A4:44 -net bridge,br=xenbr0 \ -drive file=/data/kvm/win.img,id=disk,format=raw,if=none -device scsi-hd,drive=disk \ -drive file=/home/kvm/iso/en_windows_server_2012_r2.iso,id=isocd,if=none -device scsi-cd,drive=isocd \ -drive file=/home/kvm/iso/virtio-win-0.1-100.iso,id=isocd2,if=none -device ide-cd,drive=isocd2</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511197">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511290" class="blockpost roweven"> <h2><span><span class="conr">#4470</span> <a href="viewtopic.php?pid=1511290#p1511290">2015-03-15 09:20:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Naruni wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Yep, int10h is a gateway to the legacy VGA BIOS and would imply that you have VGA access to the device.&#160; It&#039;s effectively taking the legacy part of the CSM that we&#039;re trying to avoid and using it anyway.</p></div></blockquote></div><p>With all due respect sir, does that mean we will not have the capability (support in tianocore) of a win7 VM using a GPU that has been passed through via OVMF/VFIO?</p><p>That&#039;s a real shame, I don&#039;t have a win8 product key, and I certainly was not going to go buy one. :(</p><p>Edit: I also have not found anything relating as to why the CSM is bad, or why the CSM won&#039;t boot win7. Would you shed some light on that?</p></div></blockquote></div><p>Upstream OVMF co-maintainer here. Finally decided to register an account and chime in. Alex has been holding the front alone for way too long. :) I&#039;ve been lurking around as r/o, but today I&#039;ll comment too.</p><p>So, I continue to see a lot of confusion both in the questions here and in the guides in the archlinux wiki (which is regrettable, because the archlinux wiki is usually one of the best sources of user-oriented technical info on the tubes). I&#039;m happy to announce here too that the OVMF whitepaper has been released recently, and it should answer most, if not all, your questions (and probably even questions you have not had thus far) regarding OVMF. You can find the whitepaper (plaintext edition) in the <a href="http://www.linux-kvm.org/page/OVMF" rel="nofollow">KVM wiki</a> or in my <a href="http://people.redhat.com/~lersek/ovmf-whitepaper-c770f8c.txt" rel="nofollow">personal webspace</a>.</p><p>Specifically, as to the question whether Win7 / Windows 2008 R2 can be used with OVMF (<strong>without</strong> a CSM): yes, it can; and you should be able to do GPU passthrough as well.</p><p>First, just for installing &amp; then booting a Win7 or Windows 2008 R2 guest, please refer to the following sections in the whitepaper:</p><ul><li><div class="codebox"><pre><code>Supported guest operating systems | Notes about Windows Server 2008 R2</code></pre></div></li><li><div class="codebox"><pre><code>Compatibility Support Module (CSM)</code></pre></div><p> -- strictly as background material only, you do <strong>not</strong> need to do anything with this</p></li><li><div class="codebox"><pre><code>Select features | Video driver</code></pre></div></li></ul><p>Windows 2008 R2 is a UEFI system &quot;in general&quot;, it&#039;s just its stock (default) video driver that has this inconvenient dependency on Int10h. So, OVMF (the &quot;pure&quot; build, no CSM) fakes an Int10h handler for just this OS, which is pretty raw, but enough for the user to install the guest, and then to update / install &quot;real&quot; video drivers that do not have this Int10h dependency (and then other resolutions and S3 etc become available.)</p><p>In short,</p><ol class="decimal"><li><p>You should create a virtual machine with two video adapters. The first should be QXL, the second should be your passthru GPU. Use the &quot;pure UEFI&quot; build of OVMF from Gerd&#039;s package.</p></li><li><p>QXL will allow you to install Win7 / Win2008R2 in 1024x768x32.</p></li><li><p>Update the guest&#039;s video driver for the QXL card from the stock windows driver (which OVMF fools, with regard to Int10h, see the material above) to the real QXL XDDM driver. Look at <a href="http://www.spice-space.org/download.html" rel="nofollow">http://www.spice-space.org/download.html</a> , under Guest | Windows binaries.</p></li><li><p>Install the driver for your secondary (passthru) GPU.</p></li><li><p>Potentially mark the secondary (passthru) GPU as primary desktop provider.</p></li></ol><p>Admittedly, I did not test the &quot;GPU passthru&quot; part with Windows 2008 R2 (only with Windows Server 2012 R2), but the OS installation I definitely tested, and I don&#039;t see any reason why GPU passthrough (and the dual display) should not work.</p><p>Finally, an unrelated, but nonetheless important point -- I recommend that everyone use libvirt. It supports OVMF very nicely. Please refer to the following section in the whitepaper: </p><div class="codebox"><pre><code>Installation of OVMF guests with virt-manager and virt-install</code></pre></div><p>.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511290">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511359" class="blockpost rowodd"> <h2><span><span class="conr">#4471</span> <a href="viewtopic.php?pid=1511359#p1511359">2015-03-15 15:17:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>YAY! Lazlo has finally joined us!</p><div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><p>Windows 2008 R2 is a UEFI system &quot;in general&quot;, it&#039;s just its stock (default) video driver that has this inconvenient dependency on Int10h. So, OVMF (the &quot;pure&quot; build, no CSM) fakes an Int10h handler for just this OS, which is pretty raw, but enough for the user to install the guest, and then to update / install &quot;real&quot; video drivers that do not have this Int10h dependency (and then other resolutions and S3 etc become available.)</p></div></blockquote></div><p>Damn, i&#039;ve developed a special feeling for deep problems. My guess is finally proven.</p><div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><p>In short,</p><ol class="decimal"><li><p>You should create a virtual machine with two video adapters. The first should be QXL, the second should be your passthru GPU. Use the &quot;pure UEFI&quot; build of OVMF from Gerd&#039;s package.</p></li><li><p>QXL will allow you to install Win7 / Win2008R2 in 1024x768x32.</p></li><li><p>Update the guest&#039;s video driver for the QXL card from the stock windows driver (which OVMF fools, with regard to Int10h, see the material above) to the real QXL XDDM driver. Look at <a href="http://www.spice-space.org/download.html" rel="nofollow">http://www.spice-space.org/download.html</a> , under Guest | Windows binaries.</p></li><li><p>Install the driver for your secondary (passthru) GPU.</p></li><li><p>Potentially mark the secondary (passthru) GPU as primary desktop provider.</p></li></ol></div></blockquote></div><p><span class="bbs">Let me ask an important question:<br />-device <strong>qxl</strong> or -device <strong>qxl-vga</strong>?</span><br />Nevermind, this is covered in OVMF whitepaper.</p><div class="quotebox"><blockquote><div><p># A Spice QXL GPU is recommended as the primary VGA-compatible display<br />&#160; # device. It is a full-featured virtual video card, with great operating<br />&#160; # system driver support. OVMF supports it too.<br />&#160; OPTS=&quot;$OPTS -device qxl-vga&quot;</p></div></blockquote></div><p>They are both qxl.<br />I usually add -device qxl for... input purposes - that way qemu creates an SDL window where it can grab keyboard and mouse. But it didn&#039;t help.<br />Anyway, i&#039;ll try doing your way ASAP.</p><p>By the way, i guess, we get two screens connected to the machine, one to QXL and one to GPU? That&#039;s a little bit inconvenient, i guess it&#039;s OK to drop QXL device after installing GPU&#039;s drivers.</p> <p class="postedit"><em>Last edited by Duelist (2015-03-15 15:27:22)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511359">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511372" class="blockpost roweven"> <h2><span><span class="conr">#4472</span> <a href="viewtopic.php?pid=1511372#p1511372">2015-03-15 15:43:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=27289">ewaller</a></strong></dt> <dd class="usertitle"><strong>Forum Moderator</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/27289.jpg?m=1406180442" width="80" height="80" alt="" /></dd> <dd><span>From: Pasadena, CA</span></dd> <dd><span>Registered: 2009-07-13</span></dd> <dd><span>Posts: 10,547</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=27289">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><p>Upstream OVMF co-maintainer here. Finally decided to register an account and chime in. ...<br />So, I continue to see a lot of confusion both in the questions here and in the guides in the archlinux wiki (which is regrettable, because the archlinux wiki is usually one of the best sources of user-oriented technical info on the tubes). ...<br />I recommend that everyone use libvirt. It supports OVMF very nicely. Please refer to the following section in the whitepaper: </p><div class="codebox"><pre><code>Installation of OVMF guests with virt-manager and virt-install</code></pre></div><p>.</p></div></blockquote></div><p>Every now and again a first post comes along that blows me away.&#160; It is an honor to have you join us.<br />Please, don&#039;t be bashful about improving the wiki if you would like to do so.</p> </div> <div class="postsignature postmsg"><hr /><p>Nothing is too wonderful to be true, if it be consistent with the laws of nature -- <em>Michael Faraday</em><br />Like you, I have no idea what you are doing, but I am pretty sure it is wrong...<em>Jasonwryan</em><br />----<br /><a href="http://www.catb.org/~esr/faqs/smart-questions.html" rel="nofollow">How to Ask Questions the Smart Way</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511372">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511383" class="blockpost rowodd"> <h2><span><span class="conr">#4473</span> <a href="viewtopic.php?pid=1511383#p1511383">2015-03-15 16:06:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Anyway, i&#039;ll try doing your way ASAP.</p></div></blockquote></div><p>Right, I&#039;ve become curious enough to try it myself as well :)</p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>By the way, i guess, we get two screens connected to the machine, one to QXL and one to GPU? That&#039;s a little bit inconvenient, i guess it&#039;s OK to drop QXL device after installing GPU&#039;s drivers.</p></div></blockquote></div><p>Yes, two displays. I didn&#039;t find it inconvenient with Windows Server 2012 R2. I simply would not open the QXL display with virt-manager (in fact I wouldn&#039;t even start virt-manager, just start the guest with &quot;virsh start&quot;). So that would cause me to lose a tiny bit of boot progress info was sent to the &quot;main&quot; (QXL) display, but eg. the windows login screen is already displayed on the passthru GPU (once that GPU is configured as primary desktop). I wanted to keep the QXL display just in case (troubleshooting etc).</p><p>But, yes, I guess once the GPU works okay, you might be able to drop QXL completely.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511383">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511388" class="blockpost roweven"> <h2><span><span class="conr">#4474</span> <a href="viewtopic.php?pid=1511388#p1511388">2015-03-15 16:16:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ewaller wrote:</cite><blockquote><div><p>Please, don&#039;t be bashful about improving the wiki if you would like to do so.</p></div></blockquote></div><p>Okay, I fixed two mistakes in <a href="https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF" rel="nofollow">https://wiki.archlinux.org/index.php/PC … h_via_OVMF</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511388">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1511477" class="blockpost rowodd"> <h2><span><span class="conr">#4475</span> <a href="viewtopic.php?pid=1511477#p1511477">2015-03-15 19:32:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><ol class="decimal"><li><p>You should create a virtual machine with two video adapters. The first should be QXL, the second should be your passthru GPU. Use the &quot;pure UEFI&quot; build of OVMF from Gerd&#039;s package.</p></li><li><p>QXL will allow you to install Win7 / Win2008R2 in 1024x768x32.</p></li><li><p>Update the guest&#039;s video driver for the QXL card from the stock windows driver (which OVMF fools, with regard to Int10h, see the material above) to the real QXL XDDM driver. Look at <a href="http://www.spice-space.org/download.html" rel="nofollow">http://www.spice-space.org/download.html</a> , under Guest | Windows binaries.</p></li><li><p>Install the driver for your secondary (passthru) GPU.</p></li><li><p>Potentially mark the secondary (passthru) GPU as primary desktop provider.</p></li></ol><p>Admittedly, I did not test the &quot;GPU passthru&quot; part with Windows 2008 R2 (only with Windows Server 2012 R2), but the OS installation I definitely tested, and I don&#039;t see any reason why GPU passthrough (and the dual display) should not work.</p></div></blockquote></div><p>I tested it now, with a brand new Windows 2008 R2 guest. It works. (Checked it with Unigine Valley Benchmark.)</p><p>There&#039;s one small hiccup in step 5: as soon as the pass-through GPU&#039;s driver was installed and the guest was rebooted, the QXL display stopped working (exclamation mark in device manager, code 43). However, at that point the passthrough display worked fine, so I didn&#039;t bother trying to figure out why I could not have *dual* display. I was satisfied with the one passthrough display. IOW, step 5 became mandatory / automatic, effectively.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1511477">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=178">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=177">177</a> <a href="viewtopic.php?id=162768&amp;p=178">178</a> <strong>179</strong> <a href="viewtopic.php?id=162768&amp;p=180">180</a> <a href="viewtopic.php?id=162768&amp;p=181">181</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=180">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
