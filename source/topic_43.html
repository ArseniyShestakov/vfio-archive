<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 43) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=43" title="Page 43" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=42" title="Page 42" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=44" title="Page 44" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=42">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=41">41</a> <a href="viewtopic.php?id=162768&amp;p=42">42</a> <strong>43</strong> <a href="viewtopic.php?id=162768&amp;p=44">44</a> <a href="viewtopic.php?id=162768&amp;p=45">45</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=44">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1373671" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1051</span> <a href="viewtopic.php?pid=1373671#p1373671">2014-01-22 04:46:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ironicbadger wrote:</cite><blockquote><div><p>If iommu isn&#039;t present in the default line audio via HDMI works great, as soon as I switch it on and redo grub and reboot (regardless of whether the host is actually running a guest of not) it doesn&#039;t play audio. So weird. </p><p>Is this likely to be a motherboard issue? I&#039;m thinking so as I have an identical software setup on another machine (in my sig) and that works flawlessly.</p></div></blockquote></div><p>Hmm, wild guess, but I wonder if intel_iommu=on,igfx_off would fix the issues?</p><p>I have the same board, and for me, the DisplayPort audio doesn&#039;t work even without IOMMU enabled.</p><p>-----------</p><p>I downloaded the 3.13 final kernel, and applied those two patches (note that &#039;patch&#039; reported &quot;patch ends in middle of line&quot;).&#160; </p><p>Now my groups are as they were with ACS override, I think.</p><p>(It is really quite lame that SuperMicro wasted a few ports -- they could&#039;ve at least given that switch a 2x upstream link...)</p><div class="codebox"><pre class="vscroll"><code>### Group 0 ### 00:00.0 Host bridge [0600]: Intel Corporation Xeon E3-1200 v3 Processor DRAM Controller [8086:0c08] (rev 06) ### Group 1 ### 00:01.0 PCI bridge [0604]: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor PCI Express x16 Controller [8086:0c01] (rev 06) 01:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Juniper PRO [Radeon HD 5750] [1002:68be] 01:00.1 Audio device [0403]: Advanced Micro Devices, Inc. [AMD/ATI] Juniper HDMI Audio [Radeon HD 5700 Series] [1002:aa58] ### Group 2 ### 00:02.0 VGA compatible controller [0300]: Intel Corporation Xeon E3-1200 v3 Processor Integrated Graphics Controller [8086:041a] (rev 06) ### Group 3 ### 00:03.0 Audio device [0403]: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor HD Audio Controller [8086:0c0c] (rev 06) ### Group 4 ### 00:14.0 USB controller [0c03]: Intel Corporation 8 Series/C220 Series Chipset Family USB xHCI [8086:8c31] (rev 05) ### Group 5 ### 00:16.0 Communication controller [0780]: Intel Corporation 8 Series/C220 Series Chipset Family MEI Controller #1 [8086:8c3a] (rev 04) 00:16.3 Serial controller [0700]: Intel Corporation 8 Series/C220 Series Chipset Family KT Controller [8086:8c3d] (rev 04) ### Group 6 ### 00:19.0 Ethernet controller [0200]: Intel Corporation Ethernet Connection I217-LM [8086:153a] (rev 05) ### Group 7 ### 00:1b.0 Audio device [0403]: Intel Corporation 8 Series/C220 Series Chipset High Definition Audio Controller [8086:8c20] (rev 05) ### Group 8 ### 00:1c.0 PCI bridge [0604]: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #1 [8086:8c10] (rev d5) ### Group 9 ### 00:1c.1 PCI bridge [0604]: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #2 [8086:8c12] (rev d5) ### Group 10 ### 00:1c.3 PCI bridge [0604]: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #4 [8086:8c16] (rev d5) ### Group 11 ### 00:1c.4 PCI bridge [0604]: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #5 [8086:8c18] (rev d5) ### Group 12 ### 00:1d.0 USB controller [0c03]: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #1 [8086:8c26] (rev 05) ### Group 13 ### 00:1f.0 ISA bridge [0601]: Intel Corporation C226 Series Chipset Family Server Advanced SKU LPC Controller [8086:8c56] (rev 05) 00:1f.2 SATA controller [0106]: Intel Corporation 8 Series/C220 Series Chipset Family 6-port SATA Controller 1 [AHCI mode] [8086:8c02] (rev 05) 00:1f.3 SMBus [0c05]: Intel Corporation 8 Series/C220 Series Chipset Family SMBus Controller [8086:8c22] (rev 05) 00:1f.6 Signal processing controller [1180]: Intel Corporation 8 Series Chipset Family Thermal Management Controller [8086:8c24] (rev 05) ### Group 14 ### 02:00.0 SATA controller [0106]: ASMedia Technology Inc. ASM1062 Serial ATA Controller [1b21:0612] (rev 01) ### Group 15 ### 03:00.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) ### Group 16 ### 04:01.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) ### Group 17 ### 04:04.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) ### Group 18 ### 04:05.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) ### Group 19 ### 04:07.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) ### Group 20 ### 04:09.0 PCI bridge [0604]: PLX Technology, Inc. PEX 8606 6 Lane, 6 Port PCI Express Gen 2 (5.0 GT/s) Switch [10b5:8606] (rev ba) ### Group 21 ### 06:00.0 PCI bridge [0604]: PLX Technology, Inc. PEX8112 x1 Lane PCI Express-to-PCI Bridge [10b5:8112] (rev aa) 07:04.0 Multimedia audio controller [0401]: C-Media Electronics Inc CMI8788 [Oxygen HD Audio] [13f6:8788] ### Group 22 ### 09:00.0 USB controller [0c03]: Renesas Technology Corp. uPD720201 USB 3.0 Host Controller [1912:0014] (rev 03) ### Group 23 ### 0a:00.0 PCI bridge [0604]: Texas Instruments XIO2213A/B/XIO2221 PCI Express to PCI Bridge [Cheetah Express] [104c:823e] (rev 01) 0b:00.0 FireWire (IEEE 1394) [0c00]: Texas Instruments XIO2213A/B/XIO2221 IEEE-1394b OHCI Controller [Cheetah Express] [104c:823f] (rev 01) ### Group 24 ### 0c:00.0 Ethernet controller [0200]: Intel Corporation I210 Gigabit Network Connection [8086:1533] (rev 03)</code></pre></div><p>Now, I do still have a few remaining issues:<br />* Can&#039;t seem to suspend host while guest is inactive.&#160; The system locks up, until the watchdog resets the computer.&#160; Either that, or the VM crashes, and the GPU becomes unusable until host reboot.<br />* Can&#039;t get qemu to start with q35 in EFI mode.&#160; I&#039;ll need that if I want to use the GOP mode on the new video card I&#039;ve ordered.<br />* I really don&#039;t want to have to kill GL on the host and use VGA mode in the guest.&#160; Fixing EFI mode will address this.<br />* Can&#039;t get video card to fire up as secondary; instead, I see garbage on the Radeon, and then the guest reboots.&#160; <br />* Currently, Windows 8.1 boots &quot;blind&quot; due to being the only VGA device, but lacking x-vga=on.&#160; Interestingly enough, the desktop works perfectly.</p> <p class="postedit"><em>Last edited by DanaGoyette (2014-01-22 06:56:53)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373671">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373698" class="blockpost roweven"> <h2><span><span class="conr">#1052</span> <a href="viewtopic.php?pid=1373698#p1373698">2014-01-22 08:26:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72881">alexis_evo</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-04</span></dd> <dd><span>Posts: 33</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=72881">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>andy123 wrote:</cite><blockquote><div><div class="quotebox"><cite>alexis_evo wrote:</cite><blockquote><div><p>New problem since restarting after the last screen tear... now the monitor will randomly blank for 2-3 seconds. Seems like the GPU is trying to adjust something on the display, since the On Screen Menu on my monitor will not work/disappears whenever the screen blanks. It happens very often, every 5-10 seconds. After waiting 10-15 minutes, it occasionally stops doing it for 20 minutes, then starts again. Only occurs when a 3D game is at the forefront. Alt tabbing out of the game to the desktop causes it to immediately stop, and it resumes when I tab back in.</p><p>Really don&#039;t know what could be causing this...</p></div></blockquote></div><p>I had a kinda similar issue, but I don&#039;t think it was reproducible. <br />My primary screen (1920x1080 hdmi) &quot;blanked&quot; like you described it and said something about &quot;wrong input/resolution&quot; with Civ5 up, but worked fine when on the desktop. The second screen (1280x1024 vga) still worked on the desktop at the same time.<br />I think I fixed the issue by messing with the settings and restarting the game. Something like, starting with 1600x900 and setting to 1920x1080 ingame…<br />In general, I had far less issues in Windows 8(.1) with resolution changes, multiple monitors and so on.</p></div></blockquote></div><p>Nope... changing resolution doesn&#039;t fix it. Haven&#039;t made any progress on fixing this.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373698">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373705" class="blockpost rowodd"> <h2><span><span class="conr">#1053</span> <a href="viewtopic.php?pid=1373705#p1373705">2014-01-22 09:24:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78789">iamtakingiteasy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-21</span></dd> <dd><span>Posts: 3</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Flyser wrote:</cite><blockquote><div><p>As far as I know, no. It definitely wouldn&#039;t work on my system.</p></div></blockquote></div><p>Many thanks to you! After making my integrated video primary GPU i have successfully passed through 780 GTX!</p><p>One note, i have observed, though: nvidia GPU still has to be in primary PCI-E slot, otherwise guest OS will freeze whole host upon booting.</p><p>But in primary slot everything is working great, even rebooting goes flawlessly, without any previously-reported host crashes.</p> <p class="postedit"><em>Last edited by iamtakingiteasy (2014-01-22 09:25:00)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373705">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373790" class="blockpost roweven"> <h2><span><span class="conr">#1054</span> <a href="viewtopic.php?pid=1373790#p1373790">2014-01-22 17:31:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78821">roms</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-22</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello, I would like to thank everybody contributing to this incredible usefull thread. I got VGA-Passthrough working with the following setup:</p><p>Hardware<br />Processor: Intel Core i5 4670<br />Mainboard: DH87RL (BIOS-Version 0323) with HD4600 onboard (used for Linux-Host)<br />VGA: AMD Radeon HD5450 (used for Windows-Guest)</p><p>Software<br />Fedora 20<br />Kernel 3.13.0.rc8 with Intel vag arbiter patch<br />Qemu from git<br />Seabios from git<br />BIOS: Using Legacy-Boot (aka. BIOS-Mode), Fastboot (minimal hardware initialisation) is off<br />Guest: Win7 with current Radeon driver and Virtio-driver for HDD</p><p>Kernel-Cmdline: added &quot;pci-stub.ids=1002:68e1,1002:aa68 intel_iommu=on&quot;<br />Qemu-Startup (without USB stuff):<br />qemu-system-x86_64 -bios bios.bin -cpu host -smp 2,sockets=1,cores=2,threads=1 -m 8192 -mem-prealloc -mem-path /dev/hugepages -M q35 -enable-kvm -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=01:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1 -device vfio-pci,host=01:00.1,bus=pcie.0&#160; -drive file=/dev/md0,format=raw,if=virtio -drive file=/dev/md1,format=raw,if=virtio -parallel none -serial none -rtc clock=host,base=localtime -monitor stdio -vga none</p><p>I had to attach the VGA-Sound-Device to pcie.0, not root.1, as someone mentioned earlier in this thread. Otherwise the guest will lock up with a bluescreen (crashing in atikmpag.sys) during startup. Except the memory leak (I will try patch later), everything is working really great.</p><p>I use an USB-Switch (Delock USB 2.0 Sharing Switch) together with an USB-Hub to share one set of Mouse/Keyboard between host and guest. The USB-devices are attached to qemu with &quot;-readconfig docs/ich9-ehci-uhci.cfg -device usb-host,bus=ehci.0,hostbus=3,hostport=2.1 -device usb-host,bus=ehci.0,hostbus=3,hostport=2.2&quot;.</p><p>Also, I use my normal &quot;Multiboot-Windows&quot; as the guest-OS in the VM. See <a href="http://fds-team.de/cms/articles/2013-12/use-a-real-windows-7-partition-in-virtualbox-kvm-vmware-player-u.html" rel="nofollow">here</a> for details. I had to reactivate my Windows-License when booted in the VM because of hardware changes. Since that, I can boot the Windows installation on hardware or as VM without any problems related to license/hardware-changes. :-)</p><p>TNX everybody</p> <p class="postedit"><em>Last edited by roms (2014-01-22 19:05:07)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373790">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373855" class="blockpost rowodd"> <h2><span><span class="conr">#1055</span> <a href="viewtopic.php?pid=1373855#p1373855">2014-01-22 20:55:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78821">roms</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-22</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>OK, now I have a problem. (For my setup, please see my post above.)<br />I also want to pass a USB3.0-Card (VIA VL800 Chipset) to the guest.</p><p>With the ACS-patch from yesterday, the card has its own IOMMU-group. I attached pci-stub to the card and passed it to the VM with &quot;-device vfio-pci,host=03:00.0,bus=pcie.0&quot;.<br />The card gets recognized by Windows but the driver won&#039;t start up (Error 10 in Device Manager).<br />On the host, dmesg gets spammed with:</p><div class="codebox"><pre><code>DMAR:[fault reason 06] PTE Read access is not set [ 163.401213] dmar: DRHD: handling fault status reg 2 [ 163.401215] dmar: DMAR:[DMA Read] Request device [03:00.0] fault addr 3f000f000 </code></pre></div><p>I would like to understand whats probably causing the problem. The card gets initialised by the BIOS (attached keyboard does work). I tried turning on the &quot;Fastboot-Mode&quot; which should let the card uninitialised as I understand it. But the problem persists. So its probably not a &quot;previous initialisation&quot; issue?</p><p>Is it likely that a diffrent USB-Card (with different controller-chip) suffers from the same problem?</p><p>Again, TNX everybody</p><p>Some more info:<br />dmesg (startup only)</p><div class="codebox"><pre class="vscroll"><code>[ 0.000000] Initializing cgroup subsys cpuset [ 0.000000] Initializing cgroup subsys cpu [ 0.000000] Initializing cgroup subsys cpuacct [ 0.000000] Linux version 3.13.0-1.kvm_pt.fc20.x86_64 (roms@kang.fritz.box) (gcc version 4.8.2 20131212 (Red Hat 4.8.2-7) (GCC) ) #1 SMP Wed Jan 22 20:31:00 CET 2014 [ 0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-3.13.0-1.kvm_pt.fc20.x86_64 root=UUID=b7aad659-aaf7-44d7-a6a7-7458c6271719 ro vconsole.font=latarcyrheb-sun16 quiet selinux=0 pci-stub.ids=1002:68e1,1002:aa68,1106:3432 intel_iommu=on LANG=de_DE.UTF-8 [ 0.000000] e820: BIOS-provided physical RAM map: [ 0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009d7ff] usable [ 0.000000] BIOS-e820: [mem 0x000000000009d800-0x000000000009ffff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000000e0000-0x00000000000fffff] reserved [ 0.000000] BIOS-e820: [mem 0x0000000000100000-0x00000000b7f60fff] usable [ 0.000000] BIOS-e820: [mem 0x00000000b7f61000-0x00000000b7f67fff] ACPI NVS [ 0.000000] BIOS-e820: [mem 0x00000000b7f68000-0x00000000b8dcffff] usable [ 0.000000] BIOS-e820: [mem 0x00000000b8dd0000-0x00000000b9396fff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000b9397000-0x00000000cb0fcfff] usable [ 0.000000] BIOS-e820: [mem 0x00000000cb0fd000-0x00000000cb304fff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000cb305000-0x00000000cb31afff] ACPI data [ 0.000000] BIOS-e820: [mem 0x00000000cb31b000-0x00000000cb489fff] ACPI NVS [ 0.000000] BIOS-e820: [mem 0x00000000cb48a000-0x00000000cbffefff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000cbfff000-0x00000000cbffffff] usable [ 0.000000] BIOS-e820: [mem 0x00000000cd000000-0x00000000cf1fffff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000f8000000-0x00000000fbffffff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000fec00000-0x00000000fec00fff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000fed00000-0x00000000fed03fff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000fed1c000-0x00000000fed1ffff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved [ 0.000000] BIOS-e820: [mem 0x00000000ff000000-0x00000000ffffffff] reserved [ 0.000000] BIOS-e820: [mem 0x0000000100000000-0x000000042fdfffff] usable [ 0.000000] NX (Execute Disable) protection: active [ 0.000000] SMBIOS 2.8 present. [ 0.000000] DMI: /DH87RL, BIOS RLH8710H.86A.0323.2013.1204.1726 12/04/2013 [ 0.000000] e820: update [mem 0x00000000-0x00000fff] usable ==&gt; reserved [ 0.000000] e820: remove [mem 0x000a0000-0x000fffff] usable [ 0.000000] e820: last_pfn = 0x42fe00 max_arch_pfn = 0x400000000 [ 0.000000] MTRR default type: uncachable [ 0.000000] MTRR fixed ranges enabled: [ 0.000000] 00000-9FFFF write-back [ 0.000000] A0000-BFFFF uncachable [ 0.000000] C0000-CFFFF write-protect [ 0.000000] D0000-E7FFF uncachable [ 0.000000] E8000-FFFFF write-protect [ 0.000000] MTRR variable ranges enabled: [ 0.000000] 0 base 0000000000 mask 7C00000000 write-back [ 0.000000] 1 base 0400000000 mask 7FE0000000 write-back [ 0.000000] 2 base 0420000000 mask 7FF0000000 write-back [ 0.000000] 3 base 00E0000000 mask 7FE0000000 uncachable [ 0.000000] 4 base 00D0000000 mask 7FF0000000 uncachable [ 0.000000] 5 base 00CE000000 mask 7FFE000000 uncachable [ 0.000000] 6 base 00CD000000 mask 7FFF000000 uncachable [ 0.000000] 7 base 042FE00000 mask 7FFFE00000 uncachable [ 0.000000] 8 disabled [ 0.000000] 9 disabled [ 0.000000] x86 PAT enabled: cpu 0, old 0x7040600070406, new 0x7010600070106 [ 0.000000] e820: update [mem 0xcd000000-0xffffffff] usable ==&gt; reserved [ 0.000000] e820: last_pfn = 0xcc000 max_arch_pfn = 0x400000000 [ 0.000000] found SMP MP-table at [mem 0x000fd720-0x000fd72f] mapped at [ffff8800000fd720] [ 0.000000] Base memory trampoline at [ffff880000097000] 97000 size 24576 [ 0.000000] Using GB pages for direct mapping [ 0.000000] init_memory_mapping: [mem 0x00000000-0x000fffff] [ 0.000000] [mem 0x00000000-0x000fffff] page 4k [ 0.000000] BRK [0x0200f000, 0x0200ffff] PGTABLE [ 0.000000] BRK [0x02010000, 0x02010fff] PGTABLE [ 0.000000] BRK [0x02011000, 0x02011fff] PGTABLE [ 0.000000] init_memory_mapping: [mem 0x42fc00000-0x42fdfffff] [ 0.000000] [mem 0x42fc00000-0x42fdfffff] page 2M [ 0.000000] BRK [0x02012000, 0x02012fff] PGTABLE [ 0.000000] init_memory_mapping: [mem 0x42c000000-0x42fbfffff] [ 0.000000] [mem 0x42c000000-0x42fbfffff] page 2M [ 0.000000] init_memory_mapping: [mem 0x400000000-0x42bffffff] [ 0.000000] [mem 0x400000000-0x42bffffff] page 2M [ 0.000000] init_memory_mapping: [mem 0x00100000-0xb7f60fff] [ 0.000000] [mem 0x00100000-0x001fffff] page 4k [ 0.000000] [mem 0x00200000-0x3fffffff] page 2M [ 0.000000] [mem 0x40000000-0x7fffffff] page 1G [ 0.000000] [mem 0x80000000-0xb7dfffff] page 2M [ 0.000000] [mem 0xb7e00000-0xb7f60fff] page 4k [ 0.000000] init_memory_mapping: [mem 0xb7f68000-0xb8dcffff] [ 0.000000] [mem 0xb7f68000-0xb7ffffff] page 4k [ 0.000000] [mem 0xb8000000-0xb8bfffff] page 2M [ 0.000000] [mem 0xb8c00000-0xb8dcffff] page 4k [ 0.000000] BRK [0x02013000, 0x02013fff] PGTABLE [ 0.000000] init_memory_mapping: [mem 0xb9397000-0xcb0fcfff] [ 0.000000] [mem 0xb9397000-0xb93fffff] page 4k [ 0.000000] [mem 0xb9400000-0xcaffffff] page 2M [ 0.000000] [mem 0xcb000000-0xcb0fcfff] page 4k [ 0.000000] BRK [0x02014000, 0x02014fff] PGTABLE [ 0.000000] init_memory_mapping: [mem 0xcbfff000-0xcbffffff] [ 0.000000] [mem 0xcbfff000-0xcbffffff] page 4k [ 0.000000] init_memory_mapping: [mem 0x100000000-0x3ffffffff] [ 0.000000] [mem 0x100000000-0x3ffffffff] page 1G [ 0.000000] RAMDISK: [mem 0x36ffe000-0x377f6fff] [ 0.000000] ACPI: RSDP 00000000000f0490 000024 (v02 INTEL) [ 0.000000] ACPI: XSDT 00000000cb309080 000084 (v01 INTEL DH87RL 00000143 AMI 00010013) [ 0.000000] ACPI: FACP 00000000cb315cb8 00010C (v05 INTEL DH87RL 00000143 AMI 00010013) [ 0.000000] ACPI: DSDT 00000000cb309198 00CB1F (v02 INTEL DH87RL 00000143 INTL 20120711) [ 0.000000] ACPI: FACS 00000000cb488080 000040 [ 0.000000] ACPI: APIC 00000000cb315dc8 000072 (v03 INTEL DH87RL 00000143 AMI 00010013) [ 0.000000] ACPI: FPDT 00000000cb315e40 000044 (v01 INTEL DH87RL 00000143 AMI 00010013) [ 0.000000] ACPI: LPIT 00000000cb315e88 00005C (v01 INTEL DH87RL 00000143 AMI. 00000005) [ 0.000000] ACPI: SSDT 00000000cb315ee8 000539 (v01 INTEL DH87RL 00000143 INTL 20120711) [ 0.000000] ACPI: SSDT 00000000cb316428 000AD8 (v01 INTEL DH87RL 00000143 INTL 20120711) [ 0.000000] ACPI: SSDT 00000000cb316f00 0001C7 (v01 INTEL DH87RL 00000143 INTL 20120711) [ 0.000000] ACPI: MCFG 00000000cb3170c8 00003C (v01 INTEL DH87RL 00000143 MSFT 00000097) [ 0.000000] ACPI: HPET 00000000cb317108 000038 (v01 INTEL DH87RL 00000143 AMI. 00000005) [ 0.000000] ACPI: SSDT 00000000cb317140 00036D (v01 INTEL DH87RL 00000143 INTL 20120711) [ 0.000000] ACPI: SSDT 00000000cb3174b0 003004 (v01 INTEL DH87RL 00000143 INTL 20091112) [ 0.000000] ACPI: DMAR 00000000cb31a4b8 0000B8 (v01 INTEL DH87RL 00000143 INTL 00000001) [ 0.000000] ACPI: Local APIC address 0xfee00000 [ 0.000000] No NUMA configuration found [ 0.000000] Faking a node at [mem 0x0000000000000000-0x000000042fdfffff] [ 0.000000] Initmem setup node 0 [mem 0x00000000-0x42fdfffff] [ 0.000000] NODE_DATA [mem 0x42fde7000-0x42fdfafff] [ 0.000000] [ffffea0000000000-ffffea0010bfffff] PMD -&gt; [ffff88041f400000-ffff88042f3fffff] on node 0 [ 0.000000] Zone ranges: [ 0.000000] DMA [mem 0x00001000-0x00ffffff] [ 0.000000] DMA32 [mem 0x01000000-0xffffffff] [ 0.000000] Normal [mem 0x100000000-0x42fdfffff] [ 0.000000] Movable zone start for each node [ 0.000000] Early memory node ranges [ 0.000000] node 0: [mem 0x00001000-0x0009cfff] [ 0.000000] node 0: [mem 0x00100000-0xb7f60fff] [ 0.000000] node 0: [mem 0xb7f68000-0xb8dcffff] [ 0.000000] node 0: [mem 0xb9397000-0xcb0fcfff] [ 0.000000] node 0: [mem 0xcbfff000-0xcbffffff] [ 0.000000] node 0: [mem 0x100000000-0x42fdfffff] [ 0.000000] On node 0 totalpages: 4171980 [ 0.000000] DMA zone: 64 pages used for memmap [ 0.000000] DMA zone: 21 pages reserved [ 0.000000] DMA zone: 3996 pages, LIFO batch:0 [ 0.000000] DMA32 zone: 12909 pages used for memmap [ 0.000000] DMA32 zone: 826160 pages, LIFO batch:31 [ 0.000000] Normal zone: 52216 pages used for memmap [ 0.000000] Normal zone: 3341824 pages, LIFO batch:31 [ 0.000000] ACPI: PM-Timer IO Port: 0x1808 [ 0.000000] ACPI: Local APIC address 0xfee00000 [ 0.000000] ACPI: LAPIC (acpi_id[0x01] lapic_id[0x00] enabled) [ 0.000000] ACPI: LAPIC (acpi_id[0x02] lapic_id[0x02] enabled) [ 0.000000] ACPI: LAPIC (acpi_id[0x03] lapic_id[0x04] enabled) [ 0.000000] ACPI: LAPIC (acpi_id[0x04] lapic_id[0x06] enabled) [ 0.000000] ACPI: LAPIC_NMI (acpi_id[0xff] high edge lint[0x1]) [ 0.000000] ACPI: IOAPIC (id[0x02] address[0xfec00000] gsi_base[0]) [ 0.000000] IOAPIC[0]: apic_id 2, version 32, address 0xfec00000, GSI 0-23 [ 0.000000] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl) [ 0.000000] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level) [ 0.000000] ACPI: IRQ0 used by override. [ 0.000000] ACPI: IRQ2 used by override. [ 0.000000] ACPI: IRQ9 used by override. [ 0.000000] Using ACPI (MADT) for SMP configuration information [ 0.000000] ACPI: HPET id: 0x8086a701 base: 0xfed00000 [ 0.000000] smpboot: Allowing 4 CPUs, 0 hotplug CPUs [ 0.000000] nr_irqs_gsi: 40 [ 0.000000] PM: Registered nosave memory: [mem 0x0009d000-0x0009dfff] [ 0.000000] PM: Registered nosave memory: [mem 0x0009e000-0x0009ffff] [ 0.000000] PM: Registered nosave memory: [mem 0x000a0000-0x000dffff] [ 0.000000] PM: Registered nosave memory: [mem 0x000e0000-0x000fffff] [ 0.000000] PM: Registered nosave memory: [mem 0xb7f61000-0xb7f67fff] [ 0.000000] PM: Registered nosave memory: [mem 0xb8dd0000-0xb9396fff] [ 0.000000] PM: Registered nosave memory: [mem 0xcb0fd000-0xcb304fff] [ 0.000000] PM: Registered nosave memory: [mem 0xcb305000-0xcb31afff] [ 0.000000] PM: Registered nosave memory: [mem 0xcb31b000-0xcb489fff] [ 0.000000] PM: Registered nosave memory: [mem 0xcb48a000-0xcbffefff] [ 0.000000] PM: Registered nosave memory: [mem 0xcc000000-0xccffffff] [ 0.000000] PM: Registered nosave memory: [mem 0xcd000000-0xcf1fffff] [ 0.000000] PM: Registered nosave memory: [mem 0xcf200000-0xf7ffffff] [ 0.000000] PM: Registered nosave memory: [mem 0xf8000000-0xfbffffff] [ 0.000000] PM: Registered nosave memory: [mem 0xfc000000-0xfebfffff] [ 0.000000] PM: Registered nosave memory: [mem 0xfec00000-0xfec00fff] [ 0.000000] PM: Registered nosave memory: [mem 0xfec01000-0xfecfffff] [ 0.000000] PM: Registered nosave memory: [mem 0xfed00000-0xfed03fff] [ 0.000000] PM: Registered nosave memory: [mem 0xfed04000-0xfed1bfff] [ 0.000000] PM: Registered nosave memory: [mem 0xfed1c000-0xfed1ffff] [ 0.000000] PM: Registered nosave memory: [mem 0xfed20000-0xfedfffff] [ 0.000000] PM: Registered nosave memory: [mem 0xfee00000-0xfee00fff] [ 0.000000] PM: Registered nosave memory: [mem 0xfee01000-0xfeffffff] [ 0.000000] PM: Registered nosave memory: [mem 0xff000000-0xffffffff] [ 0.000000] e820: [mem 0xcf200000-0xf7ffffff] available for PCI devices [ 0.000000] Booting paravirtualized kernel on bare hardware [ 0.000000] setup_percpu: NR_CPUS:1024 nr_cpumask_bits:4 nr_cpu_ids:4 nr_node_ids:1 [ 0.000000] PERCPU: Embedded 29 pages/cpu @ffff88042fa00000 s86592 r8192 d24000 u524288 [ 0.000000] pcpu-alloc: s86592 r8192 d24000 u524288 alloc=1*2097152 [ 0.000000] pcpu-alloc: [0] 0 1 2 3 [ 0.000000] Built 1 zonelists in Zone order, mobility grouping on. Total pages: 4106770 [ 0.000000] Policy zone: Normal [ 0.000000] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-3.13.0-1.kvm_pt.fc20.x86_64 root=UUID=b7aad659-aaf7-44d7-a6a7-7458c6271719 ro vconsole.font=latarcyrheb-sun16 quiet selinux=0 pci-stub.ids=1002:68e1,1002:aa68,1106:3432 intel_iommu=on LANG=de_DE.UTF-8 [ 0.000000] Intel-IOMMU: enabled [ 0.000000] PID hash table entries: 4096 (order: 3, 32768 bytes) [ 0.000000] xsave: enabled xstate_bv 0x7, cntxt size 0x340 [ 0.000000] Memory: 16334188K/16687920K available (6756K kernel code, 1067K rwdata, 2980K rodata, 1424K init, 1628K bss, 353732K reserved) [ 0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=4, Nodes=1 [ 0.000000] Hierarchical RCU implementation. [ 0.000000] RCU restricting CPUs from NR_CPUS=1024 to nr_cpu_ids=4. [ 0.000000] NR_IRQS:65792 nr_irqs:712 16 [ 0.000000] Console: colour VGA+ 80x25 [ 0.000000] console [tty0] enabled [ 0.000000] allocated 67108864 bytes of page_cgroup [ 0.000000] please try &#039;cgroup_disable=memory&#039; option if you don&#039;t want memory cgroups [ 0.000000] hpet clockevent registered [ 0.000000] tsc: Fast TSC calibration using PIT [ 0.001000] tsc: Detected 3392.357 MHz processor [ 0.000001] Calibrating delay loop (skipped), value calculated using timer frequency.. 6784.71 BogoMIPS (lpj=3392357) [ 0.000003] pid_max: default: 32768 minimum: 301 [ 0.000020] Security Framework initialized [ 0.000025] SELinux: Disabled at boot. [ 0.000843] Dentry cache hash table entries: 2097152 (order: 12, 16777216 bytes) [ 0.003137] Inode-cache hash table entries: 1048576 (order: 11, 8388608 bytes) [ 0.004081] Mount-cache hash table entries: 256 [ 0.004197] Initializing cgroup subsys memory [ 0.004201] Initializing cgroup subsys devices [ 0.004202] Initializing cgroup subsys freezer [ 0.004203] Initializing cgroup subsys net_cls [ 0.004204] Initializing cgroup subsys blkio [ 0.004205] Initializing cgroup subsys perf_event [ 0.004206] Initializing cgroup subsys hugetlb [ 0.004223] CPU: Physical Processor ID: 0 [ 0.004223] CPU: Processor Core ID: 0 [ 0.004977] mce: CPU supports 9 MCE banks [ 0.004988] CPU0: Thermal monitoring enabled (TM1) [ 0.004996] Last level iTLB entries: 4KB 0, 2MB 0, 4MB 0 Last level dTLB entries: 4KB 64, 2MB 0, 4MB 0 tlb_flushall_shift: 6 [ 0.005064] Freeing SMP alternatives memory: 24K (ffffffff81e70000 - ffffffff81e76000) [ 0.005748] ACPI: Core revision 20131115 [ 0.010836] ACPI: All ACPI Tables successfully acquired [ 0.010985] ftrace: allocating 25894 entries in 102 pages [ 0.018761] dmar: Host address width 39 [ 0.018762] dmar: DRHD base: 0x000000fed90000 flags: 0x0 [ 0.018767] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020660462 ecap f0101a [ 0.018768] dmar: DRHD base: 0x000000fed91000 flags: 0x1 [ 0.018771] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap d2008020660462 ecap f010da [ 0.018771] dmar: RMRR base: 0x000000cbeb6000 end: 0x000000cbec4fff [ 0.018772] dmar: RMRR base: 0x000000cd000000 end: 0x000000cf1fffff [ 0.018835] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.018836] HPET id 0 under DRHD base 0xfed91000 [ 0.018946] Enabled IRQ remapping in x2apic mode [ 0.018946] Enabling x2apic [ 0.018947] Enabled x2apic [ 0.018960] Switched APIC routing to cluster x2apic. [ 0.019369] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1 [ 0.029375] smpboot: CPU0: Intel(R) Core(TM) i5-4670 CPU @ 3.40GHz (fam: 06, model: 3c, stepping: 03) [ 0.029380] TSC deadline timer enabled [ 0.029386] Performance Events: PEBS fmt2+, 16-deep LBR, Haswell events, full-width counters, Intel PMU driver. [ 0.029391] ... version: 3 [ 0.029392] ... bit width: 48 [ 0.029392] ... generic registers: 8 [ 0.029393] ... value mask: 0000ffffffffffff [ 0.029393] ... max period: 0000ffffffffffff [ 0.029394] ... fixed-purpose events: 3 [ 0.029394] ... event mask: 00000007000000ff [ 0.030256] x86: Booting SMP configuration: [ 0.044123] NMI watchdog: enabled on all CPUs, permanently consumes one hw-PMU counter. [ 0.030257] .... node #0, CPUs: #1 #2 #3 [ 0.071993] x86: Booted up 1 node, 4 CPUs [ 0.071995] smpboot: Total of 4 processors activated (27138.85 BogoMIPS) [ 0.074577] devtmpfs: initialized [ 0.076236] PM: Registering ACPI NVS region [mem 0xb7f61000-0xb7f67fff] (28672 bytes) [ 0.076238] PM: Registering ACPI NVS region [mem 0xcb31b000-0xcb489fff] (1503232 bytes) [ 0.076707] atomic64 test passed for x86-64 platform with CX8 and with SSE [ 0.076708] pinctrl core: initialized pinctrl subsystem [ 0.076736] RTC time: 21:09:31, date: 01/22/14 [ 0.076759] NET: Registered protocol family 16 [ 0.076806] cpuidle: using governor menu [ 0.076836] ACPI FADT declares the system doesn&#039;t support PCIe ASPM, so disable it [ 0.076837] ACPI: bus type PCI registered [ 0.076838] acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5 [ 0.076872] PCI: MMCONFIG for domain 0000 [bus 00-3f] at [mem 0xf8000000-0xfbffffff] (base 0xf8000000) [ 0.076874] PCI: MMCONFIG at [mem 0xf8000000-0xfbffffff] reserved in E820 [ 0.080985] PCI: Using configuration type 1 for base access [ 0.081586] bio: create slab &lt;bio-0&gt; at 0 [ 0.081657] ACPI: Added _OSI(Module Device) [ 0.081658] ACPI: Added _OSI(Processor Device) [ 0.081659] ACPI: Added _OSI(3.0 _SCP Extensions) [ 0.081659] ACPI: Added _OSI(Processor Aggregator Device) [ 0.084038] ACPI: Executed 1 blocks of module-level executable AML code [ 0.085599] [Firmware Bug]: ACPI: BIOS _OSI(Linux) query ignored [ 0.089522] ACPI: SSDT 00000000cb2fac18 0003D3 (v01 PmRef Cpu0Cst 00003001 INTL 20120711) [ 0.089803] ACPI: Dynamic OEM Table Load: [ 0.089804] ACPI: SSDT (null) 0003D3 (v01 PmRef Cpu0Cst 00003001 INTL 20120711) [ 0.094611] ACPI: SSDT 00000000cb2fa618 0005AA (v01 PmRef ApIst 00003000 INTL 20120711) [ 0.094933] ACPI: Dynamic OEM Table Load: [ 0.094934] ACPI: SSDT (null) 0005AA (v01 PmRef ApIst 00003000 INTL 20120711) [ 0.099544] ACPI: SSDT 00000000cb2f9d98 000119 (v01 PmRef ApCst 00003000 INTL 20120711) [ 0.099822] ACPI: Dynamic OEM Table Load: [ 0.099823] ACPI: SSDT (null) 000119 (v01 PmRef ApCst 00003000 INTL 20120711) [ 0.104858] ACPI: Interpreter enabled [ 0.104862] ACPI Exception: AE_NOT_FOUND, While evaluating Sleep State [\_S1_] (20131115/hwxface-580) [ 0.104866] ACPI Exception: AE_NOT_FOUND, While evaluating Sleep State [\_S2_] (20131115/hwxface-580) [ 0.104876] ACPI: (supports S0 S3 S4 S5) [ 0.104877] ACPI: Using IOAPIC for interrupt routing [ 0.104892] PCI: Using host bridge windows from ACPI; if necessary, use &quot;pci=nocrs&quot; and report a bug [ 0.105002] ACPI: No dock devices found. [ 0.109437] ACPI: Power Resource [FN00] (off) [ 0.109480] ACPI: Power Resource [FN01] (off) [ 0.109519] ACPI: Power Resource [FN02] (off) [ 0.109561] ACPI: Power Resource [FN03] (off) [ 0.109602] ACPI: Power Resource [FN04] (off) [ 0.110047] ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-3e]) [ 0.110051] acpi PNP0A08:00: _OSC: OS supports [ExtendedConfig ASPM ClockPM Segments MSI] [ 0.110420] acpi PNP0A08:00: _OSC: OS now controls [PCIeHotplug PME AER PCIeCapability] [ 0.110747] PCI host bridge to bus 0000:00 [ 0.110749] pci_bus 0000:00: root bus resource [bus 00-3e] [ 0.110750] pci_bus 0000:00: root bus resource [io 0x0000-0x0cf7] [ 0.110751] pci_bus 0000:00: root bus resource [io 0x0d00-0xffff] [ 0.110752] pci_bus 0000:00: root bus resource [mem 0x000a0000-0x000bffff] [ 0.110753] pci_bus 0000:00: root bus resource [mem 0x000d0000-0x000d3fff] [ 0.110754] pci_bus 0000:00: root bus resource [mem 0x000d4000-0x000d7fff] [ 0.110755] pci_bus 0000:00: root bus resource [mem 0x000d8000-0x000dbfff] [ 0.110756] pci_bus 0000:00: root bus resource [mem 0x000dc000-0x000dffff] [ 0.110757] pci_bus 0000:00: root bus resource [mem 0x000e0000-0x000e3fff] [ 0.110758] pci_bus 0000:00: root bus resource [mem 0x000e4000-0x000e7fff] [ 0.110759] pci_bus 0000:00: root bus resource [mem 0xcf200000-0xfeafffff] [ 0.110764] pci 0000:00:00.0: [8086:0c00] type 00 class 0x060000 [ 0.110817] pci 0000:00:01.0: [8086:0c01] type 01 class 0x060400 [ 0.110839] pci 0000:00:01.0: PME# supported from D0 D3hot D3cold [ 0.110870] pci 0000:00:01.0: System wakeup disabled by ACPI [ 0.110890] pci 0000:00:02.0: [8086:0412] type 00 class 0x030000 [ 0.110898] pci 0000:00:02.0: reg 0x10: [mem 0xf7800000-0xf7bfffff 64bit] [ 0.110902] pci 0000:00:02.0: reg 0x18: [mem 0xd0000000-0xdfffffff 64bit pref] [ 0.110905] pci 0000:00:02.0: reg 0x20: [io 0xf000-0xf03f] [ 0.110950] pci 0000:00:03.0: [8086:0c0c] type 00 class 0x040300 [ 0.110955] pci 0000:00:03.0: reg 0x10: [mem 0xf7e34000-0xf7e37fff 64bit] [ 0.111019] pci 0000:00:14.0: [8086:8c31] type 00 class 0x0c0330 [ 0.111035] pci 0000:00:14.0: reg 0x10: [mem 0xf7e20000-0xf7e2ffff 64bit] [ 0.111084] pci 0000:00:14.0: PME# supported from D3hot D3cold [ 0.111108] pci 0000:00:14.0: System wakeup disabled by ACPI [ 0.111129] pci 0000:00:16.0: [8086:8c3a] type 00 class 0x078000 [ 0.111145] pci 0000:00:16.0: reg 0x10: [mem 0xf7e3f000-0xf7e3f00f 64bit] [ 0.111198] pci 0000:00:16.0: PME# supported from D0 D3hot D3cold [ 0.111244] pci 0000:00:19.0: [8086:153b] type 00 class 0x020000 [ 0.111258] pci 0000:00:19.0: reg 0x10: [mem 0xf7e00000-0xf7e1ffff] [ 0.111265] pci 0000:00:19.0: reg 0x14: [mem 0xf7e3d000-0xf7e3dfff] [ 0.111272] pci 0000:00:19.0: reg 0x18: [io 0xf080-0xf09f] [ 0.111321] pci 0000:00:19.0: PME# supported from D0 D3hot D3cold [ 0.111346] pci 0000:00:19.0: System wakeup disabled by ACPI [ 0.111367] pci 0000:00:1a.0: [8086:8c2d] type 00 class 0x0c0320 [ 0.111384] pci 0000:00:1a.0: reg 0x10: [mem 0xf7e3c000-0xf7e3c3ff] [ 0.111458] pci 0000:00:1a.0: PME# supported from D0 D3hot D3cold [ 0.111492] pci 0000:00:1a.0: System wakeup disabled by ACPI [ 0.111513] pci 0000:00:1b.0: [8086:8c20] type 00 class 0x040300 [ 0.111525] pci 0000:00:1b.0: reg 0x10: [mem 0xf7e30000-0xf7e33fff 64bit] [ 0.111580] pci 0000:00:1b.0: PME# supported from D0 D3hot D3cold [ 0.111607] pci 0000:00:1b.0: System wakeup disabled by ACPI [ 0.111625] pci 0000:00:1c.0: [8086:8c10] type 01 class 0x060400 [ 0.111677] pci 0000:00:1c.0: PME# supported from D0 D3hot D3cold [ 0.111695] pci 0000:00:1c.0: Enabling MPC IRBNCE [ 0.111714] pci 0000:00:1c.0: System wakeup disabled by ACPI [ 0.111734] pci 0000:00:1c.5: [8086:8c1a] type 01 class 0x060400 [ 0.111786] pci 0000:00:1c.5: PME# supported from D0 D3hot D3cold [ 0.111803] pci 0000:00:1c.5: Enabling MPC IRBNCE [ 0.111823] pci 0000:00:1c.5: System wakeup disabled by ACPI [ 0.111846] pci 0000:00:1d.0: [8086:8c26] type 00 class 0x0c0320 [ 0.111863] pci 0000:00:1d.0: reg 0x10: [mem 0xf7e3b000-0xf7e3b3ff] [ 0.111937] pci 0000:00:1d.0: PME# supported from D0 D3hot D3cold [ 0.111971] pci 0000:00:1d.0: System wakeup disabled by ACPI [ 0.111992] pci 0000:00:1f.0: [8086:8c4a] type 00 class 0x060100 [ 0.112119] pci 0000:00:1f.2: [8086:8c02] type 00 class 0x010601 [ 0.112132] pci 0000:00:1f.2: reg 0x10: [io 0xf0d0-0xf0d7] [ 0.112138] pci 0000:00:1f.2: reg 0x14: [io 0xf0c0-0xf0c3] [ 0.112144] pci 0000:00:1f.2: reg 0x18: [io 0xf0b0-0xf0b7] [ 0.112150] pci 0000:00:1f.2: reg 0x1c: [io 0xf0a0-0xf0a3] [ 0.112156] pci 0000:00:1f.2: reg 0x20: [io 0xf060-0xf07f] [ 0.112162] pci 0000:00:1f.2: reg 0x24: [mem 0xf7e3a000-0xf7e3a7ff] [ 0.112192] pci 0000:00:1f.2: PME# supported from D3hot [ 0.112229] pci 0000:00:1f.3: [8086:8c22] type 00 class 0x0c0500 [ 0.112240] pci 0000:00:1f.3: reg 0x10: [mem 0xf7e39000-0xf7e390ff 64bit] [ 0.112257] pci 0000:00:1f.3: reg 0x20: [io 0xf040-0xf05f] [ 0.112334] pci 0000:01:00.0: [1002:68e1] type 00 class 0x030000 [ 0.112345] pci 0000:01:00.0: reg 0x10: [mem 0xe0000000-0xefffffff 64bit pref] [ 0.112353] pci 0000:01:00.0: reg 0x18: [mem 0xf7d20000-0xf7d3ffff 64bit] [ 0.112358] pci 0000:01:00.0: reg 0x20: [io 0xe000-0xe0ff] [ 0.112367] pci 0000:01:00.0: reg 0x30: [mem 0xf7d00000-0xf7d1ffff pref] [ 0.112396] pci 0000:01:00.0: supports D1 D2 [ 0.112410] pci 0000:01:00.0: System wakeup disabled by ACPI [ 0.112430] pci 0000:01:00.1: [1002:aa68] type 00 class 0x040300 [ 0.112441] pci 0000:01:00.1: reg 0x10: [mem 0xf7d40000-0xf7d43fff 64bit] [ 0.112496] pci 0000:01:00.1: supports D1 D2 [ 0.113542] pci 0000:00:01.0: PCI bridge to [bus 01] [ 0.113544] pci 0000:00:01.0: bridge window [io 0xe000-0xefff] [ 0.113545] pci 0000:00:01.0: bridge window [mem 0xf7d00000-0xf7dfffff] [ 0.113548] pci 0000:00:01.0: bridge window [mem 0xe0000000-0xefffffff 64bit pref] [ 0.113594] acpiphp: Slot [1] registered [ 0.113599] pci 0000:00:1c.0: PCI bridge to [bus 02] [ 0.113665] pci 0000:03:00.0: [1106:3432] type 00 class 0x0c0330 [ 0.113677] pci 0000:03:00.0: reg 0x10: [mem 0xf7c00000-0xf7c00fff] [ 0.113764] pci 0000:03:00.0: PME# supported from D0 D1 D2 D3hot D3cold [ 0.113782] pci 0000:03:00.0: System wakeup disabled by ACPI [ 0.115547] pci 0000:00:1c.5: PCI bridge to [bus 03] [ 0.115552] pci 0000:00:1c.5: bridge window [mem 0xf7c00000-0xf7cfffff] [ 0.115570] acpi PNP0A08:00: Disabling ASPM (FADT indicates it is unsupported) [ 0.116007] ACPI: PCI Interrupt Link [LNKA] (IRQs 3 4 5 6 10 *11 12 14 15) [ 0.116038] ACPI: PCI Interrupt Link [LNKB] (IRQs 3 4 5 6 *10 11 12 14 15) [ 0.116067] ACPI: PCI Interrupt Link [LNKC] (IRQs 3 4 5 6 *10 11 12 14 15) [ 0.116096] ACPI: PCI Interrupt Link [LNKD] (IRQs 3 4 *5 6 10 11 12 14 15) [ 0.116124] ACPI: PCI Interrupt Link [LNKE] (IRQs *3 4 5 6 10 11 12 14 15) [ 0.116152] ACPI: PCI Interrupt Link [LNKF] (IRQs 3 4 5 6 10 11 12 14 15) *0, disabled. [ 0.116181] ACPI: PCI Interrupt Link [LNKG] (IRQs 3 *4 5 6 10 11 12 14 15) [ 0.116209] ACPI: PCI Interrupt Link [LNKH] (IRQs 3 4 5 6 10 *11 12 14 15) [ 0.116438] ACPI: Enabled 6 GPEs in block 00 to 3F [ 0.116442] ACPI: \_SB_.PCI0: notify handler is installed [ 0.116482] Found 1 acpi root devices [ 0.116523] vgaarb: device added: PCI:0000:00:02.0,decodes=io+mem,owns=io+mem,locks=none [ 0.116526] vgaarb: device added: PCI:0000:01:00.0,decodes=io+mem,owns=none,locks=none [ 0.116527] vgaarb: loaded [ 0.116528] vgaarb: bridge control possible 0000:01:00.0 [ 0.116528] vgaarb: no bridge control possible 0000:00:02.0 [ 0.116564] SCSI subsystem initialized [ 0.116584] libata version 3.00 loaded. [ 0.116593] ACPI: bus type USB registered [ 0.116601] usbcore: registered new interface driver usbfs [ 0.116605] usbcore: registered new interface driver hub [ 0.116616] usbcore: registered new device driver usb [ 0.116645] PCI: Using ACPI for IRQ routing [ 0.117798] PCI: pci_cache_line_size set to 64 bytes [ 0.117832] e820: reserve RAM buffer [mem 0x0009d800-0x0009ffff] [ 0.117833] e820: reserve RAM buffer [mem 0xb7f61000-0xb7ffffff] [ 0.117834] e820: reserve RAM buffer [mem 0xb8dd0000-0xbbffffff] [ 0.117835] e820: reserve RAM buffer [mem 0xcb0fd000-0xcbffffff] [ 0.117836] e820: reserve RAM buffer [mem 0x42fe00000-0x42fffffff] [ 0.117879] NetLabel: Initializing [ 0.117880] NetLabel: domain hash size = 128 [ 0.117880] NetLabel: protocols = UNLABELED CIPSOv4 [ 0.117888] NetLabel: unlabeled traffic allowed by default [ 0.117912] hpet0: at MMIO 0xfed00000, IRQs 2, 8, 0, 0, 0, 0, 0, 0 [ 0.117915] hpet0: 8 comparators, 64-bit 14.318180 MHz counter [ 0.119933] Switched to clocksource hpet [ 0.122570] pnp: PnP ACPI init [ 0.122577] ACPI: bus type PNP registered [ 0.122618] system 00:00: [mem 0xfed40000-0xfed44fff] has been reserved [ 0.122620] system 00:00: Plug and Play ACPI device, IDs PNP0c01 (active) [ 0.122627] pnp 00:01: [dma 4] [ 0.122635] pnp 00:01: Plug and Play ACPI device, IDs PNP0200 (active) [ 0.122644] pnp 00:02: Plug and Play ACPI device, IDs INT0800 (active) [ 0.122700] pnp 00:03: Plug and Play ACPI device, IDs PNP0103 (active) [ 0.122728] pnp 00:04: Plug and Play ACPI device, IDs PNP0c04 (active) [ 0.122789] system 00:05: [io 0x0680-0x069f] has been reserved [ 0.122790] system 00:05: [io 0xffff] has been reserved [ 0.122791] system 00:05: [io 0xffff] has been reserved [ 0.122792] system 00:05: [io 0xffff] has been reserved [ 0.122793] system 00:05: [io 0x1c00-0x1cfe] has been reserved [ 0.122794] system 00:05: [io 0x1d00-0x1dfe] has been reserved [ 0.122795] system 00:05: [io 0x1e00-0x1efe] has been reserved [ 0.122796] system 00:05: [io 0x1f00-0x1ffe] has been reserved [ 0.122797] system 00:05: [io 0x1800-0x18fe] could not be reserved [ 0.122798] system 00:05: [io 0x164e-0x164f] has been reserved [ 0.122799] system 00:05: Plug and Play ACPI device, IDs PNP0c02 (active) [ 0.122813] pnp 00:06: Plug and Play ACPI device, IDs PNP0b00 (active) [ 0.122836] system 00:07: [io 0x1854-0x1857] has been reserved [ 0.122837] system 00:07: Plug and Play ACPI device, IDs INT3f0d PNP0c02 (active) [ 0.122888] system 00:08: [io 0x0a00-0x0a1f] has been reserved [ 0.122889] system 00:08: [io 0x0a20-0x0a23] has been reserved [ 0.122890] system 00:08: Plug and Play ACPI device, IDs PNP0c02 (active) [ 0.122940] system 00:09: [io 0x04d0-0x04d1] has been reserved [ 0.122941] system 00:09: Plug and Play ACPI device, IDs PNP0c02 (active) [ 0.123202] system 00:0a: [mem 0xfed1c000-0xfed1ffff] has been reserved [ 0.123203] system 00:0a: [mem 0xfed10000-0xfed17fff] has been reserved [ 0.123204] system 00:0a: [mem 0xfed18000-0xfed18fff] has been reserved [ 0.123205] system 00:0a: [mem 0xfed19000-0xfed19fff] has been reserved [ 0.123206] system 00:0a: [mem 0xf8000000-0xfbffffff] has been reserved [ 0.123207] system 00:0a: [mem 0xfed20000-0xfed3ffff] has been reserved [ 0.123209] system 00:0a: [mem 0xfed90000-0xfed93fff] could not be reserved [ 0.123210] system 00:0a: [mem 0xfed45000-0xfed8ffff] has been reserved [ 0.123211] system 00:0a: [mem 0xff000000-0xffffffff] has been reserved [ 0.123212] system 00:0a: [mem 0xfee00000-0xfeefffff] could not be reserved [ 0.123213] system 00:0a: [mem 0xf7fdf000-0xf7fdffff] has been reserved [ 0.123214] system 00:0a: [mem 0xf7fe0000-0xf7feffff] has been reserved [ 0.123215] system 00:0a: Plug and Play ACPI device, IDs PNP0c02 (active) [ 0.123343] pnp: PnP ACPI: found 11 devices [ 0.123344] ACPI: bus type PNP unregistered [ 0.128997] pci 0000:00:01.0: PCI bridge to [bus 01] [ 0.128999] pci 0000:00:01.0: bridge window [io 0xe000-0xefff] [ 0.129001] pci 0000:00:01.0: bridge window [mem 0xf7d00000-0xf7dfffff] [ 0.129003] pci 0000:00:01.0: bridge window [mem 0xe0000000-0xefffffff 64bit pref] [ 0.129005] pci 0000:00:1c.0: PCI bridge to [bus 02] [ 0.129013] pci 0000:00:1c.5: PCI bridge to [bus 03] [ 0.129017] pci 0000:00:1c.5: bridge window [mem 0xf7c00000-0xf7cfffff] [ 0.129023] pci_bus 0000:00: resource 4 [io 0x0000-0x0cf7] [ 0.129024] pci_bus 0000:00: resource 5 [io 0x0d00-0xffff] [ 0.129025] pci_bus 0000:00: resource 6 [mem 0x000a0000-0x000bffff] [ 0.129026] pci_bus 0000:00: resource 7 [mem 0x000d0000-0x000d3fff] [ 0.129027] pci_bus 0000:00: resource 8 [mem 0x000d4000-0x000d7fff] [ 0.129028] pci_bus 0000:00: resource 9 [mem 0x000d8000-0x000dbfff] [ 0.129029] pci_bus 0000:00: resource 10 [mem 0x000dc000-0x000dffff] [ 0.129030] pci_bus 0000:00: resource 11 [mem 0x000e0000-0x000e3fff] [ 0.129031] pci_bus 0000:00: resource 12 [mem 0x000e4000-0x000e7fff] [ 0.129032] pci_bus 0000:00: resource 13 [mem 0xcf200000-0xfeafffff] [ 0.129033] pci_bus 0000:01: resource 0 [io 0xe000-0xefff] [ 0.129034] pci_bus 0000:01: resource 1 [mem 0xf7d00000-0xf7dfffff] [ 0.129035] pci_bus 0000:01: resource 2 [mem 0xe0000000-0xefffffff 64bit pref] [ 0.129036] pci_bus 0000:03: resource 1 [mem 0xf7c00000-0xf7cfffff] [ 0.129055] NET: Registered protocol family 2 [ 0.129179] TCP established hash table entries: 131072 (order: 8, 1048576 bytes) [ 0.129331] TCP bind hash table entries: 65536 (order: 8, 1048576 bytes) [ 0.129445] TCP: Hash tables configured (established 131072 bind 65536) [ 0.129456] TCP: reno registered [ 0.129469] UDP hash table entries: 8192 (order: 6, 262144 bytes) [ 0.129513] UDP-Lite hash table entries: 8192 (order: 6, 262144 bytes) [ 0.129573] NET: Registered protocol family 1 [ 0.129580] pci 0000:00:02.0: Boot video device [ 0.129930] PCI: CLS 64 bytes, default 64 [ 0.129963] Unpacking initramfs... [ 0.208769] Freeing initrd memory: 8164K (ffff880036ffe000 - ffff8800377f7000) [ 0.208784] DMAR: No ATSR found [ 0.208804] IOMMU 0 0xfed90000: using Queued invalidation [ 0.208805] IOMMU 1 0xfed91000: using Queued invalidation [ 0.208806] IOMMU: Setting RMRR: [ 0.208814] IOMMU: Setting identity map for device 0000:00:02.0 [0xcd000000 - 0xcf1fffff] [ 0.209020] IOMMU: Setting identity map for device 0000:00:1d.0 [0xcbeb6000 - 0xcbec4fff] [ 0.209042] IOMMU: Setting identity map for device 0000:00:1a.0 [0xcbeb6000 - 0xcbec4fff] [ 0.209059] IOMMU: Setting identity map for device 0000:00:14.0 [0xcbeb6000 - 0xcbec4fff] [ 0.209072] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.209079] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff] [ 0.209206] PCI-DMA: Intel(R) Virtualization Technology for Directed I/O [ 0.212375] alg: No test for __gcm-aes-aesni (__driver-gcm-aes-aesni) [ 0.212595] Initialise system trusted keyring [ 0.212622] audit: initializing netlink socket (disabled) [ 0.212631] type=2000 audit(1390424971.201:1): initialized [ 0.227752] HugeTLB registered 2 MB page size, pre-allocated 0 pages [ 0.228640] zbud: loaded [ 0.228728] VFS: Disk quotas dquot_6.5.2 [ 0.228748] Dquot-cache hash table entries: 512 (order 0, 4096 bytes) [ 0.228932] msgmni has been set to 32047 [ 0.228960] Key type big_key registered [ 0.229276] alg: No test for stdrng (krng) [ 0.229280] NET: Registered protocol family 38 [ 0.229283] Key type asymmetric registered [ 0.229284] Asymmetric key parser &#039;x509&#039; registered [ 0.229308] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 252) [ 0.229329] io scheduler noop registered [ 0.229330] io scheduler deadline registered [ 0.229343] io scheduler cfq registered (default) [ 0.229463] pcieport 0000:00:01.0: irq 42 for MSI/MSI-X [ 0.229545] pcieport 0000:00:1c.0: irq 43 for MSI/MSI-X [ 0.229595] pcieport 0000:00:1c.5: irq 44 for MSI/MSI-X [ 0.229647] pcieport 0000:00:01.0: Signaling PME through PCIe PME interrupt [ 0.229648] pci 0000:01:00.0: Signaling PME through PCIe PME interrupt [ 0.229649] pci 0000:01:00.1: Signaling PME through PCIe PME interrupt [ 0.229651] pcie_pme 0000:00:01.0:pcie01: service driver pcie_pme loaded [ 0.229660] pcieport 0000:00:1c.0: Signaling PME through PCIe PME interrupt [ 0.229663] pcie_pme 0000:00:1c.0:pcie01: service driver pcie_pme loaded [ 0.229671] pcieport 0000:00:1c.5: Signaling PME through PCIe PME interrupt [ 0.229672] pci 0000:03:00.0: Signaling PME through PCIe PME interrupt [ 0.229675] pcie_pme 0000:00:1c.5:pcie01: service driver pcie_pme loaded [ 0.229681] pci_hotplug: PCI Hot Plug PCI Core version: 0.5 [ 0.229688] pciehp: PCI Express Hot Plug Controller Driver version: 0.4 [ 0.229694] pci-stub: add 1002:68E1 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.229697] pci-stub 0000:01:00.0: claimed by stub [ 0.229699] pci-stub: add 1002:AA68 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.229701] pci-stub 0000:01:00.1: claimed by stub [ 0.229703] pci-stub: add 1106:3432 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.229706] pci-stub 0000:03:00.0: claimed by stub [ 0.229719] intel_idle: MWAIT substates: 0x42120 [ 0.229720] intel_idle: v0.4 model 0x3C [ 0.229721] intel_idle: lapic_timer_reliable_states 0xffffffff [ 0.229812] input: Power Button as /devices/LNXSYSTM:00/device:00/PNP0C0C:00/input/input0 [ 0.229815] ACPI: Power Button [PWRB] [ 0.229835] input: Power Button as /devices/LNXSYSTM:00/LNXPWRBN:00/input/input1 [ 0.229836] ACPI: Power Button [PWRF] [ 0.229870] ACPI: Fan [FAN0] (off) [ 0.229883] ACPI: Fan [FAN1] (off) [ 0.229897] ACPI: Fan [FAN2] (off) [ 0.229909] ACPI: Fan [FAN3] (off) [ 0.229920] ACPI: Fan [FAN4] (off) [ 0.230144] thermal LNXTHERM:00: registered as thermal_zone0 [ 0.230145] ACPI: Thermal Zone [TZ00] (28 C) [ 0.230250] thermal LNXTHERM:01: registered as thermal_zone1 [ 0.230251] ACPI: Thermal Zone [TZ01] (30 C) [ 0.230269] GHES: HEST is not enabled! [ 0.230295] Serial: 8250/16550 driver, 4 ports, IRQ sharing enabled [ 0.230562] Non-volatile memory driver v1.3 [ 0.230563] Linux agpgart interface v0.103 [ 0.230620] ahci 0000:00:1f.2: version 3.0 [ 0.230678] ahci 0000:00:1f.2: irq 45 for MSI/MSI-X [ 0.230715] ahci 0000:00:1f.2: AHCI 0001.0300 32 slots 5 ports 6 Gbps 0xb impl SATA mode [ 0.230717] ahci 0000:00:1f.2: flags: 64bit ncq pm led clo pio slum part ems apst [ 0.234373] scsi0 : ahci [ 0.234532] scsi1 : ahci [ 0.234627] scsi2 : ahci [ 0.234744] scsi3 : ahci [ 0.234783] scsi4 : ahci [ 0.234798] ata1: SATA max UDMA/133 abar m2048@0xf7e3a000 port 0xf7e3a100 irq 45 [ 0.234801] ata2: SATA max UDMA/133 abar m2048@0xf7e3a000 port 0xf7e3a180 irq 45 [ 0.234802] ata3: DUMMY [ 0.234804] ata4: SATA max UDMA/133 abar m2048@0xf7e3a000 port 0xf7e3a280 irq 45 [ 0.234804] ata5: DUMMY [ 0.234847] libphy: Fixed MDIO Bus: probed [ 0.234890] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver [ 0.234891] ehci-pci: EHCI PCI platform driver [ 0.234994] ehci-pci 0000:00:1a.0: EHCI Host Controller [ 0.235016] ehci-pci 0000:00:1a.0: new USB bus registered, assigned bus number 1 [ 0.235026] ehci-pci 0000:00:1a.0: debug port 2 [ 0.238923] ehci-pci 0000:00:1a.0: cache line size of 64 is not supported [ 0.238933] ehci-pci 0000:00:1a.0: irq 16, io mem 0xf7e3c000 [ 0.244012] ehci-pci 0000:00:1a.0: USB 2.0 started, EHCI 1.00 [ 0.244037] usb usb1: New USB device found, idVendor=1d6b, idProduct=0002 [ 0.244038] usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1 [ 0.244039] usb usb1: Product: EHCI Host Controller [ 0.244040] usb usb1: Manufacturer: Linux 3.13.0-1.kvm_pt.fc20.x86_64 ehci_hcd [ 0.244041] usb usb1: SerialNumber: 0000:00:1a.0 [ 0.244179] hub 1-0:1.0: USB hub found [ 0.244183] hub 1-0:1.0: 2 ports detected [ 0.244295] ehci-pci 0000:00:1d.0: EHCI Host Controller [ 0.244402] ehci-pci 0000:00:1d.0: new USB bus registered, assigned bus number 2 [ 0.244412] ehci-pci 0000:00:1d.0: debug port 2 [ 0.248327] ehci-pci 0000:00:1d.0: cache line size of 64 is not supported [ 0.248336] ehci-pci 0000:00:1d.0: irq 23, io mem 0xf7e3b000 [ 0.254048] ehci-pci 0000:00:1d.0: USB 2.0 started, EHCI 1.00 [ 0.254093] usb usb2: New USB device found, idVendor=1d6b, idProduct=0002 [ 0.254095] usb usb2: New USB device strings: Mfr=3, Product=2, SerialNumber=1 [ 0.254096] usb usb2: Product: EHCI Host Controller [ 0.254097] usb usb2: Manufacturer: Linux 3.13.0-1.kvm_pt.fc20.x86_64 ehci_hcd [ 0.254098] usb usb2: SerialNumber: 0000:00:1d.0 [ 0.254235] hub 2-0:1.0: USB hub found [ 0.254239] hub 2-0:1.0: 2 ports detected [ 0.254320] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver [ 0.254321] ohci-pci: OHCI PCI platform driver [ 0.254328] uhci_hcd: USB Universal Host Controller Interface driver [ 0.254419] xhci_hcd 0000:00:14.0: xHCI Host Controller [ 0.254523] xhci_hcd 0000:00:14.0: new USB bus registered, assigned bus number 3 [ 0.254621] xhci_hcd 0000:00:14.0: cache line size of 64 is not supported [ 0.254643] xhci_hcd 0000:00:14.0: irq 46 for MSI/MSI-X [ 0.254690] usb usb3: New USB device found, idVendor=1d6b, idProduct=0002 [ 0.254691] usb usb3: New USB device strings: Mfr=3, Product=2, SerialNumber=1 [ 0.254692] usb usb3: Product: xHCI Host Controller [ 0.254693] usb usb3: Manufacturer: Linux 3.13.0-1.kvm_pt.fc20.x86_64 xhci_hcd [ 0.254694] usb usb3: SerialNumber: 0000:00:14.0 [ 0.254758] hub 3-0:1.0: USB hub found [ 0.254772] hub 3-0:1.0: 14 ports detected [ 0.256973] xhci_hcd 0000:00:14.0: xHCI Host Controller [ 0.257014] xhci_hcd 0000:00:14.0: new USB bus registered, assigned bus number 4 [ 0.257038] usb usb4: New USB device found, idVendor=1d6b, idProduct=0003 [ 0.257039] usb usb4: New USB device strings: Mfr=3, Product=2, SerialNumber=1 [ 0.257040] usb usb4: Product: xHCI Host Controller [ 0.257041] usb usb4: Manufacturer: Linux 3.13.0-1.kvm_pt.fc20.x86_64 xhci_hcd [ 0.257042] usb usb4: SerialNumber: 0000:00:14.0 [ 0.257103] hub 4-0:1.0: USB hub found [ 0.257113] hub 4-0:1.0: 6 ports detected [ 0.262089] usbcore: registered new interface driver usbserial [ 0.262097] usbcore: registered new interface driver usbserial_generic [ 0.262100] usbserial: USB Serial support registered for generic [ 0.262118] i8042: PNP: No PS/2 controller found. Probing ports directly. [ 0.264373] serio: i8042 KBD port at 0x60,0x64 irq 1 [ 0.264377] serio: i8042 AUX port at 0x60,0x64 irq 12 [ 0.264518] mousedev: PS/2 mouse device common for all mice [ 0.264795] rtc_cmos 00:06: RTC can wake from S4 [ 0.264899] rtc_cmos 00:06: rtc core: registered rtc_cmos as rtc0 [ 0.264924] rtc_cmos 00:06: alarms up to one month, y3k, 242 bytes nvram, hpet irqs [ 0.264961] device-mapper: uevent: version 1.0.3 [ 0.265002] device-mapper: ioctl: 4.27.0-ioctl (2013-10-30) initialised: dm-devel@redhat.com [ 0.265011] Intel P-state driver initializing. [ 0.265018] Intel pstate controlling: cpu 0 [ 0.265027] Intel pstate controlling: cpu 1 [ 0.265033] Intel pstate controlling: cpu 2 [ 0.265041] Intel pstate controlling: cpu 3 [ 0.265180] hidraw: raw HID events driver (C) Jiri Kosina [ 0.265221] usbcore: registered new interface driver usbhid [ 0.265222] usbhid: USB HID core driver [ 0.265246] drop_monitor: Initializing network drop monitor service [ 0.265286] ip_tables: (C) 2000-2006 Netfilter Core Team [ 0.265409] TCP: cubic registered [ 0.265410] Initializing XFRM netlink socket [ 0.265457] NET: Registered protocol family 10 [ 0.265541] mip6: Mobile IPv6 [ 0.265542] NET: Registered protocol family 17 [ 0.265687] Loading compiled-in X.509 certificates [ 0.266218] Loaded X.509 cert &#039;Fedora kernel signing key: c0aca5f079cf43ba420c1ae14c73a70e0b4bc12e&#039; [ 0.266225] registered taskstats version 1 [ 0.266887] Magic number: 14:466:197 [ 0.266912] acpi device:52: hash matches [ 0.266923] acpi PNP0100:00: hash matches [ 0.266967] rtc_cmos 00:06: setting system clock to 2014-01-22 21:09:31 UTC (1390424971) [ 0.266989] PM: Hibernation image not present or could not be loaded. [ 0.539175] ata2: SATA link up 6.0 Gbps (SStatus 133 SControl 300) [ 0.539193] ata1: SATA link up 6.0 Gbps (SStatus 133 SControl 300) [ 0.539209] ata4: SATA link up 1.5 Gbps (SStatus 113 SControl 300) [ 0.539660] ata1.00: ATA-9: M4-CT128M4SSD2, 070H, max UDMA/100 [ 0.539663] ata1.00: 250069680 sectors, multi 16: LBA48 NCQ (depth 31/32), AA [ 0.539838] ata4.00: ATAPI: TSSTcorp CDDVDW SH-S203P, SB01, max UDMA/100 [ 0.540020] ata2.00: ATA-9: ST2000DM001-1CH164, CC29, max UDMA/133 [ 0.540022] ata2.00: 3907029168 sectors, multi 16: LBA48 NCQ (depth 31/32), AA [ 0.540155] ata1.00: configured for UDMA/100 [ 0.540267] scsi 0:0:0:0: Direct-Access ATA M4-CT128M4SSD2 070H PQ: 0 ANSI: 5 [ 0.540352] sd 0:0:0:0: [sda] 250069680 512-byte logical blocks: (128 GB/119 GiB) [ 0.540372] sd 0:0:0:0: [sda] Write Protect is off [ 0.540373] sd 0:0:0:0: [sda] Mode Sense: 00 3a 00 00 [ 0.540377] sd 0:0:0:0: Attached scsi generic sg0 type 0 [ 0.540380] sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn&#039;t support DPO or FUA [ 0.540640] sda: sda1 sda2 sda3 [ 0.540729] ata4.00: configured for UDMA/100 [ 0.540772] sd 0:0:0:0: [sda] Attached SCSI disk [ 0.540844] ata2.00: configured for UDMA/133 [ 0.540940] scsi 1:0:0:0: Direct-Access ATA ST2000DM001-1CH1 CC29 PQ: 0 ANSI: 5 [ 0.540984] sd 1:0:0:0: [sdb] 3907029168 512-byte logical blocks: (2.00 TB/1.81 TiB) [ 0.540985] sd 1:0:0:0: [sdb] 4096-byte physical blocks [ 0.540999] sd 1:0:0:0: [sdb] Write Protect is off [ 0.541000] sd 1:0:0:0: [sdb] Mode Sense: 00 3a 00 00 [ 0.541005] sd 1:0:0:0: [sdb] Write cache: enabled, read cache: enabled, doesn&#039;t support DPO or FUA [ 0.541013] sd 1:0:0:0: Attached scsi generic sg1 type 0 [ 0.541678] scsi 3:0:0:0: CD-ROM TSSTcorp CDDVDW SH-S203P SB01 PQ: 0 ANSI: 5 [ 0.543979] sr0: scsi3-mmc drive: 48x/48x writer dvd-ram cd/rw xa/form2 cdda tray [ 0.543981] cdrom: Uniform CD-ROM driver Revision: 3.20 [ 0.544059] sr 3:0:0:0: Attached scsi CD-ROM sr0 [ 0.544128] sr 3:0:0:0: Attached scsi generic sg2 type 5 [ 0.546190] usb 1-1: new high-speed USB device number 2 using ehci-pci [ 0.586653] sdb: sdb1 sdb2 sdb3 sdb4 sdb5 [ 0.586948] sd 1:0:0:0: [sdb] Attached SCSI disk [ 0.587501] Freeing unused kernel memory: 1424K (ffffffff81d0c000 - ffffffff81e70000) [ 0.587502] Write protecting the kernel read-only data: 12288k [ 0.589531] Freeing unused kernel memory: 1424K (ffff88000169c000 - ffff880001800000) [ 0.591005] Freeing unused kernel memory: 1116K (ffff880001ae9000 - ffff880001c00000) [ 0.592682] systemd[1]: systemd 208 running in system mode. (+PAM +LIBWRAP +AUDIT +SELINUX +IMA +SYSVINIT +LIBCRYPTSETUP +GCRYPT +ACL +XZ) [ 0.592770] systemd[1]: Running in initial RAM disk. [ 0.592797] systemd[1]: Set hostname to &lt;kang.fritz.box&gt;. [ 0.593142] random: systemd urandom read with 30 bits of entropy available [ 0.595345] systemd[1]: Expecting device dev-disk-by\x2duuid-b7aad659\x2daaf7\x2d44d7\x2da6a7\x2d7458c6271719.device... [ 0.595354] systemd[1]: Starting -.slice. [ 0.595426] systemd[1]: Created slice -.slice. [ 0.595434] systemd[1]: Starting System Slice. [ 0.595465] systemd[1]: Created slice System Slice. [ 0.595470] systemd[1]: Starting Slices. [ 0.595475] systemd[1]: Reached target Slices. [ 0.595480] systemd[1]: Starting Timers. [ 0.595486] systemd[1]: Reached target Timers. [ 0.595492] systemd[1]: Starting Dispatch Password Requests to Console Directory Watch. [ 0.595511] systemd[1]: Started Dispatch Password Requests to Console Directory Watch. [ 0.595516] systemd[1]: Starting Paths. [ 0.595522] systemd[1]: Reached target Paths. [ 0.595527] systemd[1]: Starting Journal Socket. [ 0.595555] systemd[1]: Listening on Journal Socket. [ 0.595628] systemd[1]: Starting dracut cmdline hook... [ 0.595782] systemd[1]: Starting Journal Service... [ 0.595947] systemd[1]: Started Journal Service. [ 0.599122] systemd-journald[94]: Vacuuming done, freed 0 bytes [ 0.631447] systemd-udevd[152]: starting version 208 [ 0.660525] usb 1-1: New USB device found, idVendor=8087, idProduct=8008 [ 0.660527] usb 1-1: New USB device strings: Mfr=0, Product=0, SerialNumber=0 [ 0.660671] hub 1-1:1.0: USB hub found [ 0.660771] hub 1-1:1.0: 6 ports detected [ 0.763233] usb 2-1: new high-speed USB device number 2 using ehci-pci [ 0.877668] usb 2-1: New USB device found, idVendor=8087, idProduct=8000 [ 0.877671] usb 2-1: New USB device strings: Mfr=0, Product=0, SerialNumber=0 [ 0.877886] hub 2-1:1.0: USB hub found [ 0.877998] hub 2-1:1.0: 8 ports detected [ 1.032409] usb 3-2: new low-speed USB device number 2 using xhci_hcd [ 1.039814] random: nonblocking pool is initialized [ 1.047621] usb 3-2: New USB device found, idVendor=2101, idProduct=0201 [ 1.047623] usb 3-2: New USB device strings: Mfr=1, Product=0, SerialNumber=0 [ 1.047625] usb 3-2: Manufacturer: USB Device [ 1.047715] usb 3-2: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes [ 1.050757] hid-generic 0003:2101:0201.0001: hiddev0,hidraw0: USB HID v1.00 Device [USB Device] on usb-0000:00:14.0-2/input0 [ 1.171598] PM: Starting manual resume from disk [ 1.171601] PM: Hibernation image partition 8:17 present [ 1.171602] PM: Looking for hibernation image. [ 1.171852] PM: Image not found (code -22) [ 1.171854] PM: Hibernation image not present or could not be loaded. [ 1.178678] EXT4-fs (sda3): mounted filesystem with ordered data mode. Opts: (null) [ 1.203430] usb 3-10: new high-speed USB device number 3 using xhci_hcd [ 1.213413] tsc: Refined TSC clocksource calibration: 3392.145 MHz [ 1.215638] usb 3-10: New USB device found, idVendor=05e3, idProduct=0606 [ 1.215640] usb 3-10: New USB device strings: Mfr=0, Product=1, SerialNumber=0 [ 1.215642] usb 3-10: Product: USB2.0 Hub [ 1.216078] hub 3-10:1.0: USB hub found [ 1.216312] hub 3-10:1.0: 4 ports detected [ 1.218768] systemd-journald[94]: Received SIGTERM [ 1.262032] systemd[1]: RTC configured in localtime, applying delta of 60 minutes to system time. [ 1.320018] systemd-readahead[258]: Bumped block_nr parameter of 8:0 to 20480. This is a temporary hack and should be removed one day. [ 1.334157] systemd-journald[266]: Vacuuming done, freed 0 bytes [ 1.366121] EXT4-fs (sda3): re-mounted. Opts: (null) [ 1.384640] systemd-udevd[310]: starting version 208 [ 1.413552] shpchp: Standard Hot Plug PCI Controller Driver version: 0.4 [ 1.418043] [drm] Initialized drm 1.1.0 20060810 [ 1.419236] pps_core: LinuxPPS API ver. 1 registered [ 1.419237] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt; [ 1.419932] PTP clock support registered [ 1.421305] mei_me 0000:00:16.0: irq 47 for MSI/MSI-X [ 1.422566] e1000e: Intel(R) PRO/1000 Network Driver - 2.3.2-k [ 1.422567] e1000e: Copyright(c) 1999 - 2013 Intel Corporation. [ 1.423164] e1000e 0000:00:19.0: Interrupt Throttling Rate (ints/sec) set to dynamic conservative mode [ 1.423180] e1000e 0000:00:19.0: irq 48 for MSI/MSI-X [ 1.432277] microcode: CPU0 sig=0x306c3, pf=0x2, revision=0x16 [ 1.433379] microcode: CPU1 sig=0x306c3, pf=0x2, revision=0x16 [ 1.433396] microcode: CPU2 sig=0x306c3, pf=0x2, revision=0x16 [ 1.433411] microcode: CPU3 sig=0x306c3, pf=0x2, revision=0x16 [ 1.434289] microcode: Microcode Update Driver: v2.00 &lt;tigran@aivazian.fsnet.co.uk&gt;, Peter Oruba [ 1.439274] alg: No test for crc32 (crc32-pclmul) [ 1.481722] usb 3-10.1: new low-speed USB device number 4 using xhci_hcd [ 1.487657] Adding 4095996k swap on /dev/sdb1. Priority:-1 extents:1 across:4095996k FS [ 1.496518] usb 3-10.1: New USB device found, idVendor=046a, idProduct=0011 [ 1.496521] usb 3-10.1: New USB device strings: Mfr=0, Product=0, SerialNumber=0 [ 1.496585] usb 3-10.1: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes [ 1.499848] input: HID 046a:0011 as /devices/pci0000:00/0000:00:14.0/usb3/3-10/3-10.1/3-10.1:1.0/input/input5 [ 1.499898] hid-generic 0003:046A:0011.0002: input,hidraw1: USB HID v1.10 Keyboard [HID 046a:0011] on usb-0000:00:14.0-10.1/input0 [ 1.562747] usb 3-10.2: new full-speed USB device number 5 using xhci_hcd [ 1.576796] usb 3-10.2: New USB device found, idVendor=046d, idProduct=c049 [ 1.576798] usb 3-10.2: New USB device strings: Mfr=1, Product=2, SerialNumber=0 [ 1.576800] usb 3-10.2: Product: USB Gaming Mouse [ 1.576800] usb 3-10.2: Manufacturer: Logitech [ 1.576873] usb 3-10.2: ep 0x82 - rounding interval to 64 microframes, ep desc says 80 microframes [ 1.579061] input: Logitech USB Gaming Mouse as /devices/pci0000:00/0000:00:14.0/usb3/3-10/3-10.2/3-10.2:1.0/input/input6 [ 1.579140] hid-generic 0003:046D:C049.0003: input,hidraw2: USB HID v1.11 Mouse [Logitech USB Gaming Mouse] on usb-0000:00:14.0-10.2/input0 [ 1.580822] hid-generic 0003:046D:C049.0004: hiddev0,hidraw3: USB HID v1.11 Device [Logitech USB Gaming Mouse] on usb-0000:00:14.0-10.2/input1 [ 1.592721] e1000e 0000:00:19.0 eth0: registered PHC clock [ 1.592724] e1000e 0000:00:19.0 eth0: (PCI Express:2.5GT/s:Width x1) 00:22:4d:a9:d9:80 [ 1.592726] e1000e 0000:00:19.0 eth0: Intel(R) PRO/1000 Network Connection [ 1.592764] e1000e 0000:00:19.0 eth0: MAC: 11, PHY: 12, PBA No: FFFFFF-0FF [ 1.593063] ACPI Warning: 0x0000000000001828-0x000000000000182f SystemIO conflicts with Region \PMIO 1 (20131115/utaddress-251) [ 1.593067] ACPI: If an ACPI driver is available for this device, you should use it instead of the native driver [ 1.593070] ACPI Warning: 0x0000000000001c30-0x0000000000001c3f SystemIO conflicts with Region \GPRL 1 (20131115/utaddress-251) [ 1.593071] ACPI Warning: 0x0000000000001c30-0x0000000000001c3f SystemIO conflicts with Region \GPR_ 2 (20131115/utaddress-251) [ 1.593073] ACPI: If an ACPI driver is available for this device, you should use it instead of the native driver [ 1.593073] ACPI Warning: 0x0000000000001c00-0x0000000000001c2f SystemIO conflicts with Region \GPRL 1 (20131115/utaddress-251) [ 1.593075] ACPI Warning: 0x0000000000001c00-0x0000000000001c2f SystemIO conflicts with Region \GPR_ 2 (20131115/utaddress-251) [ 1.593076] ACPI: If an ACPI driver is available for this device, you should use it instead of the native driver [ 1.593077] lpc_ich: Resource conflict(s) found affecting gpio_ich [ 1.593226] ACPI Warning: 0x000000000000f040-0x000000000000f05f SystemIO conflicts with Region \_SB_.PCI0.SBUS.SMBI 1 (20131115/utaddress-251) [ 1.593229] ACPI: If an ACPI driver is available for this device, you should use it instead of the native driver [ 1.594019] [drm] Memory usable by graphics device = 2048M [ 1.594322] iTCO_vendor_support: vendor-support=0 [ 1.595009] iTCO_wdt: Intel TCO WatchDog Timer Driver v1.10 [ 1.595038] iTCO_wdt: Found a Lynx Point TCO device (Version=2, TCOBASE=0x1860) [ 1.595134] iTCO_wdt: initialized. heartbeat=30 sec (nowayout=0) [ 1.618628] i915 0000:00:02.0: irq 49 for MSI/MSI-X [ 1.618632] systemd-udevd[312]: renamed network interface eth0 to em1 [ 1.618635] [drm] Supports vblank timestamp caching Rev 2 (21.10.2013). [ 1.618636] [drm] Driver supports precise vblank timestamp query. [ 1.622329] EXT4-fs (sdb2): mounted filesystem with ordered data mode. Opts: (null) [ 1.714705] fbcon: inteldrmfb (fb0) is primary device [ 1.811304] Console: switching to colour frame buffer device 240x75 [ 1.814843] i915 0000:00:02.0: fb0: inteldrmfb frame buffer device [ 1.814845] i915 0000:00:02.0: registered panic notifier [ 1.814847] vgaarb: device changed decodes: PCI:0000:00:02.0,olddecodes=io+mem,decodes=io:owns=io [ 1.821426] ACPI: Video Device [GFX0] (multi-head: yes rom: no post: no) [ 1.821708] acpi device:53: registered as cooling_device9 [ 1.821750] input: Video Bus as /devices/LNXSYSTM:00/device:00/PNP0A08:00/LNXVIDEO:00/input/input7 [ 1.821815] [drm] Initialized i915 1.6.0 20080730 for 0000:00:02.0 on minor 0 [ 1.821899] ALSA sound/pci/hda/hda_i915.c:58 HDA driver get symbol successfully from i915 module [ 1.821920] snd_hda_intel 0000:00:03.0: irq 50 for MSI/MSI-X [ 1.822030] snd_hda_intel 0000:00:1b.0: irq 51 for MSI/MSI-X [ 1.828628] input: HDA Intel HDMI HDMI/DP,pcm=7 as /devices/pci0000:00/0000:00:03.0/sound/card0/input9 [ 1.828755] input: HDA Intel HDMI HDMI/DP,pcm=3 as /devices/pci0000:00/0000:00:03.0/sound/card0/input8 [ 1.831579] ALSA sound/pci/hda/patch_realtek.c:419 SKU: Nid=0x1d sku_cfg=0x4016f601 [ 1.831580] ALSA sound/pci/hda/patch_realtek.c:421 SKU: port_connectivity=0x1 [ 1.831581] ALSA sound/pci/hda/patch_realtek.c:422 SKU: enable_pcbeep=0x1 [ 1.831582] ALSA sound/pci/hda/patch_realtek.c:423 SKU: check_sum=0x00000006 [ 1.831583] ALSA sound/pci/hda/patch_realtek.c:424 SKU: customization=0x000000f6 [ 1.831583] ALSA sound/pci/hda/patch_realtek.c:425 SKU: external_amp=0x0 [ 1.831584] ALSA sound/pci/hda/patch_realtek.c:426 SKU: platform_type=0x0 [ 1.831585] ALSA sound/pci/hda/patch_realtek.c:427 SKU: swap=0x0 [ 1.831585] ALSA sound/pci/hda/patch_realtek.c:428 SKU: override=0x1 [ 1.831992] ALSA sound/pci/hda/hda_auto_parser.c:393 autoconfig: line_outs=4 (0x14/0x15/0x16/0x18/0x0) type:line [ 1.831993] ALSA sound/pci/hda/hda_auto_parser.c:397 speaker_outs=0 (0x0/0x0/0x0/0x0/0x0) [ 1.831994] ALSA sound/pci/hda/hda_auto_parser.c:401 hp_outs=1 (0x1b/0x0/0x0/0x0/0x0) [ 1.831995] ALSA sound/pci/hda/hda_auto_parser.c:402 mono: mono_out=0x0 [ 1.831996] ALSA sound/pci/hda/hda_auto_parser.c:405 dig-out=0x11/0x1e [ 1.831996] ALSA sound/pci/hda/hda_auto_parser.c:406 inputs: [ 1.831998] ALSA sound/pci/hda/hda_auto_parser.c:410 Mic=0x19 [ 1.831998] ALSA sound/pci/hda/hda_auto_parser.c:410 Line=0x1a [ 1.831999] ALSA sound/pci/hda/patch_realtek.c:491 realtek: No valid SSID, checking pincfg 0x4016f601 for NID 0x1d [ 1.832000] ALSA sound/pci/hda/patch_realtek.c:507 realtek: Enabling init ASM_ID=0xf601 CODEC_ID=10ec0892 [ 1.843751] input: HDA Intel PCH Line Out Side as /devices/pci0000:00/0000:00:1b.0/sound/card1/input14 [ 1.843793] input: HDA Intel PCH Line Out CLFE as /devices/pci0000:00/0000:00:1b.0/sound/card1/input13 [ 1.843822] input: HDA Intel PCH Line Out Surround as /devices/pci0000:00/0000:00:1b.0/sound/card1/input12 [ 1.843851] input: HDA Intel PCH Line Out Front as /devices/pci0000:00/0000:00:1b.0/sound/card1/input11 [ 1.843882] input: HDA Intel PCH Line as /devices/pci0000:00/0000:00:1b.0/sound/card1/input10 [ 1.947632] EXT4-fs (sdb3): mounted filesystem with ordered data mode. Opts: (null) [ 1.950794] systemd-journald[266]: Received request to flush runtime journal from PID 1 [ 2.004338] type=1305 audit(1390421373.235:2): audit_pid=409 old=0 auid=4294967295 ses=4294967295 res=1 [ 2.214030] Switched to clocksource tsc [ 2.714323] [drm] Enabling RC6 states: RC6 on, RC6p off, RC6pp off [ 5.619000] nf_conntrack version 0.5.0 (16384 buckets, 65536 max) [ 5.625750] ip6_tables: (C) 2000-2006 Netfilter Core Team [ 5.641712] Ebtables v2.0 registered [ 5.647645] Bridge firewalling registered [ 5.859069] cfg80211: Calling CRDA to update world regulatory domain [ 5.860002] cfg80211: World regulatory domain updated: [ 5.860004] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp) [ 5.860005] cfg80211: (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm) [ 5.860006] cfg80211: (2457000 KHz - 2482000 KHz @ 40000 KHz), (300 mBi, 2000 mBm) [ 5.860007] cfg80211: (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm) [ 5.860007] cfg80211: (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm) [ 5.860008] cfg80211: (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm) [ 6.221398] e1000e 0000:00:19.0: irq 48 for MSI/MSI-X [ 6.321607] e1000e 0000:00:19.0: irq 48 for MSI/MSI-X [ 6.321694] IPv6: ADDRCONF(NETDEV_UP): em1: link is not ready [ 6.489112] Bluetooth: Core ver 2.17 [ 6.489123] NET: Registered protocol family 31 [ 6.489124] Bluetooth: HCI device and connection manager initialized [ 6.489130] Bluetooth: HCI socket layer initialized [ 6.489132] Bluetooth: L2CAP socket layer initialized [ 6.489134] Bluetooth: SCO socket layer initialized [ 6.490888] Bluetooth: BNEP (Ethernet Emulation) ver 1.3 [ 6.490890] Bluetooth: BNEP filters: protocol multicast [ 6.490893] Bluetooth: BNEP socket layer initialized [ 7.830807] e1000e: em1 NIC Link is Up 100 Mbps Full Duplex, Flow Control: Rx/Tx [ 7.830811] e1000e 0000:00:19.0 em1: 10/100 speed: disabling TSO [ 7.830839] IPv6: ADDRCONF(NETDEV_CHANGE): em1: link becomes ready [ 8.007471] e1000e 0000:00:19.0 em1: changing MTU from 1500 to 1420 [ 9.734615] e1000e: em1 NIC Link is Up 100 Mbps Full Duplex, Flow Control: Rx/Tx [ 9.734618] e1000e 0000:00:19.0 em1: 10/100 speed: disabling TSO</code></pre></div><p>IOMMU-Groups</p><div class="codebox"><pre class="vscroll"><code>### Group 0 ### 00:00.0 Host bridge: Intel Corporation 4th Gen Core Processor DRAM Controller (rev 06) ### Group 1 ### 00:01.0 PCI bridge: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor PCI Express x16 Controller (rev 06) 01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Park [Mobility Radeon HD 5430] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Cedar HDMI Audio [Radeon HD 5400/6300 Series] ### Group 2 ### 00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller (rev 06) ### Group 3 ### 00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor HD Audio Controller (rev 06) ### Group 4 ### 00:14.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB xHCI (rev 04) ### Group 5 ### 00:16.0 Communication controller: Intel Corporation 8 Series/C220 Series Chipset Family MEI Controller #1 (rev 04) ### Group 6 ### 00:19.0 Ethernet controller: Intel Corporation Ethernet Connection I217-V (rev 04) ### Group 7 ### 00:1a.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #2 (rev 04) ### Group 8 ### 00:1b.0 Audio device: Intel Corporation 8 Series/C220 Series Chipset High Definition Audio Controller (rev 04) ### Group 9 ### 00:1c.0 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #1 (rev d4) ### Group 10 ### 00:1c.5 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #6 (rev d4) ### Group 11 ### 00:1d.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #1 (rev 04) ### Group 12 ### 00:1f.0 ISA bridge: Intel Corporation H87 Express LPC Controller (rev 04) 00:1f.2 SATA controller: Intel Corporation 8 Series/C220 Series Chipset Family 6-port SATA Controller 1 [AHCI mode] (rev 04) 00:1f.3 SMBus: Intel Corporation 8 Series/C220 Series Chipset Family SMBus Controller (rev 04) ### Group 13 ### 03:00.0 USB controller: VIA Technologies, Inc. VL80x xHCI USB 3.0 Controller (rev 03)</code></pre></div><br /><p>lspci -vv -d 1106:3432</p><div class="codebox"><pre class="vscroll"><code>03:00.0 USB controller: VIA Technologies, Inc. VL80x xHCI USB 3.0 Controller (rev 03) (prog-if 30 [XHCI]) Subsystem: VIA Technologies, Inc. VL80x xHCI USB 3.0 Controller Control: I/O- Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Interrupt: pin A routed to IRQ 17 Region 0: Memory at f7c00000 (32-bit, non-prefetchable) [size=4K] Capabilities: [80] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1+,D2+,D3hot+,D3cold+) Status: D3 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [90] MSI: Enable- Count=1/1 Maskable- 64bit+ Address: 0000000000000000 Data: 0000 Capabilities: [c4] Express (v2) Endpoint, MSI 00 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s &lt;1us, L1 &lt;16us ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop+ MaxPayload 128 bytes, MaxReadReq 512 bytes DevSta: CorrErr+ UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #0, Speed 5GT/s, Width x1, ASPM not supported, Exit Latency L0s &lt;2us, L1 &lt;16us ClockPM+ Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Range B, TimeoutDis+, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [100 v1] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES- TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP+ Rollover+ Timeout+ NonFatalErr- CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- AERCap: First Error Pointer: 00, GenCap- CGenEn- ChkCap- ChkEn- Kernel driver in use: vfio-pci</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373855">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373860" class="blockpost roweven"> <h2><span><span class="conr">#1056</span> <a href="viewtopic.php?pid=1373860#p1373860">2014-01-22 21:10:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>roms wrote:</cite><blockquote><div><p>OK, now I have a problem. (For my setup, please see my post above.)<br />I also want to pass a USB3.0-Card (VIA VL800 Chipset) to the guest.</p><p>With the ACS-patch from yesterday, the card has its own IOMMU-group. I attached pci-stub to the card and passed it to the VM with &quot;-device vfio-pci,host=03:00.0,bus=pcie.0&quot;.<br />The card gets recognized by Windows but the driver won&#039;t start up (Error 10 in Device Manager).<br />On the host, dmesg gets spammed with:</p><div class="codebox"><pre><code>DMAR:[fault reason 06] PTE Read access is not set [ 163.401213] dmar: DRHD: handling fault status reg 2 [ 163.401215] dmar: DMAR:[DMA Read] Request device [03:00.0] fault addr 3f000f000 </code></pre></div><p>I would like to understand whats probably causing the problem. The card gets initialised by the BIOS (attached keyboard does work). I tried turning on the &quot;Fastboot-Mode&quot; which should let the card uninitialised as I understand it. But the problem persists. So its probably not a &quot;previous initialisation&quot; issue?</p><p>Is it likely that a diffrent USB-Card (with different controller-chip) suffers from the same problem?</p></div></blockquote></div><p>It looks like the IOMMU did its job. For some reason the USB card is trying to read from an address just below 16G.&#160; Since you&#039;ve got a 16G host, you&#039;re likely not creating a VM large enough that it should be accessing those kinds of addresses.&#160; I&#039;ve tried both Etron and Renesas USB3 controllers.&#160; See back at post #876 for the models.</p> <p class="postedit"><em>Last edited by aw (2014-01-22 21:10:50)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373860">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373885" class="blockpost rowodd"> <h2><span><span class="conr">#1057</span> <a href="viewtopic.php?pid=1373885#p1373885">2014-01-22 22:28:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78821">roms</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-22</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>It looks like the IOMMU did its job. For some reason the USB card is trying to read from an address just below 16G.&#160; Since you&#039;ve got a 16G host, you&#039;re likely not creating a VM large enough that it should be accessing those kinds of addresses.&#160; I&#039;ve tried both Etron and Renesas USB3 controllers.&#160; See back at post #876 for the models.</p></div></blockquote></div><p>OK, I will try to get one of these then and report the result here. Thank you for your work, aw!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373885">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1373979" class="blockpost roweven"> <h2><span><span class="conr">#1058</span> <a href="viewtopic.php?pid=1373979#p1373979">2014-01-23 05:36:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Speaking of &quot;iommu doing its job&quot;, using VT-d is an awesome way to protect against Firewire DMA attacks.&#160; If I pass the Firewire controller to a guest, firewire memory dumps get the guest&#039;s memory.&#160; If I leave it on the host, with VT-d enabled, the host nearly locks up (spewing DMAR errors), and the dumper gets 4 gigabytes of 0xff.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1373979">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374139" class="blockpost rowodd"> <h2><span><span class="conr">#1059</span> <a href="viewtopic.php?pid=1374139#p1374139">2014-01-23 18:44:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>For your testing pleasure (Intel root port ACS):</p><p><a href="https://lkml.org/lkml/2014/1/20/453" rel="nofollow">https://lkml.org/lkml/2014/1/20/453</a></p><p>Also, why so many reports of needing to reboot the host system to make the guest work a 2nd time?&#160; This should be solved by the secondary bus reset support.&#160; Could someone experiencing this problem report exactly what kernel and qemu you&#039;re using and provide lspci -vvv of the bus with the assigned video card?</p></div></blockquote></div><p>I experience the same since i upgraded from kernel 3.11 to 3.12 or 3.13. <br />Host freezes (no more ssh login possible - ping still working; at least MagicSysRq-Keys still worked) as soon as the guest starts up the second time (complete guest shutdown, i.e. virsh shutdown, then virsh start again).</p><p>kernel is 3.13.0, qemu is git from 16.1.2014 (same qemu compile works flawless with 3.11).</p><p>lspci -vvv is here: <a href="http://www.pastebin.ca/2579449" rel="nofollow">http://www.pastebin.ca/2579449</a></p><p>My guess is, some of these patches are missing upstream: <a href="http://www.pastebin.ca/2579452" rel="nofollow">http://www.pastebin.ca/2579452</a><br />They were the ones needed to get it working with 3.11, and when i try to apply them to 3.13 (see here: <a href="http://pastebin.ca/2579454" rel="nofollow">http://pastebin.ca/2579454</a>) they of course hunk, but _some_ apply, so i guess something is missing ?</p><p>Thanks for your support!</p><p>Greetings</p><p>K.</p> <p class="postedit"><em>Last edited by kaeptnb (2014-01-23 18:45:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374139">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374284" class="blockpost roweven"> <h2><span><span class="conr">#1060</span> <a href="viewtopic.php?pid=1374284#p1374284">2014-01-24 04:33:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=24068">dalingrin</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2009-03-18</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=24068">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have two NVIDIA GTX 670 cards and they have the same ids. If I pass this id to pci-stub then both cards are inaccessible. What is the best way to get around this so I can keep one card for the host?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374284">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374357" class="blockpost rowodd"> <h2><span><span class="conr">#1061</span> <a href="viewtopic.php?pid=1374357#p1374357">2014-01-24 13:17:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78876">kugel</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-24</span></dd> <dd><span>Posts: 1</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>mastersplinter777 wrote:</cite><blockquote><div><p>Hi! I&#039;m also interested in passing thru my VGA to VM. But I get an error 12 (Not enough system resources) and can&#039;t solve this problem. My HW is: ASRock Z77 Extreme 6 (BIOS 2.70), Intel Core i5 3470, GPUS: Intel HD 2500 (host), AMD Sapphire Radeon 6750 (68bf), ATI Radeon 4850 (9442).</p><p>Thx for your help! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>A lot of people have reported problems using the intel igp as the host boot device you might want try to disable it and use one of your radeon cards for the host</p></div></blockquote></div><p>I get error 12 as well. Is there no other workaround available? Because it won&#039;t work for me.</p><p>My setup: Thinkpad x230 laptop with integrated HD 4000 and NVIDIA eGPU (GeForce 650 Ti) attached via ExpressCard. I try to pass the eGPU to a Windows VM. The eGPU does not get enabled because of error 12. When booting with -vga none I see now output (how can I tell it actually boots?). When omitting this option Windows displays on the virtual GPU but the device manager shows the aforementioned error 12 for the nvidia card.</p><p>I followed your first post into detail and run Linux 3.12.6 with the pcie_acs_override patch applied.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374357">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374714" class="blockpost roweven"> <h2><span><span class="conr">#1062</span> <a href="viewtopic.php?pid=1374714#p1374714">2014-01-25 15:38:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78821">roms</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-22</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>It looks like the IOMMU did its job. For some reason the USB card is trying to read from an address just below 16G.&#160; Since you&#039;ve got a 16G host, you&#039;re likely not creating a VM large enough that it should be accessing those kinds of addresses.&#160; I&#039;ve tried both Etron and Renesas USB3 controllers.&#160; See back at post #876 for the models.</p></div></blockquote></div><p>I replaced the VIA-based card with one that has a NEC/Renasas controller. Now everything works as expected. :-)</p><p>lspci -nn:<br />03:00.0 USB controller [0c03]: Renesas Technology Corp. uPD720202 USB 3.0 Host Controller [1912:0015] (rev 02)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374714">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374791" class="blockpost rowodd"> <h2><span><span class="conr">#1063</span> <a href="viewtopic.php?pid=1374791#p1374791">2014-01-25 18:55:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=10978">toma222</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: France</span></dd> <dd><span>Registered: 2007-05-17</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=10978">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello,</p><p>I used my Radeon 7850 in a Windows 7/8/8.1 guest with pci-assign for months (with the only issue of the host crash in case of guest reboot).</p><p>Now, I want to use it with a Linux guest (Ubuntu) with vfio-pci, to make a kind of virtual Steam Machine + XBMC. </p><p>I have tried :<br />- secondary pasthrough (with a cirrus emulated graphic card) with vfio-pci : the guest start, the Radeon is detected and I have the display on the HDMI output, Unity start, I can play video, but when I try to use 3D (for example with fglrxinfo or Steam), I have only segmentation fault.<br />- primary passtrough with x-vga=on : I have built the 3.13 kernel (with options and patches from first post) and qemu from git, but I have exactly the same behaviour.</p><p>I have also tried with an old Radeon 6850 in secondary passthrough and vfio-pci, and it work quite well (except&#160; some strange performance in Serious Sam 3).</p><p>Do you have an idea why I can&#039;t get the Radeon 7850 working normally ?</p><p>My host use a Core i7 4770S and is on Debian.</p><p>Thanks.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374791">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374864" class="blockpost roweven"> <h2><span><span class="conr">#1064</span> <a href="viewtopic.php?pid=1374864#p1374864">2014-01-25 22:08:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78620">mostlyharmless</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-16</span></dd> <dd><span>Posts: 50</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78620">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Here&#039;s some information that might be useful to someone; I&#039;d post it as a bug but I suspect that it&#039;s either an ASUS bios bug, which they will cheerfully ignore (particularly as vt-d support is not yet supported in an official bios for the RIVE with an IVy-E preocessor), or an AMD catalyst bug which only appears when using intel IOMMU, which I suspect might not get much attention either...&#160; Any suggestions on where to post it or what to do would be most welcome.</p><p>My passthrough is an Nvidia K2000 to Windows, which works fine, no errors in Device Manager, my host has an AMD HD 7970.&#160; Using the radeon drivers, everything works fine, other than the fact that 3D acceleration is software only and slow as there is no &quot;Southern Island&quot; hardware support yet in the radeon driver.&#160; Using the latest beta ati-catalyst 13.11beta9.95 on kernel 3.12.1, the driver builds OK, but running X leads to a black screen and hung keyboard. One can ssh into the system.&#160; Here is the syslog:</p><p>Jan 23 07:09:36 animals smbd[1150]: [2014/01/23 07:09:36.503256,&#160; 0] ../lib/util/pidfile.c:153(pidfile_unlink) <br />Jan 23 07:09:36 animals smbd[1150]:&#160; &#160;Failed to delete pidfile /var/run/smbd.pid. Error was No such file or directory <br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: RSDP 00000000ac450000 00024 (v02 ALASKA)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: XSDT 00000000ac450078 00064 (v01 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: FACP 00000000ac45a1f8 0010C (v05 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: DSDT 00000000ac450170 0A088 (v02 ALASKA&#160; &#160; A M I 00000016 INTL 20051117)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: FACS 00000000ac746080 00040<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: APIC 00000000ac45a308 00100 (v03 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: FPDT 00000000ac45a408 00044 (v01 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: MCFG 00000000ac45a450 0003C (v01 ALASKA OEMMCFG. 01072009 MSFT 00000097)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: HPET 00000000ac45a490 00038 (v01 ALASKA&#160; &#160; A M I 01072009 AMI. 00000005)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: DMAR 00000000ac527680 000B4 (v01 A M I&#160; &#160;OEMDMAR 00000001 INTL 00000001)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: SSDT 00000000ac45a520 CD128 (v02&#160; INTEL&#160; &#160; CpuPm 00004000 INTL 20051117)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] ACPI: BGRT 00000000ac527648 00038 (v00 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] Zone ranges:<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;DMA&#160; &#160; &#160; [mem 0x00001000-0x00ffffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;DMA32&#160; &#160; [mem 0x01000000-0xffffffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;Normal&#160; &#160;[mem 0x100000000-0x84fffffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] Movable zone start for each node<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] Early memory node ranges<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0x00001000-0x0009ffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0x00100000-0xabe82fff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0xad76f000-0xad76ffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0xad7f6000-0xadc37fff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0xadff4000-0xadffffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0x100000000-0x84fffffff]<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&#160; Total pages: 8241995<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.000000] Memory: 32607824K/33491396K available (6322K kernel code, 734K rwdata, 2264K rodata, 1184K init, 968K bss, 883572K reserved)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.016691] ENERGY_PERF_BIAS: Set to &#039;normal&#039;, was &#039;performance&#039;<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.016691] ENERGY_PERF_BIAS: View and update with x86_energy_perf_policy(8)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.036478] ACPI: All ACPI Tables successfully acquired<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.841857] raid6: sse2x1&#160; &#160; 9308 MB/s<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.858859] raid6: sse2x2&#160; &#160;11554 MB/s<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.875862] raid6: sse2x4&#160; &#160;13386 MB/s<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.875864] raid6: using algorithm sse2x4 (13386 MB/s)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.875865] raid6: using ssse3x2 recovery algorithm<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.888491] ACPI: Executed 1 blocks of module-level executable AML code<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.971269] ACPI Exception: AE_NOT_FOUND, While evaluating Sleep State [\_S1_] (20130725/hwxface-571)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.971273] ACPI Exception: AE_NOT_FOUND, While evaluating Sleep State [\_S2_] (20130725/hwxface-571)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.978047] ACPI: \_SB_.PCI0.IOH_: can&#039;t evaluate _ADR (0x5)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.978049] ACPI: \_SB_.PCI0.VTDR: can&#039;t evaluate _ADR (0x5)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.978056] ACPI: \_SB_.PCI0.PCH_: can&#039;t evaluate _ADR (0x5)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.978058] ACPI: \_SB_.PCI0.CWDT: can&#039;t evaluate _ADR (0x5)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.978060] ACPI: \_SB_.PCI0.WMI1: can&#039;t evaluate _ADR (0x5)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 0.978134] ACPI: \_SB_.PCI0.HPET: can&#039;t evaluate _ADR (0x5)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.001344] ACPI: Enabled 3 GPEs in block 00 to 3F<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.129785] Dquot-cache hash table entries: 512 (order 0, 4096 bytes)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.131680] ioapic: probe of 0000:00:05.4 failed with error -22<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.132291] acpiphp_ibm: ibm_acpiphp_init: acpi_walk_namespace failed<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.158969] pcieport 0000:00:1c.5: driver skip pci_set_master, fix it!<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.164052] pcieport 0000:00:1c.7: driver skip pci_set_master, fix it!<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.467125] ata1.00: supports DRM functions and may not be fully accessible<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 1.470184] ata1.00: supports DRM functions and may not be fully accessible<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 4.159271] sr0: scsi3-mmc drive: 8x/48x writer dvd-ram cd/rw xa/form2 cdda tray<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 4.923868] i8042: PNP: PS/2 controller doesn&#039;t have KBD irq; using default 1<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 7.588797] usb 7-1: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 7.589592] usb 7-1: ep 0x82 - rounding interval to 64 microframes, ep desc says 80 microframes<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 8.326286] sd 12:0:0:0: [sdc] No Caching mode page found<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 8.326962] sd 12:0:0:0: [sdc] Assuming drive cache: write through<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 8.328430] sd 12:0:0:0: [sdc] No Caching mode page found<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 8.329120] sd 12:0:0:0: [sdc] Assuming drive cache: write through<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 8.336334] sd 12:0:0:0: [sdc] No Caching mode page found<br />Jan 23 07:10:41 animals kernel: [&#160; &#160; 8.337031] sd 12:0:0:0: [sdc] Assuming drive cache: write through<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.765553] ACPI Warning: 0x0000000000000530-0x000000000000053f SystemIO conflicts with Region \_SB_.PCI0.SBRG.GPBX 1 (20130725/utaddress-251)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.767594] ACPI Warning: 0x0000000000000500-0x000000000000052f SystemIO conflicts with Region \_SB_.PCI0.SBRG.GPBX 1 (20130725/utaddress-251)<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.769377] lpc_ich: Resource conflict(s) found affecting gpio_ich<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.789424] fglrx: module license &#039;Proprietary. (C) 2002 - ATI Technologies, Starnberg, GERMANY&#039; taints kernel.<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.791310] Disabling lock debugging due to kernel taint<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.796356] &lt;6&gt;[fglrx] Maximum main memory to use for locked dma buffers: 31477 MBytes.<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.797293] &lt;6&gt;[fglrx]&#160; &#160;vendor: 1002 device: 6798 count: 1<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.798484] &lt;6&gt;[fglrx] ioport: bar 4, base 0xe000, size: 0x100<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.799057] pcieport 0000:00:02.0: driver skip pci_set_master, fix it!<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.799950] &lt;6&gt;[fglrx] Kernel PAT support is enabled<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;17.800537] &lt;6&gt;[fglrx] module loaded - fglrx 13.25.5 [Jan&#160; 8 2014] with 1 minors<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;22.570415] EXT4-fs (dm-6): mounting with &quot;discard&quot; option, but the device does not support discard<br />Jan 23 07:10:41 animals kernel: [&#160; &#160;22.587119] FAT-fs (sda1): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.<br />Jan 23 07:10:53 animals acpid: Too many connections.<br />Jan 23 07:10:54 animals smbd[1143]: [2014/01/23 07:10:54.330959,&#160; 0] ../source3/param/loadparm.c:3067(lp_set_enum_parm) <br />Jan 23 07:10:54 animals smbd[1143]:&#160; &#160;WARNING: Ignoring invalid value &#039;share&#039; for parameter &#039;security&#039; <br />Jan 23 07:10:59 animals dhcpcd[902]: br0: no IPv6 Routers available<br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.948886] &lt;6&gt;[fglrx] Firegl kernel thread PID: 1366<br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.948919] &lt;6&gt;[fglrx] Firegl kernel thread PID: 1367<br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.948950] &lt;6&gt;[fglrx] Firegl kernel thread PID: 1368<br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.949004] &lt;6&gt;[fglrx] IRQ 104 Enabled<br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.955156] &lt;6&gt;[fglrx] Reserved FB block: Shared offset:0, size:1000000 <br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.955158] &lt;6&gt;[fglrx] Reserved FB block: Unshared offset:f878000, size:4000 <br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.955159] &lt;6&gt;[fglrx] Reserved FB block: Unshared offset:f87c000, size:484000 <br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.955160] &lt;6&gt;[fglrx] Reserved FB block: Unshared offset:fff8000, size:8000 <br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.955161] &lt;6&gt;[fglrx] Reserved FB block: Unshared offset:bfff4000, size:c000 <br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.968943] dmar: DRHD: handling fault status reg 2<br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.968949] dmar: DMAR:[DMA Read] Request device [01:00.0] fault addr 812330000 <br />Jan 23 07:11:26 animals kernel: [&#160; &#160;67.968949] DMAR:[fault reason 02] Present bit in context entry is clear<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861893] &lt;6&gt;[fglrx] ASIC hang happened<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861897] CPU: 10 PID: 1363 Comm: X Tainted: P&#160; &#160; &#160; &#160; &#160; &#160;O 3.12.1 #1<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861898] Hardware name: System manufacturer System Product Name/RAMPAGE IV EXTREME, BIOS 9502 11/07/2013<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861899]&#160; 00000000ffff328e ffff880828de58d0 ffffffff8161dcb7 0000000000000000<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861901]&#160; ffff880828de58e0 ffffffffa06667ae 00000000ffff328d ffffffffa067553c<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861902]&#160; 0000000000000000 ffffffffa07293de ffff880828de5940 ffffffffa0729349<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861904] Call Trace:<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861908]&#160; [&lt;ffffffff8161dcb7&gt;] dump_stack+0x45/0x56<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861944]&#160; [&lt;ffffffffa06667ae&gt;] KCL_DEBUG_OsDump+0xe/0x10 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.861967]&#160; [&lt;ffffffffa067553c&gt;] firegl_hardwareHangRecovery+0x1c/0x30 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862009]&#160; [&lt;ffffffffa07293de&gt;] ? _ZN4Asic9WaitUntil15ResetASICIfHungEv+0x1e/0x30 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862050]&#160; [&lt;ffffffffa0729349&gt;] ? _ZN4Asic9WaitUntil15WaitForCompleteEv+0xb9/0x130 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862093]&#160; [&lt;ffffffffa0733614&gt;] ? _ZN15ExecutableUnits10CPRingIdleE15idle_WaitMethod12_QS_CP_RING_+0x124/0x1e0 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862134]&#160; [&lt;ffffffffa0730001&gt;] ? _ZNK18asic_configuration16GetIndexedAsicIDEv+0x1/0x80 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862175]&#160; [&lt;ffffffffa0733ffa&gt;] ? _ZN21ExecutableUnitsCayman14AllCPRingsIdleE15idle_WaitMethod+0x1a/0x90 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862216]&#160; [&lt;ffffffffa073346b&gt;] ? _ZN15ExecutableUnits7PM4idleE15idle_WaitMethod+0x4b/0x90 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862256]&#160; [&lt;ffffffffa073451d&gt;] ? _ZN17ExecutableUnitsSI9assertPM4Eb+0x6d/0x80 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862304]&#160; [&lt;ffffffffa077b589&gt;] ? _ZN8AsicR6009assertPM4Eb+0x39/0x80 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862339]&#160; [&lt;ffffffffa06f2e3c&gt;] ? _ZN9CMMlegacy19CMMQS_Initialize_WAEP20_CMMQS_INIT_INPUT_WAP18_CMMQS_INIT_OUTPUT+0x17c/0x280 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862373]&#160; [&lt;ffffffffa06f2af5&gt;] ? CMMQS_Initialize_WA+0x65/0xb0 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862399]&#160; [&lt;ffffffffa069df04&gt;] ? firegl_cmmqs_init+0x684/0xc00 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862422]&#160; [&lt;ffffffffa0678494&gt;] ? firegl_init_iommu+0x94/0x170 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862447]&#160; [&lt;ffffffffa06954ba&gt;] ? hal_init_gpu+0x20a/0x480 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862469]&#160; [&lt;ffffffffa066fa7b&gt;] ? firegl_open+0x2db/0x310 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862484]&#160; [&lt;ffffffffa065e087&gt;] ? ip_firegl_open+0x17/0x20 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862499]&#160; [&lt;ffffffffa065f8f8&gt;] ? firegl_stub_open+0x98/0x100 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862502]&#160; [&lt;ffffffff811d0832&gt;] ? chrdev_open+0x92/0x1e0<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862503]&#160; [&lt;ffffffff811c9aeb&gt;] ? do_dentry_open+0x1eb/0x280<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862505]&#160; [&lt;ffffffff811d74f4&gt;] ? __inode_permission+0x54/0xc0<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862506]&#160; [&lt;ffffffff811d07a0&gt;] ? cdev_put+0x30/0x30<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862508]&#160; [&lt;ffffffff811c9bb1&gt;] ? finish_open+0x31/0x40<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862509]&#160; [&lt;ffffffff811dacec&gt;] ? do_last+0x5cc/0x1230<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862511]&#160; [&lt;ffffffff811dba0b&gt;] ? path_openat+0xbb/0x670<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862532]&#160; [&lt;ffffffffa066ddd9&gt;] ? firegl_release_helper+0x419/0x700 [fglrx]<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862534]&#160; [&lt;ffffffff811dc6ea&gt;] ? do_filp_open+0x3a/0x90<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862536]&#160; [&lt;ffffffff811e8707&gt;] ? __alloc_fd+0xa7/0x130<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862537]&#160; [&lt;ffffffff811cafbe&gt;] ? do_sys_open+0x12e/0x210<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862539]&#160; [&lt;ffffffff811cb0be&gt;] ? SyS_open+0x1e/0x20<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862541]&#160; [&lt;ffffffff8162722d&gt;] ? system_call_fastpath+0x1a/0x1f<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862543] pubdev:0xffffffffa0ca9180, num of device:1 , name:fglrx, major 13, minor 25. <br />Jan 23 07:14:26 animals kernel: [&#160; 247.862544] device 0 : 0xffff88082a3dc000 .<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862545] Asic ID:0x6798, revision:0x5, MMIOReg:0xffffc90022500000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862546] FB phys addr: 0xd0000000, MC :0xf400000000, Total FB size :0xc0000000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862547] gart table MC:0xf40f87c000, Physical:0xdf87c000, size:0x483000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862548] mc_node :FB, total 1 zones<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862549]&#160; &#160; &#160;MC start:0xf400000000, Physical:0xd0000000, size:0xfd00000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862550]&#160; &#160; &#160;Mapped heap -- Offset:0x0, size:0xf878000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862551]&#160; &#160; &#160;Mapped heap -- Offset:0x0, size:0x1000000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862552]&#160; &#160; &#160;Mapped heap -- Offset:0xf878000, size:0x4000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862553]&#160; &#160; &#160;Mapped heap -- Offset:0xf87c000, size:0x484000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862554] mc_node :INV_FB, total 1 zones<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862555]&#160; &#160; &#160;MC start:0xf40fd00000, Physical:0xdfd00000, size:0xb0300000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862556]&#160; &#160; &#160;Mapped heap -- Offset:0x2f8000, size:0x8000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862557]&#160; &#160; &#160;Mapped heap -- Offset:0xb02f4000, size:0xc000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862558] mc_node :GART_USWC, total 3 zones<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862559]&#160; &#160; &#160;MC start:0xff90100000, Physical:0x0, size:0x60000000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862559]&#160; &#160; &#160;Mapped heap -- Offset:0x0, size:0x2000000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862560] mc_node :GART_CACHEABLE, total 3 zones<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862561]&#160; &#160; &#160;MC start:0xff60400000, Physical:0x0, size:0x2fd00000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862562]&#160; &#160; &#160;Mapped heap -- Offset:0x0, size:0x200000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862563]&#160; &#160; &#160;Mapped heap -- Offset:0xef000, size:0x11000, reference count:1, mapping count:0,<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862564] mc_node :PEER_FB_GART, total 1 zones<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862565]&#160; &#160; &#160;MC start:0xfff0100000, Physical:0x0, size:0x1000.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862567] GRBM : 0xa0003028, SRBM : 0x20000ac0 .<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862568] CP_RB_BASE : 0xff901000, CP_RB_RPTR : 0x40 , CP_RB_WPTR :0x40.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862570] CP_IB1_BUFSZ:0x0, CP_IB1_BASE_HI:0x0, CP_IB1_BASE_LO:0x0.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862571] last submit IB buffer -- MC :0x0. Can&#039;t found mapped physical page for this MC .<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862572] Dump the trace queue.<br />Jan 23 07:14:26 animals kernel: [&#160; 247.862573] End of dump</p><p>whereas with the radeon driver, which seems to work OK, despite the &quot;Invalid ROM contents&quot; and ACPI warnings</p><p>an 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: RSDP 00000000ac450000 00024 (v02 ALASKA)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: XSDT 00000000ac450078 00064 (v01 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: FACP 00000000ac45a1f8 0010C (v05 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: DSDT 00000000ac450170 0A088 (v02 ALASKA&#160; &#160; A M I 00000016 INTL 20051117)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: FACS 00000000ac746080 00040<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: APIC 00000000ac45a308 00100 (v03 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: FPDT 00000000ac45a408 00044 (v01 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: MCFG 00000000ac45a450 0003C (v01 ALASKA OEMMCFG. 01072009 MSFT 00000097)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: HPET 00000000ac45a490 00038 (v01 ALASKA&#160; &#160; A M I 01072009 AMI. 00000005)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: DMAR 00000000ac527680 000B4 (v01 A M I&#160; &#160;OEMDMAR 00000001 INTL 00000001)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: SSDT 00000000ac45a520 CD128 (v02&#160; INTEL&#160; &#160; CpuPm 00004000 INTL 20051117)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] ACPI: BGRT 00000000ac527648 00038 (v00 ALASKA&#160; &#160; A M I 01072009 AMI&#160; 00010013)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] Zone ranges:<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;DMA&#160; &#160; &#160; [mem 0x00001000-0x00ffffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;DMA32&#160; &#160; [mem 0x01000000-0xffffffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;Normal&#160; &#160;[mem 0x100000000-0x84fffffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] Movable zone start for each node<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] Early memory node ranges<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0x00001000-0x0009ffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0x00100000-0xabe82fff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0xad76f000-0xad76ffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0xad7f6000-0xadc37fff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0xadff4000-0xadffffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000]&#160; &#160;node&#160; &#160;0: [mem 0x100000000-0x84fffffff]<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&#160; Total pages: 8241979<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.000000] Memory: 32601000K/33491396K available (6322K kernel code, 734K rwdata, 2264K rodata, 1184K init, 968K bss, 890396K reserved)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.016714] ENERGY_PERF_BIAS: Set to &#039;normal&#039;, was &#039;performance&#039;<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.016714] ENERGY_PERF_BIAS: View and update with x86_energy_perf_policy(8)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.036694] ACPI: All ACPI Tables successfully acquired<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.840086] raid6: sse2x1&#160; &#160; 9304 MB/s<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.857091] raid6: sse2x2&#160; &#160;11496 MB/s<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.874091] raid6: sse2x4&#160; &#160;13386 MB/s<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.874093] raid6: using algorithm sse2x4 (13386 MB/s)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.874094] raid6: using ssse3x2 recovery algorithm<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.886721] ACPI: Executed 1 blocks of module-level executable AML code<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.969508] ACPI Exception: AE_NOT_FOUND, While evaluating Sleep State [\_S1_] (20130725/hwxface-571)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.969512] ACPI Exception: AE_NOT_FOUND, While evaluating Sleep State [\_S2_] (20130725/hwxface-571)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.976285] ACPI: \_SB_.PCI0.IOH_: can&#039;t evaluate _ADR (0x5)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.976287] ACPI: \_SB_.PCI0.VTDR: can&#039;t evaluate _ADR (0x5)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.976295] ACPI: \_SB_.PCI0.PCH_: can&#039;t evaluate _ADR (0x5)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.976296] ACPI: \_SB_.PCI0.CWDT: can&#039;t evaluate _ADR (0x5)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.976298] ACPI: \_SB_.PCI0.WMI1: can&#039;t evaluate _ADR (0x5)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.976372] ACPI: \_SB_.PCI0.HPET: can&#039;t evaluate _ADR (0x5)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 0.999581] ACPI: Enabled 3 GPEs in block 00 to 3F<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.127966] Dquot-cache hash table entries: 512 (order 0, 4096 bytes)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.129868] ioapic: probe of 0000:00:05.4 failed with error -22<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.130476] acpiphp_ibm: ibm_acpiphp_init: acpi_walk_namespace failed<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.161181] pcieport 0000:00:1c.5: driver skip pci_set_master, fix it!<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.161667] pcieport 0000:00:1c.7: driver skip pci_set_master, fix it!<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.473311] ata1.00: supports DRM functions and may not be fully accessible<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 1.478620] ata1.00: supports DRM functions and may not be fully accessible<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 4.161865] sr0: scsi3-mmc drive: 48x/48x writer dvd-ram cd/rw xa/form2 cdda tray<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 4.928772] i8042: PNP: PS/2 controller doesn&#039;t have KBD irq; using default 1<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 5.937478] usb 7-1: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 5.938336] usb 7-1: ep 0x82 - rounding interval to 64 microframes, ep desc says 80 microframes<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 6.672134] sd 12:0:0:0: [sdc] No Caching mode page found<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 6.673024] sd 12:0:0:0: [sdc] Assuming drive cache: write through<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 6.674693] sd 12:0:0:0: [sdc] No Caching mode page found<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 6.675579] sd 12:0:0:0: [sdc] Assuming drive cache: write through<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 6.683232] sd 12:0:0:0: [sdc] No Caching mode page found<br />Jan 25 14:38:35 animals kernel: [&#160; &#160; 6.684120] sd 12:0:0:0: [sdc] Assuming drive cache: write through<br />Jan 25 14:38:35 animals kernel: [&#160; &#160;15.373877] pcieport 0000:00:02.0: driver skip pci_set_master, fix it!<br />Jan 25 14:38:35 animals kernel: [&#160; &#160;15.373948] ACPI Warning: 0x0000000000000530-0x000000000000053f SystemIO conflicts with Region \_SB_.PCI0.SBRG.GPBX 1 (20130725/utaddress-251)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160;15.373959] ACPI Warning: 0x0000000000000500-0x000000000000052f SystemIO conflicts with Region \_SB_.PCI0.SBRG.GPBX 1 (20130725/utaddress-251)<br />Jan 25 14:38:35 animals kernel: [&#160; &#160;15.373967] lpc_ich: Resource conflict(s) found affecting gpio_ich<br />Jan 25 14:38:35 animals kernel: [&#160; &#160;15.374214] radeon 0000:01:00.0: Invalid ROM contents</p><br /><p>Sorry about the long post, and I&#039;d put the syslog dumps into a code box if I knew how.. is there a tool button I&#039;m missing somewhere?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374864">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1374919" class="blockpost rowodd"> <h2><span><span class="conr">#1065</span> <a href="viewtopic.php?pid=1374919#p1374919">2014-01-26 01:53:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78620">mostlyharmless</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-16</span></dd> <dd><span>Posts: 50</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78620">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Did a bit more google research;&#160; apparently this kind of catalyst dmar failure on Asus intel boards has been intermittently popping up for years, without resolution...</p><p>I see that even when apparently running with qemu, I get dmesg spammed with</p><p>WARNING: CPU: 9 PID: 2172 at drivers/vfio/vfio_iommu_type1.c:344 vfio_unmap_unpin.isra.7+0x11e/0x120()<br />[&#160; 388.153197] Modules linked in: ip6table_filter ip6_tables iptable_filter ip_tables ebtable_nat ebtables x_tables vhost_net vhost macvtap macvlan tun autofs4 bridge stp llc ipv6 lp parport fuse snd_hda_codec_hdmi btusb bluetooth snd_hda_codec_realtek x86_pkg_temp_thermal intel_powerclamp coretemp crc32_pclmul eeepc_wmi crc32c_intel asus_wmi ghash_clmulni_intel sparse_keymap i2c_dev rfkill video mxm_wmi evdev radeon joydev ttm snd_hda_intel snd_hda_codec drm_kms_helper microcode psmouse drm snd_hwdep e1000e snd_pcm serio_raw snd_page_alloc i2c_i801 agpgart snd_timer lpc_ich mei_me i2c_algo_bit snd ptp i2c_core mei soundcore pps_core ehci_pci processor thermal_sys hwmon wmi button loop msdos nls_iso8859_1 nls_cp437 uhci_hcd ehci_hcd pci_stub vfat fat ext2 ext4 jbd2 mbcache hid_generic usbhid hid xhci_hcd usb_storage<br />[&#160; 388.153222] CPU: 9 PID: 2172 Comm: qemu-system-x86 Tainted: G&#160; &#160; &#160; &#160; W&#160; &#160; 3.13.0 #1<br />[&#160; 388.153223] Hardware name: System manufacturer System Product Name/RAMPAGE IV EXTREME, BIOS 9502 11/07/2013<br />[&#160; 388.153223]&#160; 0000000000000009 ffff8807e5623d10 ffffffff81644f6e 0000000000000000<br />[&#160; 388.153225]&#160; ffff8807e5623d48 ffffffff810be16d 0000000000000000 0000000000000000<br />[&#160; 388.153226]&#160; ffff8807e5623e30 0000000000200000 ffff880829898a80 ffff8807e5623d58<br />[&#160; 388.153228] Call Trace:<br />[&#160; 388.153229]&#160; [&lt;ffffffff81644f6e&gt;] dump_stack+0x45/0x56<br />[&#160; 388.153231]&#160; [&lt;ffffffff810be16d&gt;] warn_slowpath_common+0x7d/0xa0<br />[&#160; 388.153232]&#160; [&lt;ffffffff810be24a&gt;] warn_slowpath_null+0x1a/0x20<br />[&#160; 388.153234]&#160; [&lt;ffffffff814a433e&gt;] vfio_unmap_unpin.isra.7+0x11e/0x120<br />[&#160; 388.153236]&#160; [&lt;ffffffff814a43a2&gt;] vfio_remove_dma_overlap+0x62/0x250<br />[&#160; 388.153238]&#160; [&lt;ffffffff814a5120&gt;] vfio_iommu_type1_ioctl+0x230/0x290<br />[&#160; 388.153240]&#160; [&lt;ffffffff814a2377&gt;] vfio_fops_unl_ioctl+0x77/0x340<br />[&#160; 388.153241]&#160; [&lt;ffffffff811e8540&gt;] do_vfs_ioctl+0x2e0/0x4c0<br />[&#160; 388.153243]&#160; [&lt;ffffffff811d57ac&gt;] ? vfs_write+0x15c/0x1f0<br />[&#160; 388.153245]&#160; [&lt;ffffffff811d55de&gt;] ? vfs_read+0xee/0x160<br />[&#160; 388.153246]&#160; [&lt;ffffffff811e87a1&gt;] SyS_ioctl+0x81/0xa0<br />[&#160; 388.153248]&#160; [&lt;ffffffff8164e5ed&gt;] system_call_fastpath+0x1a/0x1f<br />[&#160; 388.153249] ---[ end trace 8731715962b54b3d ]---<br />[&#160; 389.569527] dmar: DRHD: handling fault status reg 2<br />[&#160; 389.569532] dmar: DMAR:[DMA Read] Request device [00:1d.0] fault addr ee000 <br />[&#160; 389.569532] DMAR:[fault reason 06] PTE Read access is not set<br />[&#160; 395.563868] kvm: zapping shadow pages for mmio generation wraparound<br />[&#160; 400.086315] vfio-pci 0000:03:00.0: irq 105 for MSI/MSI-X</p><p>Does that mean anything?</p> <p class="postedit"><em>Last edited by mostlyharmless (2014-01-26 23:29:02)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1374919">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375347" class="blockpost roweven"> <h2><span><span class="conr">#1066</span> <a href="viewtopic.php?pid=1375347#p1375347">2014-01-27 10:04:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78958">Plutonium</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-27</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78958">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have a Dell M6600 laptop, with intel hd graphics 2000 and Nvidia Quadra 4000m, I was able to passthrough the Nvidia card to a Windows 7 VM, installed Nvidia driver in the VM and every thing seems to be fine except that the passed card only operates at the lowest 2 frequency level (Nvidia powermizer), and the performance of the VM with graphic card was even worse than the VM you can create with VirtualBox. I am not sure what is wrong, Any one with Nvidia card have similar issues?</p><p>Nvidia powermizer levels:<br />Level 0: 50MHz(Graphics Clock) 270MHz(Memory Transfer Rate) 101MHz(Processor Clock)<br />Level 1: 73MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 648MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;147MHz<br />Level 2: 202MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;405MHz<br />Level 3: 475MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;950MHz</p><p>And my virtual machine only able to operate on Level 0 and Level 1, and thus the bad performance.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375347">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375441" class="blockpost rowodd"> <h2><span><span class="conr">#1067</span> <a href="viewtopic.php?pid=1375441#p1375441">2014-01-27 15:01:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mostlyharmless wrote:</cite><blockquote><div><p>Here&#039;s some information that might be useful to someone; I&#039;d post it as a bug but I suspect that it&#039;s either an ASUS bios bug, which they will cheerfully ignore (particularly as vt-d support is not yet supported in an official bios for the RIVE with an IVy-E preocessor), or an AMD catalyst bug which only appears when using intel IOMMU, which I suspect might not get much attention either...&#160; Any suggestions on where to post it or what to do would be most welcome.</p><p>My passthrough is an Nvidia K2000 to Windows, which works fine, no errors in Device Manager, my host has an AMD HD 7970.&#160; Using the radeon drivers, everything works fine, other than the fact that 3D acceleration is software only and slow as there is no &quot;Southern Island&quot; hardware support yet in the radeon driver.&#160; Using the latest beta ati-catalyst 13.11beta9.95 on kernel 3.12.1, the driver builds OK, but running X leads to a black screen and hung keyboard. One can ssh into the system.&#160; Here is the syslog:</p><p>...</p><p>Sorry about the long post, and I&#039;d put the syslog dumps into a code box if I knew how.. is there a tool button I&#039;m missing somewhere?</p></div></blockquote></div><p>You might try the iommu=pt boot option to make the IOMMU run in passthrough mode for host devices.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375441">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375442" class="blockpost roweven"> <h2><span><span class="conr">#1068</span> <a href="viewtopic.php?pid=1375442#p1375442">2014-01-27 15:02:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mostlyharmless wrote:</cite><blockquote><div><p>Did a bit more google research;&#160; apparently this kind of catalyst dmar failure on Asus intel boards has been intermittently popping up for years, without resolution...</p><p>I see that even when apparently running with qemu, I get dmesg spammed with</p><p>WARNING: CPU: 9 PID: 2172 at drivers/vfio/vfio_iommu_type1.c:344 vfio_unmap_unpin.isra.7+0x11e/0x120()<br />[&#160; 388.153197] Modules linked in: ip6table_filter ip6_tables iptable_filter ip_tables ebtable_nat ebtables x_tables vhost_net vhost macvtap macvlan tun autofs4 bridge stp llc ipv6 lp parport fuse snd_hda_codec_hdmi btusb bluetooth snd_hda_codec_realtek x86_pkg_temp_thermal intel_powerclamp coretemp crc32_pclmul eeepc_wmi crc32c_intel asus_wmi ghash_clmulni_intel sparse_keymap i2c_dev rfkill video mxm_wmi evdev radeon joydev ttm snd_hda_intel snd_hda_codec drm_kms_helper microcode psmouse drm snd_hwdep e1000e snd_pcm serio_raw snd_page_alloc i2c_i801 agpgart snd_timer lpc_ich mei_me i2c_algo_bit snd ptp i2c_core mei soundcore pps_core ehci_pci processor thermal_sys hwmon wmi button loop msdos nls_iso8859_1 nls_cp437 uhci_hcd ehci_hcd pci_stub vfat fat ext2 ext4 jbd2 mbcache hid_generic usbhid hid xhci_hcd usb_storage<br />[&#160; 388.153222] CPU: 9 PID: 2172 Comm: qemu-system-x86 Tainted: G&#160; &#160; &#160; &#160; W&#160; &#160; 3.13.0 #1<br />[&#160; 388.153223] Hardware name: System manufacturer System Product Name/RAMPAGE IV EXTREME, BIOS 9502 11/07/2013<br />[&#160; 388.153223]&#160; 0000000000000009 ffff8807e5623d10 ffffffff81644f6e 0000000000000000<br />[&#160; 388.153225]&#160; ffff8807e5623d48 ffffffff810be16d 0000000000000000 0000000000000000<br />[&#160; 388.153226]&#160; ffff8807e5623e30 0000000000200000 ffff880829898a80 ffff8807e5623d58<br />[&#160; 388.153228] Call Trace:<br />[&#160; 388.153229]&#160; [&lt;ffffffff81644f6e&gt;] dump_stack+0x45/0x56<br />[&#160; 388.153231]&#160; [&lt;ffffffff810be16d&gt;] warn_slowpath_common+0x7d/0xa0<br />[&#160; 388.153232]&#160; [&lt;ffffffff810be24a&gt;] warn_slowpath_null+0x1a/0x20<br />[&#160; 388.153234]&#160; [&lt;ffffffff814a433e&gt;] vfio_unmap_unpin.isra.7+0x11e/0x120<br />[&#160; 388.153236]&#160; [&lt;ffffffff814a43a2&gt;] vfio_remove_dma_overlap+0x62/0x250<br />[&#160; 388.153238]&#160; [&lt;ffffffff814a5120&gt;] vfio_iommu_type1_ioctl+0x230/0x290<br />[&#160; 388.153240]&#160; [&lt;ffffffff814a2377&gt;] vfio_fops_unl_ioctl+0x77/0x340<br />[&#160; 388.153241]&#160; [&lt;ffffffff811e8540&gt;] do_vfs_ioctl+0x2e0/0x4c0<br />[&#160; 388.153243]&#160; [&lt;ffffffff811d57ac&gt;] ? vfs_write+0x15c/0x1f0<br />[&#160; 388.153245]&#160; [&lt;ffffffff811d55de&gt;] ? vfs_read+0xee/0x160<br />[&#160; 388.153246]&#160; [&lt;ffffffff811e87a1&gt;] SyS_ioctl+0x81/0xa0<br />[&#160; 388.153248]&#160; [&lt;ffffffff8164e5ed&gt;] system_call_fastpath+0x1a/0x1f<br />[&#160; 388.153249] ---[ end trace 8731715962b54b3d ]---<br />[&#160; 389.569527] dmar: DRHD: handling fault status reg 2<br />[&#160; 389.569532] dmar: DMAR:[DMA Read] Request device [00:1d.0] fault addr ee000 <br />[&#160; 389.569532] DMAR:[fault reason 06] PTE Read access is not set<br />[&#160; 395.563868] kvm: zapping shadow pages for mmio generation wraparound<br />[&#160; 400.086315] vfio-pci 0000:03:00.0: irq 105 for MSI/MSI-X</p><p>Does that mean anything?</p></div></blockquote></div><p>Does this help: <a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/iommu/intel-iommu.c?id=08336fd218e087cc4fcc458e6b6dcafe8702b098" rel="nofollow">https://git.kernel.org/cgit/linux/kerne … fe8702b098</a></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375442">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375444" class="blockpost rowodd"> <h2><span><span class="conr">#1069</span> <a href="viewtopic.php?pid=1375444#p1375444">2014-01-27 15:07:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Plutonium wrote:</cite><blockquote><div><p>I have a Dell M6600 laptop, with intel hd graphics 2000 and Nvidia Quadra 4000m, I was able to passthrough the Nvidia card to a Windows 7 VM, installed Nvidia driver in the VM and every thing seems to be fine except that the passed card only operates at the lowest 2 frequency level (Nvidia powermizer), and the performance of the VM with graphic card was even worse than the VM you can create with VirtualBox. I am not sure what is wrong, Any one with Nvidia card have similar issues?</p><p>Nvidia powermizer levels:<br />Level 0: 50MHz(Graphics Clock) 270MHz(Memory Transfer Rate) 101MHz(Processor Clock)<br />Level 1: 73MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 648MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;147MHz<br />Level 2: 202MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;405MHz<br />Level 3: 475MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;950MHz</p><p>And my virtual machine only able to operate on Level 0 and Level 1, and thus the bad performance.</p></div></blockquote></div><p>Honestly, I&#039;m surprised it got this far.&#160; Discrete graphics in laptops are still generally very tightly tied to the platform, often requiring vendor tweaked binaries to work.&#160; The Nvidia driver could have some sort of fail-safe in it that prevents it from running at a higher clock rate when sensor data is not available to prevent the laptop from melting.&#160; Maybe there&#039;s an override you can enable for that (at your own risk).</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375444">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375450" class="blockpost roweven"> <h2><span><span class="conr">#1070</span> <a href="viewtopic.php?pid=1375450#p1375450">2014-01-27 15:19:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78958">Plutonium</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-27</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78958">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Plutonium wrote:</cite><blockquote><div><p>I have a Dell M6600 laptop, with intel hd graphics 2000 and Nvidia Quadra 4000m, I was able to passthrough the Nvidia card to a Windows 7 VM, installed Nvidia driver in the VM and every thing seems to be fine except that the passed card only operates at the lowest 2 frequency level (Nvidia powermizer), and the performance of the VM with graphic card was even worse than the VM you can create with VirtualBox. I am not sure what is wrong, Any one with Nvidia card have similar issues?</p><p>Nvidia powermizer levels:<br />Level 0: 50MHz(Graphics Clock) 270MHz(Memory Transfer Rate) 101MHz(Processor Clock)<br />Level 1: 73MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 648MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;147MHz<br />Level 2: 202MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;405MHz<br />Level 3: 475MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;950MHz</p><p>And my virtual machine only able to operate on Level 0 and Level 1, and thus the bad performance.</p></div></blockquote></div><p>Honestly, I&#039;m surprised it got this far.&#160; Discrete graphics in laptops are still generally very tightly tied to the platform, often requiring vendor tweaked binaries to work.&#160; The Nvidia driver could have some sort of fail-safe in it that prevents it from running at a higher clock rate when sensor data is not available to prevent the laptop from melting.&#160; Maybe there&#039;s an override you can enable for that (at your own risk).</p></div></blockquote></div><p>Are you suggesting that the VM is not able to know the graphic card&#039;s temperature? The temperature data is actually available in the VM, but I still have to agree with you, it might be something missing in the bios that prevent the card from functioning normally, I wish there is a fail safe that I can try to turn off.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375450">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375451" class="blockpost rowodd"> <h2><span><span class="conr">#1071</span> <a href="viewtopic.php?pid=1375451#p1375451">2014-01-27 15:24:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Plutonium wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Plutonium wrote:</cite><blockquote><div><p>I have a Dell M6600 laptop, with intel hd graphics 2000 and Nvidia Quadra 4000m, I was able to passthrough the Nvidia card to a Windows 7 VM, installed Nvidia driver in the VM and every thing seems to be fine except that the passed card only operates at the lowest 2 frequency level (Nvidia powermizer), and the performance of the VM with graphic card was even worse than the VM you can create with VirtualBox. I am not sure what is wrong, Any one with Nvidia card have similar issues?</p><p>Nvidia powermizer levels:<br />Level 0: 50MHz(Graphics Clock) 270MHz(Memory Transfer Rate) 101MHz(Processor Clock)<br />Level 1: 73MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 648MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;147MHz<br />Level 2: 202MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;405MHz<br />Level 3: 475MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 2500MHz&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;950MHz</p><p>And my virtual machine only able to operate on Level 0 and Level 1, and thus the bad performance.</p></div></blockquote></div><p>Honestly, I&#039;m surprised it got this far.&#160; Discrete graphics in laptops are still generally very tightly tied to the platform, often requiring vendor tweaked binaries to work.&#160; The Nvidia driver could have some sort of fail-safe in it that prevents it from running at a higher clock rate when sensor data is not available to prevent the laptop from melting.&#160; Maybe there&#039;s an override you can enable for that (at your own risk).</p></div></blockquote></div><p>Are you suggesting that the VM is not able to know the graphic card&#039;s temperature? The temperature data is actually available in the VM, but I still have to agree with you, it might be something missing in the bios that prevent the card from functioning normally, I wish there is a fail safe that I can try to turn off.</p></div></blockquote></div><p>We likely know the GPU temperature but the driver could be looking for things like whether we&#039;re running on AC or battery or an overall system temperature.&#160; QEMU doesn&#039;t emulate or passthrough those kinds of things.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375451">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375635" class="blockpost roweven"> <h2><span><span class="conr">#1072</span> <a href="viewtopic.php?pid=1375635#p1375635">2014-01-27 23:15:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78971">adr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-27</span></dd> <dd><span>Posts: 2</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks a lot to everyone for this thread! I can now passthrough my VGA card but still have some issues with passthrough of my other cards. Sorry for the long post, I give some details about my tests in case it helps other people who find the same kind of errors.</p><p><strong>Hardware:</strong></p><div class="quotebox"><blockquote><div><p>CPU: Intel Core i7-3770<br />Motherboard: Asrock Z77 Pro4 with </p><ul><li><p>integrated HD4000 connected to 19&quot; 1280x1024 screen</p></li><li><p>integrated Soundcard</p></li><li><p>integrated SATA controller connected to my hard drives</p></li><li><p>additional SATA controller connected to a Blu-Ray drive</p></li></ul><p>VGA: AMD Radeon R9-280X connected to 27&quot; 1920x1200 screen<br />PCI1: Soundcard <br />PCI2: DVB tuner</p></div></blockquote></div><p>My goal was to keep all integrated devices for Archlinux host and passthrough VGA + PCI1 + PCI2 + SATA controller with BD drive to Win7 guest. </p><br /><p><strong>VGA card (device 01:00.0):</strong><br />I got this working after installing qemu-git + seabios-git + linux-mainline as written in first post ingredients (actually I tried first with current versions from Archlinux =&gt; black screen during guest boot; then I installed linux-mainline but still keeping standard qemu/seabios =&gt; atikmpag.sys BSOD; then I installed everything and it was OK). I don&#039;t use HDMI device included in videocard so I don&#039;t passthrough it.</p><br /><p><strong>PCI cards (devices 04:00.0 &amp; 04:01.0):</strong><br />At first I could not passthrough any PCI device because IOMMU was complaining about other devices in same group. Using the lsgroup script found in a previous post:</p><div class="codebox"><pre><code>#!/bin/sh BASE=&quot;/sys/kernel/iommu_groups&quot; for i in $(find $BASE -maxdepth 1 -mindepth 1 -type d); do GROUP=$(basename $i) echo &quot;### Group $GROUP ###&quot; for j in $(find $i/devices -type l); do DEV=$(basename $j) echo -n &quot; &quot; lspci -s $DEV done done</code></pre></div><p>Result:</p><div class="codebox"><pre class="vscroll"><code>### Group 0 ### 00:00.0 Host bridge: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor DRAM Controller (rev 09) ### Group 1 ### 00:01.0 PCI bridge: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor PCI Express Root Port (rev 09) 01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT [Radeon HD 7970] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT HDMI Audio [Radeon HD 7970 Series] ### Group 2 ### 00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor Graphics Controller (rev 09) ### Group 3 ### 00:14.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB xHCI Host Controller (rev 04) ### Group 4 ### 00:16.0 Communication controller: Intel Corporation 7 Series/C210 Series Chipset Family MEI Controller #1 (rev 04) ### Group 5 ### 00:1a.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #2 (rev 04) ### Group 6 ### 00:1b.0 Audio device: Intel Corporation 7 Series/C210 Series Chipset Family High Definition Audio Controller (rev 04) ### Group 7 ### 00:1c.0 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 1 (rev c4) 00:1c.4 PCI bridge: Intel Corporation 82801 PCI Bridge (rev c4) 00:1c.5 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 6 (rev c4) 00:1c.7 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 8 (rev c4) 03:00.0 PCI bridge: ASMedia Technology Inc. ASM1083/1085 PCIe to PCI Bridge (rev 03) 04:00.0 Multimedia audio controller: C-Media Electronics Inc CMI8788 [Oxygen HD Audio] 04:01.0 Multimedia controller: Philips Semiconductors SAA7130 Video Broadcast Decoder (rev 01) 05:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 06) 06:00.0 SATA controller: ASMedia Technology Inc. ASM1062 Serial ATA Controller (rev 01) ### Group 8 ### 00:1d.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #1 (rev 04) ### Group 9 ### 00:1f.0 ISA bridge: Intel Corporation Z77 Express Chipset LPC Controller (rev 04) 00:1f.2 SATA controller: Intel Corporation 7 Series/C210 Series Chipset Family 6-port SATA Controller [AHCI mode] (rev 04) 00:1f.3 SMBus: Intel Corporation 7 Series/C210 Series Chipset Family SMBus Controller (rev 04)</code></pre></div><p>Then I recompiled the kernel using patch found here <a href="https://lkml.org/lkml/2014/1/20/453" rel="nofollow">https://lkml.org/lkml/2014/1/20/453</a> instead of the override_for_missing_acs_capabilities.patch provided in linux-mainline from first post, the result is better:</p><div class="codebox"><pre class="vscroll"><code>### Group 0 ### 00:00.0 Host bridge: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor DRAM Controller (rev 09) ### Group 1 ### 00:01.0 PCI bridge: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor PCI Express Root Port (rev 09) 01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT [Radeon HD 7970] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT HDMI Audio [Radeon HD 7970 Series] ### Group 2 ### 00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor Graphics Controller (rev 09) ### Group 3 ### 00:14.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB xHCI Host Controller (rev 04) ### Group 4 ### 00:16.0 Communication controller: Intel Corporation 7 Series/C210 Series Chipset Family MEI Controller #1 (rev 04) ### Group 5 ### 00:1a.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #2 (rev 04) ### Group 6 ### 00:1b.0 Audio device: Intel Corporation 7 Series/C210 Series Chipset Family High Definition Audio Controller (rev 04) ### Group 7 ### 00:1c.0 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 1 (rev c4) ### Group 8 ### 00:1c.4 PCI bridge: Intel Corporation 82801 PCI Bridge (rev c4) 03:00.0 PCI bridge: ASMedia Technology Inc. ASM1083/1085 PCIe to PCI Bridge (rev 03) 04:00.0 Multimedia audio controller: C-Media Electronics Inc CMI8788 [Oxygen HD Audio] 04:01.0 Multimedia controller: Philips Semiconductors SAA7130 Video Broadcast Decoder (rev 01) ### Group 9 ### 00:1c.5 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 6 (rev c4) ### Group 10 ### 00:1c.7 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 8 (rev c4) ### Group 11 ### 00:1d.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #1 (rev 04) ### Group 12 ### 00:1f.0 ISA bridge: Intel Corporation Z77 Express Chipset LPC Controller (rev 04) 00:1f.2 SATA controller: Intel Corporation 7 Series/C210 Series Chipset Family 6-port SATA Controller [AHCI mode] (rev 04) 00:1f.3 SMBus: Intel Corporation 7 Series/C210 Series Chipset Family SMBus Controller (rev 04) ### Group 13 ### 05:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 06) ### Group 14 ### 06:00.0 SATA controller: ASMedia Technology Inc. ASM1062 Serial ATA Controller (rev 01)</code></pre></div><p>But I still cannot passthrough the PCI soundcard, now I have the following error when starting qemu:</p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=pcie.0: vfio: Error: Failed to setup INTx fd: Device or resource busy qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=pcie.0: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=pcie.0: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>I can passthrough the DVB tuner, but if I do it I also have to bind the soundcard to VFIO and cannot pass it to the guest so the soundcard becomes unusable. I tried switching physically the PCI cards, with the same result: DVB tuner works but not the PCI soundcard. I suppose it may be caused by the soundcard hardware itself. The interesting part is that one year ago I tested PCI passthrough in Xen and I could passthrough both cards at the same time to a Win7 guest (I broke my configuration during a Xen upgrade and was never able to fix it, this is why I am testing KVM+VFIO now). My problem is similar to the one listed in <a href="http://www.spinics.net/lists/kvm/msg99275.html" rel="nofollow">http://www.spinics.net/lists/kvm/msg99275.html</a> (I have the same soundcard model as well), but the flag nointxmask is not set for me.</p><p>Is it possible to fix this somehow?</p><p>The workaround I have for now is to passthrough the integrated soundcard and keep the PCI soundcard for host. I may be able to setup a TV server with DVB tuner in host so that i can watch TV from the guest if I cannot passthrough the PCI card.</p><br /><p><strong>SATA controller with BD (device 06:00.0):</strong><br />This is working when I first start the VM, I can access the Blu-Ray drive from my guest. But I have issues when I try to reboot the VM: sometimes the VM is frozen with message &quot;SeaBIOS (version rel-1.7.4-27-...)&quot; during about 2 minutes, and then it will startup normally (I can see the drive in guest after reboot). Sometimes it is definitely frozen with the same message, and the only solution is to shutdown the VM manually.</p><p>When the VM hangs for 2 minutes, I have no output for qemu but I see the following logs in dmesg:</p><div class="codebox"><pre><code>[13707.928236] dmar: DRHD: handling fault status reg 2 [13707.928240] dmar: DMAR:[DMA Write] Request device [06:00.0] fault addr 1affde000 DMAR:[fault reason 05] PTE Write access is not set [13707.928276] dmar: DRHD: handling fault status reg 2 [13707.928278] dmar: DMAR:[DMA Read] Request device [06:00.0] fault addr 1affde000 DMAR:[fault reason 06] PTE Read access is not set [13764.520612] dmar: DRHD: handling fault status reg 2 [13764.520616] dmar: DMAR:[DMA Write] Request device [06:00.0] fault addr 1affde000 DMAR:[fault reason 05] PTE Write access is not set</code></pre></div><p>When the VM hangs definitely, I have this additional message in dmesg:</p><div class="codebox"><pre><code>[14225.129188] intel_iommu_map: iommu width (39) is not sufficient for the mapped address (3ffc0001000)</code></pre></div><p>and the following output from qemu:</p><div class="codebox"><pre><code>qemu-system-x86_64: vfio_dma_map(0x7f9693da9bf0, 0x3ffc0000000, 0x10000000, 0x7f955c000000) = -14 (Bad address)</code></pre></div><p>Any idea on how to debug this?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375635">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375648" class="blockpost rowodd"> <h2><span><span class="conr">#1073</span> <a href="viewtopic.php?pid=1375648#p1375648">2014-01-28 00:04:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>adr wrote:</cite><blockquote><div><p>Thanks a lot to everyone for this thread! I can now passthrough my VGA card but still have some issues with passthrough of my other cards. Sorry for the long post, I give some details about my tests in case it helps other people who find the same kind of errors.</p><p><strong>Hardware:</strong></p><div class="quotebox"><blockquote><div><p>CPU: Intel Core i7-3770<br />Motherboard: Asrock Z77 Pro4 with </p><ul><li><p>integrated HD4000 connected to 19&quot; 1280x1024 screen</p></li><li><p>integrated Soundcard</p></li><li><p>integrated SATA controller connected to my hard drives</p></li><li><p>additional SATA controller connected to a Blu-Ray drive</p></li></ul><p>VGA: AMD Radeon R9-280X connected to 27&quot; 1920x1200 screen<br />PCI1: Soundcard <br />PCI2: DVB tuner</p></div></blockquote></div><p>My goal was to keep all integrated devices for Archlinux host and passthrough VGA + PCI1 + PCI2 + SATA controller with BD drive to Win7 guest. </p><br /><p><strong>VGA card (device 01:00.0):</strong><br />I got this working after installing qemu-git + seabios-git + linux-mainline as written in first post ingredients (actually I tried first with current versions from Archlinux =&gt; black screen during guest boot; then I installed linux-mainline but still keeping standard qemu/seabios =&gt; atikmpag.sys BSOD; then I installed everything and it was OK). I don&#039;t use HDMI device included in videocard so I don&#039;t passthrough it.</p><p><strong>PCI cards (devices 04:00.0 &amp; 04:01.0):</strong><br />At first I could not passthrough any PCI device because IOMMU was complaining about other devices in same group. Using the lsgroup script found in a previous post:</p><p>Then I recompiled the kernel using patch found here <a href="https://lkml.org/lkml/2014/1/20/453" rel="nofollow">https://lkml.org/lkml/2014/1/20/453</a> instead of the override_for_missing_acs_capabilities.patch provided in linux-mainline from first post, the result is better:</p><div class="codebox"><pre><code>### Group 8 ### 00:1c.4 PCI bridge: Intel Corporation 82801 PCI Bridge (rev c4) 03:00.0 PCI bridge: ASMedia Technology Inc. ASM1083/1085 PCIe to PCI Bridge (rev 03) 04:00.0 Multimedia audio controller: C-Media Electronics Inc CMI8788 [Oxygen HD Audio] 04:01.0 Multimedia controller: Philips Semiconductors SAA7130 Video Broadcast Decoder (rev 01)</code></pre></div></div></blockquote></div><p>Do these devices work on the host?&#160; Google &quot;ASM1083 interrupt&quot; and note the widespread problems people have with this PCIe-to-PCI bridge.&#160; I have one on a non-VT-d system and I can&#039;t even get a NIC to work under it with a bare-metal OS.&#160; It also does not provide a PCIe capability, in direct violation of the PCIe spec which makes us hiccup trying to figure out the topology, which is why it gets assigned to the same group as the root port.&#160; You probably see a WARN_ON during boot because of this.&#160; I&#039;ve written off the PCI slot on my system with this bridge, IMHO it&#039;s junk.</p><div class="quotebox"><blockquote><div><p>But I still cannot passthrough the PCI soundcard, now I have the following error when starting qemu:</p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=pcie.0: vfio: Error: Failed to setup INTx fd: Device or resource busy qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=pcie.0: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=pcie.0: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div></div></blockquote></div><p>It&#039;s entirely possible that one or both of the devices is not PCI2.3 compliant in supporting INTx disable and they share an interrupt.&#160; I posted a script in the thread you reference below, does it say whether these devices support INTx disable?&#160; What does lspci report for the interrupt line and what else is using it?</p><div class="quotebox"><blockquote><div><p>I can passthrough the DVB tuner, but if I do it I also have to bind the soundcard to VFIO and cannot pass it to the guest so the soundcard becomes unusable. I tried switching physically the PCI cards, with the same result: DVB tuner works but not the PCI soundcard. I suppose it may be caused by the soundcard hardware itself. The interesting part is that one year ago I tested PCI passthrough in Xen and I could passthrough both cards at the same time to a Win7 guest (I broke my configuration during a Xen upgrade and was never able to fix it, this is why I am testing KVM+VFIO now). My problem is similar to the one listed in <a href="http://www.spinics.net/lists/kvm/msg99275.html" rel="nofollow">http://www.spinics.net/lists/kvm/msg99275.html</a> (I have the same soundcard model as well), but the flag nointxmask is not set for me.</p><p>Is it possible to fix this somehow?</p><p>The workaround I have for now is to passthrough the integrated soundcard and keep the PCI soundcard for host. I may be able to setup a TV server with DVB tuner in host so that i can watch TV from the guest if I cannot passthrough the PCI card.</p></div></blockquote></div><p>You have the PCI soundcard in use by the host and the DVB card assigned to a guest?&#160; I have a hard time believing that would work.&#160; Splitting the IOMMU group for devices on a conventional PCI bus is in the &quot;won&#039;t work&quot; camp, versus normally being in the &quot;might work&quot; camp for PCIe devices.</p><div class="quotebox"><blockquote><div><p><strong>SATA controller with BD (device 06:00.0):</strong><br />This is working when I first start the VM, I can access the Blu-Ray drive from my guest. But I have issues when I try to reboot the VM: sometimes the VM is frozen with message &quot;SeaBIOS (version rel-1.7.4-27-...)&quot; during about 2 minutes, and then it will startup normally (I can see the drive in guest after reboot). Sometimes it is definitely frozen with the same message, and the only solution is to shutdown the VM manually.</p><p>When the VM hangs for 2 minutes, I have no output for qemu but I see the following logs in dmesg:</p><div class="codebox"><pre><code>[13707.928236] dmar: DRHD: handling fault status reg 2 [13707.928240] dmar: DMAR:[DMA Write] Request device [06:00.0] fault addr 1affde000 DMAR:[fault reason 05] PTE Write access is not set [13707.928276] dmar: DRHD: handling fault status reg 2 [13707.928278] dmar: DMAR:[DMA Read] Request device [06:00.0] fault addr 1affde000 DMAR:[fault reason 06] PTE Read access is not set [13764.520612] dmar: DRHD: handling fault status reg 2 [13764.520616] dmar: DMAR:[DMA Write] Request device [06:00.0] fault addr 1affde000 DMAR:[fault reason 05] PTE Write access is not set</code></pre></div></div></blockquote></div><p>Others have reported similar problems with this device (note that it&#039;s also made by ASMedia...)&#160; How much memory are you configuring for the VM?&#160; The device is trying to do reads and writes to an address just shy of 7G, which may be off the end of guest memory.&#160; Someone reported a similar fault with a Via USB3 card and replaced it with a Renesas controller and reported success.</p><div class="quotebox"><blockquote><div><p>When the VM hangs definitely, I have this additional message in dmesg:</p><div class="codebox"><pre><code>[14225.129188] intel_iommu_map: iommu width (39) is not sufficient for the mapped address (3ffc0001000)</code></pre></div><p>and the following output from qemu:</p><div class="codebox"><pre><code>qemu-system-x86_64: vfio_dma_map(0x7f9693da9bf0, 0x3ffc0000000, 0x10000000, 0x7f955c000000) = -14 (Bad address)</code></pre></div><p>Any idea on how to debug this?</p></div></blockquote></div><p>While the faults above are the device trying to do DMA to regions it shouldn&#039;t, this indicates QEMU trying to create an IOMMU mapping that it shouldn&#039;t.&#160; Nothing in QEMU lives at such a high address.&#160; If it&#039;s reproducible I could probably send you a patch to print out a little more info about where that region is coming from.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375648">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375695" class="blockpost roweven"> <h2><span><span class="conr">#1074</span> <a href="viewtopic.php?pid=1375695#p1375695">2014-01-28 08:37:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53621">teekay</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-10-26</span></dd> <dd><span>Posts: 267</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53621">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>On my AMD board and kernel 3.13 I get this IOMMU group:</p><div class="codebox"><pre><code>### Group 14 ### 00:15.0 PCI bridge: Advanced Micro Devices, Inc. [AMD/ATI] SB700/SB800/SB900 PCI to PCI bridge (PCIE port 0) 00:15.1 PCI bridge: Advanced Micro Devices, Inc. [AMD/ATI] SB700/SB800/SB900 PCI to PCI bridge (PCIE port 1) 00:15.2 PCI bridge: Advanced Micro Devices, Inc. [AMD/ATI] SB900 PCI to PCI bridge (PCIE port 2) 07:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 06) 08:00.0 USB controller: Etron Technology, Inc. EJ168 USB 3.0 Host Controller (rev 01) 09:00.0 SATA controller: Marvell Technology Group Ltd. 88SE9172 SATA 6Gb/s Controller (rev 11)</code></pre></div><p>I wonder if it&#039;s somehow possible to get the SATA controller in its own group so I can pass it through to the VM.</p><p>I see there are some quirks for those SB900 PCI bridge ports in drivers/pci/quirks.c, but either they do nothing or is it really impossible with these Ethernet/USB/SATA devices?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375695">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1375757" class="blockpost rowodd"> <h2><span><span class="conr">#1075</span> <a href="viewtopic.php?pid=1375757#p1375757">2014-01-28 15:09:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>For your testing pleasure (Intel root port ACS):</p><p><a href="https://lkml.org/lkml/2014/1/20/453" rel="nofollow">https://lkml.org/lkml/2014/1/20/453</a></p><p>Also, why so many reports of needing to reboot the host system to make the guest work a 2nd time?&#160; This should be solved by the secondary bus reset support.&#160; Could someone experiencing this problem report exactly what kernel and qemu you&#039;re using and provide lspci -vvv of the bus with the assigned video card?</p></div></blockquote></div><p>I experience the same since i upgraded from kernel 3.11 to 3.12 or 3.13. <br />Host freezes (no more ssh login possible - ping still working; at least MagicSysRq-Keys still worked) as soon as the guest starts up the second time (complete guest shutdown, i.e. virsh shutdown, then virsh start again).</p><p>kernel is 3.13.0, qemu is git from 16.1.2014 (same qemu compile works flawless with 3.11).</p><p>lspci -vvv is here: <a href="http://www.pastebin.ca/2579449" rel="nofollow">http://www.pastebin.ca/2579449</a></p><p>My guess is, some of these patches are missing upstream: <a href="http://www.pastebin.ca/2579452" rel="nofollow">http://www.pastebin.ca/2579452</a><br />They were the ones needed to get it working with 3.11, and when i try to apply them to 3.13 (see here: <a href="http://pastebin.ca/2579454" rel="nofollow">http://pastebin.ca/2579454</a>) they of course hunk, but _some_ apply, so i guess something is missing ?</p></div></blockquote></div><p>The patch is an early implementation, the chunks that apply are no longer relevant.&#160; What really confuses me is the implication that qemu.git works on 3.11 with this patch.&#160; The problem is that the user API is different, which leads me to suspect that no bus reset is happening when you say it works.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1375757">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=42">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=41">41</a> <a href="viewtopic.php?id=162768&amp;p=42">42</a> <strong>43</strong> <a href="viewtopic.php?id=162768&amp;p=44">44</a> <a href="viewtopic.php?id=162768&amp;p=45">45</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=44">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
