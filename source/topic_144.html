<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 144) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=144" title="Page 144" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=143" title="Page 143" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=145" title="Page 145" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=143">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=142">142</a> <a href="viewtopic.php?id=162768&amp;p=143">143</a> <strong>144</strong> <a href="viewtopic.php?id=162768&amp;p=145">145</a> <a href="viewtopic.php?id=162768&amp;p=146">146</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=145">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1484390" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#3576</span> <a href="viewtopic.php?pid=1484390#p1484390">2014-12-14 17:05:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>oegat wrote:</cite><blockquote><div><p>Nvidia driver: 244.11 / 244.75 (same result with both, cannot try older since the gpu is too new)</p></div></blockquote></div><p>You&#039;ve meant 344.11 and 344.75, right?</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484390">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484395" class="blockpost roweven"> <h2><span><span class="conr">#3577</span> <a href="viewtopic.php?pid=1484395#p1484395">2014-12-14 17:16:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87305">oegat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-14</span></dd> <dd><span>Posts: 3</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:falck.andreas@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>oegat wrote:</cite><blockquote><div><p>Nvidia driver: 244.11 / 244.75 (same result with both, cannot try older since the gpu is too new)</p></div></blockquote></div><p>You&#039;ve meant 344.11 and 344.75, right?</p></div></blockquote></div><p>Yes, sorry.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484395">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484587" class="blockpost rowodd"> <h2><span><span class="conr">#3578</span> <a href="viewtopic.php?pid=1484587#p1484587">2014-12-15 09:15:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello,</p><p>Just to inform that with the new kernel (3.17.6-1 ARCH), I do not need to patch it, just works perfect <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>My kernel options are now: </p><div class="codebox"><pre><code>rdblacklist=nouveau nouveau.modeset=0 pci-stub.ids=10de:1184,10de:030a,8086:15a1 intel_pstate=disable intel_iommu=on,igfx_off quiet</code></pre></div><p>And performance is the same, or even a bit more now <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Regards,</p><br /><p>TheArcher</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484587">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484602" class="blockpost roweven"> <h2><span><span class="conr">#3579</span> <a href="viewtopic.php?pid=1484602#p1484602">2014-12-15 10:31:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks TheArcher, that is great news. I have something to share too:</p><p>Ok, everyone with the intention of buying a new motherboard and owners of a motherboard with DUAL LAN, listen up:</p><p>I found out something exciting and I want to share it with you. I realize this may be no news whatsoever for the majority here. It was a big one for me though.</p><p>I was never happy with the performance of the VM. Even having virtio for disk and network didn&#039;t seem to do the trick. Then I tried to passtrough one of the LAN ports as a pci device - and it worked wonders. Disk usage went down to 0% in idle and 4k gaming is finally possible for me in a virtualized Windows 8.1. </p><p>Like I said this might not be news and (it is kind of common sense) but I can only advise people taking full advantage of that second LAN port.</p><p>A big thanks to aw and nbhs for their help. I am not done configuring, so many more questions to come <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>btw: I am using direct block device as aw suggested. It has another huge advantage: When I need to I can boot directly into native Windows 8.1 - the same disk I use as my VM.</p><br /><p>Hope it helps some of you <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by 4kGamer (2014-12-15 12:25:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484602">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484636" class="blockpost rowodd"> <h2><span><span class="conr">#3580</span> <a href="viewtopic.php?pid=1484636#p1484636">2014-12-15 12:51:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p><img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I have 2 ethernet (Asrock Z97 Extreme 6) as well and I was passing the intel one without problems but with the realtek one... was not able to work fine... (drivers downloaded from the official website)... so, if you have two and passthrough one and is not working... try the other one XD</p><p>Regards,</p><br /><p>TheArcher</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484636">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484638" class="blockpost roweven"> <h2><span><span class="conr">#3581</span> <a href="viewtopic.php?pid=1484638#p1484638">2014-12-15 13:10:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>yeah, I have the same motherboard! I sent you a mail, did you get it? Need uefi boot working, which still doesn&#039;t. Just have a look into your mail account.</p><p>thanks a lot!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484638">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484640" class="blockpost rowodd"> <h2><span><span class="conr">#3582</span> <a href="viewtopic.php?pid=1484640#p1484640">2014-12-15 13:18:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>4kGamer wrote:</cite><blockquote><div><p>yeah, I have the same motherboard! I sent you a mail, did you get it? Need uefi boot working, which still doesn&#039;t. Just have a look into your mail account.</p><p>thanks a lot!</p></div></blockquote></div><p>Hello <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ve got you mail right now, but I will you reply here to benefit of all the community (please, moderators, move it to the proper place if necessary).</p><p>To boot with UEFI you just need to choose on the boot menu (F11) the UEFI option for your USB / DVD boot device.</p><p>Normally you will have the device two times (one with UEFI and one without <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />).</p><p>Please, let us know if solved <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Anyway, this forum is plenty of this information on the newbie corner (I need to go there almost everyday to find solutions <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />).</p><p>Regards,</p><br /><p>TheArcher</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484640">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484644" class="blockpost roweven"> <h2><span><span class="conr">#3583</span> <a href="viewtopic.php?pid=1484644#p1484644">2014-12-15 13:37:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>ok, thank you. The problem is, it is NOT showing in BIOS. So it must be something else. I use standard grub ...</p><p>I think my problem is the actual path of the bootx64.efi/grubx64.efi </p><p>thanks a lot!</p> <p class="postedit"><em>Last edited by 4kGamer (2014-12-15 13:42:50)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484644">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484647" class="blockpost rowodd"> <h2><span><span class="conr">#3584</span> <a href="viewtopic.php?pid=1484647#p1484647">2014-12-15 13:43:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m not expert on this but I remember that I had a few problems with it when booting (booting from USB pen drive).</p><p>Just check that you don&#039;t have secureboot enabled or fastboot (gives a lot of problems).</p><p>I hope it helps <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484647">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484650" class="blockpost roweven"> <h2><span><span class="conr">#3585</span> <a href="viewtopic.php?pid=1484650#p1484650">2014-12-15 13:48:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I don&#039;t have secure boot or fast boot enabled. What would really help:&#160; can you please tell me 2 things: </p><p>1. where is your grub.cfg located and <br />2. where is your .efi file located? (and what name does it have? grubx64.efi or what?)</p><p>That would solve my problem, I am sure</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484650">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484653" class="blockpost rowodd"> <h2><span><span class="conr">#3586</span> <a href="viewtopic.php?pid=1484653#p1484653">2014-12-15 13:59:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;m not using grub, I like gummibot, I just followed the instructions on the Wiki (<a href="https://wiki.archlinux.org/index.php/beginners%27_guide#GRUB" rel="nofollow">https://wiki.archlinux.org/index.php/be … guide#GRUB</a>) but:</p><p>My EFI file is on: /boot/EFI/Boot/BOOTX64.EFI</p><p>I love Gummiboot <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by thearcherblog (2014-12-15 14:19:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484653">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484657" class="blockpost roweven"> <h2><span><span class="conr">#3587</span> <a href="viewtopic.php?pid=1484657#p1484657">2014-12-15 14:04:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>all right, thanks a lot!. I will have a look into that later on. I think I can solve it now <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> My bootx64.efi is located under /boot/efi/EFI/boot </p><p>so that really might be it <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by 4kGamer (2014-12-15 14:05:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484657">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484663" class="blockpost rowodd"> <h2><span><span class="conr">#3588</span> <a href="viewtopic.php?pid=1484663#p1484663">2014-12-15 14:23:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=48315">TripleSpeeder</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-05-02</span></dd> <dd><span>Posts: 43</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=48315">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>thearcherblog wrote:</cite><blockquote><div><p>Hello,<br />My kernel options are now: </p><div class="codebox"><pre><code>rdblacklist=nouveau nouveau.modeset=0 pci-stub.ids=10de:1184,10de:030a,8086:15a1 intel_pstate=disable intel_iommu=on,igfx_off quiet</code></pre></div><p>And performance is the same, or even a bit more now <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>What is the benefit of &quot;intel_pstate=disable&quot;?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484663">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484666" class="blockpost roweven"> <h2><span><span class="conr">#3589</span> <a href="viewtopic.php?pid=1484666#p1484666">2014-12-15 14:25:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>TripleSpeeder wrote:</cite><blockquote><div><div class="quotebox"><cite>thearcherblog wrote:</cite><blockquote><div><p>Hello,<br />My kernel options are now: </p><div class="codebox"><pre><code>rdblacklist=nouveau nouveau.modeset=0 pci-stub.ids=10de:1184,10de:030a,8086:15a1 intel_pstate=disable intel_iommu=on,igfx_off quiet</code></pre></div><p>And performance is the same, or even a bit more now <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>What is the benefit of &quot;intel_pstate=disable&quot;?</p></div></blockquote></div><p><span class="bbs">To be honest, the problem I had was that my CPU (4790K) was all time running at 4.4GHz so I was looking for some information and when I disabled it, then works quite good (it&#039;s at 800MHz when it&#039;s in idle mode and changing to 4.4GHz when need it. Then my computer&#039;s temperature is back to normal <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </span> I&#039;ve checked it today with pstate enabled and temperatures and core speeds are back to normal <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I also run my gummibot with the microcode update before initram... maybe that made the trick <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>I hope it helps to you <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by thearcherblog (2014-12-16 09:17:56)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484666">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484688" class="blockpost rowodd"> <h2><span><span class="conr">#3590</span> <a href="viewtopic.php?pid=1484688#p1484688">2014-12-15 15:37:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87333">Rholk</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-15</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:quentindeldycke@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>4kGamer:</p><p>Hi, is it possible that multiplayer games are slow down by network traffic?</p><p>I have 1 nic, a 4790k cpu and using 6 cores for the guest (cpu pinned, but not using cpuset shield, only taskset). While i have good performance in a couple of games (solo), i have really bad performance on &quot;simple games&quot; like Heroes of the storm. Where i barely reach 50fps (native windows was at 80...).<br />I use a tap bridge, my network card uses virtio.</p><p>Can you give some numbers of the gain between kvm network and the new mode?</p><p>I also thougt of performance problem with emulated sound, but it doesn&#039;t seems to affect this so much. (made a game with sound card disabled, performance wasn&#039;t better)</p> <p class="postedit"><em>Last edited by Rholk (2014-12-15 15:38:11)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484688">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484718" class="blockpost roweven"> <h2><span><span class="conr">#3591</span> <a href="viewtopic.php?pid=1484718#p1484718">2014-12-15 17:10:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Rholk wrote:</cite><blockquote><div><p>4kGamer:</p><p>Hi, is it possible that multiplayer games are slow down by network traffic?</p><p>I have 1 nic, a 4790k cpu and using 6 cores for the guest (cpu pinned, but not using cpuset shield, only taskset). While i have good performance in a couple of games (solo), i have really bad performance on &quot;simple games&quot; like Heroes of the storm. Where i barely reach 50fps (native windows was at 80...).<br />I use a tap bridge, my network card uses virtio.</p><p>Can you give some numbers of the gain between kvm network and the new mode?</p><p>I also thougt of performance problem with emulated sound, but it doesn&#039;t seems to affect this so much. (made a game with sound card disabled, performance wasn&#039;t better)</p></div></blockquote></div><p>anything might factor - it highly depends on the way application is designed/coded<br />80 to 50 fps is not that huge of a performance drop, i would say (significant though)</p><p>in my case, audio and memory allocations were main slowdowns (jumped to 200-300 fps in lol, from 50-60 fps)<br />oh, i&#039;m using basic virtio network by the way</p> <p class="postedit"><em>Last edited by sinny (2014-12-15 17:10:49)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484718">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484818" class="blockpost rowodd"> <h2><span><span class="conr">#3592</span> <a href="viewtopic.php?pid=1484818#p1484818">2014-12-15 23:30:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Rholk:</p><p>I can&#039;t give you an exact answer. I haven&#039;t had the chance to test thoroughly. I can tell you more in a few days, but based on my experiences so far, I would believe performance does depend on network usage. You can also give multi-queue virtio-scsi a try. aw wrote about it a page back.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484818">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484830" class="blockpost roweven"> <h2><span><span class="conr">#3593</span> <a href="viewtopic.php?pid=1484830#p1484830">2014-12-16 01:23:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81112">Krobar</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-04-12</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:rob@ledeng.demon.co.uk">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>4kGamer wrote:</cite><blockquote><div><p>Thanks TheArcher, that is great news. I have something to share too:</p><p>Ok, everyone with the intention of buying a new motherboard and owners of a motherboard with DUAL LAN, listen up:</p><p>I found out something exciting and I want to share it with you. I realize this may be no news whatsoever for the majority here. It was a big one for me though.</p><p>I was never happy with the performance of the VM. Even having virtio for disk and network didn&#039;t seem to do the trick. Then I tried to passtrough one of the LAN ports as a pci device - and it worked wonders. Disk usage went down to 0% in idle and 4k gaming is finally possible for me in a virtualized Windows 8.1. </p><p>Like I said this might not be news and (it is kind of common sense) but I can only advise people taking full advantage of that second LAN port.</p><p>A big thanks to aw and nbhs for their help. I am not done configuring, so many more questions to come <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>btw: I am using direct block device as aw suggested. It has another huge advantage: When I need to I can boot directly into native Windows 8.1 - the same disk I use as my VM.</p><br /><p>Hope it helps some of you <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>For those of you with supported Intel Nics I find using VF devices also performs better than bridge too (You can pass through the spawned VFs using VFIO).</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484830">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484833" class="blockpost rowodd"> <h2><span><span class="conr">#3594</span> <a href="viewtopic.php?pid=1484833#p1484833">2014-12-16 01:29:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81112">Krobar</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-04-12</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:rob@ledeng.demon.co.uk">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Can anyone help me with an example of using cpuset and cgroups to fix the host to cores 0-3, VM1 to cores 4-5, VM2 to core 6 and VM3 to core 7?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484833">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484869" class="blockpost roweven"> <h2><span><span class="conr">#3595</span> <a href="viewtopic.php?pid=1484869#p1484869">2014-12-16 04:34:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87159">anthonym52</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-07</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87159">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>4kGamer wrote:</cite><blockquote><div><p>Thanks TheArcher, that is great news. I have something to share too:</p><p>Ok, everyone with the intention of buying a new motherboard and owners of a motherboard with DUAL LAN, listen up:</p><p>I found out something exciting and I want to share it with you. I realize this may be no news whatsoever for the majority here. It was a big one for me though.</p><p>I was never happy with the performance of the VM. Even having virtio for disk and network didn&#039;t seem to do the trick. Then I tried to passtrough one of the LAN ports as a pci device - and it worked wonders. Disk usage went down to 0% in idle and 4k gaming is finally possible for me in a virtualized Windows 8.1. </p><p>Like I said this might not be news and (it is kind of common sense) but I can only advise people taking full advantage of that second LAN port.</p><p>A big thanks to aw and nbhs for their help. I am not done configuring, so many more questions to come <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>btw: I am using direct block device as aw suggested. It has another huge advantage: When I need to I can boot directly into native Windows 8.1 - the same disk I use as my VM.</p><br /><p>Hope it helps some of you <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>How do you pass a single ethernet port as a PCI device? Do you have benchmarks ?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484869">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484877" class="blockpost rowodd"> <h2><span><span class="conr">#3596</span> <a href="viewtopic.php?pid=1484877#p1484877">2014-12-16 06:19:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86321">thearcherblog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-30</span></dd> <dd><span>Posts: 165</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jjgarcianorway@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>anthonym52 wrote:</cite><blockquote><div><div class="quotebox"><cite>4kGamer wrote:</cite><blockquote><div><p>Thanks TheArcher, that is great news. I have something to share too:</p><p>Ok, everyone with the intention of buying a new motherboard and owners of a motherboard with DUAL LAN, listen up:</p><p>I found out something exciting and I want to share it with you. I realize this may be no news whatsoever for the majority here. It was a big one for me though.</p><p>I was never happy with the performance of the VM. Even having virtio for disk and network didn&#039;t seem to do the trick. Then I tried to passtrough one of the LAN ports as a pci device - and it worked wonders. Disk usage went down to 0% in idle and 4k gaming is finally possible for me in a virtualized Windows 8.1. </p><p>Like I said this might not be news and (it is kind of common sense) but I can only advise people taking full advantage of that second LAN port.</p><p>A big thanks to aw and nbhs for their help. I am not done configuring, so many more questions to come <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>btw: I am using direct block device as aw suggested. It has another huge advantage: When I need to I can boot directly into native Windows 8.1 - the same disk I use as my VM.</p><br /><p>Hope it helps some of you <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>How do you pass a single ethernet port as a PCI device? Do you have benchmarks ?</p></div></blockquote></div><p>Hello,</p><p>I do not have benchmark but is quite confortable to me using the second ethernet device as a native one on Windows because then both computers (windows and linux) are on the same LAN without bridge/NAT.</p><p>This is the command I use to start the qemu:</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -rtc base=localtime -m 8192 -cpu host,kvm=off -drive if=pflash,format=raw,readonly,file=/usr/share/ovmf/x64/ovmf_x64.bin -drive if=pflash,format=raw,file=/home/jgomez/VM/ovmf_x64.bin -smp 4,sockets=1,cores=4 -serial none -parallel none -nodefconfig -drive file=/home/jgomez/VM/win7.img,cache=writeback,if=none,id=drive0,aio=native -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 -device virtio-scsi-pci,id=scsi -drive file=/home/jgomez/Downloads/win8.iso,id=iso_install,if=none -device scsi-cd,drive=iso_install -cdrom /home/jgomez/Downloads/virtio.iso -device vfio-pci,host=01:00.0,multifunction=on,x-vga=on -device vfio-pci,host=01:00.1 -device vfio-pci,host=00:19.0 -usb -usbdevice host:046d:c52e -net none -vga none -nographic</code></pre></div><p>Regards,</p><br /><p>TheArcher</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484877">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484917" class="blockpost roweven"> <h2><span><span class="conr">#3597</span> <a href="viewtopic.php?pid=1484917#p1484917">2014-12-16 11:09:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Krobar wrote:</cite><blockquote><div><p>Can anyone help me with an example of using cpuset and cgroups to fix the host to cores 0-3, VM1 to cores 4-5, VM2 to core 6 and VM3 to core 7?</p></div></blockquote></div><p>Just use <a href="https://code.google.com/p/cpuset/" rel="nofollow">cset</a></p><p>cset shield -c 4-5<br />cset shield --shield --pid $PID1<br />cset shield --shield --pid $PID2</p><br /><p>Then pin with taskset:</p><p>taskset -pc 4 $PID1<br />taskset -pc 5 $PID2</p><p>You can get each VCPU pid by running qemu with:</p><div class="codebox"><pre><code>-qmp unix:./qmp-sock,server,nowait</code></pre></div><p>And getting the VCPU&#039;S pids</p><div class="codebox"><pre><code>echo &quot;{ \&quot;execute\&quot;: \&quot;qmp_capabilities\&quot; }&quot; &quot;{ \&quot;execute\&quot;: \&quot;query-cpus\&quot; }&quot; | socat UNIX-CONNECT:./qmp-sock STDIO</code></pre></div><p>After you&#039;re done</p><div class="codebox"><pre><code>cset shield --reset</code></pre></div><p>And here&#039;s the cset build for arch <a href="https://drive.google.com/open?id=0Bxp_MsrVrNnEdGdnM0Nad2FxYUE&amp;authuser=0" rel="nofollow">cpuset.tar.gz</a></p> <p class="postedit"><em>Last edited by nbhs (2014-12-16 11:25:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484917">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484971" class="blockpost rowodd"> <h2><span><span class="conr">#3598</span> <a href="viewtopic.php?pid=1484971#p1484971">2014-12-16 15:35:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87159">anthonym52</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-07</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87159">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>thearcherblog wrote:</cite><blockquote><div><p>This is the command I use to start the qemu:</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -rtc base=localtime -m 8192 -cpu host,kvm=off -drive if=pflash,format=raw,readonly,file=/usr/share/ovmf/x64/ovmf_x64.bin -drive if=pflash,format=raw,file=/home/jgomez/VM/ovmf_x64.bin -smp 4,sockets=1,cores=4 -serial none -parallel none -nodefconfig -drive file=/home/jgomez/VM/win7.img,cache=writeback,if=none,id=drive0,aio=native -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 -device virtio-scsi-pci,id=scsi -drive file=/home/jgomez/Downloads/win8.iso,id=iso_install,if=none -device scsi-cd,drive=iso_install -cdrom /home/jgomez/Downloads/virtio.iso -device vfio-pci,host=01:00.0,multifunction=on,x-vga=on -device vfio-pci,host=01:00.1 -device vfio-pci,host=00:19.0 -usb -usbdevice host:046d:c52e -net none -vga none -nographic</code></pre></div><p>Regards,</p><br /><p>TheArcher</p></div></blockquote></div><br /><p>I can&#039;t seem to get the PCI stub ID claimed, both interfaces have the same ID, do your IDs match as well?</p><p>05:00.0 Ethernet controller [0200]: Intel Corporation 82574L Gigabit Network Connection [8086:10d3]<br />06:00.0 Ethernet controller [0200]: Intel Corporation 82574L Gigabit Network Connection [8086:10d3]</p><br /><p>[anthony:/home/anthony] 7s $ dmesg |grep -i claim<br />[&#160; &#160; 0.332788] pci 0000:00:1f.0: quirk: [io&#160; 0x0500-0x053f] claimed by ICH6 GPIO<br />[&#160; &#160; 4.332685] pci-stub 0000:03:00.0: claimed by stub<br />[&#160; &#160; 4.332702] pci-stub 0000:03:00.1: claimed by stub</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484971">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484973" class="blockpost roweven"> <h2><span><span class="conr">#3599</span> <a href="viewtopic.php?pid=1484973#p1484973">2014-12-16 15:51:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87359">apostmax</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-16</span></dd> <dd><span>Posts: 1</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Any news on passing through a Intel IGD?<br />Is it possible at all? I am interested in passing through a HD 4600 (Intel i7 4790)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484973">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484976" class="blockpost rowodd"> <h2><span><span class="conr">#3600</span> <a href="viewtopic.php?pid=1484976#p1484976">2014-12-16 16:00:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=44291">magemaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Brasil</span></dd> <dd><span>Registered: 2010-11-24</span></dd> <dd><span>Posts: 16</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=44291">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Someone else using with arch kernel?</p><p>uname -a</p><div class="codebox"><pre><code>Linux 3.17.6-1-ARCH #1 SMP PREEMPT Sun Dec 7 23:43:32 UTC 2014 x86_64 GNU/Linux</code></pre></div><br /><p>cat /proc/cmdline</p><div class="codebox"><pre><code>BOOT_IMAGE=/vmlinuz-linux root=UUID=e9f18698-c70a-41f6-b5c6-c84a8e7eac85 rw quiet rdblacklist=nouveau nouveau.modeset=0 pci-stub.ids=10de:10c3,10de:0be3 intel_pstate=disable i915.enable_hd_vgaarb=1 intel_iommu=on,igfx_off quiet</code></pre></div><p>Tried this way,&#160; based on thearcherblog, gave me no error, but no screen</p><div class="codebox"><pre><code>sudo qemu-system-x86_64 -enable-kvm -rtc base=localtime -cpu host,kvm=off -m 2048 -smp 2,sockets=1,cores=2 -serial none -parallel none -nodefconfig \ -drive if=pflash,format=raw,readonly,file=/usr/share/ovmf/ovmf_x64.bin \ -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 \ -device virtio-scsi-pci,id=scsi \ -drive file=/home/user/windows.img,cache=writeback,if=none,id=drive0,aio=native \ -drive file=/home/user/Win81.iso,id=iso_install,if=none \ -device scsi-cd,drive=iso_install \ -cdrom /home/user/Downloads/virtio.iso \ -device vfio-pci,host=01:00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1 \ -net none \ -vga none \ -boot menu=on \ -nographic</code></pre></div><br /><p>and this way, based on nbhs, gave me this error: KVM internal error. Suberror: 1 emulation failure</p><div class="codebox"><pre><code>sudo qemu-system-x86_64 -enable-kvm -M q35 -m 1024 -cpu host \ -smp 2,sockets=1,cores=2,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484976">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=143">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=142">142</a> <a href="viewtopic.php?id=162768&amp;p=143">143</a> <strong>144</strong> <a href="viewtopic.php?id=162768&amp;p=145">145</a> <a href="viewtopic.php?id=162768&amp;p=146">146</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=145">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
