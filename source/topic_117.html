<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 117) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=117" title="Page 117" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=116" title="Page 116" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=118" title="Page 118" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=116">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=115">115</a> <a href="viewtopic.php?id=162768&amp;p=116">116</a> <strong>117</strong> <a href="viewtopic.php?id=162768&amp;p=118">118</a> <a href="viewtopic.php?id=162768&amp;p=119">119</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=118">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1462980" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#2901</span> <a href="viewtopic.php?pid=1462980#p1462980">2014-10-05 02:02:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85053">Lauer</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-11</span></dd> <dd><span>Posts: 9</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Use a bridge</p></div></blockquote></div><p>I&#039;m able to connect to the VNC server on the guest now! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Device manager does not list any display devices, and generic vga-compatible device is listed in the taskbar.</p><p>runwin-vfio is:</p><div class="codebox"><pre><code>qemu-system-x86_64 -net nic -net bridge,br=br0 -enable-kvm -M q35 -m 1024 -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none -nographic \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device piix4-ide,bus=pcie.0,id=piix4-ide \ -drive file=/dev/md0,id=disk,format=raw -device ide-hd,bus=piix4-ide.0,drive=disk</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1462980">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463100" class="blockpost roweven"> <h2><span><span class="conr">#2902</span> <a href="viewtopic.php?pid=1463100#p1463100">2014-10-05 16:20:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=67485">3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-01-18</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=67485">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, is there a good how-to? I think the how-to on the first page in this thread is way too advanced and the how-to from the arch wiki is pure crap.</p><p>I have used XEN for two years passing through AMD, but now I have Nvidia and need to make KVM work and I have absolutely no clue how.</p><p>Can someone please tell me where I can find a step-by-step guide?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463100">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463104" class="blockpost rowodd"> <h2><span><span class="conr">#2903</span> <a href="viewtopic.php?pid=1463104#p1463104">2014-10-05 16:32:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>3000 wrote:</cite><blockquote><div><p>Hi, is there a good how-to? I think the how-to on the first page in this thread is way too advanced and the how-to from the arch wiki is pure crap.</p><p>I have used XEN for two years passing through AMD, but now I have Nvidia and need to make KVM work and I have absolutely no clue how.</p><p>Can someone please tell me where I can find a step-by-step guide?</p></div></blockquote></div><p>places:<br /> - in this topic (yes, reading most of it)<br /> - web (have seen at least few situational tutorials)<br /> - try &amp; explore</p><p>if op post is too advanced for you - should you really bother with experimental stuff? i mean what will you do when some problems arise? go ask for more &quot;ohhh, please do waste more of your time just to solve some trivial stuff for me&quot; (note: not every problem arising is trivial, but judging by this thread alone, i&#039;d say 90% of problems are trivial - already solved and discussed in this thread)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463104">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463106" class="blockpost roweven"> <h2><span><span class="conr">#2904</span> <a href="viewtopic.php?pid=1463106#p1463106">2014-10-05 16:38:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=67485">3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-01-18</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=67485">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>thanks for nothing.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463106">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463117" class="blockpost rowodd"> <h2><span><span class="conr">#2905</span> <a href="viewtopic.php?pid=1463117#p1463117">2014-10-05 17:00:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=67485">3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-01-18</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=67485">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>oh and btw: you have of course no time to help, but time to write all that CRAP. Congratulations.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463117">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463125" class="blockpost roweven"> <h2><span><span class="conr">#2906</span> <a href="viewtopic.php?pid=1463125#p1463125">2014-10-05 17:11:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>3000 wrote:</cite><blockquote><div><p>oh and btw: you have of course no time to help, but time to write all that CRAP. Congratulations.</p></div></blockquote></div><p>You&#039;re not improving your chances of getting help.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463125">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463127" class="blockpost rowodd"> <h2><span><span class="conr">#2907</span> <a href="viewtopic.php?pid=1463127#p1463127">2014-10-05 17:17:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=67485">3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-01-18</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=67485">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Again an answer. And AGAIN thanks for nothing.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463127">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463132" class="blockpost roweven"> <h2><span><span class="conr">#2908</span> <a href="viewtopic.php?pid=1463132#p1463132">2014-10-05 17:39:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>3000 wrote:</cite><blockquote><div><p>Again an answer. And AGAIN thanks for nothing.</p></div></blockquote></div><p>well, i am truly noone in this thread. but replying &quot;thanks for no help&quot; to aw is like... ridiculous. sure, he did no help as far as vga passthrough is concerned, you are absolutely right )</p><p>oh, btw. why do you think someone should spend their own precious time to recompile tons of info in this very thread and his own experience to enlighten some ignorant child coming with nothing but &quot;i did this for quite some time, but now i just dont have any clue. someone go bring me step-by-step guide&quot;?</p><p>not to mention me not being able to grasp at all how &quot;how-to&quot; and &quot;experimental stuff&quot; can coexist in someone&#039;s head unless that very head is completely broken in some way.</p><p>p.s. yup, one more stupid reply with absolutely no help. bad bad me<br />p.p.s. in case you are not completely hopeless, i&#039;ll just repeat myself: this very thread have really TONS of info. period.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463132">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463133" class="blockpost rowodd"> <h2><span><span class="conr">#2909</span> <a href="viewtopic.php?pid=1463133#p1463133">2014-10-05 17:42:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=67485">3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-01-18</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=67485">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>you don&#039;t want to &lt;redacted&gt; help? Guess what? DON&#039;T &lt;redacted&gt; HELP. That simple.</p><p><em>moderator edit [ewaller] sanitized somewhat after a burst of frustration </em></p> <p class="postedit"><em>Last edited by ewaller (2014-10-05 18:13:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463133">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463134" class="blockpost roweven"> <h2><span><span class="conr">#2910</span> <a href="viewtopic.php?pid=1463134#p1463134">2014-10-05 17:42:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hey . </p><p>Alex , I narrowed my crashing problems to reboots only .</p><p>When I shutdown the VM cleanly then reexecute the shell file to fire it up , it works nicely , no crashes to either the host or other VMs .</p><p>It only happens when I reboot the VM .</p><p>Journalctl doesn&#039;t show any errors related to the issue .</p><p>Again , it started happening as soon as I *upgraded* to X99 platform .&#160; : (</p><p>EDIT :</p><p>One more thing , when I reboot a VM with no VGA passthroughed to it , it reboots fine . So its related to VGA . as it is basically the same shell , the main difference between these VMs is the VGA .</p><p>EDIT 2 :</p><p>Kernel is stock ARCH , 3.16.3 .</p><p>Qemu-git , compiled two days ago .</p> <p class="postedit"><em>Last edited by Denso (2014-10-05 18:31:37)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463134">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463141" class="blockpost rowodd"> <h2><span><span class="conr">#2911</span> <a href="viewtopic.php?pid=1463141#p1463141">2014-10-05 18:11:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=27289">ewaller</a></strong></dt> <dd class="usertitle"><strong>Forum Moderator</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/27289.jpg?m=1406180442" width="80" height="80" alt="" /></dd> <dd><span>From: Pasadena, CA</span></dd> <dd><span>Registered: 2009-07-13</span></dd> <dd><span>Posts: 10,547</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=27289">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>While 3000 takes a day off to cool down, I remind everyone to <a href="https://wiki.archlinux.org/index.php/Forum_etiquette#Respect_Other_Users" rel="nofollow">respect each other</a>, please do not <a href="https://wiki.archlinux.org/index.php/Forum_etiquette#Do_Not_Flame" rel="nofollow">flame</a>.&#160; Read the link in my signature, and remember <a href="https://wiki.archlinux.org/index.php/The_Arch_Way" rel="nofollow">the Arch way.</a>.&#160; </p><p>Edit: Oh, I forgot, remember that <a href="https://wiki.archlinux.org/index.php/Forum_etiquette#Life_is_a_Two-way_Street" rel="nofollow">life is a two way street</a></p> <p class="postedit"><em>Last edited by ewaller (2014-10-05 18:18:47)</em></p> </div> <div class="postsignature postmsg"><hr /><p>Nothing is too wonderful to be true, if it be consistent with the laws of nature -- <em>Michael Faraday</em><br />Like you, I have no idea what you are doing, but I am pretty sure it is wrong...<em>Jasonwryan</em><br />----<br /><a href="http://www.catb.org/~esr/faqs/smart-questions.html" rel="nofollow">How to Ask Questions the Smart Way</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463141">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463160" class="blockpost roweven"> <h2><span><span class="conr">#2912</span> <a href="viewtopic.php?pid=1463160#p1463160">2014-10-05 19:09:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84905">zsph</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-04</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=84905">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I managed to narrow down the problem. The host hungs on suspend/resume/reboot/shutdown only if I the video card isn&#039;t released properly and as a result I cannot unbind it. Sometimes it gets released and everything works great but I cannot predict or spot the pattern why and when. I get this in dmesg when I fail to unbind the card:</p><div class="codebox"><pre class="vscroll"><code>[39245.912644] BUG: unable to handle kernel NULL pointer dereference at 0000000000000411 [39245.912708] IP: [&lt;0000000000000411&gt;] 0x411 [39245.912757] PGD 7c511d067 PUD 80d112067 PMD 0 [39245.912801] Oops: 0010 [#1] SMP [39245.912831] Modules linked in: vfio_pci vfio_iommu_type1 vfio nfnetlink_queue nfnetlink_log nfnetlink bluetooth pci_stub vboxpci(O) vboxnetadp(O) vboxnetflt(O) cfg80211 vboxdrv(O) cpufreq_userspace cpufreq_stats cpufreq_powersave cpufreq_conservative binfmt_misc nls_utf8 nls_cp437 vfat fat snd_usb_audio snd_usbmidi_lib snd_rawmidi snd_seq_device joydev mxm_wmi snd_hda_codec_hdmi eeepc_wmi asus_wmi sparse_keymap rfkill iTCO_wdt iTCO_vendor_support evdev snd_hda_codec_realtek x86_pkg_temp_thermal snd_hda_codec_generic intel_powerclamp intel_rapl coretemp kvm_intel i915 snd_hda_intel efi_pstore snd_hda_controller snd_hda_codec psmouse kvm snd_hwdep drm_kms_helper snd_pcm drm serio_raw pcspkr efivars snd_timer i2c_i801 snd i2c_algo_bit soundcore i2c_core mei_me wmi lpc_ich mei mfd_core shpchp battery video button processor fuse autofs4 ext4 crc16 mbcache jbd2 algif_skcipher af_alg dm_crypt dm_mod hid_logitech_dj sg usbhid hid sd_mod crc_t10dif crct10dif_generic crct10dif_pclmul crct10dif_common crc32_pclmul crc32c_intel ghash_clmulni_intel aesni_intel aes_x86_64 lrw gf128mul glue_helper ablk_helper ahci cryptd libahci libata ehci_pci xhci_hcd scsi_mod ehci_hcd r8169 mii usbcore usb_common thermal fan thermal_sys [39245.913917] CPU: 4 PID: 5417 Comm: tee Tainted: G W O 3.16.0-i915.arb.only #1 [39245.913975] Hardware name: System manufacturer System Product Name/P8Z77-V LK, BIOS 1402 03/21/2014 [39245.914039] task: ffff88082bac82d0 ti: ffff88076652c000 task.ti: ffff88076652c000 [39245.914092] RIP: 0010:[&lt;0000000000000411&gt;] [&lt;0000000000000411&gt;] 0x411 [39245.914148] RSP: 0018:ffff88076652fde8 EFLAGS: 00010206 [39245.914187] RAX: 0000000000000008 RBX: ffff88080f730098 RCX: 0000000000000000 [39245.914239] RDX: 0000000000000411 RSI: ffff88080f730098 RDI: ffff88080f730098 [39245.914291] RBP: ffff88080f730098 R08: 0000000000000246 R09: ffffffff8129c240 [39245.914343] R10: 0000000000000000 R11: 0000000000000000 R12: ffff88080f730148 [39245.914397] R13: 0000000000000000 R14: ffff88076652ff58 R15: ffff88080d1c2758 [39245.914449] FS: 00007fd3ea278700(0000) GS:ffff88082fb00000(0000) knlGS:0000000000000000 [39245.914506] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [39245.914549] CR2: 0000000000000411 CR3: 000000080ea97000 CR4: 00000000001407e0 [39245.914600] Stack: [39245.914618] ffffffff813951c7 0000000000000004 ffff88080f730098 0000000000000004 [39245.914683] ffffffff813960f8 0000000000000004 ffff88080f730098 ffff88080f730148 [39245.914748] 0000000000000246 ffffffff81396244 ffff88080f730098 ffffffffa078d000 [39245.914816] Call Trace: [39245.914843] [&lt;ffffffff813951c7&gt;] ? __rpm_callback+0x27/0x70 [39245.914887] [&lt;ffffffff813960f8&gt;] ? rpm_idle+0x198/0x290 [39245.914933] [&lt;ffffffff81396244&gt;] ? __pm_runtime_idle+0x54/0x80 [39245.914980] [&lt;ffffffff812d2467&gt;] ? pci_device_remove+0x67/0xb0 [39245.915029] [&lt;ffffffff8138d605&gt;] ? __device_release_driver+0x75/0xf0 [39245.915079] [&lt;ffffffff8138d699&gt;] ? device_release_driver+0x19/0x30 [39245.915131] [&lt;ffffffff8138ca2d&gt;] ? unbind_store+0xed/0x150 [39245.915176] [&lt;ffffffff812081bb&gt;] ? kernfs_fop_write+0xdb/0x160 [39245.915225] [&lt;ffffffff8119903d&gt;] ? vfs_write+0xad/0x1e0 [39245.915269] [&lt;ffffffff81198f3c&gt;] ? vfs_read+0x11c/0x170 [39245.915313] [&lt;ffffffff81199b4d&gt;] ? SyS_write+0x3d/0xa0 [39245.915355] [&lt;ffffffff814f596d&gt;] ? system_call_fast_compare_end+0x10/0x15 [39245.915406] Code: Bad RIP value. [39245.915439] RIP [&lt;0000000000000411&gt;] 0x411 [39245.915481] RSP &lt;ffff88076652fde8&gt; [39245.915507] CR2: 0000000000000411 [39245.923907] ---[ end trace 42dbcaccec8b4e5d ]---</code></pre></div><p>This is my unbind script</p><div class="codebox"><pre><code>#!/bin/bash for dev in &quot;$@&quot;; do vendor=$(cat /sys/bus/pci/devices/${dev}/vendor) device=$(cat /sys/bus/pci/devices/${dev}/device) if [ -e /sys/bus/pci/devices/${dev}/driver ]; then echo &quot;${dev}&quot; | sudo tee /sys/bus/pci/devices/${dev}/driver/unbind &gt; /dev/null while [ -e /sys/bus/pci/devices/${dev}/driver ]; do sleep 1 done echo &quot;${dev}&quot; | sudo tee /sys/bus/pci/drivers_probe &gt; /dev/null fi done</code></pre></div><p>I tried sp_off and disable_hugepages=1 as suggested here but with no luck.</p> <p class="postedit"><em>Last edited by zsph (2014-10-05 20:05:54)</em></p> </div> <div class="postsignature postmsg"><hr /><p>Asus P8Z77-V LK, Core i7 3770, Asus NVIDIA GTX 770 DirectCU II OC, Debian x64, EFI, Kernel 3.16 + i915 arbiter patch. <br />3DMark11: bare metal <a href="http://www.3dmark.com/3dm11/8748717" rel="nofollow">P10231</a> vs vfio <a href="http://www.3dmark.com/3dm11/8754453" rel="nofollow">P10039</a>: 98% of performance!</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463160">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463350" class="blockpost rowodd"> <h2><span><span class="conr">#2913</span> <a href="viewtopic.php?pid=1463350#p1463350">2014-10-06 14:19:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85656">kolobok</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-06</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=85656">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi!<br />I have AMD RS880M chipset with integrated and discrete radeons, it seems there is only GART IOMMU. (there is no option in bios)</p><div class="codebox"><pre><code>[ 0.000000] AGP: Please enable the IOMMU option in the BIOS setup [ 1.428469] PCI-DMA: using GART IOMMU. [ 1.428471] PCI-DMA: Reserving 64MB of IOMMU area in the AGP aperture [ 1.428469] PCI-DMA: using GART IOMMU. [ 2.080672] [drm] GART: num cpu pages 131072, num gpu pages 131072 [ 2.098628] [drm] PCIE GART of 512M enabled (table at 0x00000000C0040000).</code></pre></div><p>When I am trying to bind vfio it fails.</p><div class="codebox"><pre><code>[ 57.776135] VFIO - User Level meta-driver version: 0.3 [ 57.786888] vfio-pci: probe of 0000:02:00.0 failed with error -22</code></pre></div><p>I have disabled radeon driver on second gpu by pci-stub</p><div class="codebox"><pre><code>[ 2.044704] pci-stub: add 1002:68E0 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 2.044719] pci-stub 0000:02:00.0: claimed by stub</code></pre></div><p>Can you help me with this? What is 22 error code means?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463350">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463366" class="blockpost roweven"> <h2><span><span class="conr">#2914</span> <a href="viewtopic.php?pid=1463366#p1463366">2014-10-06 15:13:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kolobok wrote:</cite><blockquote><div><p>Hi!<br />I have AMD RS880M chipset with integrated and discrete radeons, it seems there is only GART IOMMU. (there is no option in bios)</p></div></blockquote></div><p>A GART IOMMU is not sufficient for doing device assignment.&#160; <a href="http://vfio.blogspot.com/2014/08/iommu-groups-inside-and-out.html" rel="nofollow">http://vfio.blogspot.com/2014/08/iommu- … d-out.html</a></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463366">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463512" class="blockpost rowodd"> <h2><span><span class="conr">#2915</span> <a href="viewtopic.php?pid=1463512#p1463512">2014-10-07 00:19:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85664">roadrunna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-07</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ichavira@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Just like to thank you for this guide. I got it working on gentoo. nvidia&#160; 550 TI with intel integrated graphics. using virtio drivers from redhat. So far the only issue is when I close down the vm ,but this maybe resolved with dev eject I have yet to try. Is there a way to convert the qemu arguments to xml to be able to manage the vm using libvirt + virt manager?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463512">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463541" class="blockpost roweven"> <h2><span><span class="conr">#2916</span> <a href="viewtopic.php?pid=1463541#p1463541">2014-10-07 04:20:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>roadrunna wrote:</cite><blockquote><div><p>Just like to thank you for this guide. I got it working on gentoo. nvidia&#160; 550 TI with intel integrated graphics. using virtio drivers from redhat. So far the only issue is when I close down the vm ,but this maybe resolved with dev eject I have yet to try. Is there a way to convert the qemu arguments to xml to be able to manage the vm using libvirt + virt manager?</p></div></blockquote></div><p>yes, there is a way - you will have to lurk the thread few dozens of pages back though</p><p>the main issue you may probably run into is audio. i resolved it by passing through dedicated pci sound card to vm while physically connecting its&#039; front-out to host&#039;s integrated audio line-in (this way host outputs both &quot;native&quot; sound and sound from vm). yes, it required additional hardware (i had a spare one), but at the same time in-game fps drastically improved (it may be side-effect of libvirt&#039;s inner stuff though, like more accurate/advanced cpu pinning; but i still think it was mainly the result of escaping from emulated audio - no solid proof though)</p><p>p.s. if anyone has a way of preserving emulated audio while using libvirt/virt-manager (e.g. QEMU_AUDIO_DRV=pa) - detailed report would be highly appreciated. in my case it was always QEMU_AUDIO_DRV=none - did not bother digging too much into this though</p> <p class="postedit"><em>Last edited by sinny (2014-10-07 04:23:51)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463541">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463606" class="blockpost rowodd"> <h2><span><span class="conr">#2917</span> <a href="viewtopic.php?pid=1463606#p1463606">2014-10-07 12:06:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>sinny wrote:</cite><blockquote><div><p>p.s. if anyone has a way of preserving emulated audio while using libvirt/virt-manager (e.g. QEMU_AUDIO_DRV=pa) - detailed report would be highly appreciated. in my case it was always QEMU_AUDIO_DRV=none - did not bother digging too much into this though</p></div></blockquote></div><p>Hi,</p><p>i successfully use libvirt and a emulated Soundcard via pulseaudio with this:</p><div class="codebox"><pre><code> &lt;qemu:env name=&#039;QEMU_AUDIO_DAC_FIXED_FREQ&#039; value=&#039;48000&#039;/&gt; &lt;qemu:env name=&#039;QEMU_AUDIO_ADC_FIXED_FREQ&#039; value=&#039;48000&#039;/&gt; &lt;qemu:env name=&#039;QEMU_PA_SAMPLES&#039; value=&#039;1024&#039;/&gt; &lt;qemu:env name=&#039;QEMU_AUDIO_DRV&#039; value=&#039;pa&#039;/&gt; &lt;qemu:env name=&#039;QEMU_PA_SERVER&#039; value=&#039;/run/user/1000/pulse/native&#039;/&gt;</code></pre></div><p>to save yourself the hassle of localhostsecurity regarding pulseaudio, add &quot;load-module module-native-protocol-unix auth-anonymous=1&quot; to $HOME/.pulse/default.pa, this way you dont need to copy around the cookiefile of pulseaudio. </p><p>you might need to play around with the &quot;default-fragments&quot; and &quot;default-fragment-size-msec&quot; in $HOME/.pulse/daemon.conf - i just left them as default and its working - but this depends on buffersize within your soundcards and you might need lower the defaults to get correct a/v sync.</p><p>QEMU_PA_SERVER can also be a networkserver - &quot;localhost&quot; works also, but on the other end (pulseaudio network server) you need to disable authentication (at least i had to).</p><p>It works - its in sync. The main requirements i had. Downside is relative high cpu usage of the pulseaudio process, as it seems qemu never &quot;closes&quot;(suspends?) the device, so pulseaudio is always on about 10%cpu (but only on one cpu) on my machine.</p><p>Greetings<br />K</p> <p class="postedit"><em>Last edited by kaeptnb (2014-10-07 12:07:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463606">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463643" class="blockpost roweven"> <h2><span><span class="conr">#2918</span> <a href="viewtopic.php?pid=1463643#p1463643">2014-10-07 14:40:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><div class="quotebox"><cite>sinny wrote:</cite><blockquote><div><p>p.s. if anyone has a way of preserving emulated audio while using libvirt/virt-manager (e.g. QEMU_AUDIO_DRV=pa) - detailed report would be highly appreciated. in my case it was always QEMU_AUDIO_DRV=none - did not bother digging too much into this though</p></div></blockquote></div><p>Hi,</p><p>i successfully use libvirt and a emulated Soundcard via pulseaudio with this:</p><div class="codebox"><pre><code> &lt;qemu:env name=&#039;QEMU_AUDIO_DAC_FIXED_FREQ&#039; value=&#039;48000&#039;/&gt; &lt;qemu:env name=&#039;QEMU_AUDIO_ADC_FIXED_FREQ&#039; value=&#039;48000&#039;/&gt; &lt;qemu:env name=&#039;QEMU_PA_SAMPLES&#039; value=&#039;1024&#039;/&gt; &lt;qemu:env name=&#039;QEMU_AUDIO_DRV&#039; value=&#039;pa&#039;/&gt; &lt;qemu:env name=&#039;QEMU_PA_SERVER&#039; value=&#039;/run/user/1000/pulse/native&#039;/&gt;</code></pre></div><p>to save yourself the hassle of localhostsecurity regarding pulseaudio, add &quot;load-module module-native-protocol-unix auth-anonymous=1&quot; to $HOME/.pulse/default.pa, this way you dont need to copy around the cookiefile of pulseaudio. </p><p>you might need to play around with the &quot;default-fragments&quot; and &quot;default-fragment-size-msec&quot; in $HOME/.pulse/daemon.conf - i just left them as default and its working - but this depends on buffersize within your soundcards and you might need lower the defaults to get correct a/v sync.</p><p>QEMU_PA_SERVER can also be a networkserver - &quot;localhost&quot; works also, but on the other end (pulseaudio network server) you need to disable authentication (at least i had to).</p><p>It works - its in sync. The main requirements i had. Downside is relative high cpu usage of the pulseaudio process, as it seems qemu never &quot;closes&quot;(suspends?) the device, so pulseaudio is always on about 10%cpu (but only on one cpu) on my machine.</p><p>Greetings<br />K</p></div></blockquote></div><p>whoa, thank you very much<br />this kinda makes my dual vm configuration more or less complete</p><p>p.s. would be great to have links to posts related to virt-manager setup (the one on page 94 and this one) at opening post</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463643">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463734" class="blockpost rowodd"> <h2><span><span class="conr">#2919</span> <a href="viewtopic.php?pid=1463734#p1463734">2014-10-07 19:39:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76159">dwightjl</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-23</span></dd> <dd><span>Posts: 8</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>3000 wrote:</cite><blockquote><div><p>Hi, is there a good how-to? I think the how-to on the first page in this thread is way too advanced</p></div></blockquote></div><p>Here are some of the guides that I used:<br /><a href="http://www.pugetsystems.com/labs/articles/Multiheaded-NVIDIA-Gaming-using-Ubuntu-14-04-KVM-585/" rel="nofollow">http://www.pugetsystems.com/labs/articl … 4-KVM-585/</a><br /><a href="http://www.firewing1.com/howtos/fedora-20/create-gaming-virtual-machine-using-vfio-pci-passthrough-kvm" rel="nofollow">http://www.firewing1.com/howtos/fedora- … hrough-kvm</a><br /><a href="http://www.linux-kvm.org/page/VGA_device_assignment" rel="nofollow">http://www.linux-kvm.org/page/VGA_device_assignment</a></p><p>This technology and process are very new, so guides are usually system-specific and are often incomplete. I had to read several guides and many pages on this forum to eventually get something that works on my system.</p><p>Speaking of which, I can confirm that the following configuration works:</p><p>Motherboard: ASRock Z77 Extreme 4-M<br />CPU: Intel i5 3570<br />Memory: 16GB DDR3 1600<br />Host GPU: Integrated GPU from the i5 3570<br />Guest GPU: EVGA 550Ti (GPU BIOS updated to the latest version)<br />Host OS: Ubuntu 14.04 Server updated to the 14.10 Utopic sources.<br />Guest OS: Windows 10 Preview<br />Kernel: 3.16.3 (No patches)<br />QEMU: v2.1 (No patches)<br />SeaBIOS: v1.7.5<br />Blacklisted drivers: nouveau, i915, intel_agp (Even though I&#039;m using the intel integrated GPU for the host, blacklisting the drivers seems to fix GPU arbitration issues)</p><p>I tried using a spare ATI card as the host GPU but ran into the problem where both cards are included the the iommu_group and I decided to give up on that path for now. The integrated GPU doesn&#039;t have the same issue. I can use the integrated GPU without the kernel patches as long as I blacklist the intel drivers.</p><p>The reason I went with Ubuntu Server is because I plan to use my home server to stream Windows games with Steam in-home streaming, so I don&#039;t care to have a working desktop on that machine anyway. That way I can keep all my normal bare-bones server functions and use the Windows VM to stream to my Linux Gaming PC or Steam Machines around the house. I still need to convince nvidia to let me install drivers on the guest system, and that requires a QEMU patch that I&#039;m too lazy to apply right now.</p><p>The Arch forums can be a little harsh sometimes. Please be patient with the people here. They have put a lot of time into getting this stuff to work and rightfully expect you to put in effort as well. Eventually someone will show up and help you out. Game is hard.</p> <p class="postedit"><em>Last edited by dwightjl (2014-10-07 20:27:43)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463734">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463812" class="blockpost roweven"> <h2><span><span class="conr">#2920</span> <a href="viewtopic.php?pid=1463812#p1463812">2014-10-08 02:05:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85664">roadrunna</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-07</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ichavira@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>If anybody is using the 3.17 kernel using i915 ,and patching manually here are both acs override patch + i915 vga arbiter fixes into 1. <a href="http://www.mediafire.com/download/02ri1pvp9d96ezn/i915-3.17-kvm.patch" rel="nofollow">http://www.mediafire.com/download/02ri1 … -kvm.patch</a>.&#160; I&#039;m using gentoo and I patch manually. Thought Id make it easier for someone. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463812">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463829" class="blockpost rowodd"> <h2><span><span class="conr">#2921</span> <a href="viewtopic.php?pid=1463829#p1463829">2014-10-08 03:33:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>zsph wrote:</cite><blockquote><div><p>I managed to narrow down the problem. The host hungs on suspend/resume/reboot/shutdown only if I the video card isn&#039;t released properly and as a result I cannot unbind it. Sometimes it gets released and everything works great but I cannot predict or spot the pattern why and when. I get this in dmesg when I fail to unbind the card:</p><div class="codebox"><pre><code>[39245.912644] BUG: unable to handle kernel NULL pointer dereference at 0000000000000411 ... [39245.914843] [&lt;ffffffff813951c7&gt;] ? __rpm_callback+0x27/0x70 [39245.914887] [&lt;ffffffff813960f8&gt;] ? rpm_idle+0x198/0x290 [39245.914933] [&lt;ffffffff81396244&gt;] ? __pm_runtime_idle+0x54/0x80 [39245.914980] [&lt;ffffffff812d2467&gt;] ? pci_device_remove+0x67/0xb0 [39245.915029] [&lt;ffffffff8138d605&gt;] ? __device_release_driver+0x75/0xf0 [39245.915079] [&lt;ffffffff8138d699&gt;] ? device_release_driver+0x19/0x30 [39245.915131] [&lt;ffffffff8138ca2d&gt;] ? unbind_store+0xed/0x150 [39245.915176] [&lt;ffffffff812081bb&gt;] ? kernfs_fop_write+0xdb/0x160 [39245.915225] [&lt;ffffffff8119903d&gt;] ? vfs_write+0xad/0x1e0 [39245.915269] [&lt;ffffffff81198f3c&gt;] ? vfs_read+0x11c/0x170 [39245.915313] [&lt;ffffffff81199b4d&gt;] ? SyS_write+0x3d/0xa0 [39245.915355] [&lt;ffffffff814f596d&gt;] ? system_call_fast_compare_end+0x10/0x15 ...</code></pre></div></div></blockquote></div><p>I actually get something similar when I stop or start (I forgot which) a VM, if I have the AMD High-Definition Audio Controller bound to the VM.&#160; Blacklisting snd-hda-intel on the host prevents the panic, but also prevents the integrated Realtek sound card from working on the host.</p><p>EDIT: By &quot;similar&quot;, I mean a very similar, if not the same, backtrace.</p> <p class="postedit"><em>Last edited by DanaGoyette (2014-10-08 04:40:10)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463829">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1463896" class="blockpost roweven"> <h2><span><span class="conr">#2922</span> <a href="viewtopic.php?pid=1463896#p1463896">2014-10-08 10:05:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>DanaGoyette wrote:</cite><blockquote><div><div class="quotebox"><cite>zsph wrote:</cite><blockquote><div><p>I managed to narrow down the problem. The host hungs on suspend/resume/reboot/shutdown only if I the video card isn&#039;t released properly and as a result I cannot unbind it. Sometimes it gets released and everything works great but I cannot predict or spot the pattern why and when. I get this in dmesg when I fail to unbind the card:</p><div class="codebox"><pre><code>[39245.912644] BUG: unable to handle kernel NULL pointer dereference at 0000000000000411 ... [39245.914843] [&lt;ffffffff813951c7&gt;] ? __rpm_callback+0x27/0x70 [39245.914887] [&lt;ffffffff813960f8&gt;] ? rpm_idle+0x198/0x290 [39245.914933] [&lt;ffffffff81396244&gt;] ? __pm_runtime_idle+0x54/0x80 [39245.914980] [&lt;ffffffff812d2467&gt;] ? pci_device_remove+0x67/0xb0 [39245.915029] [&lt;ffffffff8138d605&gt;] ? __device_release_driver+0x75/0xf0 [39245.915079] [&lt;ffffffff8138d699&gt;] ? device_release_driver+0x19/0x30 [39245.915131] [&lt;ffffffff8138ca2d&gt;] ? unbind_store+0xed/0x150 [39245.915176] [&lt;ffffffff812081bb&gt;] ? kernfs_fop_write+0xdb/0x160 [39245.915225] [&lt;ffffffff8119903d&gt;] ? vfs_write+0xad/0x1e0 [39245.915269] [&lt;ffffffff81198f3c&gt;] ? vfs_read+0x11c/0x170 [39245.915313] [&lt;ffffffff81199b4d&gt;] ? SyS_write+0x3d/0xa0 [39245.915355] [&lt;ffffffff814f596d&gt;] ? system_call_fast_compare_end+0x10/0x15 ...</code></pre></div></div></blockquote></div><p>I actually get something similar when I stop or start (I forgot which) a VM, if I have the AMD High-Definition Audio Controller bound to the VM.&#160; Blacklisting snd-hda-intel on the host prevents the panic, but also prevents the integrated Realtek sound card from working on the host.</p><p>EDIT: By &quot;similar&quot;, I mean a very similar, if not the same, backtrace.</p></div></blockquote></div><p>Try using pci-stub.ids instead of blacklisting the driver</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1463896">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1464169" class="blockpost rowodd"> <h2><span><span class="conr">#2923</span> <a href="viewtopic.php?pid=1464169#p1464169">2014-10-09 11:03:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi everyone .</p><p>Can anyone who uses OVMF successfully post his entire qemu launch command ?</p><p>OVMF might be the answer to all my hangs issues on VMs&#039; reboots , but it still doesn&#039;t detect any of my drives .</p><p>I don&#039;t use libvirt , just plain shell scripts .</p><p>Much appreciated .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1464169">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1464174" class="blockpost roweven"> <h2><span><span class="conr">#2924</span> <a href="viewtopic.php?pid=1464174#p1464174">2014-10-09 11:24:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80387">dwe11er</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-18</span></dd> <dd><span>Posts: 73</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Hi everyone .</p><p>Can anyone who uses OVMF successfully post his entire qemu launch command ?</p><p>OVMF might be the answer to all my hangs issues on VMs&#039; reboots , but it still doesn&#039;t detect any of my drives .</p><p>I don&#039;t use libvirt , just plain shell scripts .</p><p>Much appreciated .</p></div></blockquote></div><div class="codebox"><pre><code>LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin QEMU_AUDIO_DRV=none /usr/sbin/qemu-system-x86_64 -name windows -S -machine pc-i440fx-2.1,accel=kvm,usb=off -cpu host,hv_time,-kvm_pv_eoi,hv_relaxed,hv_vapic,hv_spinlocks=0x1fff -drive file=/usr/share/ovmf/x64/ovmf_code_x64.bin,if=pflash,format=raw,unit=0,readonly=on -drive file=/var/lib/libvirt/qemu/nvram/windows_VARS.fd,if=pflash,format=raw,unit=1 -m 8192 -mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off -smp 6,sockets=1,cores=3,threads=2 -uuid 09d81f35-51a4-4c7d-8db0-46597c7233ba -nographic -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/windows.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=localtime,clock=vm,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1 -boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x4.0x7 -device ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x4 -drive file=/dev/storage/windows-ovmf,if=none,id=drive-virtio-disk0,format=raw,aio=native -device virtio-blk-pci,ioeventfd=on,scsi=off,bus=pci.0,addr=0x5,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -drive file=/dev/storage/steam,if=none,id=drive-virtio-disk1,format=raw,aio=native -device virtio-blk-pci,ioeventfd=on,scsi=off,bus=pci.0,addr=0x6,drive=drive-virtio-disk1,id=virtio-disk1 -netdev tap,fd=21,id=hostnet0,vhost=on,vhostfd=22 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:c6:b5:45,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -device vfio-pci,host=00:1b.0,id=hostdev0,bus=pci.0,addr=0x2 -device vfio-pci,host=01:00.0,id=hostdev1,bus=pci.0,multifunction=on,addr=0x7,rombar=0,romfile=/var/lib/libvirt/firmware/HD7870_EFI.rom -device vfio-pci,host=01:00.1,id=hostdev2,bus=pci.0,addr=0x7.0x1 -device usb-host,hostbus=2,hostaddr=17,id=hostdev3 -device usb-host,hostbus=2,hostaddr=3,id=hostdev4 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x8 -set device.virtio-disk0.scsi=off -set device.virtio-disk0.x-data-plane=on -set device.virtio-disk1.scsi=off -set device.virtio-disk1.x-data-plane=on -msg timestamp=on</code></pre></div><p>It&#039;s how libvirt launches my vm, but should work anyway with few adjustments.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1464174">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1464227" class="blockpost rowodd"> <h2><span><span class="conr">#2925</span> <a href="viewtopic.php?pid=1464227#p1464227">2014-10-09 14:01:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>dwe11er wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Hi everyone .</p><p>Can anyone who uses OVMF successfully post his entire qemu launch command ?</p><p>OVMF might be the answer to all my hangs issues on VMs&#039; reboots , but it still doesn&#039;t detect any of my drives .</p><p>I don&#039;t use libvirt , just plain shell scripts .</p><p>Much appreciated .</p></div></blockquote></div><div class="codebox"><pre><code>LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin QEMU_AUDIO_DRV=none /usr/sbin/qemu-system-x86_64 -name windows -S -machine pc-i440fx-2.1,accel=kvm,usb=off -cpu host,hv_time,-kvm_pv_eoi,hv_relaxed,hv_vapic,hv_spinlocks=0x1fff -drive file=/usr/share/ovmf/x64/ovmf_code_x64.bin,if=pflash,format=raw,unit=0,readonly=on -drive file=/var/lib/libvirt/qemu/nvram/windows_VARS.fd,if=pflash,format=raw,unit=1 -m 8192 -mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off -smp 6,sockets=1,cores=3,threads=2 -uuid 09d81f35-51a4-4c7d-8db0-46597c7233ba -nographic -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/windows.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=localtime,clock=vm,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1 -boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x4.0x7 -device ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x4 -drive file=/dev/storage/windows-ovmf,if=none,id=drive-virtio-disk0,format=raw,aio=native -device virtio-blk-pci,ioeventfd=on,scsi=off,bus=pci.0,addr=0x5,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -drive file=/dev/storage/steam,if=none,id=drive-virtio-disk1,format=raw,aio=native -device virtio-blk-pci,ioeventfd=on,scsi=off,bus=pci.0,addr=0x6,drive=drive-virtio-disk1,id=virtio-disk1 -netdev tap,fd=21,id=hostnet0,vhost=on,vhostfd=22 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:c6:b5:45,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -device vfio-pci,host=00:1b.0,id=hostdev0,bus=pci.0,addr=0x2 -device vfio-pci,host=01:00.0,id=hostdev1,bus=pci.0,multifunction=on,addr=0x7,rombar=0,romfile=/var/lib/libvirt/firmware/HD7870_EFI.rom -device vfio-pci,host=01:00.1,id=hostdev2,bus=pci.0,addr=0x7.0x1 -device usb-host,hostbus=2,hostaddr=17,id=hostdev3 -device usb-host,hostbus=2,hostaddr=3,id=hostdev4 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x8 -set device.virtio-disk0.scsi=off -set device.virtio-disk0.x-data-plane=on -set device.virtio-disk1.scsi=off -set device.virtio-disk1.x-data-plane=on -msg timestamp=on</code></pre></div><p>It&#039;s how libvirt launches my vm, but should work anyway with few adjustments.</p></div></blockquote></div><p>Thank you very much !</p><p>I&#039;m going to adapt these settings to my existing WIndows VM , however I couldn&#039;t find the file &quot;windows_VARS.fd&quot; , and Google points me to your post , if it isn&#039;t any trouble can you tell me what is it for ? is it important ? if so , how can I create one ?</p><p>Sorry for this barge of questions , I want to learn .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1464227">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=116">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=115">115</a> <a href="viewtopic.php?id=162768&amp;p=116">116</a> <strong>117</strong> <a href="viewtopic.php?id=162768&amp;p=118">118</a> <a href="viewtopic.php?id=162768&amp;p=119">119</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=118">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
