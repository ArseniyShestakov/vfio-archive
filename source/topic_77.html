<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 77) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=77" title="Page 77" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=76" title="Page 76" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=78" title="Page 78" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=76">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=75">75</a> <a href="viewtopic.php?id=162768&amp;p=76">76</a> <strong>77</strong> <a href="viewtopic.php?id=162768&amp;p=78">78</a> <a href="viewtopic.php?id=162768&amp;p=79">79</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=78">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1420681" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1901</span> <a href="viewtopic.php?pid=1420681#p1420681">2014-05-30 15:54:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71440">cdrjameson</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/71440.png?m=1392914202" width="80" height="73" alt="" /></dd> <dd><span>Registered: 2013-05-19</span></dd> <dd><span>Posts: 33</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71440">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Apex8: Oh wow, I thought this might be a DNS issue so I&#039;ve just installed a VPN and I get through first time. Stupid ISP. Sorry for the off topic posts.</p> <p class="postedit"><em>Last edited by cdrjameson (2014-05-30 15:55:37)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420681">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420687" class="blockpost roweven"> <h2><span><span class="conr">#1902</span> <a href="viewtopic.php?pid=1420687#p1420687">2014-05-30 16:04:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mbroemme wrote:</cite><blockquote><div><div class="quotebox"><cite>rabcor wrote:</cite><blockquote><div><div class="codebox"><pre><code>PATCH COMMAND: patch -p0 -g0 -E --no-backup-if-mismatch &lt; &#039;/etc/portage/patches/sys-kernel/gentoo-sources/ACS_Override.patch&#039;</code></pre></div><p>I have no idea what to do here, I&#039;m a total noob when it comes to &quot;patch&quot; and &quot;diff&quot;. I know it fails at line 9 and 30 (i.e. the &quot;@@&quot; lines in the patch) but how to fix it I have no clue. The Nvidia Proprietary driver patch applied just fine though.</p></div></blockquote></div><p>Try it with -p1</p></div></blockquote></div><p>I highly doubt doing that would change anything (then again I am noob) but my understanding is that doing -p1 would make</p><p>a/drivers/pci/quirks.c</p><p>into</p><p>/drivers/pci/quirks.c</p><p>(but maybe -p2 might make a difference)</p><p>Either way, I decided to try and copy the file to my home folder and manually patch it.</p><p>I created &#039;a/drivers/pci/quirks.c&#039; and then:</p><div class="codebox"><pre><code>$ patch -p0 -g0 -E &lt; &#039;ACS_Override.patch&#039; patching file a/drivers/pci/quirks.c patch unexpectedly ends in middle of line Hunk #1 FAILED at 3292. 1 out of 1 hunk FAILED -- saving rejects to file a/drivers/pci/quirks.c.rej</code></pre></div><p>What do I do? I suspect this means that the patch is incompatible with my pci quirks.c file (made for a different version of it) does this mean that I have to somehow make a new patch file?</p><p>Edit: That was indeed it, posted my file below.</p> <p class="postedit"><em>Last edited by rabcor (2014-05-30 16:28:32)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420687">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420691" class="blockpost rowodd"> <h2><span><span class="conr">#1903</span> <a href="viewtopic.php?pid=1420691#p1420691">2014-05-30 16:16:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82246">shawly</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82246">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apex8 wrote:</cite><blockquote><div><p>@shawly regarding synergy: It should be the normal case, that your VM works flawlessly. Whenever there is a serious problem, e.g. an bsod, you can go to the qemu console and enter system_reset; the vm will reboot. If this doesn&#039;t solve the problem you could prepare a second qemu script, which runs the vm in a window where you are able to use your keyboad and mouse.<br />This strategy works good enough for me, because like I said: the normal case is that the VM runs without any problems.</p></div></blockquote></div><p>Thanks for the answer, but this doesn&#039;t really answer my question, I just asked for options BESIDES synergy, because maybe there are better ways.</p><p>Anyone got an answer for my problem with efi or the Nvidia drivers under Windows? <img src="https://bbs.archlinux.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420691">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420693" class="blockpost roweven"> <h2><span><span class="conr">#1904</span> <a href="viewtopic.php?pid=1420693#p1420693">2014-05-30 16:18:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80701">apex8</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-29</span></dd> <dd><span>Posts: 47</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well you could get an 2:1 KVM-Switch and pass through one of your usb-controllers to the vm. Then you can switch between host-/vm access wich your keyboard and mouse.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420693">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420697" class="blockpost rowodd"> <h2><span><span class="conr">#1905</span> <a href="viewtopic.php?pid=1420697#p1420697">2014-05-30 16:30:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>This is my Gentoo 3.14.4 (Not 100% sure if this is a Gentoo exclusive issue though, for all I know kernel 3.14.4 might have come with a different version of quirks.c than previous releases) compatible ACS Override patch (note: I did not bother adding in the documentation changes with it like in the <a href="https://lkml.org/lkml/2013/5/30/513" rel="nofollow">original patch</a>)</p><p>(command used: diff -Naur a/drivers/pci/quirks.c b/drivers/pci/quirks.c &gt; ACS.patch)</p><div class="codebox"><pre class="vscroll"><code>--- a/drivers/pci/quirks.c 2014-05-30 16:08:19.561232936 +0000 +++ b/drivers/pci/quirks.c 2014-05-30 16:18:44.745241038 +0000 @@ -3423,6 +3423,107 @@ #endif } +static bool acs_on_downstream; +static bool acs_on_multifunction; + +#define NUM_ACS_IDS 16 +struct acs_on_id { + unsigned short vendor; + unsigned short device; +}; +static struct acs_on_id acs_on_ids[NUM_ACS_IDS]; +static u8 max_acs_id; + +static __init int pcie_acs_override_setup(char *p) +{ + if (!p) + return -EINVAL; + + while (*p) { + if (!strncmp(p, &quot;downstream&quot;, 10)) + acs_on_downstream = true; + if (!strncmp(p, &quot;multifunction&quot;, 13)) + acs_on_multifunction = true; + if (!strncmp(p, &quot;id:&quot;, 3)) { + char opt[5]; + int ret; + long val; + + if (max_acs_id &gt;= NUM_ACS_IDS - 1) { + pr_warn(&quot;Out of PCIe ACS override slots (%d)\n&quot;, + NUM_ACS_IDS); + goto next; + } + + p += 3; + snprintf(opt, 5, &quot;%s&quot;, p); + ret = kstrtol(opt, 16, &amp;val); + if (ret) { + pr_warn(&quot;PCIe ACS ID parse error %d\n&quot;, ret); + goto next; + } + acs_on_ids[max_acs_id].vendor = val; + + p += strcspn(p, &quot;:&quot;); + if (*p != &#039;:&#039;) { + pr_warn(&quot;PCIe ACS invalid ID\n&quot;); + goto next; + } + + p++; + snprintf(opt, 5, &quot;%s&quot;, p); + ret = kstrtol(opt, 16, &amp;val); + if (ret) { + pr_warn(&quot;PCIe ACS ID parse error %d\n&quot;, ret); + goto next; + } + acs_on_ids[max_acs_id].device = val; + max_acs_id++; + } +next: + p += strcspn(p, &quot;,&quot;); + if (*p == &#039;,&#039;) + p++; + } + + if (acs_on_downstream || acs_on_multifunction || max_acs_id) + pr_warn(&quot;Warning: PCIe ACS overrides enabled; This may allow non-IOMMU protected peer-to-peer DMA\n&quot;); + + return 0; +} +early_param(&quot;pcie_acs_override&quot;, pcie_acs_override_setup); + +static int pcie_acs_overrides(struct pci_dev *dev, u16 acs_flags) +{ + int i; + + /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Never override ACS for legacy devices or devices with ACS caps */ + if (!pci_is_pcie(dev) || + pci_find_ext_capability(dev, PCI_EXT_CAP_ID_ACS)) + return -ENOTTY; + + for (i = 0; i &lt; max_acs_id; i++) + if (acs_on_ids[i].vendor == dev-&gt;vendor &amp;&amp; + acs_on_ids[i].device == dev-&gt;device) + return 1; + + switch (pci_pcie_type(dev)) { + case PCI_EXP_TYPE_DOWNSTREAM: + case PCI_EXP_TYPE_ROOT_PORT: + if (acs_on_downstream) + return 1; + break; + case PCI_EXP_TYPE_ENDPOINT: + case PCI_EXP_TYPE_UPSTREAM: + case PCI_EXP_TYPE_LEG_END: + case PCI_EXP_TYPE_RC_END: + if (acs_on_multifunction &amp;&amp; dev-&gt;multifunction) + return 1; + } + + return -ENOTTY; +} + static const struct pci_dev_acs_enabled { u16 vendor; u16 device; @@ -3434,6 +3535,7 @@ { PCI_VENDOR_ID_ATI, 0x439d, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4384, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4399, pci_quirk_amd_sb_acs }, + { PCI_ANY_ID, PCI_ANY_ID, pcie_acs_overrides }, { 0 } }; </code></pre></div><p>Compatible with gentoo kernel 3.14.4, not sure if it was gentoo only or if it was just a recent kernel update that changed the file, either way if anyone fails to run the original ACS patch try this instead.</p> <p class="postedit"><em>Last edited by rabcor (2014-05-30 16:41:50)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420697">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420723" class="blockpost roweven"> <h2><span><span class="conr">#1906</span> <a href="viewtopic.php?pid=1420723#p1420723">2014-05-30 18:14:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82246">shawly</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82246">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apex8 wrote:</cite><blockquote><div><p>Well you could get an 2:1 KVM-Switch and pass through one of your usb-controllers to the vm. Then you can switch between host-/vm access wich your keyboard and mouse.</p></div></blockquote></div><p>Would be an option yeah, but I guess I&#039;ll pass the mouse and keyboard through and use Synergy to access my Gnome desktop, then I shouldn&#039;t get any delay while playing, since I can&#039;t imagine that it&#039;s possible to play games as Synergy-Client without any delay or other problems.</p><p>Anyway, I looked through this thread and it seems, that nobody has tried to get OVMF working since february.. Guess it isn&#039;t working at all <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>And I&#039;ll try to use an older version of the Nvidia driver, maybe this will work.</p> <p class="postedit"><em>Last edited by shawly (2014-05-30 18:15:13)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420723">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420724" class="blockpost rowodd"> <h2><span><span class="conr">#1907</span> <a href="viewtopic.php?pid=1420724#p1420724">2014-05-30 18:23:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80701">apex8</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-29</span></dd> <dd><span>Posts: 47</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@shawly: If it helps, I can tell you that I was able to run bioshock infinite without any input delay. I just configured a hotkey for locking the mouse/keyboard in the VM and activated relative mouse moves.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420724">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420725" class="blockpost roweven"> <h2><span><span class="conr">#1908</span> <a href="viewtopic.php?pid=1420725#p1420725">2014-05-30 18:30:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82246">shawly</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82246">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apex8 wrote:</cite><blockquote><div><p>@shawly: If it helps, I can tell you that I was able to run bioshock infinite without any input delay. I just configured a hotkey for locking the mouse/keyboard in the VM and activated relative mouse moves.</p></div></blockquote></div><p>Sounds promising! So you didn&#039;t pass the mouse and keyboard to the guest? How did you do that?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420725">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420727" class="blockpost rowodd"> <h2><span><span class="conr">#1909</span> <a href="viewtopic.php?pid=1420727#p1420727">2014-05-30 18:36:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80701">apex8</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-29</span></dd> <dd><span>Posts: 47</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m using my host as synergy server and the vm is just a client. Synergy can be configured via script or via its GUI. The latter is pretty intuitive; maybe have a look at YouTube for this. Furthermore a passed through the usb3 controller and where an gamepad is plugged in. So the gamepad is only seen by the vm and works entirely without delay. But the delay isn&#039;t the problem, as I said.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420727">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420751" class="blockpost roweven"> <h2><span><span class="conr">#1910</span> <a href="viewtopic.php?pid=1420751#p1420751">2014-05-30 20:19:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>shawly wrote:</cite><blockquote><div><p>[…]Anyway, I looked through this thread and it seems, that nobody has tried to get OVMF working since february.. Guess it isn&#039;t working at all <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" />[…]</p></div></blockquote></div><p>I don&#039;t know about your setup, but OVMF works for me (see <a href="https://docs.google.com/spreadsheet/ccc?key=0Aryg5nO-kBebdFozaW9tUWdVd2VHM0lvck95TUlpMlE" rel="nofollow">here</a> for my HW). I just tested a VM with arch as guest and host and the open-source radeon drivers in the guest. This is the command I used </p><div class="codebox"><pre><code>/usr/bin/qemu-system-x86_64 -enable-kvm -vga none -nographic -cpu host -smp 4,sockets=1,cores=4,threads=1 -m 4096 -mem-path /dev/hugepages -device vfio-pci,host=06:00.0,addr=10.0,multifunction=on,x-vga=on -device vfio-pci,host=06:00.1,addr=10.1 -device vfio-pci,host=0000:00:13.0 -device vfio-pci,host=0000:00:13.2 -usb -device usb-host,vendorid=0x03f0,productid=0x0024 -netdev bridge,br=br0,id=hostnet0 -net nic,model=virtio,netdev=hostnet0 -drive file=arch_uefi.img,id=drive0,if=virtio,media=disk,aio=native -monitor stdio -boot menu=on -pflash /usr/share/ovmf/ovmf_x64.bin</code></pre></div><p>My software versions are extra/ovmf 15280-1, local/qemu-git 2.1.r32448.gfdaad47-1 and linux 3.15.0-rc6-mainline+</p> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420751">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420753" class="blockpost rowodd"> <h2><span><span class="conr">#1911</span> <a href="viewtopic.php?pid=1420753#p1420753">2014-05-30 20:28:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82246">shawly</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82246">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>andy123 wrote:</cite><blockquote><div><p>I don&#039;t know about your setup, but OVMF works for me (see <a href="https://docs.google.com/spreadsheet/ccc?key=0Aryg5nO-kBebdFozaW9tUWdVd2VHM0lvck95TUlpMlE" rel="nofollow">here</a> for my HW). I just tested a VM with arch as guest and host and the open-source radeon drivers in the guest. </p><p>My software versions are extra/ovmf 15280-1, local/qemu-git 2.1.r32448.gfdaad47-1 and linux 3.15.0-rc6-mainline+</p></div></blockquote></div><p>I&#039;m using the same version of ovmf, qemu-git 2.1 but the linux 3.14.4 kernel. Do you think it&#039;ll make any difference if I switch to 3.15? Just tried it again, blackscreen..<br />My setup is at the bottom of this document, sombody added it already and I added some things.</p><p>Edit: Uhm, well, the problem solved itself... I don&#039;t know how, and I don&#039;t know why but suddenly it just boots when I use the -L parameter...<br />AND! I&#039;m an idiot, I downloaded the 32bit Nvidia drivers, since it&#039;s freaking hard to navigate through a website without a mouse in the VM it must have chosen 32 bit instead of 64 and I didn&#039;t saw that.. damn I feel really stupid xD</p><p>Edit2: Ok it didn&#039;t work with ovmf, it just booted from SeaBios with the -L parameter.. god knows why<br />Just tried with the -pflash parameter again, but had no luck.. I have no idea what causes this. When I use SeaBIOS my monitor turns on and it boots, but with ovmf it doesn&#039;t turn on and if I use qemu to test if it&#039;s working it&#039;s just black.</p><p>Edit3: I gave up on ovmf, now I installed the driver for the nvidia card but sadly, I get the error code 43 in the device manager...<br />I used the package in the first post, therefore I got all the patches that come with this package.. Was this a mistake?</p> <p class="postedit"><em>Last edited by shawly (2014-05-30 22:01:37)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420753">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420794" class="blockpost roweven"> <h2><span><span class="conr">#1912</span> <a href="viewtopic.php?pid=1420794#p1420794">2014-05-30 23:00:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>shawly wrote:</cite><blockquote><div><p>Edit3: I gave up on ovmf, now I installed the driver for the nvidia card but sadly, I get the error code 43 in the device manager...<br />I used the package in the first post, therefore I got all the patches that come with this package.. Was this a mistake?</p></div></blockquote></div><p>Nvidia drivers newer than 335.23 are broken</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420794">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420796" class="blockpost rowodd"> <h2><span><span class="conr">#1913</span> <a href="viewtopic.php?pid=1420796#p1420796">2014-05-30 23:24:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82246">shawly</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82246">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Nvidia drivers newer than 335.23 are broken</p></div></blockquote></div><p> Good to know, that means 335.23 should work, will try that.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420796">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420835" class="blockpost roweven"> <h2><span><span class="conr">#1914</span> <a href="viewtopic.php?pid=1420835#p1420835">2014-05-31 03:30:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82181">esmth</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-22</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hey guys, I got it (mostly) working&#160; with this command: </p><div class="codebox"><pre><code>/home/esmth/bin/vfio-bind 0000:01:00.1 0000:01:00.0 /home/esmth/src/qemu/x86_64-softmmu/qemu-system-x86_64 \ -M q35 -drive file=/home/esmth/image.img,id=disk,format=raw -device ide-hd,bus=ide.0,drive=disk \ -enable-kvm -m 4096 -cpu host \ -bios /home/esmth/src/seabios/out/bios.bin -vga none \ -smp 2,sockets=1,cores=2,threads=1 \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -usb -usbdevice host:046d:c52b -usbdevice host:0d62:001d -usbdevice host:0781:5530 \ -nographic -boot menu=on</code></pre></div><p>I&#039;m running kernel 3.15-rc6. </p><p>the only problem&#160; I&#039;m having right now is that I get tons of&#160; this:</p><div class="codebox"><pre><code>May 30 23:13:20 plebeian kernel: [ 2525.114596] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb080 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.114831] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb2c0 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.115066] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb100 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.115306] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb5c0 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.115543] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb1c0 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.115778] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb540 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.116012] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb280 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.116248] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb180 flags=0x0010] May 30 23:13:20 plebeian kernel: [ 2525.116485] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 address=0x0000000020fdb340 flags=0x0010]</code></pre></div><p>when trying to install the gpu drivers in the guest. The guest restarts and the drivers can&#039;t be Installed in windows. If its&#160; any use, I have an r9-290x as the dGPU and i&#039;m using&#160; my&#160; 7850k&#039;s intergrated graphics&#160; for the host.</p><br /><br /><p>Edit: I installed the gpu drivers using the -vga std option, but now the guest crashes after the windows bootup logo. I removed it in safe mode and i&#039;m back where i started at the beginning of this post.</p> <p class="postedit"><em>Last edited by esmth (2014-05-31 03:45:28)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420835">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420857" class="blockpost rowodd"> <h2><span><span class="conr">#1915</span> <a href="viewtopic.php?pid=1420857#p1420857">2014-05-31 07:01:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I think I&#039;m pretty close to getting this working now. I have the ACS Override patch in my kernel for my intel i7 2600 CPU and I have the VGA_ARB patch for my nvidia proprietary drivers set up as well</p><p>(Host: GTX 550-Ti<br />Guest: GTX 670)</p><p>When I try to test my machine with (should be the same as in the OP but with 02 instead of 07 as device host)</p><p>I get the following <strong>errors</strong> (running as root, if I run as user I get the same last two lines, but the first two will be &quot;vfio: error opening /dev/vfio/6: Permission denied&quot; and &quot;vfio: failed to get group 6&quot;)</p><div class="codebox"><pre><code>#qemu-system-x86_64 -enable-kvm -M q35 -m 1024 -cpu host -smp 6,sockets=1,cores=8,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on -device vfio-pci,host=02:00.1,bus=root.1,addr=00.1 qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: error, group 6 is not viable, please ensure all devices within the iommu_group are bound to their vfio bus driver. qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to get group 6 qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>More info:</p><div class="codebox"><pre class="vscroll"><code>#lspci 01:00.0 VGA compatible controller: NVIDIA Corporation GF116 [GeForce GTX 550 Ti] (rev a1) 01:00.1 Audio device: NVIDIA Corporation GF116 High Definition Audio Controller (rev a1) 02:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 670] (rev a1) 02:00.1 Audio device: NVIDIA Corporation GK104 HDMI Audio Controller (rev a1) #lspci -n 01:00.0 0300: 10de:1244 (rev a1) 01:00.1 0403: 10de:0bee (rev a1) 02:00.0 0300: 10de:1189 (rev a1) 02:00.1 0403: 10de:0e0a (rev a1) #dmesg | grep pci-stub [ 0.000000] Command line: BOOT_IMAGE=/boot/kernel-3.14.4-Gentoo root=/dev/sda1 ro quiet pci-stub.ids=10de:1189,10de:0e0a [ 0.000000] Kernel command line: BOOT_IMAGE=/boot/kernel-3.14.4-Gentoo root=/dev/sda1 ro quiet pci-stub.ids=10de:1189,10de:0e0a [ 0.273833] pci-stub: add 10DE:1189 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.273839] pci-stub 0000:02:00.0: claimed by stub [ 0.273841] pci-stub: add 10DE:0E0A sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.273846] pci-stub 0000:02:00.1: claimed by stub [ 1.446046] pci-stub 0000:02:00.0: enabling device (0000 -&gt; 0003) # cat /etc/modprobe.d/kvm.conf options vfio_iommu_type1 allow_unsafe_interrupts=1 options kvm ignore_msrs=1 #zgrep VFIO /proc/config.gz CONFIG_VFIO_IOMMU_TYPE1=y CONFIG_VFIO=y CONFIG_VFIO_PCI=y CONFIG_VFIO_PCI_VGA=y CONFIG_KVM_VFIO=y</code></pre></div><p>I think with this everything should be working, I do not run vfio-bind on bootup though (haven&#039;t figured out how to do it with OpenRC which is what gentoo uses) but I run it as root before I try to launch the VM.</p><div class="codebox"><pre><code>#vfio-bind 0000:02:00.0 0000:02:00.1</code></pre></div><p>(It shows no output, I assume this is normal)</p><p>How do I fix this problem?</p><p><strong>Edit: Solved!</strong></p><p>Solution was to add </p><div class="codebox"><pre><code>pcie_acs_override=downstream</code></pre></div><p>To the command line (basically activate the ACS override patch, silly me...)</p><p>Oh man that feels so good, it finally works <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Now I am wondering if this can be applied to Xen HVMs? Has anyone tried? Also I still get this when I run as user, how do I fix that?</p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: error opening /dev/vfio/13: Permission denied qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to get group 13</code></pre></div> <p class="postedit"><em>Last edited by rabcor (2014-05-31 08:25:10)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420857">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1420888" class="blockpost roweven"> <h2><span><span class="conr">#1916</span> <a href="viewtopic.php?pid=1420888#p1420888">2014-05-31 11:07:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79237">mbroemme</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Cologne</span></dd> <dd><span>Registered: 2014-02-05</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79237">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>esmth wrote:</cite><blockquote><div><p>when trying to install the gpu drivers in the guest. The guest restarts and the drivers can&#039;t be Installed in windows. If its&#160; any use, I have an r9-290x as the dGPU and i&#039;m using&#160; my&#160; 7850k&#039;s intergrated graphics&#160; for the host.</p><p>Edit: I installed the gpu drivers using the -vga std option, but now the guest crashes after the windows bootup logo. I removed it in safe mode and i&#039;m back where i started at the beginning of this post.</p></div></blockquote></div><p>It looks like you suffer from the &quot;no proper reset method is known for R9 290X series&quot; like others including me. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> What I did to get it working is the following:</p><p>#1 Install Windows 7 using -vga std AND -no-reboot<br />#2 Install Synergy on host and inside VM and configure it<br />#3 Assign VGA device via vfio and use -vga none AND keep -no-reboot. After that I get already VGA post bios screen and Windows 7 boots with VGA resolution<br />#4 Login to Windows 7 and install Catalyst driver (latest stable)<br />#5 If it wants to reboot let it do and QEMU will stop and shutdown due to &#039;-no-reboot&#039; switch<br />#6 Reboot the host (or do the suspend/resume cycle as workaround)<br />#7 Start VM</p><p>With R9 290X series you will not get VM reboot working (for now) and that&#039;s why I keep the &#039;-no-reboot&#039; option always and if VM is rebooted I have to make short suspend/resume cycle.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1420888">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421122" class="blockpost rowodd"> <h2><span><span class="conr">#1917</span> <a href="viewtopic.php?pid=1421122#p1421122">2014-06-01 03:45:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82181">esmth</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-22</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mbroemme wrote:</cite><blockquote><div><p>It looks like you suffer from the &quot;no proper reset method is known for R9 290X series&quot; like others including me. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> What I did to get it working is the following:</p><p>#1 Install Windows 7 using -vga std AND -no-reboot<br />#2 Install Synergy on host and inside VM and configure it<br />#3 Assign VGA device via vfio and use -vga none AND keep -no-reboot. After that I get already VGA post bios screen and Windows 7 boots with VGA resolution<br />#4 Login to Windows 7 and install Catalyst driver (latest stable)<br />#5 If it wants to reboot let it do and QEMU will stop and shutdown due to &#039;-no-reboot&#039; switch<br />#6 Reboot the host (or do the suspend/resume cycle as workaround)<br />#7 Start VM</p></div></blockquote></div><p>Thanks, I&#039;ll try&#160; this tomorrow morning. I also&#160; have a 550ti and a HD6870 that i can test with. Do those older GPUs not have these issues?</p><p>edit: is Windows 7 required? I&#039;ve been trying to use windows 8.</p> <p class="postedit"><em>Last edited by esmth (2014-06-01 03:47:11)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421122">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421165" class="blockpost roweven"> <h2><span><span class="conr">#1918</span> <a href="viewtopic.php?pid=1421165#p1421165">2014-06-01 09:20:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I wonder this as well, is windows 7 the only supported version? or is it possible to use windows 8 instead? I&#039;m thinking this since despite hating Windows 8 so much that I fled to Linux land when I saw it coming, it is hard to deny that it consumes less resources than the 7 which makes it more ideal for VMs (I mean the more left over resources for the host, the better right?)</p><p>Anyhow I have a slight problem. When I run qemu as a user I get this message</p><div class="codebox"><pre><code>qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: error opening /dev/vfio/13: Permission denied qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to get group 13 qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>And I absolutely do not want to be running qemu as root even if I &quot;can&quot;</p><p>How do I give my user the permissions to do this? I&#039;m running Gentoo right now but it can&#039;t be that much different from Arch <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> (Biggest difference I noticed as an end user is OpenRC rather than Systemd, something I chose to live with rather than fight.)</p><p>PS: I have a physical 3TB GPT partition that i want to mount on the host and share with the VM, what is the safest way for me to share it?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421165">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421194" class="blockpost rowodd"> <h2><span><span class="conr">#1919</span> <a href="viewtopic.php?pid=1421194#p1421194">2014-06-01 11:19:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79237">mbroemme</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Cologne</span></dd> <dd><span>Registered: 2014-02-05</span></dd> <dd><span>Posts: 39</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79237">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>esmth wrote:</cite><blockquote><div><p>Thanks, I&#039;ll try&#160; this tomorrow morning. I also&#160; have a 550ti and a HD6870 that i can test with. Do those older GPUs not have these issues?</p><p>edit: is Windows 7 required? I&#039;ve been trying to use windows 8.</p></div></blockquote></div><p>I&#039;ve also tried Windows 8.1 but installed Catalyst driver manual because that one from Windows update freezes my VM always during installation. So I downloaded it in advance and installed it after assigning the R9 290X. AFAIR the 550 TI should work fine without having reboot issues of VM. I would expect the same for the HD6870 as my 7870 GHz edition also works fine without reset issues.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421194">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421204" class="blockpost roweven"> <h2><span><span class="conr">#1920</span> <a href="viewtopic.php?pid=1421204#p1421204">2014-06-01 12:09:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82082">syndtr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82082">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I think I found ultimate fix for code 43 on windows and RmInitAdapter failed on linux with nvidia devices with newer driver.<br />What I did was masking hypervisor cpuid signature and voala!!! </p><div class="codebox"><pre class="vscroll"><code>diff --git a/target-i386/kvm.c b/target-i386/kvm.c index 4389959..e6ee444 100644 --- a/target-i386/kvm.c +++ b/target-i386/kvm.c @@ -527,17 +527,17 @@ int kvm_arch_init_vcpu(CPUState *cs) has_msr_hv_hypercall = true; } - memcpy(signature, &quot;KVMKVMKVM\0\0\0&quot;, 12); - c = &amp;cpuid_data.entries[cpuid_i++]; - c-&gt;function = KVM_CPUID_SIGNATURE | kvm_base; - c-&gt;eax = 0; - c-&gt;ebx = signature[0]; - c-&gt;ecx = signature[1]; - c-&gt;edx = signature[2]; - - c = &amp;cpuid_data.entries[cpuid_i++]; - c-&gt;function = KVM_CPUID_FEATURES | kvm_base; - c-&gt;eax = env-&gt;features[FEAT_KVM]; + // memcpy(signature, &quot;KVMKVMKVM\0\0\0&quot;, 12); + // c = &amp;cpuid_data.entries[cpuid_i++]; + // c-&gt;function = KVM_CPUID_SIGNATURE | kvm_base; + // c-&gt;eax = 0; + // c-&gt;ebx = signature[0]; + // c-&gt;ecx = signature[1]; + // c-&gt;edx = signature[2]; + + // c = &amp;cpuid_data.entries[cpuid_i++]; + // c-&gt;function = KVM_CPUID_FEATURES | kvm_base; + // c-&gt;eax = env-&gt;features[FEAT_KVM]; has_msr_async_pf_en = c-&gt;eax &amp; (1 &lt;&lt; KVM_FEATURE_ASYNC_PF); </code></pre></div><p>Apparently the driver checking for hypervisor cpuid signature and bail if detecting presence of those signature unless the gpu is nvidia GRID.<br />After 2 frustrating weeks at last.<br />F*ck you nvidia!!!</p> <p class="postedit"><em>Last edited by syndtr (2014-06-01 12:16:27)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421204">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421218" class="blockpost rowodd"> <h2><span><span class="conr">#1921</span> <a href="viewtopic.php?pid=1421218#p1421218">2014-06-01 12:56:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=68201">rabcor</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-02-09</span></dd> <dd><span>Posts: 457</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=68201">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Fucking Nvidia trying to force GRID upon people... That&#039;ll teach em <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> should be added to the OP for nvidia workarounds. But you could have mentioned that it&#039;s supposed to be applied to qemu.</p><p>Anyways, apart from my error 3 posts up, I have another error when trying to mount a physical partition to qemu. Using:</p><div class="codebox"><pre><code>-drive file=/dev/sdc,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk1</code></pre></div><p>I get:</p><div class="codebox"><pre><code>qemu-system-x86_64: -device ide-hd,bus=ahci.0,drive=disk: Bus &#039;ahci.0&#039; not found</code></pre></div> <p class="postedit"><em>Last edited by rabcor (2014-06-01 13:19:26)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1421825" rel="nofollow">Making Logitech G510 Work on Linux!</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421218">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421234" class="blockpost roweven"> <h2><span><span class="conr">#1922</span> <a href="viewtopic.php?pid=1421234#p1421234">2014-06-01 14:01:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>syndtr wrote:</cite><blockquote><div><p>I think I found ultimate fix for code 43 on windows and RmInitAdapter failed on linux with nvidia devices with newer driver.<br />What I did was masking hypervisor cpuid signature and voala!!! </p><div class="codebox"><pre class="vscroll"><code>diff --git a/target-i386/kvm.c b/target-i386/kvm.c index 4389959..e6ee444 100644 --- a/target-i386/kvm.c +++ b/target-i386/kvm.c @@ -527,17 +527,17 @@ int kvm_arch_init_vcpu(CPUState *cs) has_msr_hv_hypercall = true; } - memcpy(signature, &quot;KVMKVMKVM\0\0\0&quot;, 12); - c = &amp;cpuid_data.entries[cpuid_i++]; - c-&gt;function = KVM_CPUID_SIGNATURE | kvm_base; - c-&gt;eax = 0; - c-&gt;ebx = signature[0]; - c-&gt;ecx = signature[1]; - c-&gt;edx = signature[2]; - - c = &amp;cpuid_data.entries[cpuid_i++]; - c-&gt;function = KVM_CPUID_FEATURES | kvm_base; - c-&gt;eax = env-&gt;features[FEAT_KVM]; + // memcpy(signature, &quot;KVMKVMKVM\0\0\0&quot;, 12); + // c = &amp;cpuid_data.entries[cpuid_i++]; + // c-&gt;function = KVM_CPUID_SIGNATURE | kvm_base; + // c-&gt;eax = 0; + // c-&gt;ebx = signature[0]; + // c-&gt;ecx = signature[1]; + // c-&gt;edx = signature[2]; + + // c = &amp;cpuid_data.entries[cpuid_i++]; + // c-&gt;function = KVM_CPUID_FEATURES | kvm_base; + // c-&gt;eax = env-&gt;features[FEAT_KVM]; has_msr_async_pf_en = c-&gt;eax &amp; (1 &lt;&lt; KVM_FEATURE_ASYNC_PF); </code></pre></div><p>Apparently the driver checking for hypervisor cpuid signature and bail if detecting presence of those signature unless the gpu is nvidia GRID.<br />After 2 frustrating weeks at last.<br />F*ck you nvidia!!!</p></div></blockquote></div><p>Wow, I was suspicious, but didn&#039;t actually think nvidia would sink this low to try it.&#160; I suppose there&#039;s still a chance that it was an oversight and not an attempt to be malicious.&#160; Maybe we can make a runtime option for qemu to hide the hypervisor.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421234">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421241" class="blockpost rowodd"> <h2><span><span class="conr">#1923</span> <a href="viewtopic.php?pid=1421241#p1421241">2014-06-01 14:37:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>syndtr wrote:</cite><blockquote><div><p>I think I found ultimate fix for code 43 on windows and RmInitAdapter failed on linux with nvidia devices with newer driver.<br />What I did was masking hypervisor cpuid signature and voala!!! </p><p>Apparently the driver checking for hypervisor cpuid signature and bail if detecting presence of those signature unless the gpu is nvidia GRID.<br />After 2 frustrating weeks at last.<br />F*ck you nvidia!!!</p></div></blockquote></div><p>Wow, I was suspicious, but didn&#039;t actually think nvidia would sink this low to try it.&#160; I suppose there&#039;s still a chance that it was an oversight and not an attempt to be malicious.&#160; Maybe we can make a runtime option for qemu to hide the hypervisor.</p></div></blockquote></div><p>It&#039;s also sufficient to just change the signature, for instance:</p><div class="codebox"><pre><code>--- a/target-i386/kvm.c +++ b/target-i386/kvm.c @@ -528,7 +528,7 @@ int kvm_arch_init_vcpu(CPUState *cs) has_msr_hv_hypercall = true; } - memcpy(signature, &quot;KVMKVMKVM\0\0\0&quot;, 12); + memcpy(signature, &quot;kvmkvmkvm\0\0\0&quot;, 12); c = &amp;cpuid_data.entries[cpuid_i++]; c-&gt;function = KVM_CPUID_SIGNATURE | kvm_base; c-&gt;eax = 0;</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421241">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421242" class="blockpost roweven"> <h2><span><span class="conr">#1924</span> <a href="viewtopic.php?pid=1421242#p1421242">2014-06-01 14:37:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82082">syndtr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82082">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>rabcor wrote:</cite><blockquote><div><p>But you could have mentioned that it&#039;s supposed to be applied to qemu.</p></div></blockquote></div><p>Ahh, sorry.. I forgot that.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Wow, I was suspicious, but didn&#039;t actually think nvidia would sink this low to try it.</p></div></blockquote></div><p>I can&#039;t believe it either.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>I suppose there&#039;s still a chance that it was an oversight and not an attempt to be malicious.</p></div></blockquote></div><p>I hope that&#039;s true.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Maybe we can make a runtime option for qemu to hide the hypervisor.</p></div></blockquote></div><p>Great idea.</p><p>Anyway, on linux guest patching nvidia kmod by making os_is_vgx_hyper to return true also did the trick.</p><div class="codebox"><pre><code>diff --git a/os-interface.c b/os-interface.c index 13cd3b6..79629df 100644 --- a/os-interface.c +++ b/os-interface.c @@ -1247,11 +1247,7 @@ NvBool NV_API_CALL os_is_xen_dom0(void) NvBool NV_API_CALL os_is_vgx_hyper(void) { -#if defined(NV_VGX_HYPER) return TRUE; -#else - return FALSE; -#endif } void NV_API_CALL os_bug_check(NvU32 bugCode, const char *bugCodeStr)</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421242">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1421251" class="blockpost rowodd"> <h2><span><span class="conr">#1925</span> <a href="viewtopic.php?pid=1421251#p1421251">2014-06-01 15:14:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82082">syndtr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82082">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>syndtr wrote:</cite><blockquote><div><p>I think I found ultimate fix for code 43 on windows and RmInitAdapter failed on linux with nvidia devices with newer driver.<br />What I did was masking hypervisor cpuid signature and voala!!! </p><p>Apparently the driver checking for hypervisor cpuid signature and bail if detecting presence of those signature unless the gpu is nvidia GRID.<br />After 2 frustrating weeks at last.<br />F*ck you nvidia!!!</p></div></blockquote></div><p>Wow, I was suspicious, but didn&#039;t actually think nvidia would sink this low to try it.&#160; I suppose there&#039;s still a chance that it was an oversight and not an attempt to be malicious.&#160; Maybe we can make a runtime option for qemu to hide the hypervisor.</p></div></blockquote></div><p>It&#039;s also sufficient to just change the signature, for instance:</p><div class="codebox"><pre><code>--- a/target-i386/kvm.c +++ b/target-i386/kvm.c @@ -528,7 +528,7 @@ int kvm_arch_init_vcpu(CPUState *cs) has_msr_hv_hypercall = true; } - memcpy(signature, &quot;KVMKVMKVM\0\0\0&quot;, 12); + memcpy(signature, &quot;kvmkvmkvm\0\0\0&quot;, 12); c = &amp;cpuid_data.entries[cpuid_i++]; c-&gt;function = KVM_CPUID_SIGNATURE | kvm_base; c-&gt;eax = 0;</code></pre></div></div></blockquote></div><p>You&#039;re right, it&#039;s work just by changing the signature.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1421251">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=76">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=75">75</a> <a href="viewtopic.php?id=162768&amp;p=76">76</a> <strong>77</strong> <a href="viewtopic.php?id=162768&amp;p=78">78</a> <a href="viewtopic.php?id=162768&amp;p=79">79</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=78">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
