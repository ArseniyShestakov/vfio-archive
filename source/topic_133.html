<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 133) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=133" title="Page 133" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=132" title="Page 132" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=134" title="Page 134" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=132">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=131">131</a> <a href="viewtopic.php?id=162768&amp;p=132">132</a> <strong>133</strong> <a href="viewtopic.php?id=162768&amp;p=134">134</a> <a href="viewtopic.php?id=162768&amp;p=135">135</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=134">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1476512" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#3301</span> <a href="viewtopic.php?pid=1476512#p1476512">2014-11-17 21:15:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86701">orcephrye</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-11-15</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=86701">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>orcephrye wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Sure, but that&#039;s not what you want.&#160; You want to pin a single vCPU to a single pCPU such that the scheduler has zero migration to do and the caches are hot.&#160; If you&#039;re benchmarking a VM, it&#039;s probably also best to set the performance governor in the host since ondemand can add latency to the guest&#039;s ability to react to load.</p></div></blockquote></div><p>So... perhaps a script like this:</p><div class="codebox"><pre><code>VAR=2 &amp;&amp; QEMUPID=`pidof /usr/bin/qemu-system-x86_64` &amp;&amp; THREADLIST=`ps -o lwp --no-headers -p $QEMUPID -L | grep -v $QEMUPID` &amp;&amp; for i in $THREADLIST ; do taskset -cp $VAR $i ; VAR=$((VAR+1)) ; done</code></pre></div></div></blockquote></div><p>Seems like it might work, the vCPUs should be the first N threads spawned by the main QEMU pid.&#160; BTW, you seem to be starting at physical CPU2, but you were originally using <em>-smp cpus=8,sockets=1,cores=8,threads=1</em> on an 8-core processor.&#160; Are you also scaling back to a 6-core guest?</p></div></blockquote></div><p>Yeppers. The idea is having 2 pCPUs for the host. And use isolcpus on the other 6. Use the script above to mask/pin/affinity (whatever) the threads to certain pCPUs. Starting with 2 and ending on 7. The list should spawn 7 PIDs and then one of them is remvoed with the grep command. That is the qemu parent pid which can happy stay on the host... right? I mean thats a good question shall the parent pid go over? I would assume not.. but you know what happens when people assume.</p><p>*And yes I would probably change the cmdLine to be: -smp cpus=6,sockets=1,cores=6,threads=1</p> <p class="postedit"><em>Last edited by orcephrye (2014-11-17 21:16:36)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476512">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476515" class="blockpost roweven"> <h2><span><span class="conr">#3302</span> <a href="viewtopic.php?pid=1476515#p1476515">2014-11-17 21:19:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>orcephrye wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>orcephrye wrote:</cite><blockquote><div><br /><p>So... perhaps a script like this:</p><div class="codebox"><pre><code>VAR=2 &amp;&amp; QEMUPID=`pidof /usr/bin/qemu-system-x86_64` &amp;&amp; THREADLIST=`ps -o lwp --no-headers -p $QEMUPID -L | grep -v $QEMUPID` &amp;&amp; for i in $THREADLIST ; do taskset -cp $VAR $i ; VAR=$((VAR+1)) ; done</code></pre></div></div></blockquote></div><p>Seems like it might work, the vCPUs should be the first N threads spawned by the main QEMU pid.&#160; BTW, you seem to be starting at physical CPU2, but you were originally using <em>-smp cpus=8,sockets=1,cores=8,threads=1</em> on an 8-core processor.&#160; Are you also scaling back to a 6-core guest?</p></div></blockquote></div><p>Yeppers. The idea is having 2 pCPUs for the host. And use isolcpus on the other 6. Use the script above to mask/pin/affinity (whatever) the threads to certain pCPUs. Starting with 2 and ending on 7. The list should spawn 7 PIDs and then one of them is remvoed with the grep command. That is the qemu parent pid which can happy stay on the host... right? I mean thats a good question shall the parent pid go over? I would assume not.. but you know what happens when people assume.</p></div></blockquote></div><p>Sure, I&#039;m not sure how much study there&#039;s been regarding whether it&#039;s better to pin the parent process to a non-vCPU processor or just let it float around.&#160; If you had multiple NUMA nodes you&#039;d certainly want to pin it to the node, but otherwise I&#039;m not sure how much it matters.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476515">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476593" class="blockpost rowodd"> <h2><span><span class="conr">#3303</span> <a href="viewtopic.php?pid=1476593#p1476593">2014-11-18 01:16:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86715">biasha</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-11-16</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=86715">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi,</p><p>I am trying to pass-though asus <strong>GTX980 (under ASRock x99 professional, radeon as primary card). Installing Windows 2012 R2, host Linux 3.16.0-24-generic #32-Ubuntu</strong><br />I have partial <strong>success</strong> but now i&#039;ve faced few problems i don&#039;t understand, perhaps someone could explain something to me or reference to useful articles, because i am very newbe to all of this.<br />btw, i&#039;ve used this article: <a href="http://www.pugetsystems.com/labs/articles/Multiheaded-NVIDIA-Gaming-using-Ubuntu-14-04-KVM-585/" rel="nofollow">http://www.pugetsystems.com/labs/articl … 4-KVM-585/</a></p><p>1. Monitor/card refused to turn on. I&#039;ve fixed it by turning off VGA ROM initialization in the bios (thanks to asrock for the option). Now it works, but (because radeon is not initialized too) i totally miss everything before X on primary card, plus i have error message from speaker at boot. I&#039;ve tried &quot;romfile=&quot; parameter, but it does not help. Moreover it prevent monitor from turning on. So i don&#039;t understand what is &quot;romfile=&quot; for? It simply breaks something.<br />I am disabling NVIDIA by adding &quot;pci_stub ids=&quot; into /etc/initramfs-tools/modules. Is there any &quot;stronger&quot; way to prevent card&#039;s ROM from loading? Why is it actually a problem?<br />Disabling VGA in the BIOS works, but i don&#039;t like it, you understand.<br /><em>edit: &quot;UEFI only&quot; bios option&#160; works better. i guess my HD5450 does not have uefi, so nvidia works during boot, then radeon turns on with desktop. looks like non-uefi rom can&#039;t be loaded twice - into host and guest.</em></p><p>2. I&#039;ve tried last downloadable qemu (2.1.91 aka 2.2.0rc1) (not sources) from the site, but was unable to use it due disks problem.<br />When i use -hda -cdrom keys Windows installer simply can&#039;t recognize disks.<br />I&#039;ve read i need ahci for windows to recognize disks, but when i use ahci together with -drive/-device combination linked via &quot;id/drive&quot; fields, qemu says &quot;this &lt;diskname&gt; is already defined&quot; or something like that (can reproduce and write exactly if you want)<br />This has gone after downgrading to qemu 2.1.2, but i don&#039;t like it, you understand.</p><p>3. Card is connected to the virtual ioh3420. Could someone explain why? Why do i actually need ioh3420? I&#039;ve tried connecting card directly to the pcie.0. It works. I feel no difference. So why do i actually need additional virtual device? I don&#039;t mind, but i don&#039;t like useless virtual device, you understand.</p><p>4. When i view &quot;System Information&quot; in the NVIDIA Control Panel is see &quot;Bus: PCI Express x 1&quot; (or even &quot;x0&quot; without ioh3420). This sounds scary. It supposed to be &quot;PCIe 3.0 x16&quot;.<br />So do i really suffer from slow connection between Video Card and (hm, not even sure what) CPU? Or does it magically overclock this virtual PCIe 1.0 x 1 to be like physical 3.0x16?<br />I have not scientifically checked performances difference yet, but i don&#039;t like x1 instead of x16, you understand me.</p><p>Besides that <strong>everything works fine. No &quot;!&quot; marks in device manager, virtual machine restarts, starts stops without problems, latest nvidia drivers 344.65. Sound via HDMI works fine.</strong></p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host,kvm=off \ -smp 4,sockets=1,cores=4,threads=1 \ -bios /home/biasha/Downloads/bios.bin-1.7.5 -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=0.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=0.1 \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/home/biasha/Downloads/windows1.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk \ -drive file=/home/biasha/Downloads/en_windows_server_2012_r2_vl_with_update_x64_dvd_4065221.iso,id=isocd -device ide-cd,bus=ahci.1,drive=isocd \ -usb -usbdevice host:046d:c52b -usbdevice host:0738:1709 \ -boot menu=on</code></pre></div> <p class="postedit"><em>Last edited by biasha (2014-11-18 02:56:57)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476593">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476617" class="blockpost roweven"> <h2><span><span class="conr">#3304</span> <a href="viewtopic.php?pid=1476617#p1476617">2014-11-18 03:36:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86701">orcephrye</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-11-15</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=86701">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>...<br />All my quotes and stuff<br />...</p><p>Sure, I&#039;m not sure how much study there&#039;s been regarding whether it&#039;s better to pin the parent process to a non-vCPU processor or just let it float around.&#160; If you had multiple NUMA nodes you&#039;d certainly want to pin it to the node, but otherwise I&#039;m not sure how much it matters.</p></div></blockquote></div><p>So... got it working. But for your information you NEED to pin the parent process with the rest of them. Without doing that I got a lot of stuttering... in everything.. audio/mouse movements/rendering. I also discovered that qemu spawns a lot more sub processes then simply the threads. So I run qemu like so:</p><div class="codebox"><pre><code>taskset -c 2,3,4,5,6,7 qemu-system-x86_64 [....]</code></pre></div><p>And then I run:</p><div class="codebox"><pre><code>VAR=2 &amp;&amp; QEMUPID=`pidof /usr/bin/qemu-system-x86_64` &amp;&amp; THREADLIST=`ps -o lwp --no-headers -p $QEMUPID -L | grep -v $QEMUPID` &amp;&amp; for i in $THREADLIST ; do taskset -cp $VAR $i ; if [ $VAR -eq 7 ] ; then VAR=1; fi ; VAR=$((VAR+1)) ; done</code></pre></div><p>Notice the added if statement in the for loop. This resets the CPU counter. (I am horrible and naming variables.. shame.. shame on me). Either case now this doesn&#039;t care how many processes spawn at run time. It spreads them all out. I ran qemu several times while testing and it went from anywhere around 7 (6 cores) to 12. And while it was running it would spawn more every now and again. With the first taskset command this makes sure all processes in the future get to run on at least one of the 6 CPUs. And the fancy for loop with tasksets makes sure that each starting thread gets its own CPU. Sorta... although all the first threads that spawn are the threads for each CPU#... everytime I ran it. Which was about 10 to 15 times... i lost count. Basically its safe to assume that the first 6 threads from the one-liner above will be the qemu vCPUs. </p><p>Anywho... that had a pretty nice performance boost. Although what was even bigger was the governor being set to performance. I am use to working with RHEL 5/6 with cpuspeed service on Dell 2950s/R710s and R720s. Normally all you need to do is disable energy saving features in the bios and call it a day. So I already had done that before. But apparently I was horribly wrong. I used cpupower to set it to performance and that made pretty big diff as well. Combine that with cpu stuff and... well I am gaming and near 90% bare metal performance. </p><br /><p>@biasha<br />I checked my Nvidia card which I am using on Windows and it too shows PCI x0. However I am getting good performance (now) in my games. This variable may not dictate the actual bandwidth it may just simply be displaying what it sees from the controller. </p><p>Also... I made the card that Linux runs on be the primary card on the motherboard. I did this because I had no other choice. You cannot use the card that is your primary if your bios doesn&#039;t support switching or changing the VGA settings. I have an MSI 990FXa-GD80 and it doesn&#039;t have that feature. I recommend placing the card your Windows guest will be using in a different PCI slot. Most motherboard have more then one PCI x16 slot. You would then be able to enjoy seeing the whole boot process and not wait in mystery. </p><p>I am also not using ioh3420 or any such thing. Here is my current config for your referance:</p><div class="codebox"><pre><code>qemu-system-x86_64 -nographic -monitor telnet:127.0.0.1:1234,server,nowait \ -name gaming -enable-kvm -M q35 \ -balloon none -m 16386 -mem-path /dev/hugepages -mem-prealloc \ -cpu host,hv-time -smp cpus=4,sockets=1,cores=4,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none \ -device vfio-pci,host=06:00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=06:00.1 \ -device vfio-pci,host=07:06.0 \ -device virtio-scsi-pci,id=scsi \ -drive file=/dev/sdb,id=disk0,format=raw -device scsi-hd,drive=disk0 \ -drive file=/dev/sdc,id=disk1,format=raw -device scsi-hd,drive=disk1 \ -net nic,model=virtio,macaddr=00:16:35:AF:94:4B -net bridge,br=br0 \ -usb -usbdevice host:1532:0109 -usbdevice host:046d:c531 -usbdevice host:1a40:0101 \ -rtc base=localtime -monitor unix:/tmp/vm_gaming,server,nowait </code></pre></div><p>PS: Much thanks to aw,Denso and sinny for their help.</p> <p class="postedit"><em>Last edited by orcephrye (2014-11-18 05:29:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476617">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476652" class="blockpost rowodd"> <h2><span><span class="conr">#3305</span> <a href="viewtopic.php?pid=1476652#p1476652">2014-11-18 07:57:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><blockquote><div><p>PS: Much thanks to aw,Denso and sinny for their help.</p></div></blockquote></div><p>You&#039;re welcome . <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <br />Pssst : stealing everyone else&#039;s CMDLines and trying them was a big help for me , also many thanks to aw and everyone else for taking their time to help ! <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>---------------------------------------------</p><p>@aw :</p><p>I noticed that ACS patch causes these errors :</p><div class="codebox"><pre><code>[Thu Nov 13 03:13:21 2014] pcieport 0000:00:03.0: AER: Multiple Corrected error received: id=0018 [Thu Nov 13 03:13:21 2014] pcieport 0000:00:03.0: PCIe Bus Error: severity=Corrected, type=Data Link Layer, id=0018(Receiver ID) [Thu Nov 13 03:13:21 2014] pcieport 0000:00:03.0: device [8086:2f08] error status/mask=00000040/00002000 [Thu Nov 13 03:13:21 2014] pcieport 0000:00:03.0: [ 6] Bad TLP</code></pre></div><p>I recompiled 3.18-rc5 without the ACS patch and added the X99 quirks manually to &quot;/drivers/pci/quirks.c&quot; file , and I no longer recieve them .</p> <p class="postedit"><em>Last edited by Denso (2014-11-18 08:05:39)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476652">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476689" class="blockpost roweven"> <h2><span><span class="conr">#3306</span> <a href="viewtopic.php?pid=1476689#p1476689">2014-11-18 12:13:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>I noticed that ACS patch causes these errors :</p></div></blockquote></div><p>Seems like my guess was true. Devices aren&#039;t isolated properly. Good luck.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476689">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476692" class="blockpost rowodd"> <h2><span><span class="conr">#3307</span> <a href="viewtopic.php?pid=1476692#p1476692">2014-11-18 12:19:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82117">devianceluka</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-19</span></dd> <dd><span>Posts: 43</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>can anyone help me with why my Windows guest cannot boot anymore? Also tried ubuntu guest and the 2nd time when I reboot it wont start xinit! It looks like it didnt reset the GPU the proper way so it can reuse/reinitialize it. This is with SeaBIOS and it was working flawlessly till now. Using Fedora 3.17.2 with Seabios 1.7.5 git and Qemu 2.1.2 git</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476692">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476694" class="blockpost roweven"> <h2><span><span class="conr">#3308</span> <a href="viewtopic.php?pid=1476694#p1476694">2014-11-18 12:23:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>I noticed that ACS patch causes these errors :</p></div></blockquote></div><p>Seems like my guess was true. Devices aren&#039;t isolated properly. Good luck.</p></div></blockquote></div><p>Umm .. That sounds tragic . But my host AND VMs are working flawlessly (aside from the VM rebooting hanging the host , which is caused by Nvidia&#039;s drivers I believe) .. So I don&#039;t see the issue here ?</p> <p class="postedit"><em>Last edited by Denso (2014-11-18 12:30:18)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476694">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476756" class="blockpost rowodd"> <h2><span><span class="conr">#3309</span> <a href="viewtopic.php?pid=1476756#p1476756">2014-11-18 16:35:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85963">Rommy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-17</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=85963">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I get an error, when i want to bind a device to vfio-pci.</p><div class="codebox"><pre><code>[ 395.815169] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 395.815178] vfio-pci: probe of 0000:01:00.1 failed with error -22</code></pre></div><p>Here is my cmdline</p><div class="codebox"><pre><code>initrd=\initramfs-linux.img keydevice=UUID=daabf52e-3e81-499a-af71-e5a2887840e9:key homedevice=UUID=cc29c820-32e3-45b6-8bf4-a152bd1a29a1:home cryptdevice=UUID=16ccebd1-dadb-4180-abd3-854a23871ac0:root_enc:allow-discards cryptkey=/dev/mapper/key:0:527 root=/dev/mapper/root_enc rw pci-stub.ids=10de:06c0,10de:0be5 intel_iommu=1 i915.enable_hd_vgaarb=1</code></pre></div><p>I think IOMMU is enabled:</p><div class="codebox"><pre><code>[ 0.032533] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020e60262 ecap f0101a [ 0.032537] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap c9008020660262 ecap f0105a [ 0.032607] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1</code></pre></div><p>My devices get claimed by pci-stub</p><div class="codebox"><pre><code>[ 0.412398] pci-stub: add 10DE:06C0 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.412414] pci-stub 0000:01:00.0: claimed by stub [ 0.412423] pci-stub: add 10DE:0BE5 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.412431] pci-stub 0000:01:00.1: claimed by stub</code></pre></div><p>Intel Virtualization Tech and Intel VT-d Tech is enabled in my MSI-Z77A-G45. I use an i7-2600: <a href="http://ark.intel.com/de/products/52213/Intel-Core-i7-2600-Processor-8M-Cache-up-to-3_80-GHz" rel="nofollow">http://ark.intel.com/de/products/52213/ … o-3_80-GHz</a></p><div class="codebox"><pre><code>processor : 0 vendor_id : GenuineIntel cpu family : 6 model : 42 model name : Intel(R) Core(TM) i7-2600 CPU @ 3.40GHz stepping : 7 microcode : 0x29 cpu MHz : 1599.992 cache size : 8192 KB physical id : 0 siblings : 8 core id : 0 cpu cores : 4 apicid : 0 initial apicid : 0 fpu : yes fpu_exception : yes cpuid level : 13 wp : yes flags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb pln pts dtherm tpr_shadow vnmi flexpriority ept vpid xsaveopt bugs : bogomips : 6802.96 clflush size : 64 cache_alignment : 64 address sizes : 36 bits physical, 48 bits virtual power management:</code></pre></div><p>At boot I get the following error, i don&#039;t know if it has to do something with it:</p><div class="codebox"><pre><code>[ 28.354419] [drm:ilk_display_irq_handler] *ERROR* Pipe B FIFO underrun [ 28.354429] [drm:cpt_set_fifo_underrun_reporting] *ERROR* uncleared pch fifo underrun on pch transcoder B [ 28.354430] [drm:cpt_serr_int_handler] *ERROR* PCH transcoder B FIFO underrun</code></pre></div><br /><p>Any ideas?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476756">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476944" class="blockpost roweven"> <h2><span><span class="conr">#3310</span> <a href="viewtopic.php?pid=1476944#p1476944">2014-11-19 01:19:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Researching processor thermal management and thermal monitoring i&#039;ve got an interesting document.<br /><a href="http://amd-dev.wpengine.netdna-cdn.com/wordpress/media/2012/10/48931_15h_Mod_10h-1Fh_Rev_Guide.pdf" rel="nofollow">http://amd-dev.wpengine.netdna-cdn.com/ … _Guide.pdf</a><br />(i have amd athlon x4 750k FM2 socket, family 15h model 10h)<br />There is plenty of bugs in the IOMMU.</p><div class="codebox"><pre><code>IOMMU Event Not Flagged when DTE Reserved Bits Are Not Zero IOMMU Event Log Not Generated for Invalid DTE GCR3 Table Root Pointer IOMMU Event Log Not Generated for Not Present Host Intermediate Page Tables Incorrect Translation with IOMMU v1 512 GB Page Table IOMMU Event Log Ordering Violation IOMMU PPR Log Ordering Violation IOMMU Interrupt May Be Lost</code></pre></div><p>Well, i have nothing to do, but to read and try to understand what the hell is happening here.</p><p>But i have a note for everyone using AMD FM2 socket based C/APUs:<br />For CPB(turbo) to work, two things are needed: 1. TCTL must be below 74C; 2. Some(i think two) cores must be disabled by OS&#039; power management software.<br />There is two problems:<br />1. The actual critical temperature is waaay higher than 74C, actually it is ~120C - only in that case the CPU will do THERMTRIP and(CPB is disabled) will turn off the system almost immediatly.<br />2. Linux does not do that yet, so your CPU will stay at it&#039;s base frequency, never working in turbo mode.</p><p>In the real case, VM won&#039;t load all 4 cores to 100%, meaning that there will be a lot of P-state transitions. Every P-state transition is either a hang-up or crash or something else nasty(look over the revision guide, P-states are buggy too), or just a minor slowdown. The slowdown effect is amplified by VM, and i&#039;ve actually noticed heavy CPU performance drawbacks on dynamic CPU-load jobs, like games. On static CPU-load jobs, like mining or bruteforcing, the performance hit is not so significant. The actual numbers will come tomorrow or something, as i don&#039;t have the time to test it all yet.</p><p>EDIT:<br />Yep. The raw, full load CPU performance is almost the same, sometimes even doing majestic stuff.<br />I&#039;ve ran hashcat-cliXOP.bin(.exe) with MD5 APR(-m1600) with -a3 and a huge mask of ?a?a?a?a?a on a bogus hash and i&#039;ve got 37k/second inside the VM and 37k/second on the host system.<br />Fun part: i can run hashcat on host and guest systems simulatenously, having 27k and 27k performance meters. That feels weird.<br />The P-state transition part: when i am running hashcat on three or less cores instead of four, the performance decrease is not linear(same thing for plain 64, avx and avx2 versions, apart from xop), and there is a lot of P-state transitions. The actual process is fluctuating between two(or more) cores, each needs to &quot;speed up&quot; and we have lags.</p> <p class="postedit"><em>Last edited by Duelist (2014-11-19 15:42:50)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476944">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1476985" class="blockpost rowodd"> <h2><span><span class="conr">#3311</span> <a href="viewtopic.php?pid=1476985#p1476985">2014-11-19 06:21:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>hmmmm, after all pinning work done by orcephrye i just wonder how libvirt/virt-manager&#039;s cpu pinning works.<br />and whether it&#039;s more optimal (performance-wise) to use manual cpu pinning or libvirt/virt-manager&#039;s one.</p><p>p.s. for now i am totally satisfied with performance i get using &quot;dumb&quot; libvirt/virt-manager approach, but having more info on the matter would be great (in case someone has clear view of things)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1476985">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477115" class="blockpost roweven"> <h2><span><span class="conr">#3312</span> <a href="viewtopic.php?pid=1477115#p1477115">2014-11-19 14:47:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85963">Rommy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-17</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=85963">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>To add some information: I compiled the kernel myself with the PKGBUILD. I only added the two patches, i modified them, because they did not patch correctly with actual kernel 3.17.3<br />i915_vga_arbiter_fixes_mod.patch:<br /><a href="http://sprunge.us/HWaY" rel="nofollow">http://sprunge.us/HWaY</a><br />acs_override_mod.patch:<br /><a href="http://sprunge.us/UiVa" rel="nofollow">http://sprunge.us/UiVa</a></p><p>$ lsmod | grep stub<br />pci_stub&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;12429&#160; 0 </p><p>nouveau is NOT loaded. nouveau is also blacklisted.</p><p>The first time I run ./vfio-bind there are 3 messages in dmesg, after that every time I run it, there are 4 messages. I dont really get it. (I echoed X to /dev/kmesg after every vfio-bind)</p><div class="codebox"><pre><code>[ 60.559359] usb 1-1.6: USB disconnect, device number 5 [ 892.895082] VFIO - User Level meta-driver version: 0.3 [ 892.900616] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 892.902868] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 892.902878] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 919.366858] X [ 925.888402] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 925.888414] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 925.890925] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 925.890935] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 942.445180] X [ 943.751225] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 943.751236] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 943.753664] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 943.753674] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 1013.824028] X [ 1014.636678] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 1014.636689] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 1014.639130] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 1014.639141] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 1015.453419] X [ 1016.252234] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 1016.252245] vfio-pci: probe of 0000:01:00.1 failed with error -22 [ 1016.254664] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 1016.254675] vfio-pci: probe of 0000:01:00.1 failed with error -22</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477115">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477117" class="blockpost rowodd"> <h2><span><span class="conr">#3313</span> <a href="viewtopic.php?pid=1477117#p1477117">2014-11-19 14:53:06</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Rommy wrote:</cite><blockquote><div><p>To add some information:<br /><em>snip</em></p><div class="codebox"><pre><code>[ 60.559359] usb 1-1.6: USB disconnect, device number 5 [ 892.895082] VFIO - User Level meta-driver version: 0.3 [ 892.900616] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 892.902868] vfio-pci: probe of 0000:01:00.0 failed with error -22 [ 892.902878] vfio-pci: probe of 0000:01:00.1 failed with error -22</code></pre></div></div></blockquote></div><p>-EINVAL likely means the IOMMU is not enabled.&#160; Look at the groups in /sys/kernel/iommu_groups/&#160; If there&#039;s nothing there, vfio can&#039;t work.&#160; You probably need intel_iommu=on or your kernel config may be broken.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477117">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477118" class="blockpost roweven"> <h2><span><span class="conr">#3314</span> <a href="viewtopic.php?pid=1477118#p1477118">2014-11-19 14:54:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>sinny wrote:</cite><blockquote><div><p>hmmmm, after all pinning work done by orcephrye i just wonder how libvirt/virt-manager&#039;s cpu pinning works.<br />and whether it&#039;s more optimal (performance-wise) to use manual cpu pinning or libvirt/virt-manager&#039;s one.</p><p>p.s. for now i am totally satisfied with performance i get using &quot;dumb&quot; libvirt/virt-manager approach, but having more info on the matter would be great (in case someone has clear view of things)</p></div></blockquote></div><p>libvirt provides vcpu pinning options equivalent to what orcephrye is doing, check the libvirt domain xml spec for the correct options (I&#039;ve never had any luck trying to figure out how to specify it via the virt-manager UI).</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477118">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477123" class="blockpost rowodd"> <h2><span><span class="conr">#3315</span> <a href="viewtopic.php?pid=1477123#p1477123">2014-11-19 15:33:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85963">Rommy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-17</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=85963">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>-EINVAL likely means the IOMMU is not enabled.&#160; Look at the groups in /sys/kernel/iommu_groups/&#160; If there&#039;s nothing there, vfio can&#039;t work.&#160; You probably need intel_iommu=on or your kernel config may be broken.</p></div></blockquote></div><p>Thank you for your answer.<br />You are right, /sys/kernel/iommu_groups is a empty directory.<br />I used the config.x86_64 from the PKGBUILD: <a href="https://projects.archlinux.org/svntogit/packages.git/tree/trunk?h=packages/linux" rel="nofollow">https://projects.archlinux.org/svntogit … ages/linux</a></p><p>zcat /proc/config.gz | grep CONFIG_VFIO_PCI_VGA<br />CONFIG_VFIO_PCI_VGA=y</p><p>Here is the /proc/config.gz<br />What else must be enabled?<br /><a href="http://sprunge.us/XSCA" rel="nofollow">http://sprunge.us/XSCA</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477123">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477124" class="blockpost roweven"> <h2><span><span class="conr">#3316</span> <a href="viewtopic.php?pid=1477124#p1477124">2014-11-19 15:34:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Rommy wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>You probably need intel_iommu=on</p></div></blockquote></div><p>What else must be enabled?</p></div></blockquote></div><p>That is a kernel boot parameter AW mentioned. Please check if it&#039;s enabled.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477124">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477127" class="blockpost rowodd"> <h2><span><span class="conr">#3317</span> <a href="viewtopic.php?pid=1477127#p1477127">2014-11-19 15:37:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Rommy wrote:</cite><blockquote><div><div class="codebox"><pre><code>intel_iommu=1</code></pre></div></div></blockquote></div><p>Just looked at the code, this is not valid.&#160; It needs to be &quot;on&quot;</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477127">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477148" class="blockpost roweven"> <h2><span><span class="conr">#3318</span> <a href="viewtopic.php?pid=1477148#p1477148">2014-11-19 16:40:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85963">Rommy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-17</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=85963">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>oh, thank you very very much!!!! :-)</p><p>Omg, dont know, where I got the 1 from :-x</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477148">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477170" class="blockpost rowodd"> <h2><span><span class="conr">#3319</span> <a href="viewtopic.php?pid=1477170#p1477170">2014-11-19 17:25:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85963">Rommy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-10-17</span></dd> <dd><span>Posts: 22</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=85963">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Again: I start in X as root: </p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 1024 -cpu host -smp 3,sockets=1,cores=3,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1</code></pre></div><p>I get this output:</p><div class="codebox"><pre><code>Device option ROM contents are probably invalid (check dmesg). Skip option ROM probe with rombar=0, or load from file with romfile=</code></pre></div><p>dmesg says</p><div class="codebox"><pre><code>[ 1137.081643] vfio-pci 0000:01:00.0: Invalid ROM contents [ 1137.473305] kvm: zapping shadow pages for mmio generation wraparound</code></pre></div><p>dwe11er says:<br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1431277#p1431277" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 7#p1431277</a></p><p>The commandline option is set (with =1, not with =on): i915.enable_hd_vgaarb=1</p><p>Is the &quot;vbios file&quot; a file I get with nvflash and how do I have to pass it to qemu? <br />Is it reasonable to use rombar=0&#160; and again: how do I have to pass it to qemu?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477170">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477194" class="blockpost roweven"> <h2><span><span class="conr">#3320</span> <a href="viewtopic.php?pid=1477194#p1477194">2014-11-19 19:09:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=64876">Nazfellun</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/64876.png?m=1352449839" width="80" height="80" alt="" /></dd> <dd><span>Registered: 2012-10-22</span></dd> <dd><span>Posts: 19</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=64876">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;ve been able to get this working on my main desktop system (FX-8350, Gigabyte 990FXA-UD3, R9 290 for the guest, GTX 750 Ti for the host) but have been having more trouble with the less-friendly hardware used in my secondary/guest computer:</p><p>Motherboard: Intel DP67BG<br />CPU: i5-2500<br />Host graphics: Gigabyte HD6670<br />Guest graphics: Gigabyte GTX 650 Ti (GV-N65TOC-1GI rev 1.0, has the original BIOS-only firmware)</p><p>I&#039;ve been able to get the guest to boot up OK with the nvidia card passed through, installed the drivers etc. (with the ACS overrides patch) but I get the notorious &#039;Code 43&#039; error. I&#039;ve got kvm hiding enabled, and as far as I can tell none of the hyperv extensions are enabled, but even if I use the 335 drivers I still get the same error in device manager &amp; no output on the card. </p><p>Disabling/enabling the card in device manager removes the error for that boot, but the card still doesn&#039;t work and the nvidia control panel crashes if I attempt to open it.</p><p>I&#039;ve also tried the card in both the primary &amp; secondary x16 slots without any luck, the bios also does have an option to select which card to use as primary but this also does not help.</p><p>Any ideas, or am I SOL?</p><br /><br /><p>Also, assuming I&#039;m not entirely SOL I&#039;m interested in trying out the OVMF method, but as mentioned the card I want to pass through doesn&#039;t have EFI-capable firmware. There is a firmware update listed for it on Gigabyte&#039;s site that apparently does, but I&#039;m not sure how to flash this from Linux...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477194">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477232" class="blockpost rowodd"> <h2><span><span class="conr">#3321</span> <a href="viewtopic.php?pid=1477232#p1477232">2014-11-19 21:01:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86786">eric_f</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-11-19</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:efriesen@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hey guys. <br />I made an account just so I could post my findings and what I needed to do make this work.<br />First following the rest of the directions did work, I got my display working pretty quickly and easily, but my problem was once Windows installed the video drivers it would blue screen, and it went away so fast I couldn&#039;t read the error.<br />Finally it stayed long enough, I found out it was being caused my the Windows ATI drivers.&#160; I&#039;m using a Radeon HD 2600 XT.&#160; What I needed to do was boot into safe mode, uninstall the Windows drivers and use the ATI drivers I downloaded.&#160; </p><p>Once that was done the machine booted up correctly and has been working great since.</p><p>Thanks for all the great work.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477232">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477237" class="blockpost roweven"> <h2><span><span class="conr">#3322</span> <a href="viewtopic.php?pid=1477237#p1477237">2014-11-19 21:15:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Congratulations @ Eric! Nice to hear more success stories. Cross your fingers for me now <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>@Alex (aw)&#160; thanks a lot for your suggestion. Switching to MSI worked exactly as you said. Scratching&#160; in the sound is gone! Thank you so much. </p><p>Is it possible that (in one of your setups) you have a i5-3470t?</p><p>Cause that&#039;s the CPU I am running and I couldn&#039;t manage to get the best solution regarding cpu tuning.</p><p>would you be so kind to post that certain part of code in the .xml?</p><p>that would be great</p> <p class="postedit"><em>Last edited by 4kGamer (2014-11-19 21:16:37)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477237">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477238" class="blockpost rowodd"> <h2><span><span class="conr">#3323</span> <a href="viewtopic.php?pid=1477238#p1477238">2014-11-19 21:15:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>eric_f wrote:</cite><blockquote><div><p>I&#039;m using a Radeon HD 2600 XT.</p></div></blockquote></div><p>Wow, I think that&#039;s the oldest Radeon card we&#039;d heard of working.&#160; Thanks for the report.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477238">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477247" class="blockpost roweven"> <h2><span><span class="conr">#3324</span> <a href="viewtopic.php?pid=1477247#p1477247">2014-11-19 21:31:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>4kGamer wrote:</cite><blockquote><div><p>Congratulations @ Eric! Nice to hear more success stories. Cross your fingers for me now <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>@Alex (aw)&#160; thanks a lot for your suggestion. Switching to MSI worked exactly as you said. Scratching&#160; in the sound is gone! Thank you so much. </p><p>Is it possible that (in one of your setups) you have a i5-3470t?</p><p>Cause that&#039;s the CPU I am running and I couldn&#039;t manage to get the best solution regarding cpu tuning.</p><p>would you be so kind to post that certain part of code in the .xml?</p><p>that would be great</p></div></blockquote></div><p>I do have an i5-3470t, but all the tuning I do is pretty generic.</p><p>First you can set hugepages:</p><div class="codebox"><pre><code> &lt;memoryBacking&gt; &lt;hugepages/&gt; &lt;nosharepages/&gt; &lt;/memoryBacking&gt;</code></pre></div><p>You&#039;ll need to pre-allocate the hugepages via kernel commandline or procfs, libvirt won&#039;t do it for you (yet).</p><p>Basic CPU pinning:</p><div class="codebox"><pre><code> &lt;vcpu placement=&#039;static&#039;&gt;4&lt;/vcpu&gt; &lt;cputune&gt; &lt;vcpupin vcpu=&#039;0&#039; cpuset=&#039;0&#039;/&gt; &lt;vcpupin vcpu=&#039;1&#039; cpuset=&#039;1&#039;/&gt; &lt;vcpupin vcpu=&#039;2&#039; cpuset=&#039;2&#039;/&gt; &lt;vcpupin vcpu=&#039;3&#039; cpuset=&#039;3&#039;/&gt; &lt;/cputune&gt;</code></pre></div><p>CPU type and topology:</p><div class="codebox"><pre><code> &lt;cpu mode=&#039;host-passthrough&#039;&gt; &lt;topology sockets=&#039;1&#039; cores=&#039;2&#039; threads=&#039;2&#039;/&gt; &lt;/cpu&gt;</code></pre></div><p>This is equivalent to -cpu host with a topology matching the physical CPU.</p><p>And if you&#039;re using AMD or have otherwise freed yourself of Nvidia restrictions:</p><div class="codebox"><pre><code> &lt;features&gt; &lt;hyperv&gt; &lt;relaxed state=&#039;on&#039;/&gt; &lt;vapic state=&#039;on&#039;/&gt; &lt;spinlocks state=&#039;on&#039; retries=&#039;8191&#039;/&gt; &lt;/hyperv&gt; &lt;/features&gt; &lt;clock offset=&#039;localtime&#039;&gt; &lt;timer name=&#039;hypervclock&#039; present=&#039;yes&#039;/&gt; &lt;/clock&gt;</code></pre></div><p>And as noted recently, use the <em>performance</em> CPU governor on the host for benchmarking/gaming.</p><p>The i5-3470t is a little on the under-powered side for gaming, even on bare metal.&#160; For a VM, you don&#039;t really have any cores or even threads to spare for the host.&#160; I think things like Steam in-home-streaming recommend a quad-core.&#160; That doesn&#039;t stop me from using it with Nvidia and AMD VMs running simultaneously, but I either need to partition them as 1core + 1thread each, with pinning on the correct physical CPUs, or I need to serialize the workload between them to avoid choppiness.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477247">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1477254" class="blockpost rowodd"> <h2><span><span class="conr">#3325</span> <a href="viewtopic.php?pid=1477254#p1477254">2014-11-19 21:49:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thank you for posting your configuation. My settings are just about the same. Looks like the i5 is simply not good enough as you already stated, but I haven&#039;t set hugepages yet. </p><p>That I&#039;ll try next. </p><p>For 4k of course it&#039;s a no-go. I guess it needs to be the i7-4790k which is next on my agenda.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1477254">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=132">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=131">131</a> <a href="viewtopic.php?id=162768&amp;p=132">132</a> <strong>133</strong> <a href="viewtopic.php?id=162768&amp;p=134">134</a> <a href="viewtopic.php?id=162768&amp;p=135">135</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=134">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
