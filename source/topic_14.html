<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 14) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=14" title="Page 14" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=13" title="Page 13" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=15" title="Page 15" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=13">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=12">12</a> <a href="viewtopic.php?id=162768&amp;p=13">13</a> <strong>14</strong> <a href="viewtopic.php?id=162768&amp;p=15">15</a> <a href="viewtopic.php?id=162768&amp;p=16">16</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=15">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1305297" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#326</span> <a href="viewtopic.php?pid=1305297#p1305297">2013-07-28 22:12:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>The acpi bios thing its because of seabios, use my package (1.7.2 patched), the other message is likely because you&#039;re using the wrong kernel without pcie bus reset support</p></div></blockquote></div><p>Yes, You are right - I have no BSOD with 1.7.2 but I could not apply kernel-vfio-vga-reset.patch to Linux kernel from vga-current branch: I get</p><div class="codebox"><pre class="vscroll"><code>Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp.h.rej patching file drivers/pci/hotplug/pciehp_core.c Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file drivers/pci/hotplug/pciehp_core.c.rej patching file drivers/pci/hotplug/pciehp_hpc.c Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp_hpc.c.rej patching file drivers/pci/pci.c Reversed (or previously applied) patch detected! Skipping patch. 5 out of 5 hunks ignored -- saving rejects to file drivers/pci/pci.c.rej patching file drivers/vfio/pci/vfio_pci.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/pci/vfio_pci.c.rej patching file drivers/vfio/vfio.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/vfio.c.rej patching file include/linux/pci.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/pci.h.rej patching file include/linux/pci_hotplug.h Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file include/linux/pci_hotplug.h.rej patching file include/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/vfio.h.rej patching file include/uapi/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file include/uapi/linux/vfio.h.rej ==&gt; ERROR: A failure occurred in prepare(). Aborting...</code></pre></div></div></blockquote></div><p>You dont need to patch that kernel, i extracted the commits from that branch and use it against vanilla kernel, and it probably doesnt work anymore after you reboot the vm because you&#039;re using the wrong kernel (it cant reset the card), i posted a qemu and kernel builds for you on page 13 you can use that or build it yourself</p> <p class="postedit"><em>Last edited by nbhs (2013-07-28 22:20:23)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305297">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305298" class="blockpost roweven"> <h2><span><span class="conr">#327</span> <a href="viewtopic.php?pid=1305298#p1305298">2013-07-28 22:15:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>Yes, I&#039;m getting the same problem as a guy a few pages back... &quot;This device can not find enough free resources that it can use. (Code 12)&quot;... apparently something to do with using the intel integrated graphics. I read the post that was linked but it seems like a dead end?</p><p>- I can&#039;t get the graphics card to show the BIOS.<br />- If I boot the ArchLinux ISO in the VM then it shows it&#039;s loading screen on the graphics card.<br />- Windows shows the device in task manager and AMD installs the catalyst drivers.</p><div class="codebox"><pre class="vscroll"><code>[root@localhost ~]# dmesg | grep IOMMU [ 0.000000] Intel-IOMMU: enabled [ 0.021443] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020e60262 ecap f0101a [ 0.021447] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap c9008020660262 ecap f0105a [ 0.021516] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.297980] IOMMU 0 0xfed90000: using Queued invalidation [ 0.297981] IOMMU 1 0xfed91000: using Queued invalidation [ 0.436381] IOMMU: software identity mapping for device 0000:00:00.0 [ 0.436382] IOMMU: software identity mapping for device 0000:00:01.0 [ 0.436383] IOMMU: software identity mapping for device 0000:00:14.0 [ 0.436384] IOMMU: software identity mapping for device 0000:00:16.0 [ 0.436385] IOMMU: software identity mapping for device 0000:00:1a.0 [ 0.436386] IOMMU: software identity mapping for device 0000:00:1b.0 [ 0.436387] IOMMU: software identity mapping for device 0000:00:1c.0 [ 0.436388] IOMMU: software identity mapping for device 0000:00:1c.2 [ 0.436389] IOMMU: software identity mapping for device 0000:00:1d.0 [ 0.436390] IOMMU: software identity mapping for device 0000:00:1f.0 [ 0.436391] IOMMU: software identity mapping for device 0000:00:1f.2 [ 0.436392] IOMMU: software identity mapping for device 0000:00:1f.3 [ 0.436396] IOMMU: software identity mapping for device 0000:01:00.0 [ 0.436397] IOMMU: software identity mapping for device 0000:01:00.1 [ 0.436401] IOMMU: software identity mapping for device 0000:02:00.0 [ 0.436402] IOMMU: Setting RMRR: [ 0.436410] IOMMU: Setting identity map for device 0000:00:02.0 [0xcb800000 - 0xcf9fffff] [ 0.436696] IOMMU: Setting identity map for device 0000:00:1d.0 [0xc9d82000 - 0xc9d8efff] [ 0.436701] IOMMU: Setting identity map for device 0000:00:1a.0 [0xc9d82000 - 0xc9d8efff] [ 0.436702] IOMMU: Setting identity map for device 0000:00:14.0 [0xc9d82000 - 0xc9d8efff] [ 0.436704] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.436705] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff] [root@localhost ~]# </code></pre></div><div class="codebox"><pre><code>[root@localhost ~]# dmesg | grep pci-stub [ 0.000000] Command line: BOOT_IMAGE=/vmlinuz-linux-mainline root=/dev/md1 ro quiet pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on,igfx_on iommu=pt [ 0.000000] Kernel command line: BOOT_IMAGE=/vmlinuz-linux-mainline root=/dev/md1 ro quiet pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on,igfx_on iommu=pt [ 0.705428] pci-stub: add 1002:679A sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.705438] pci-stub 0000:01:00.0: claimed by stub [ 0.705442] pci-stub: add 1002:AAA0 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.705448] pci-stub 0000:01:00.1: claimed by stub [root@localhost ~]# </code></pre></div><div class="codebox"><pre><code>[ 60.412232] vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) [ 60.438127] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x270 [ 60.438134] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x1b@0x2d0</code></pre></div><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -smp 2 \ -bios /usr/share/qemu/bios.bin \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -device virtio-scsi-pci,id=scsi \ -drive if=none,format=raw,file=/root/win_os.raw,id=disk \ -device scsi-hd,drive=disk \ -net nic,model=virtio \ -net tap,ifname=vm-win,script=no,downscript=no</code></pre></div></div></blockquote></div><p>Are you using the lastest builds i posted?&#160; iommu=pt is an amd thing only (i think for intel is intel_iommu=pt) and i have no idea what igfx_on does, it seems myweb has partially got it to work on his intel board (except the bsod which im sure its a seabios thing), perhaps he knows more since i dont have an intel board to test</p></div></blockquote></div><p>I just managed to get it working (using secondary graphics)</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -m 4096 -cpu host \ -smp 2 \ -bios /usr/share/qemu/bios.bin \ -device pci-assign,host=01:00.0 \ -device pci-assign,host=01:00.1</code></pre></div><p>For anyone interested in my hardware;<br />Mobo: B75-D3V, BIOS F8 04/17/2013 (The integrated LAN on this board is utter crap... maybe I have a dodgy board but i&#039;m using an Intel e1000e PCI LAN card to avoid a mountain of problems)<br />CPU: i5-3570<br />GPU: Radeon HD 7950 Gigabyte MSI Twin Fozr III 3GB</p><p>It&#039;s a shame I can&#039;t get the BIOS level working though. If switching to an AMD board would work I would consider it well worthwhile. I just want to make sure I buy one which is confirmed to be working as &quot;upgrading&quot; once will cost enough xD</p><p>I compiled the sources using your scripts today so I think i&#039;m using the latest versions.</p><div class="codebox"><pre><code>[root@localhost ~]# qemu-system-x86_64 --version QEMU emulator version 1.5.1, Copyright (c) 2003-2008 Fabrice Bellard [root@localhost ~]# uname -a Linux localhost 3.10.1-1-mainline #1 SMP PREEMPT Sun Jul 28 17:04:33 IST 2013 x86_64 GNU/Linux</code></pre></div><p>Don&#039;t know how to check the seabios version, but I did use your script to build it.</p><p>I&#039;ve tried using a lot of kernel param combinations but I see no difference. Now i&#039;m using &quot;pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on,igfx_on,pass-through,pt&quot; but it doesn&#039;t look right to me! XD</p> <p class="postedit"><em>Last edited by BulliteShot (2013-07-28 22:16:21)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305298">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305300" class="blockpost rowodd"> <h2><span><span class="conr">#328</span> <a href="viewtopic.php?pid=1305300#p1305300">2013-07-28 22:18:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>Yes, I&#039;m getting the same problem as a guy a few pages back... &quot;This device can not find enough free resources that it can use. (Code 12)&quot;... apparently something to do with using the intel integrated graphics. I read the post that was linked but it seems like a dead end?</p><p>- I can&#039;t get the graphics card to show the BIOS.<br />- If I boot the ArchLinux ISO in the VM then it shows it&#039;s loading screen on the graphics card.<br />- Windows shows the device in task manager and AMD installs the catalyst drivers.</p><div class="codebox"><pre class="vscroll"><code>[root@localhost ~]# dmesg | grep IOMMU [ 0.000000] Intel-IOMMU: enabled [ 0.021443] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020e60262 ecap f0101a [ 0.021447] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap c9008020660262 ecap f0105a [ 0.021516] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.297980] IOMMU 0 0xfed90000: using Queued invalidation [ 0.297981] IOMMU 1 0xfed91000: using Queued invalidation [ 0.436381] IOMMU: software identity mapping for device 0000:00:00.0 [ 0.436382] IOMMU: software identity mapping for device 0000:00:01.0 [ 0.436383] IOMMU: software identity mapping for device 0000:00:14.0 [ 0.436384] IOMMU: software identity mapping for device 0000:00:16.0 [ 0.436385] IOMMU: software identity mapping for device 0000:00:1a.0 [ 0.436386] IOMMU: software identity mapping for device 0000:00:1b.0 [ 0.436387] IOMMU: software identity mapping for device 0000:00:1c.0 [ 0.436388] IOMMU: software identity mapping for device 0000:00:1c.2 [ 0.436389] IOMMU: software identity mapping for device 0000:00:1d.0 [ 0.436390] IOMMU: software identity mapping for device 0000:00:1f.0 [ 0.436391] IOMMU: software identity mapping for device 0000:00:1f.2 [ 0.436392] IOMMU: software identity mapping for device 0000:00:1f.3 [ 0.436396] IOMMU: software identity mapping for device 0000:01:00.0 [ 0.436397] IOMMU: software identity mapping for device 0000:01:00.1 [ 0.436401] IOMMU: software identity mapping for device 0000:02:00.0 [ 0.436402] IOMMU: Setting RMRR: [ 0.436410] IOMMU: Setting identity map for device 0000:00:02.0 [0xcb800000 - 0xcf9fffff] [ 0.436696] IOMMU: Setting identity map for device 0000:00:1d.0 [0xc9d82000 - 0xc9d8efff] [ 0.436701] IOMMU: Setting identity map for device 0000:00:1a.0 [0xc9d82000 - 0xc9d8efff] [ 0.436702] IOMMU: Setting identity map for device 0000:00:14.0 [0xc9d82000 - 0xc9d8efff] [ 0.436704] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.436705] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff] [root@localhost ~]# </code></pre></div><div class="codebox"><pre><code>[root@localhost ~]# dmesg | grep pci-stub [ 0.000000] Command line: BOOT_IMAGE=/vmlinuz-linux-mainline root=/dev/md1 ro quiet pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on,igfx_on iommu=pt [ 0.000000] Kernel command line: BOOT_IMAGE=/vmlinuz-linux-mainline root=/dev/md1 ro quiet pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on,igfx_on iommu=pt [ 0.705428] pci-stub: add 1002:679A sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.705438] pci-stub 0000:01:00.0: claimed by stub [ 0.705442] pci-stub: add 1002:AAA0 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.705448] pci-stub 0000:01:00.1: claimed by stub [root@localhost ~]# </code></pre></div><div class="codebox"><pre><code>[ 60.412232] vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) [ 60.438127] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x270 [ 60.438134] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x1b@0x2d0</code></pre></div><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -smp 2 \ -bios /usr/share/qemu/bios.bin \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -device virtio-scsi-pci,id=scsi \ -drive if=none,format=raw,file=/root/win_os.raw,id=disk \ -device scsi-hd,drive=disk \ -net nic,model=virtio \ -net tap,ifname=vm-win,script=no,downscript=no</code></pre></div></div></blockquote></div><p>Are you using the lastest builds i posted?&#160; iommu=pt is an amd thing only (i think for intel is intel_iommu=pt) and i have no idea what igfx_on does, it seems myweb has partially got it to work on his intel board (except the bsod which im sure its a seabios thing), perhaps he knows more since i dont have an intel board to test</p></div></blockquote></div><p>I just managed to get it working (using secondary graphics)</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -m 4096 -cpu host \ -smp 2 \ -bios /usr/share/qemu/bios.bin \ -device pci-assign,host=01:00.0 \ -device pci-assign,host=01:00.1</code></pre></div><p>For anyone interested in my hardware;<br />Mobo: B75-D3V, BIOS F8 04/17/2013 (The integrated LAN on this board is utter crap... maybe I have a dodgy board but i&#039;m using an Intel e1000e PCI LAN card to avoid a mountain of problems)<br />CPU: i5-3570<br />GPU: Radeon HD 7950 Gigabyte MSI Twin Fozr III 3GB</p><p>It&#039;s a shame I can&#039;t get the BIOS level working though. If switching to an AMD board would work I would consider it well worthwhile. I just want to make sure I buy one which is confirmed to be working as &quot;upgrading&quot; once will cost enough xD</p><p>I compiled the sources using your scripts today so I think i&#039;m using the latest versions.</p><div class="codebox"><pre><code>[root@localhost ~]# qemu-system-x86_64 --version QEMU emulator version 1.5.1, Copyright (c) 2003-2008 Fabrice Bellard [root@localhost ~]# uname -a Linux localhost 3.10.1-1-mainline #1 SMP PREEMPT Sun Jul 28 17:04:33 IST 2013 x86_64 GNU/Linux</code></pre></div><p>Don&#039;t know how to check the seabios version, but I did use your script to build it.</p><p>I&#039;ve tried using a lot of kernel param combinations but I see no difference. Now i&#039;m using &quot;pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on,igfx_on,pass-through,pt&quot; but it doesn&#039;t look right to me! XD</p></div></blockquote></div><p>Yes, passing through a radeon card as secondary should work (wont work with nvidia though) but&#039;ll probably experience performance degradation/host crashes, if you do, you can solve it using the &quot;eject&quot; method i posted in the guide</p> <p class="postedit"><em>Last edited by nbhs (2013-07-28 22:22:27)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305300">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305303" class="blockpost roweven"> <h2><span><span class="conr">#329</span> <a href="viewtopic.php?pid=1305303#p1305303">2013-07-28 22:23:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@BulliteShot<br />I also just realized you forgot to add &quot;-vga none&quot; using vfio, it wont work without it, also just use intel_iommu=on</p> <p class="postedit"><em>Last edited by nbhs (2013-07-28 22:26:10)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305303">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305308" class="blockpost rowodd"> <h2><span><span class="conr">#330</span> <a href="viewtopic.php?pid=1305308#p1305308">2013-07-28 22:37:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>The acpi bios thing its because of seabios, use my package (1.7.2 patched), the other message is likely because you&#039;re using the wrong kernel without pcie bus reset support</p></div></blockquote></div><p>Yes, You are right - I have no BSOD with 1.7.2 but I could not apply kernel-vfio-vga-reset.patch to Linux kernel from vga-current branch: I get</p><div class="codebox"><pre class="vscroll"><code>Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp.h.rej patching file drivers/pci/hotplug/pciehp_core.c Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file drivers/pci/hotplug/pciehp_core.c.rej patching file drivers/pci/hotplug/pciehp_hpc.c Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp_hpc.c.rej patching file drivers/pci/pci.c Reversed (or previously applied) patch detected! Skipping patch. 5 out of 5 hunks ignored -- saving rejects to file drivers/pci/pci.c.rej patching file drivers/vfio/pci/vfio_pci.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/pci/vfio_pci.c.rej patching file drivers/vfio/vfio.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/vfio.c.rej patching file include/linux/pci.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/pci.h.rej patching file include/linux/pci_hotplug.h Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file include/linux/pci_hotplug.h.rej patching file include/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/vfio.h.rej patching file include/uapi/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file include/uapi/linux/vfio.h.rej ==&gt; ERROR: A failure occurred in prepare(). Aborting...</code></pre></div></div></blockquote></div><p>You dont need to patch that kernel, i extracted the commits from that branch and use it against vanilla kernel, and it probably doesnt work anymore after you reboot the vm because you&#039;re using the wrong kernel (it cant reset the card), i posted a qemu and kernel builds for you on page 13 you can use that or build it yourself</p></div></blockquote></div><p>I use kernel and qemu compiled from your builds posted on page 13. Also I get the same behaviour (black screen after windows reboot) with kernel and qemu compiled from builds posted on the first page: I did not get any warnings about reset, but saw black screen when windows reboot.</p> <p class="postedit"><em>Last edited by myweb (2013-07-28 22:40:20)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305308">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305309" class="blockpost roweven"> <h2><span><span class="conr">#331</span> <a href="viewtopic.php?pid=1305309#p1305309">2013-07-28 22:38:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@nbhs<br />Yes, the host does freeze when the VM is rebooted. I tried the eject script you provided and it works. Thank you.</p><p>I just tried rebooted to try only &quot;intel_iommu=on&quot; and adding &quot;-vga none&quot;. Unfortunately I just see the Qemu console and no input from the graphics card.</p><p>Going to try using the GPU ROM now. I tried it earlier but I can&#039;t remember if I used -vga none&quot;</p> <p class="postedit"><em>Last edited by BulliteShot (2013-07-28 22:38:54)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305309">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305310" class="blockpost rowodd"> <h2><span><span class="conr">#332</span> <a href="viewtopic.php?pid=1305310#p1305310">2013-07-28 22:39:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Yes, You are right - I have no BSOD with 1.7.2 but I could not apply kernel-vfio-vga-reset.patch to Linux kernel from vga-current branch: I get</p><div class="codebox"><pre class="vscroll"><code>Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp.h.rej patching file drivers/pci/hotplug/pciehp_core.c Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file drivers/pci/hotplug/pciehp_core.c.rej patching file drivers/pci/hotplug/pciehp_hpc.c Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp_hpc.c.rej patching file drivers/pci/pci.c Reversed (or previously applied) patch detected! Skipping patch. 5 out of 5 hunks ignored -- saving rejects to file drivers/pci/pci.c.rej patching file drivers/vfio/pci/vfio_pci.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/pci/vfio_pci.c.rej patching file drivers/vfio/vfio.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/vfio.c.rej patching file include/linux/pci.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/pci.h.rej patching file include/linux/pci_hotplug.h Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file include/linux/pci_hotplug.h.rej patching file include/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/vfio.h.rej patching file include/uapi/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file include/uapi/linux/vfio.h.rej ==&gt; ERROR: A failure occurred in prepare(). Aborting...</code></pre></div></div></blockquote></div><p>You dont need to patch that kernel, i extracted the commits from that branch and use it against vanilla kernel, and it probably doesnt work anymore after you reboot the vm because you&#039;re using the wrong kernel (it cant reset the card), i posted a qemu and kernel builds for you on page 13 you can use that or build it yourself</p></div></blockquote></div><p>I use kernel and qemu compiled from your builds posted on page 13. Also I get the same behaviour (black screen after windows reboot) with kernel and qemu builder from builds posted on the first page: I did not get any warnings about reset, but saw black screen when windows reboot.</p></div></blockquote></div><p>have you tried:</p><div class="codebox"><pre><code>modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305310">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305313" class="blockpost roweven"> <h2><span><span class="conr">#333</span> <a href="viewtopic.php?pid=1305313#p1305313">2013-07-28 22:43:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>@nbhs<br />Yes, the host does freeze when the VM is rebooted. I tried the eject script you provided and it works. Thank you.</p><p>I just tried rebooted to try only &quot;intel_iommu=on&quot; and adding &quot;-vga none&quot;. Unfortunately I just see the Qemu console and no input from the graphics card.</p><p>Going to try using the GPU ROM now. I tried it earlier but I can&#039;t remember if I used -vga none&quot;</p></div></blockquote></div><p>well there&#039;s not much benefits from passing it through as primary or secondary other than seeing the seabios boot messages and having to use the eject script thingy</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305313">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305314" class="blockpost rowodd"> <h2><span><span class="conr">#334</span> <a href="viewtopic.php?pid=1305314#p1305314">2013-07-28 22:45:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Myweb<br />You could also try loading the bios rom from a dump too</p> <p class="postedit"><em>Last edited by nbhs (2013-07-28 22:47:32)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305314">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305316" class="blockpost roweven"> <h2><span><span class="conr">#335</span> <a href="viewtopic.php?pid=1305316#p1305316">2013-07-28 22:53:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>You dont need to patch that kernel, i extracted the commits from that branch and use it against vanilla kernel, and it probably doesnt work anymore after you reboot the vm because you&#039;re using the wrong kernel (it cant reset the card), i posted a qemu and kernel builds for you on page 13 you can use that or build it yourself</p></div></blockquote></div><p>I use kernel and qemu compiled from your builds posted on page 13. Also I get the same behaviour (black screen after windows reboot) with kernel and qemu builder from builds posted on the first page: I did not get any warnings about reset, but saw black screen when windows reboot.</p></div></blockquote></div><p>have you tried:</p><div class="codebox"><pre class="vscroll"><code>Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp.h.rej patching file drivers/pci/hotplug/pciehp_core.c Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file drivers/pci/hotplug/pciehp_core.c.rej patching file drivers/pci/hotplug/pciehp_hpc.c Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp_hpc.c.rej patching file drivers/pci/pci.c Reversed (or previously applied) patch detected! Skipping patch. 5 out of 5 hunks ignored -- saving rejects to file drivers/pci/pci.c.rej patching file drivers/vfio/pci/vfio_pci.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/pci/vfio_pci.c.rej patching file drivers/vfio/vfio.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/vfio.c.rej patching file include/linux/pci.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/pci.h.rej patching file include/linux/pci_hotplug.h Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file include/linux/pci_hotplug.h.rej patching file include/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/vfio.h.rej patching file include/uapi/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file include/uapi/linux/vfio.h.rej ==&gt; ERROR: A failure occurred in prepare(). Aborting...</code></pre></div></div></blockquote></div><p>I have tried, but it does not help.</p><div class="codebox"><pre><code>modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>@Myweb<br />You could also try loading the bios rom from a dump too</p></div></blockquote></div><p>Do you mean VGA bios (romfile)?</p><p>Is it correct, that at first I need to fix: Attempt to reset PCI bus for VGA support failed (Device or resource busy).&#160; VGA may not work.?</p> <p class="postedit"><em>Last edited by myweb (2013-07-28 22:56:14)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305316">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305318" class="blockpost rowodd"> <h2><span><span class="conr">#336</span> <a href="viewtopic.php?pid=1305318#p1305318">2013-07-28 22:56:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@nbhs<br />Yes, here is my script running on root.</p><div class="codebox"><pre><code>vfio-bind 0000:01:00.0 0000:01:00.1 modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div><p>The reason I am after primary pass-through is because I&#039;m waiting for Windows to BSOD in the background, reset and then crash the entire system &gt;_&lt; I suppose I can disable automatic rebooting when a BSOD happens but I don&#039;t know how reliable that is.</p><p>If anyone else has a 7950 running on primary pass-through please let me know what CPU &amp; Motherboard you&#039;re using.</p><p>By the way - anyone who is using a KVM or the cirrus VGA to control the mouse and keyboard take a look at Synergy. It works using the network and you can define a hotkey to switch between hosts and copy the clipboard.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305318">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305326" class="blockpost roweven"> <h2><span><span class="conr">#337</span> <a href="viewtopic.php?pid=1305326#p1305326">2013-07-28 23:06:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>It looks like I was wrong with description of issue:<br />Windows installation starts, copy files, reboot VM, Windows installation continue, I see message Getting device ready 0...100% and then screen switched to black.<br />Using VGA bios (romfile) does not help.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305326">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305327" class="blockpost rowodd"> <h2><span><span class="conr">#338</span> <a href="viewtopic.php?pid=1305327#p1305327">2013-07-28 23:06:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>I use kernel and qemu compiled from your builds posted on page 13. Also I get the same behaviour (black screen after windows reboot) with kernel and qemu builder from builds posted on the first page: I did not get any warnings about reset, but saw black screen when windows reboot.</p></div></blockquote></div><p>have you tried:</p><div class="codebox"><pre class="vscroll"><code>Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp.h.rej patching file drivers/pci/hotplug/pciehp_core.c Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file drivers/pci/hotplug/pciehp_core.c.rej patching file drivers/pci/hotplug/pciehp_hpc.c Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp_hpc.c.rej patching file drivers/pci/pci.c Reversed (or previously applied) patch detected! Skipping patch. 5 out of 5 hunks ignored -- saving rejects to file drivers/pci/pci.c.rej patching file drivers/vfio/pci/vfio_pci.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/pci/vfio_pci.c.rej patching file drivers/vfio/vfio.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/vfio.c.rej patching file include/linux/pci.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/pci.h.rej patching file include/linux/pci_hotplug.h Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file include/linux/pci_hotplug.h.rej patching file include/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/vfio.h.rej patching file include/uapi/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file include/uapi/linux/vfio.h.rej ==&gt; ERROR: A failure occurred in prepare(). Aborting...</code></pre></div></div></blockquote></div><p>I have tried, but it does not help.</p><div class="codebox"><pre><code>modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>@Myweb<br />You could also try loading the bios rom from a dump too</p></div></blockquote></div><p>Do you mean VGA bios (romfile)?</p><p>Is it correct, that at first I need to fix: Attempt to reset PCI bus for VGA support failed (Device or resource busy).&#160; VGA may not work.?</p></div></blockquote></div><p>Yes your vga romfile, could you post your uname -a? using the packages posted on the first page does not produce this warning message correct?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305327">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305329" class="blockpost roweven"> <h2><span><span class="conr">#339</span> <a href="viewtopic.php?pid=1305329#p1305329">2013-07-28 23:07:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>It looks like I was wrong with description of issue:<br />Windows installation starts, copy files, reboot VM, Windows installation continue, I see message Getting device ready 0...100% and then screen switched to black.<br />Using VGA bios (romfile) does not help.</p></div></blockquote></div><p>Oh, have you tried to install it first without vga passthrough?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305329">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305331" class="blockpost rowodd"> <h2><span><span class="conr">#340</span> <a href="viewtopic.php?pid=1305331#p1305331">2013-07-28 23:08:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>have you tried:</p><div class="codebox"><pre class="vscroll"><code>Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp.h.rej patching file drivers/pci/hotplug/pciehp_core.c Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file drivers/pci/hotplug/pciehp_core.c.rej patching file drivers/pci/hotplug/pciehp_hpc.c Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file drivers/pci/hotplug/pciehp_hpc.c.rej patching file drivers/pci/pci.c Reversed (or previously applied) patch detected! Skipping patch. 5 out of 5 hunks ignored -- saving rejects to file drivers/pci/pci.c.rej patching file drivers/vfio/pci/vfio_pci.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/pci/vfio_pci.c.rej patching file drivers/vfio/vfio.c Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file drivers/vfio/vfio.c.rej patching file include/linux/pci.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/pci.h.rej patching file include/linux/pci_hotplug.h Reversed (or previously applied) patch detected! Skipping patch. 3 out of 3 hunks ignored -- saving rejects to file include/linux/pci_hotplug.h.rej patching file include/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 1 out of 1 hunk ignored -- saving rejects to file include/linux/vfio.h.rej patching file include/uapi/linux/vfio.h Reversed (or previously applied) patch detected! Skipping patch. 2 out of 2 hunks ignored -- saving rejects to file include/uapi/linux/vfio.h.rej ==&gt; ERROR: A failure occurred in prepare(). Aborting...</code></pre></div></div></blockquote></div><p>I have tried, but it does not help.</p><div class="codebox"><pre><code>modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>@Myweb<br />You could also try loading the bios rom from a dump too</p></div></blockquote></div><p>Do you mean VGA bios (romfile)?</p><p>Is it correct, that at first I need to fix: Attempt to reset PCI bus for VGA support failed (Device or resource busy).&#160; VGA may not work.?</p></div></blockquote></div><p>Yes your vga romfile, could you post your uname -a? using the packages posted on the first page does not produce this warning message correct?</p></div></blockquote></div><p>uname: 3.11.0-1-mainline #1 SMP PREEMPT Sun Jul 28 16:25:59 UTC 2013 x86_64 GNU/Linux<br />using the packages posted on the first page does not produce this warning message - this is correct</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305331">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305334" class="blockpost roweven"> <h2><span><span class="conr">#341</span> <a href="viewtopic.php?pid=1305334#p1305334">2013-07-28 23:10:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>@nbhs<br />Yes, here is my script running on root.</p><div class="codebox"><pre><code>vfio-bind 0000:01:00.0 0000:01:00.1 modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div><p>The reason I am after primary pass-through is because I&#039;m waiting for Windows to BSOD in the background, reset and then crash the entire system &gt;_&lt; I suppose I can disable automatic rebooting when a BSOD happens but I don&#039;t know how reliable that is.</p><p>If anyone else has a 7950 running on primary pass-through please let me know what CPU &amp; Motherboard you&#039;re using.</p><p>By the way - anyone who is using a KVM or the cirrus VGA to control the mouse and keyboard take a look at Synergy. It works using the network and you can define a hotkey to switch between hosts and copy the clipboard.</p></div></blockquote></div><p>Wait i dont understand you&#039;re trying to get windows to BSOD?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305334">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305335" class="blockpost rowodd"> <h2><span><span class="conr">#342</span> <a href="viewtopic.php?pid=1305335#p1305335">2013-07-28 23:11:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>It looks like I was wrong with description of issue:<br />Windows installation starts, copy files, reboot VM, Windows installation continue, I see message Getting device ready 0...100% and then screen switched to black.<br />Using VGA bios (romfile) does not help.</p></div></blockquote></div><p>Oh, have you tried to install it first without vga passthrough?</p></div></blockquote></div><p>Yes, but when I run VM with vga passthrough specified Windows can&#039;t boot and asks to repair. Repair is failed due to it cant find a partition (I gues due to virtio-blk using)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305335">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305337" class="blockpost roweven"> <h2><span><span class="conr">#343</span> <a href="viewtopic.php?pid=1305337#p1305337">2013-07-28 23:14:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>It looks like I was wrong with description of issue:<br />Windows installation starts, copy files, reboot VM, Windows installation continue, I see message Getting device ready 0...100% and then screen switched to black.<br />Using VGA bios (romfile) does not help.</p></div></blockquote></div><p>Oh, have you tried to install it first without vga passthrough?</p></div></blockquote></div><p>Yes, but when I run VM with vga passthrough specified Windows can&#039;t boot and asks to repair. Repair is failed due to it cant find a partition (I gues due to virtio-blk using)</p></div></blockquote></div><p>Have you tried the ide or ahci controller?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305337">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305480" class="blockpost rowodd"> <h2><span><span class="conr">#344</span> <a href="viewtopic.php?pid=1305480#p1305480">2013-07-29 08:49:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Could we have a separate thread to focus on building vfio-reset? This opening post is AMAZINGLY comprehensive for getting things up and running, and it almost feels like the building process would be better served a separate discussion.</p><p>nbhs : Found your 3.9 building package: <a href="http://www.filesend.net/download.php?f=6578e5a368eb5226399c3b468af53600" rel="nofollow">http://www.filesend.net/download.php?f= … 468af53600</a>&#160; &#160;Thanks!</p> <p class="postedit"><em>Last edited by mukiex (2013-07-29 10:08:45)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305480">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305515" class="blockpost roweven"> <h2><span><span class="conr">#345</span> <a href="viewtopic.php?pid=1305515#p1305515">2013-07-29 11:56:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>@nbhs<br />Yes, here is my script running on root.</p><div class="codebox"><pre><code>vfio-bind 0000:01:00.0 0000:01:00.1 modprobe -r kvm_intel modprobe kvm_intel emulate_invalid_guest_state=0</code></pre></div><p>The reason I am after primary pass-through is because I&#039;m waiting for Windows to BSOD in the background, reset and then crash the entire system &gt;_&lt; I suppose I can disable automatic rebooting when a BSOD happens but I don&#039;t know how reliable that is.</p><p>If anyone else has a 7950 running on primary pass-through please let me know what CPU &amp; Motherboard you&#039;re using.</p><p>By the way - anyone who is using a KVM or the cirrus VGA to control the mouse and keyboard take a look at Synergy. It works using the network and you can define a hotkey to switch between hosts and copy the clipboard.</p></div></blockquote></div><p>Wait i dont understand you&#039;re trying to get windows to BSOD?</p></div></blockquote></div><p>No, what I mean is that the eject script is only going to run when the VM is cleanly shutdown.</p><p>If windows crashes or resets due to a BSOD then it&#039;s going to freeze the host when it boots up again.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305515">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305519" class="blockpost rowodd"> <h2><span><span class="conr">#346</span> <a href="viewtopic.php?pid=1305519#p1305519">2013-07-29 12:06:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><blockquote><div><p>linux-mainline.tar.gz (3.10.1)<br />qemu.tar.gz (1.5.1)<br />Or<br />Qemu 1.5.1 patch: qemu-vfio-vga-reset.patch.tar.gz <br />Kernel 3.10.1 patch: kernel-vfio-vga-reset.patch.tar.gz</p></div></blockquote></div><p>I&#039;m using the top 2 files. What&#039;s the difference between the top 2 and the bottom 2 files?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305519">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305528" class="blockpost roweven"> <h2><span><span class="conr">#347</span> <a href="viewtopic.php?pid=1305528#p1305528">2013-07-29 12:43:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><div class="quotebox"><blockquote><div><p>linux-mainline.tar.gz (3.10.1)<br />qemu.tar.gz (1.5.1)<br />Or<br />Qemu 1.5.1 patch: qemu-vfio-vga-reset.patch.tar.gz <br />Kernel 3.10.1 patch: kernel-vfio-vga-reset.patch.tar.gz</p></div></blockquote></div><p>I&#039;m using the top 2 files. What&#039;s the difference between the top 2 and the bottom 2 files?</p></div></blockquote></div><p>Ah ha! I had the same thing!</p><p>One of them ONLY contains the patch. Advanced users only, I guess.</p><p>The other one is patch/PKGbuild setup. That&#039;s probably the one you want. You essentially hop in, run &quot;makepkg&quot;.</p><p>If any dependencies are missing, you pacman -S them. Eventually you&#039;ll a .zx file with the package name. You&#039;ll want to pacman -U that file.<br />I&#039;m really excited here. I really wanna write an uber-noob guide to get this going <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305528">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305534" class="blockpost rowodd"> <h2><span><span class="conr">#348</span> <a href="viewtopic.php?pid=1305534#p1305534">2013-07-29 12:58:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok so I think I installed the right package because I did do the makepkg route. Are these Alex Williamson&#039;s branches?</p> <p class="postedit"><em>Last edited by BulliteShot (2013-07-29 13:02:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305534">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305598" class="blockpost roweven"> <h2><span><span class="conr">#349</span> <a href="viewtopic.php?pid=1305598#p1305598">2013-07-29 16:24:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I can&#039;t win. I got qemu, Seabios, and the kernel built with reset support. Still the same issue. Radeon never initializes unless it&#039;s the primary. Is this a motherboard issue? Would there be a way to fake it by having Linux send an image to it beforehand?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305598">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305630" class="blockpost rowodd"> <h2><span><span class="conr">#350</span> <a href="viewtopic.php?pid=1305630#p1305630">2013-07-29 17:07:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Sounds like you&#039;re having the opposite problem i&#039;m having. I can only get my radon card to work as a secondary adapter using pci-attach (but first you have to enable cirrus VGA and then install the catalyst drivers... after rebooting, the cirrus VGA will stop responding at the windows boot logo and then you&#039;ll the graphics card will take over)</p> <p class="postedit"><em>Last edited by BulliteShot (2013-07-29 17:08:03)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305630">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=13">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=12">12</a> <a href="viewtopic.php?id=162768&amp;p=13">13</a> <strong>14</strong> <a href="viewtopic.php?id=162768&amp;p=15">15</a> <a href="viewtopic.php?id=162768&amp;p=16">16</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=15">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
