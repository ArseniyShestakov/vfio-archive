<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 15) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=15" title="Page 15" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=14" title="Page 14" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=16" title="Page 16" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=14">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=13">13</a> <a href="viewtopic.php?id=162768&amp;p=14">14</a> <strong>15</strong> <a href="viewtopic.php?id=162768&amp;p=16">16</a> <a href="viewtopic.php?id=162768&amp;p=17">17</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=16">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1305674" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#351</span> <a href="viewtopic.php?pid=1305674#p1305674">2013-07-29 19:03:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>Ok so I think I installed the right package because I did do the makepkg route. Are these Alex Williamson&#039;s branches?</p></div></blockquote></div><p>yes</p><div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><p>I can&#039;t win. I got qemu, Seabios, and the kernel built with reset support. Still the same issue. Radeon never initializes unless it&#039;s the primary. Is this a motherboard issue? Would there be a way to fake it by having Linux send an image to it beforehand?</p></div></blockquote></div><p>Most amd boards + cpu work fine, it seems people with intel are having some problems, though some have been successful with or without (with another discrete card) the IGP as primary</p><div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><p>Could we have a separate thread to focus on building vfio-reset? This opening post is AMAZINGLY comprehensive for getting things up and running, and it almost feels like the building process would be better served a separate discussion.</p><p>nbhs : Found your 3.9 building package: <a href="http://www.filesend.net/download.php?f=6578e5a368eb5226399c3b468af53600" rel="nofollow">http://www.filesend.net/download.php?f= … 468af53600</a>&#160; &#160;Thanks!</p></div></blockquote></div><p>You should try the lastest packages i posted i might have forgotten a comit from alex tree</p><p>the building process is on the arch wiki, like you mentioned, unpack the file then run </p><div class="codebox"><pre><code>makepkg -s</code></pre></div><br /><p>then:</p><div class="codebox"><pre><code>pacman -U something_packagever_arch.pkg.tar.xz</code></pre></div> <p class="postedit"><em>Last edited by nbhs (2013-07-29 19:12:40)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305674">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305679" class="blockpost roweven"> <h2><span><span class="conr">#352</span> <a href="viewtopic.php?pid=1305679#p1305679">2013-07-29 19:11:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73469">Evonat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-24</span></dd> <dd><span>Posts: 12</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m not sure if I should ask my question here, but since the &quot;problem&quot; is somewhat related and others may have had the same doubts, I hope this is the right place.</p><p>I&#039;ve got 3 video cards:<br />- Club3D Radeon HD 4770 750MHz (Memory: 512MB GDDR5 3200MHz)<br />- XFX Radeon HD 6570 650MHz (Memory: 1GB DDR3 1300MHz)<br />- Sapphire Radeon HD 5450 650MHz (Memory: 1GB DDR3 1300MHz)</p><p>I want to mount them on the same motherboard (ASRock Z87 Extreme6) and passthrough them to different VMs: the 4770 to my main Windows guest, the 6570 to my main Linux guest and I&#039;ll be leaving the 5450 to the host.</p><p>The thing is, the only configuration the 3 PCIe (3.0, though all the cards are 2.0) slots in my motherboard can assume when all of them are used is x8 x4 x4. Should I even care and put the most powerful card (that would be the 4770) in the x8 slot or even that can&#039;t possibly hope to saturate a x8 slot, and so I should just place them in the more aestetically pleasing/cooling efficient order?</p><p>Also I read that dual/tri monitor configurations use much more PCIe bandwidth, and I would connect at least two displays to the 5450, even though the cards that would be rendering things for those same displays would be the other two, the 5450 being only the one to which they are directly connected (since I understand the monitors must be connected to the host&#039;s graphic card, or I&#039;m wrong?). So should I put the 5450 in the x8 slot after all?</p><p>Yeah I&#039;m pretty confused here. Hope you can clarify all this mess for me.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305679">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305681" class="blockpost rowodd"> <h2><span><span class="conr">#353</span> <a href="viewtopic.php?pid=1305681#p1305681">2013-07-29 19:15:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Evonat wrote:</cite><blockquote><div><p>I&#039;m not sure if I should ask my question here, but since the &quot;problem&quot; is somewhat related and others may have had the same doubts, I hope this is the right place.</p><p>I&#039;ve got 3 video cards:<br />- Club3D Radeon HD 4770 750MHz (Memory: 512MB GDDR5 3200MHz)<br />- XFX Radeon HD 6570 650MHz (Memory: 1GB DDR3 1300MHz)<br />- Sapphire Radeon HD 5450 650MHz (Memory: 1GB DDR3 1300MHz)</p><p>I want to mount them on the same motherboard (ASRock Z87 Extreme6) and passthrough them to different VMs: the 4770 to my main Windows guest, the 6570 to my main Linux guest and I&#039;ll be leaving the 5450 to the host.</p><p>The thing is, the only configuration the 3 PCIe (3.0, though all the cards are 2.0) slots in my motherboard can assume when all of them are used is x8 x4 x4. Should I even care and put the most powerful card (that would be the 4770) in the x8 slot or even that can&#039;t possibly hope to saturate a x8 slot, and so I should just place them in the more aestetically pleasing/cooling efficient order?</p><p>Also I read that dual/tri monitor configurations use much more PCIe bandwidth, and I would connect at least two displays to the 5450, even though the cards that would be rendering things for those same displays would be the other two, the 5450 being only the one to which they are directly connected (since I understand the monitors must be connected to the host&#039;s graphic card, or I&#039;m wrong?). So should I put the 5450 in the x8 slot after all?</p><p>Yeah I&#039;m pretty confused here. Hope you can clarify all this mess for me.</p></div></blockquote></div><p>You should probably start with 2 cards and see if it works <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by nbhs (2013-07-29 19:23:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305681">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305687" class="blockpost roweven"> <h2><span><span class="conr">#354</span> <a href="viewtopic.php?pid=1305687#p1305687">2013-07-29 19:29:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73469">Evonat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-24</span></dd> <dd><span>Posts: 12</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well yeah, I&#039;m creating problems when I don&#039;t even know if it&#039;ll work in the first place. But what can I do, I still haven&#039;t got hold of the necessary equipment, aside from the video cards that I already own. Sorry. <img src="https://bbs.archlinux.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p><p>But disregarding for a moment whether it&#039;ll work or not, just to satisfy my curiosity, would it be more ideal to put the most powerful card in the fastest slot, or reserve it for the host&#039;s card to which the displays are connected to?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305687">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305690" class="blockpost rowodd"> <h2><span><span class="conr">#355</span> <a href="viewtopic.php?pid=1305690#p1305690">2013-07-29 19:34:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Evonat wrote:</cite><blockquote><div><p>Well yeah, I&#039;m creating problems when I don&#039;t even know if it&#039;ll work in the first place. But what can I do, I still haven&#039;t got hold of the necessary equipment, aside from the video cards that I already own. Sorry. <img src="https://bbs.archlinux.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p><p>But disregarding for a moment whether it&#039;ll work or not, just to satisfy my curiosity, would it be more ideal to put the most powerful card in the fastest slot, or reserve it for the host&#039;s card to which the displays are connected to?</p></div></blockquote></div><p>Well you&#039;ll need the first slot for the host gpu so unless you can get it to work with the igp, you should put the 5450 on the first one, also why would you want another linux guest?</p> <p class="postedit"><em>Last edited by nbhs (2013-07-29 19:35:12)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305690">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305716" class="blockpost roweven"> <h2><span><span class="conr">#356</span> <a href="viewtopic.php?pid=1305716#p1305716">2013-07-29 21:11:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>It seems if I set my primary card in the host&#039;s BIOS to PCI instead of Integrated then ArchLinux boots on the host using my radeon card! :s Then when I boot the VM, the display goes blank. Since I&#039;ve blacklisted and used pci-stub driver then why is ArchLinux still using the radeon card?</p><div class="codebox"><pre><code>[root@localhost ~]# cat /etc/modprobe.d/blacklist.conf blacklist radeon</code></pre></div><p>lspci -v...</p><div class="codebox"><pre class="vscroll"><code>01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti PRO [Radeon HD 7950] (prog-if 00 [VGA controller]) Subsystem: Micro-Star International Co., Ltd. Device 2761 Flags: fast devsel, IRQ 16 Memory at e0000000 (64-bit, prefetchable) [size=256M] Memory at f7e00000 (64-bit, non-prefetchable) [size=256K] I/O ports at e000 [size=256] Expansion ROM at f7e40000 [disabled] [size=128K] Capabilities: [48] Vendor Specific Information: Len=08 &lt;?&gt; Capabilities: [50] Power Management version 3 Capabilities: [58] Express Legacy Endpoint, MSI 00 Capabilities: [a0] MSI: Enable- Count=1/1 Maskable- 64bit+ Capabilities: [100] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150] Advanced Error Reporting Capabilities: [270] #19 Capabilities: [2b0] Address Translation Service (ATS) Capabilities: [2c0] #13 Capabilities: [2d0] #1b Kernel driver in use: vfio-pci Kernel modules: radeon 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT HDMI Audio [Radeon HD 7970 Series] Subsystem: Micro-Star International Co., Ltd. Device aaa0 Flags: bus master, fast devsel, latency 0, IRQ 17 Memory at f7e60000 (64-bit, non-prefetchable) [size=16K] Capabilities: [48] Vendor Specific Information: Len=08 &lt;?&gt; Capabilities: [50] Power Management version 3 Capabilities: [58] Express Legacy Endpoint, MSI 00 Capabilities: [a0] MSI: Enable- Count=1/1 Maskable- 64bit+ Capabilities: [100] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150] Advanced Error Reporting Kernel driver in use: vfio-pci Kernel modules: snd_hda_intel</code></pre></div><p>It seems to still be using the Kernel module... is it possible that this is causing the problem?</p><div class="codebox"><pre><code>[root@localhost ~]# dmesg | grep Kernel [ 0.000000] Kernel command line: BOOT_IMAGE=/vmlinuz-linux-mainline root=/dev/md1 ro quiet pci-stub.ids=1002:679a,1002:aaa0 intel_iommu=on</code></pre></div> <p class="postedit"><em>Last edited by BulliteShot (2013-07-29 21:13:10)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305716">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305719" class="blockpost rowodd"> <h2><span><span class="conr">#357</span> <a href="viewtopic.php?pid=1305719#p1305719">2013-07-29 21:13:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73506">GizmoChicken</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-25</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73506">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Evonat wrote:</cite><blockquote><div><p>Well yeah, I&#039;m creating problems when I don&#039;t even know if it&#039;ll work in the first place. But what can I do, I still haven&#039;t got hold of the necessary equipment, aside from the video cards that I already own. Sorry. <img src="https://bbs.archlinux.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p><p>But disregarding for a moment whether it&#039;ll work or not, just to satisfy my curiosity, would it be more ideal to put the most powerful card in the fastest slot, or reserve it for the host&#039;s card to which the displays are connected to?</p></div></blockquote></div><p>Well you&#039;ll need the first slot for the host gpu so unless you can get it to work with the igp, you should put the 5450 on the first one.</p></div></blockquote></div><p>If I remember correctly, some Gigabyte motherboards allow for selecting which of PCIe slot boots first, or at least they did at one time.&#160; So with a board that allows for such a selection, the host gpu could be placed in a slower slot.</p><p>Also, I once inadvertently added the card in my first PCIe slot to the pci-stub list in grub cmdline.&#160; To my surprise, the card in the second PCIe slot displayed my host on boot.&#160; Although such an approach certainly is not optimal, it might be worth a try.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305719">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305949" class="blockpost roweven"> <h2><span><span class="conr">#358</span> <a href="viewtopic.php?pid=1305949#p1305949">2013-07-30 14:04:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>Sounds like you&#039;re having the opposite problem i&#039;m having. I can only get my radon card to work as a secondary adapter using pci-attach (but first you have to enable cirrus VGA and then install the catalyst drivers... after rebooting, the cirrus VGA will stop responding at the windows boot logo and then you&#039;ll the graphics card will take over)</p></div></blockquote></div><p>Can you do pci-attach with the q35 motherboard? I&#039;ll gladly take a workaround.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305949">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305951" class="blockpost rowodd"> <h2><span><span class="conr">#359</span> <a href="viewtopic.php?pid=1305951#p1305951">2013-07-30 14:06:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>Sounds like you&#039;re having the opposite problem i&#039;m having. I can only get my radon card to work as a secondary adapter using pci-attach (but first you have to enable cirrus VGA and then install the catalyst drivers... after rebooting, the cirrus VGA will stop responding at the windows boot logo and then you&#039;ll the graphics card will take over)</p></div></blockquote></div><p>Can you do pci-attach with the q35 motherboard? I&#039;ll gladly take a workaround.</p></div></blockquote></div><p>No sorry, just the default motherboard. If I set using q35 then the Windows device manager complains that the device doesn&#039;t have enough resources to start.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305951">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1305973" class="blockpost roweven"> <h2><span><span class="conr">#360</span> <a href="viewtopic.php?pid=1305973#p1305973">2013-07-30 15:00:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>No sorry, just the default motherboard. If I set using q35 then the Windows device manager complains that the device doesn&#039;t have enough resources to start.</p></div></blockquote></div><p>Yeah, that&#039;s where I&#039;m at.</p><p>The most aggravating part is the Qemu provides ZERO logs to figure out why it&#039;s not starting up. </p><p>Another bit I noticed is that when Intel is primary and the Radeon card is secondary, not only dose the image not show up on-screen, NOTHING LOADS. There is zero hard drive activity. If I could find out why that&#039;d be great, but I get NOTHING for error messages. Heck, I can&#039;t find ANY Qemu logs, ANYWHERE. dmesg gives me this:</p><div class="codebox"><pre><code>[ 2956.122793] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x270 [ 2956.122800] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x1b@0x2d0</code></pre></div> <p class="postedit"><em>Last edited by mukiex (2013-07-30 15:04:08)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1305973">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306011" class="blockpost rowodd"> <h2><span><span class="conr">#361</span> <a href="viewtopic.php?pid=1306011#p1306011">2013-07-30 16:36:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well the damn thing just randomly blue screened while I was running Steam chat on the VM and watching youtube on the host (not demanding in the slightest)... so i&#039;m gonna try plugging in a 2nd card and disable the Intel integrated graphics to see what happens.</p><p>I couldn&#039;t see the error because I couldn&#039;t open the VNC fast enough.. but it was an ati----.sys driver that caused the BSOD</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306011">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306025" class="blockpost roweven"> <h2><span><span class="conr">#362</span> <a href="viewtopic.php?pid=1306025#p1306025">2013-07-30 17:47:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>And it WORKS! Here&#039;s what I did...</p><p>1) Went into the BIOS and Disabled Integrated Graphics<br />2) Still in the BIOS, changed the primary graphics from Integrated to PCI<br />3) Saves changes and powered off my system.<br />4) Moved my 7950 GPU to my 2nd slot on the mobo.<br />5) Inserted a 7790 GPU from my girlfriend&#039;s PC into the 1st slot on my mobo.<br />6) Booted, changed my kernel pci-stub params to match the PCI ID of my 7950 then rebooted.<br />7) Host archlinux booted on the 7790 in my first slot. Booted the VM using the q35 method and the BIOS loaded on the screen attached to the 7950.</p><p>So I can confirm using the Intel Integrated Graphics breaks the VFIO passthrough but if you use a 2nd card and disable the integrated graphics then it should work!</p><p>I&#039;m getting a BSOD in windows now but I bet that&#039;s because it doesn&#039;t like the change to the q35 motherboard. I&#039;m currently reinstalling it.</p> <p class="postedit"><em>Last edited by BulliteShot (2013-07-30 17:48:36)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306025">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306045" class="blockpost rowodd"> <h2><span><span class="conr">#363</span> <a href="viewtopic.php?pid=1306045#p1306045">2013-07-30 18:48:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I GOT IT!!!</p><p>Okay, so this is the most bum-backwards solution you will ever see, but:</p><p>- Boot with Intel GFX as primary<br />- Bind Intel graphics to PCI-STUB but NOT VFIO (the latter will lock your system)<br />- SUCCESS (graphics card turns on without issue)</p><p>And now to fix my USB binding... can I bind USB 3.0?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306045">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306055" class="blockpost roweven"> <h2><span><span class="conr">#364</span> <a href="viewtopic.php?pid=1306055#p1306055">2013-07-30 19:12:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Awsome guys nice to see it works, yes you can bind your usb3 controller thats why i do with my vm</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306055">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306057" class="blockpost rowodd"> <h2><span><span class="conr">#365</span> <a href="viewtopic.php?pid=1306057#p1306057">2013-07-30 19:14:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><p>I GOT IT!!!</p><p>Okay, so this is the most bum-backwards solution you will ever see, but:</p><p>- Boot with Intel GFX as primary<br />- Bind Intel graphics to PCI-STUB but NOT VFIO (the latter will lock your system)<br />- SUCCESS (graphics card turns on without issue)</p><p>And now to fix my USB binding... can I bind USB 3.0?</p></div></blockquote></div><p>Wait so you&#039;re using binding the primary card ( the igp ) to pci-stub that that allowed it to work?, It might be that the intel driver is the one causing problems then, take into consideration that the host wont use the it and you&#039;ll lose 3d acceleration</p> <p class="postedit"><em>Last edited by nbhs (2013-07-30 19:20:15)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306057">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306058" class="blockpost roweven"> <h2><span><span class="conr">#366</span> <a href="viewtopic.php?pid=1306058#p1306058">2013-07-30 19:16:13</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>IF you got it working please post how and your hardware specs so we can all know (i might even get an intel setup)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306058">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306070" class="blockpost rowodd"> <h2><span><span class="conr">#367</span> <a href="viewtopic.php?pid=1306070#p1306070">2013-07-30 20:12:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><p>I GOT IT!!!</p><p>Okay, so this is the most bum-backwards solution you will ever see, but:</p><p>- Boot with Intel GFX as primary<br />- Bind Intel graphics to PCI-STUB but NOT VFIO (the latter will lock your system)<br />- SUCCESS (graphics card turns on without issue)</p><p>And now to fix my USB binding... can I bind USB 3.0?</p></div></blockquote></div><p>mukiex, you sweet sweet genius! <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> That fixed it for me too!</p><p>@nbhs: My board is B75-D3V</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306070">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306072" class="blockpost roweven"> <h2><span><span class="conr">#368</span> <a href="viewtopic.php?pid=1306072#p1306072">2013-07-30 20:16:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><p>I GOT IT!!!</p><p>Okay, so this is the most bum-backwards solution you will ever see, but:</p><p>- Boot with Intel GFX as primary<br />- Bind Intel graphics to PCI-STUB but NOT VFIO (the latter will lock your system)<br />- SUCCESS (graphics card turns on without issue)</p><p>And now to fix my USB binding... can I bind USB 3.0?</p></div></blockquote></div><p>mukiex, you sweet sweet genius! <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> That fixed it for me too!</p><p>@nbhs: My board is B75-D3V</p></div></blockquote></div><p>So it looks like the intel driver its the one causing problems</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306072">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306074" class="blockpost rowodd"> <h2><span><span class="conr">#369</span> <a href="viewtopic.php?pid=1306074#p1306074">2013-07-30 20:29:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73558">mukiex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-27</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:mukisign@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>It&#039;s not the intel driver causing issues: I found this fix originally on two separate discrete cards.</p><p>The Intel card isn&#039;t being loaded on the guest, but if it&#039;s not bound to pci-stub, the guests actual card won&#039;t ever turn on.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306074">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306076" class="blockpost roweven"> <h2><span><span class="conr">#370</span> <a href="viewtopic.php?pid=1306076#p1306076">2013-07-30 20:31:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mukiex wrote:</cite><blockquote><div><p>It&#039;s not the intel driver causing issues: I found this fix originally on two separate discrete cards.</p><p>The Intel card isn&#039;t being loaded on the guest, but if it&#039;s not bound to pci-stub, the guests actual card won&#039;t ever turn on.</p></div></blockquote></div><p>Have you tried blacklisting the intel driver instead of binding it to pci-stub?</p> <p class="postedit"><em>Last edited by nbhs (2013-07-30 20:32:13)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306076">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306106" class="blockpost rowodd"> <h2><span><span class="conr">#371</span> <a href="viewtopic.php?pid=1306106#p1306106">2013-07-30 22:08:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>When I install the ATI drivers I get a BSOD at boot with atikmpag.sys <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306106">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306108" class="blockpost roweven"> <h2><span><span class="conr">#372</span> <a href="viewtopic.php?pid=1306108#p1306108">2013-07-30 22:16:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>When I install the ATI drivers I get a BSOD at boot with atikmpag.sys <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></div></blockquote></div><p>Are you using the lastest version? im using catalyst 12.10 with win8, no bsods or anything, try installing the drivers manually from the device manager</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306108">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306111" class="blockpost rowodd"> <h2><span><span class="conr">#373</span> <a href="viewtopic.php?pid=1306111#p1306111">2013-07-30 22:26:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73593">BulliteShot</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-28</span></dd> <dd><span>Posts: 26</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:josh@servebyte.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Driver installed is 12.104.0.0 along with Catalyst 13.4 and I&#039;m using Windows 7 in the VM. I&#039;ll mess around with the drivers and see if it likes the BETA or 12.10 versions.</p><p>Windows boots fine with the standard driver, but thats not much better than the standard VGA in Qemu to be honest <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306111">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306112" class="blockpost roweven"> <h2><span><span class="conr">#374</span> <a href="viewtopic.php?pid=1306112#p1306112">2013-07-30 22:28:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>BulliteShot wrote:</cite><blockquote><div><p>Driver installed is 12.104.0.0 along with Catalyst 13.4 and I&#039;m using Windows 7 in the VM. I&#039;ll mess around with the drivers and see if it likes the BETA or 12.10 versions.</p><p>Windows boots fine with the standard driver, but thats not much better than the standard VGA in Qemu to be honest <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p></div></blockquote></div><p>Try catalyst 12.10, works for me</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306112">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1306117" class="blockpost rowodd"> <h2><span><span class="conr">#375</span> <a href="viewtopic.php?pid=1306117#p1306117">2013-07-30 22:52:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>teekay wrote:</cite><blockquote><div><p>* set the controller to AHCI mode in UEFI/BIOS (actually no UEFI here, the Gigabyte has a legacy BIOS mode)<br />* added its vendor:id to pci-stub.ids boot parameter (as said, it&#039;s completely useless for the host anyways, so make the AHCI driver ignore it completely)<br />* passed it through to the qemu VM using &quot;-device vfio-pci,host=${SATA_DEVICE},bus=pcie.0&quot; (actually it shows up with two entries in lscpi, one of wich seems to be for the E-SATA ports (they also do not work in the Linux host, same issues))<br />* Win7 automatically installed some ATA drivers for it (I didn&#039;t download anything anywhere)<br />* it works, without issues</p></div></blockquote></div><p>Sorry for the late reply and thanks for your attemp to help, I tried to replicate your setup already a few days ago but kind of gave up (it works anyways…). The Windows 7 install disk doesn&#039;t recognize the device and (an already installed version of) Windows 8 BSODs after bootup, I can write doen the exact error message in case anyone knows what these mean.<br />What I didn&#039;t try is a fresh, &quot;untouched&quot; in a qcow file and attach it there. And for some reason I think I didn&#039;t try linux guests. <br />I&#039;ll probably try those options if I find the motivation, or I might replace 2 of the 1TB disks in my PC with one 2 or 3TB disk (I should do that anyways), attach the SSD to the amd controller and use virtio.<br />Maybe someday, someone will work around this in the amd-iommu driver or something else will happen. If I look at my graphics drivers problems on my notebook with an e350 apu (amd graphics), the problems I had with it in the last ~1.5 years are mostly solved by switching to the open source driver, which wasn&#039;t ready back then. What I want to say is that waiting or doing nothing is sometimes the best solution to non-critical issues.</p> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1306117">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=14">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=13">13</a> <a href="viewtopic.php?id=162768&amp;p=14">14</a> <strong>15</strong> <a href="viewtopic.php?id=162768&amp;p=16">16</a> <a href="viewtopic.php?id=162768&amp;p=17">17</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=16">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
