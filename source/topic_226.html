<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 226) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=226" title="Page 226" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=225" title="Page 225" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=227" title="Page 227" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=225">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=224">224</a> <a href="viewtopic.php?id=162768&amp;p=225">225</a> <strong>226</strong> <a href="viewtopic.php?id=162768&amp;p=227">227</a> <a href="viewtopic.php?id=162768&amp;p=228">228</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=227">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1544829" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5626</span> <a href="viewtopic.php?pid=1544829#p1544829">2015-07-15 11:59:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71471">dRaiser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Poland</span></dd> <dd><span>Registered: 2013-05-20</span></dd> <dd><span>Posts: 49</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:pw@draiser.net">Email</a></span> <span class="website"><a href="http://draiser.net/en" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, how hard and/or unrealistic would be to run program with second GPU (bound to vfio) on host, when it&#039;s not used by any VM? I&#039;m thinking of approach similar to bumblebe. Is it possible at all? I assume it would need to detach GPU from vfio, run app using it (not leaving host X server), attach to vfio again.</p><p>I was planning to set up second machine (aside from Windows one) with Linux, but it&#039;s giving me hell. With nearly same config as Windows one. Installed everything, it&#039;s using dedicated Nvidia 960, but with low res and disabled OpenGL on Nouveau and with &quot;nvidia gpu at pci:0:8:0 is not supported by NVIDIA driver&quot; with Nvidia binary. I&#039;d like to run some GPU-heavy apps on this dedicated GPU.</p><p>I was posting my config some time ago, but just as reminder. It&#039;s running perfectly with Windows guest.</p><div class="codebox"><pre class="vscroll"><code>&lt;domain type=&#039;kvm&#039; xmlns:qemu=&#039;http://libvirt.org/schemas/domain/qemu/1.0&#039;&gt; &lt;name&gt;wintendo&lt;/name&gt; &lt;uuid&gt;bf6bda0e-2664-4bab-998a-aac4dc255c83&lt;/uuid&gt; &lt;memory unit=&#039;KiB&#039;&gt;3145728&lt;/memory&gt; &lt;currentMemory unit=&#039;KiB&#039;&gt;3145728&lt;/currentMemory&gt; &lt;vcpu placement=&#039;static&#039;&gt;4&lt;/vcpu&gt; &lt;os&gt; &lt;type arch=&#039;x86_64&#039; machine=&#039;pc-i440fx-2.1&#039;&gt;hvm&lt;/type&gt; &lt;boot dev=&#039;hd&#039;/&gt; &lt;/os&gt; &lt;features&gt; &lt;acpi/&gt; &lt;apic/&gt; &lt;pae/&gt; &lt;hyperv&gt; &lt;relaxed state=&#039;off&#039;/&gt; &lt;vapic state=&#039;off&#039;/&gt; &lt;spinlocks state=&#039;off&#039;/&gt; &lt;/hyperv&gt; &lt;kvm&gt; &lt;hidden state=&#039;on&#039;/&gt; &lt;/kvm&gt; &lt;/features&gt; &lt;cpu mode=&#039;host-model&#039;&gt; &lt;model fallback=&#039;allow&#039;/&gt; &lt;topology sockets=&#039;1&#039; cores=&#039;4&#039; threads=&#039;1&#039;/&gt; &lt;/cpu&gt; &lt;clock offset=&#039;localtime&#039;&gt; &lt;timer name=&#039;rtc&#039; tickpolicy=&#039;catchup&#039;/&gt; &lt;timer name=&#039;pit&#039; tickpolicy=&#039;delay&#039;/&gt; &lt;timer name=&#039;hpet&#039; present=&#039;no&#039;/&gt; &lt;timer name=&#039;hypervclock&#039; present=&#039;no&#039;/&gt; &lt;/clock&gt; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt; &lt;on_reboot&gt;restart&lt;/on_reboot&gt; &lt;on_crash&gt;restart&lt;/on_crash&gt; &lt;pm&gt; &lt;suspend-to-mem enabled=&#039;no&#039;/&gt; &lt;suspend-to-disk enabled=&#039;no&#039;/&gt; &lt;/pm&gt; &lt;devices&gt; &lt;emulator&gt;/usr/sbin/qemu-system-x86_64&lt;/emulator&gt; &lt;disk type=&#039;block&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source dev=&#039;/dev/sr0&#039;/&gt; &lt;target dev=&#039;hdb&#039; bus=&#039;ide&#039;/&gt; &lt;readonly/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;1&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/mnt/d2/50.raw&#039;/&gt; &lt;target dev=&#039;vdd&#039; bus=&#039;virtio&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0a&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/mnt/d2/d2.img&#039;/&gt; &lt;target dev=&#039;vde&#039; bus=&#039;virtio&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x09&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-ehci1&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x7&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci1&#039;&gt; &lt;master startport=&#039;0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x0&#039; multifunction=&#039;on&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci2&#039;&gt; &lt;master startport=&#039;2&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x1&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci3&#039;&gt; &lt;master startport=&#039;4&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x2&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;pci&#039; index=&#039;0&#039; model=&#039;pci-root&#039;/&gt; &lt;controller type=&#039;ide&#039; index=&#039;0&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x01&#039; function=&#039;0x1&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;virtio-serial&#039; index=&#039;0&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x06&#039; function=&#039;0x0&#039;/&gt; &lt;/controller&gt; &lt;interface type=&#039;bridge&#039;&gt; &lt;mac address=&#039;52:54:00:17:65:a1&#039;/&gt; &lt;source bridge=&#039;br0&#039;/&gt; &lt;model type=&#039;rtl8139&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x03&#039; function=&#039;0x0&#039;/&gt; &lt;/interface&gt; &lt;serial type=&#039;pty&#039;&gt; &lt;target port=&#039;0&#039;/&gt; &lt;/serial&gt; &lt;console type=&#039;pty&#039;&gt; &lt;target type=&#039;serial&#039; port=&#039;0&#039;/&gt; &lt;/console&gt; &lt;channel type=&#039;spicevmc&#039;&gt; &lt;target type=&#039;virtio&#039; name=&#039;com.redhat.spice.0&#039;/&gt; &lt;address type=&#039;virtio-serial&#039; controller=&#039;0&#039; bus=&#039;0&#039; port=&#039;1&#039;/&gt; &lt;/channel&gt; &lt;input type=&#039;tablet&#039; bus=&#039;usb&#039;/&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1b&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0b&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;vendor id=&#039;0x1532&#039;/&gt; &lt;product id=&#039;0x0016&#039;/&gt; &lt;/source&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x00&#039; function=&#039;0x1&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x04&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;memballoon model=&#039;virtio&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x07&#039; function=&#039;0x0&#039;/&gt; &lt;/memballoon&gt; &lt;/devices&gt; &lt;qemu:commandline&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=02:00.0,multifunction=on,x-vga=on&#039;/&gt; &lt;/qemu:commandline&gt; &lt;/domain&gt;</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1544829">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1544839" class="blockpost roweven"> <h2><span><span class="conr">#5627</span> <a href="viewtopic.php?pid=1544839#p1544839">2015-07-15 13:22:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Bronek wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>@ Well , that is strange . &quot;options vfio-pci ids=&quot; didn&#039;t work on both of my NVIDIAs until I added pci-stub to the top of the boot chain . Anyway it is working like a charm now and I can finally get rid of the vfio-bind script .</p></div></blockquote></div><p>@Denso could it be that, when pci-stub is not loaded, noveau driver loaded/probed your card thus preventing vfio-pci from working correctly, and loading pci-stub prevents this from happening (as is its purpose)?</p></div></blockquote></div><p>That&#039;s not possible . I&#039;m not using pci-stub in any shape or form . Not in the boot loader config files or any other place , I just added it to the modules to be loaded automatically at boot .</p><p>I am blacklisting nouveau from the begining so it is not the issue , and when I do lspci -k , there is no driver attached to these cards at all .</p><p>I believe Alex said that vfio-pci ids have similar code to pci-stub ids . Maybe vfio-pci &quot;thinks&quot; that pci-stub is ALWAYS built statically , which is not the case on Arch .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1544839">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1544891" class="blockpost rowodd"> <h2><span><span class="conr">#5628</span> <a href="viewtopic.php?pid=1544891#p1544891">2015-07-15 15:45:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84564">tuxuser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-08-23</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=84564">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I upgraded my video card to nvidia gtx 970 which pushed me to upgrade the drivers -- now getting error code 43.</p><p>I tried -cpu host,hv_time,kvm=off but looks like I need to add more hv_ options, just not sure what all needs to be added.</p><p>I don&#039;t use libvirt so does anyone mind posting your kvm command line -cpu parameters?</p><p>Thanks.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1544891">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1544892" class="blockpost roweven"> <h2><span><span class="conr">#5629</span> <a href="viewtopic.php?pid=1544892#p1544892">2015-07-15 15:47:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>tuxuser wrote:</cite><blockquote><div><p>I upgraded my video card to nvidia gtx 970 which pushed me to upgrade the drivers -- now getting error code 43.</p><p>I tried -cpu host,hv_time,kvm=off but looks like I need to add more hv_ options, just not sure what all needs to be added.</p><p>I don&#039;t use libvirt so does anyone mind posting your kvm command line -cpu parameters?</p><p>Thanks.</p></div></blockquote></div><p><strong>Remove</strong> hv_ option, not add</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1544892">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1544899" class="blockpost rowodd"> <h2><span><span class="conr">#5630</span> <a href="viewtopic.php?pid=1544899#p1544899">2015-07-15 16:05:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84564">tuxuser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-08-23</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=84564">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>tuxuser wrote:</cite><blockquote><div><p>I upgraded my video card to nvidia gtx 970 which pushed me to upgrade the drivers -- now getting error code 43.</p><p>I tried -cpu host,hv_time,kvm=off but looks like I need to add more hv_ options, just not sure what all needs to be added.</p><p>I don&#039;t use libvirt so does anyone mind posting your kvm command line -cpu parameters?</p><p>Thanks.</p></div></blockquote></div><p><strong>Remove</strong> hv_ option, not add</p></div></blockquote></div><p>I meant to type hv_time=off above.&#160; &#160;My assumption had been, per recent discussions, that one these options might be defaulting to on when not specified.&#160; I&#039;ll recheck this tonight starting with only -cpu host,kvm=off and moving onward</p><p>These are the options I know of hv_time hv_relaxed hv_vapic hv_spinlocks (though i don&#039;t know of a proper value for hv_spinlocks so i assume this would be disabled by default)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1544899">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1544984" class="blockpost roweven"> <h2><span><span class="conr">#5631</span> <a href="viewtopic.php?pid=1544984#p1544984">2015-07-16 04:18:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Windows 10 + OVMF + virtio-blk-pci is a no-go .</p><p>It always throws a BSOD in the installation stage (kmode_exception_not_handled) .</p><p>I&#039;ve tried using 3 different builds (10041 , 10074 , 10240) all BSOD at the same spot with the same error .</p><p>dmesg throws tons of these :</p><div class="codebox"><pre class="vscroll"><code>[Thu Jul 16 07:10:04 2015] kvm_get_msr_common: 5728 callbacks suppressed [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm_get_msr_common: 9839 callbacks suppressed [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm_get_msr_common: 6502 callbacks suppressed [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm_get_msr_common: 36388 callbacks suppressed [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309</code></pre></div><p>QEMU command :</p><div class="codebox"><pre><code>qemu-system-x86_64 -name winbeta -nographic \ -enable-kvm -m 2G -cpu host,kvm=off -smp sockets=1,cores=2,threads=1 \ -vga std -nodefconfig \ -drive if=pflash,format=raw,readonly,file=/usr/share/ovmf/x64/ovmf_code_x64.bin \ -drive if=pflash,format=raw,file=/SSD/ovmf_winbeta.bin \ -drive file=/SSD/Win_Beta.img,cache=none,if=none,format=raw,id=drive0,aio=native \ -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 \ -device virtio-scsi-pci,id=scsi \ -drive file=/SSD/WinBeta.iso,id=iso_install,if=none,format=raw \ -device scsi-cd,drive=iso_install \ -cdrom /SSD/virtio.iso \ -netdev bridge,id=br0 -device virtio-net-pci,netdev=br0,id=nic0,mac=B8:A7:2A:6E:05:B2 \ -vnc :1 \ -localtime \ -usbdevice tablet \ -monitor unix:/tmp/vm_winbeta,server,nowait &amp;</code></pre></div><p>Anyone using Windows 10 ?</p> <p class="postedit"><em>Last edited by Denso (2015-07-16 04:30:21)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1544984">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545002" class="blockpost rowodd"> <h2><span><span class="conr">#5632</span> <a href="viewtopic.php?pid=1545002#p1545002">2015-07-16 07:34:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>For windows 10 use <br />echo 1 &gt; /sys/module/kvm/parameters/ignore_msrs</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545002">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545016" class="blockpost roweven"> <h2><span><span class="conr">#5633</span> <a href="viewtopic.php?pid=1545016#p1545016">2015-07-16 09:17:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>slis wrote:</cite><blockquote><div><p>For windows 10 use <br />echo 1 &gt; /sys/module/kvm/parameters/ignore_msrs</p></div></blockquote></div><p>Hi Slis . Unfortunately it is already set to ignore msrs in modprobe.d conf file :</p><div class="codebox"><pre><code>options kvm ignore_msrs=1</code></pre></div><p>I had to make sure it is indeed set to ignore msrs :</p><div class="codebox"><pre><code>root ~ cat /sys/module/kvm/parameters/ignore_msrs Y</code></pre></div><p>Still no go <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Thanks <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by Denso (2015-07-16 09:17:57)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545016">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545039" class="blockpost rowodd"> <h2><span><span class="conr">#5634</span> <a href="viewtopic.php?pid=1545039#p1545039">2015-07-16 13:10:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Windows 10 + OVMF + virtio-blk-pci is a no-go .</p><p>It always throws a BSOD in the installation stage (kmode_exception_not_handled) .</p><p>I&#039;ve tried using 3 different builds (10041 , 10074 , 10240) all BSOD at the same spot with the same error .</p><p>dmesg throws tons of these :</p><div class="codebox"><pre class="vscroll"><code>[Thu Jul 16 07:10:04 2015] kvm_get_msr_common: 5728 callbacks suppressed [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:04 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm_get_msr_common: 9839 callbacks suppressed [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:09 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm_get_msr_common: 6502 callbacks suppressed [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:14 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm_get_msr_common: 36388 callbacks suppressed [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30a [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu0 ignored rdmsr: 0x30b [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309 [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30a [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x30b [Thu Jul 16 07:10:19 2015] kvm [31145]: vcpu1 ignored rdmsr: 0x309</code></pre></div><p>QEMU command :</p><div class="codebox"><pre><code>qemu-system-x86_64 -name winbeta -nographic \ -enable-kvm -m 2G -cpu host,kvm=off -smp sockets=1,cores=2,threads=1 \ -vga std -nodefconfig \ -drive if=pflash,format=raw,readonly,file=/usr/share/ovmf/x64/ovmf_code_x64.bin \ -drive if=pflash,format=raw,file=/SSD/ovmf_winbeta.bin \ -drive file=/SSD/Win_Beta.img,cache=none,if=none,format=raw,id=drive0,aio=native \ -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 \ -device virtio-scsi-pci,id=scsi \ -drive file=/SSD/WinBeta.iso,id=iso_install,if=none,format=raw \ -device scsi-cd,drive=iso_install \ -cdrom /SSD/virtio.iso \ -netdev bridge,id=br0 -device virtio-net-pci,netdev=br0,id=nic0,mac=B8:A7:2A:6E:05:B2 \ -vnc :1 \ -localtime \ -usbdevice tablet \ -monitor unix:/tmp/vm_winbeta,server,nowait &amp;</code></pre></div><p>Anyone using Windows 10 ?</p></div></blockquote></div><p>I get the same issue in my Win8.1 install; any time I try to use OVMF, I get a kmode_etc. bsod. Using libvirt and qemu both have this issue.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545039">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545040" class="blockpost roweven"> <h2><span><span class="conr">#5635</span> <a href="viewtopic.php?pid=1545040#p1545040">2015-07-16 13:15:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72824">evujumenuk</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-02</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Borderlands folks, I think this is the problem you&#039;re trying to describe:</p><p><a href="https://dl.dropboxusercontent.com/u/19831938/borderlands2-baremetal.jpg" rel="nofollow">https://dl.dropboxusercontent.com/u/198 … emetal.jpg</a></p><p><a href="https://dl.dropboxusercontent.com/u/19831938/borderlands2-vm.jpg" rel="nofollow">https://dl.dropboxusercontent.com/u/198 … ds2-vm.jpg</a></p><p>This vantage point in the training area seems to give me a consistently low FPS and high latency and seems invariant to the lighting.&#160; The VM shows about 1/3rd the FPS and 3x the latency.&#160; What is that latency actually measuring anyway?&#160; These are separate win7x64 installs on the same Haswell/GTX660 hardware with Nvidia Experience optimizing the game in both (highest settings for all).</p><p>I don&#039;t have any solutions yet, but it&#039;s good to understand the problem.&#160; I did run the VM with vfio debugging turned on and I&#039;m not seeing any excessive hits to the card, which means we&#039;re not bouncing out to userspace regularly as a result of the assigned devices (GPU + audio + NIC in this case).&#160; I see a write to 0x88154 at a rate of about 10/s.&#160; This is an area we must trap because it&#039;s an mmio mirror of PCI config space.&#160; That happens regardless of what&#039;s going on in the game and also happens at a basic desktop, so if it was causing any trouble I&#039;d expect it would be across the board and not select games.</p><p>I&#039;m suspicious of USB passthrough, but my only evidence is that hitting the escape key in the game is not as responsive as bare metal and often requires a second hit.&#160; Assignment of the USB controller might be an option, but didn&#039;t just work in my first attempt, maybe an issue with windows drivers.</p><p>EDIT: game reported latency appears to just be the inverse of FPS, so it&#039;s SPF (seconds per frame)</p><p>EDIT2: Further analysis (special thanks to Paolo Bonzini) shows two issues that are hurting performance here.&#160; First is a known issue with Windows that it pounds on the time source, whether it&#039;s ACPI PM timer or HPET.&#160; Code just recently went upstream (kernel and qemu) that enables a Hyper-V enlightened timer that can help to reduce this.&#160; To enable it add &quot;hv-time&quot; to your -cpu option, ex. -cpu Haswell,hv-time&#160; This gives me about 20% more FPS and is likely to help performance of any game running in a Windows guest.&#160; The second problem is that we see extensive use of the processor debug registers.&#160; Each move to or from these registers traps into the hypvervisor and they appear to be batched into a context switch function, so we have a burst of them all at once.&#160; I&#039;ve submitted a support ticket to gearbox software to see if they have any suggestions to avoid these registers.</p></div></blockquote></div><p>Hello performance!&#160; Patches were just posted upstream to do lazy tracking of the debug registers.&#160; With &quot;-cpu Haswell,hv-time&quot; and <a href="http://www.spinics.net/lists/kernel/msg1695823.html" rel="nofollow">these patches</a>, this is what I can get now (better than 80% of bare metal):</p><p><a href="https://dl.dropboxusercontent.com/u/19831938/borderlands2-vm-new.jpg" rel="nofollow">https://dl.dropboxusercontent.com/u/198 … vm-new.jpg</a></p><p>This initial implementation is Intel-only, but hopefully we can do the same for AMD.</p></div></blockquote></div><p>So, what is the best current alternative to hv-time? Can&#039;t really use that with Nvidia drivers.</p><p>/USE PMTIMER?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545040">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545046" class="blockpost rowodd"> <h2><span><span class="conr">#5636</span> <a href="viewtopic.php?pid=1545046#p1545046">2015-07-16 14:00:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71471">dRaiser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Poland</span></dd> <dd><span>Registered: 2013-05-20</span></dd> <dd><span>Posts: 49</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:pw@draiser.net">Email</a></span> <span class="website"><a href="http://draiser.net/en" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>dRaiser wrote:</cite><blockquote><div><p>Hi, how hard and/or unrealistic would be to run program with second GPU (bound to vfio) on host, when it&#039;s not used by any VM? I&#039;m thinking of approach similar to bumblebe. Is it possible at all? I assume it would need to detach GPU from vfio, run app using it (not leaving host X server), attach to vfio again.</p><p>I was planning to set up second machine (aside from Windows one) with Linux, but it&#039;s giving me hell. With nearly same config as Windows one. Installed everything, it&#039;s using dedicated Nvidia 960, but with low res and disabled OpenGL on Nouveau and with &quot;nvidia gpu at pci:0:8:0 is not supported by NVIDIA driver&quot; with Nvidia binary. I&#039;d like to run some GPU-heavy apps on this dedicated GPU.</p><p>I was posting my config some time ago, but just as reminder. It&#039;s running perfectly with Windows guest.</p><div class="codebox"><pre class="vscroll"><code>&lt;domain type=&#039;kvm&#039; xmlns:qemu=&#039;http://libvirt.org/schemas/domain/qemu/1.0&#039;&gt; &lt;name&gt;wintendo&lt;/name&gt; &lt;uuid&gt;bf6bda0e-2664-4bab-998a-aac4dc255c83&lt;/uuid&gt; &lt;memory unit=&#039;KiB&#039;&gt;3145728&lt;/memory&gt; &lt;currentMemory unit=&#039;KiB&#039;&gt;3145728&lt;/currentMemory&gt; &lt;vcpu placement=&#039;static&#039;&gt;4&lt;/vcpu&gt; &lt;os&gt; &lt;type arch=&#039;x86_64&#039; machine=&#039;pc-i440fx-2.1&#039;&gt;hvm&lt;/type&gt; &lt;boot dev=&#039;hd&#039;/&gt; &lt;/os&gt; &lt;features&gt; &lt;acpi/&gt; &lt;apic/&gt; &lt;pae/&gt; &lt;hyperv&gt; &lt;relaxed state=&#039;off&#039;/&gt; &lt;vapic state=&#039;off&#039;/&gt; &lt;spinlocks state=&#039;off&#039;/&gt; &lt;/hyperv&gt; &lt;kvm&gt; &lt;hidden state=&#039;on&#039;/&gt; &lt;/kvm&gt; &lt;/features&gt; &lt;cpu mode=&#039;host-model&#039;&gt; &lt;model fallback=&#039;allow&#039;/&gt; &lt;topology sockets=&#039;1&#039; cores=&#039;4&#039; threads=&#039;1&#039;/&gt; &lt;/cpu&gt; &lt;clock offset=&#039;localtime&#039;&gt; &lt;timer name=&#039;rtc&#039; tickpolicy=&#039;catchup&#039;/&gt; &lt;timer name=&#039;pit&#039; tickpolicy=&#039;delay&#039;/&gt; &lt;timer name=&#039;hpet&#039; present=&#039;no&#039;/&gt; &lt;timer name=&#039;hypervclock&#039; present=&#039;no&#039;/&gt; &lt;/clock&gt; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt; &lt;on_reboot&gt;restart&lt;/on_reboot&gt; &lt;on_crash&gt;restart&lt;/on_crash&gt; &lt;pm&gt; &lt;suspend-to-mem enabled=&#039;no&#039;/&gt; &lt;suspend-to-disk enabled=&#039;no&#039;/&gt; &lt;/pm&gt; &lt;devices&gt; &lt;emulator&gt;/usr/sbin/qemu-system-x86_64&lt;/emulator&gt; &lt;disk type=&#039;block&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source dev=&#039;/dev/sr0&#039;/&gt; &lt;target dev=&#039;hdb&#039; bus=&#039;ide&#039;/&gt; &lt;readonly/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;1&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/mnt/d2/50.raw&#039;/&gt; &lt;target dev=&#039;vdd&#039; bus=&#039;virtio&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0a&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/mnt/d2/d2.img&#039;/&gt; &lt;target dev=&#039;vde&#039; bus=&#039;virtio&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x09&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-ehci1&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x7&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci1&#039;&gt; &lt;master startport=&#039;0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x0&#039; multifunction=&#039;on&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci2&#039;&gt; &lt;master startport=&#039;2&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x1&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci3&#039;&gt; &lt;master startport=&#039;4&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x2&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;pci&#039; index=&#039;0&#039; model=&#039;pci-root&#039;/&gt; &lt;controller type=&#039;ide&#039; index=&#039;0&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x01&#039; function=&#039;0x1&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;virtio-serial&#039; index=&#039;0&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x06&#039; function=&#039;0x0&#039;/&gt; &lt;/controller&gt; &lt;interface type=&#039;bridge&#039;&gt; &lt;mac address=&#039;52:54:00:17:65:a1&#039;/&gt; &lt;source bridge=&#039;br0&#039;/&gt; &lt;model type=&#039;rtl8139&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x03&#039; function=&#039;0x0&#039;/&gt; &lt;/interface&gt; &lt;serial type=&#039;pty&#039;&gt; &lt;target port=&#039;0&#039;/&gt; &lt;/serial&gt; &lt;console type=&#039;pty&#039;&gt; &lt;target type=&#039;serial&#039; port=&#039;0&#039;/&gt; &lt;/console&gt; &lt;channel type=&#039;spicevmc&#039;&gt; &lt;target type=&#039;virtio&#039; name=&#039;com.redhat.spice.0&#039;/&gt; &lt;address type=&#039;virtio-serial&#039; controller=&#039;0&#039; bus=&#039;0&#039; port=&#039;1&#039;/&gt; &lt;/channel&gt; &lt;input type=&#039;tablet&#039; bus=&#039;usb&#039;/&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1b&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0b&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;vendor id=&#039;0x1532&#039;/&gt; &lt;product id=&#039;0x0016&#039;/&gt; &lt;/source&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x00&#039; function=&#039;0x1&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x04&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;redirdev bus=&#039;usb&#039; type=&#039;spicevmc&#039;&gt; &lt;/redirdev&gt; &lt;memballoon model=&#039;virtio&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x07&#039; function=&#039;0x0&#039;/&gt; &lt;/memballoon&gt; &lt;/devices&gt; &lt;qemu:commandline&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=02:00.0,multifunction=on,x-vga=on&#039;/&gt; &lt;/qemu:commandline&gt; &lt;/domain&gt;</code></pre></div></div></blockquote></div><p>I&#039;ve tried VM with Arch instead of Linux Mint and it&#039;s fine on Nouveau - still no luck with nvidia (latest is 352). Is Nvidia blocking it also for Linux guests? I&#039;m going to try some older versions.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545046">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545064" class="blockpost roweven"> <h2><span><span class="conr">#5637</span> <a href="viewtopic.php?pid=1545064#p1545064">2015-07-16 15:27:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Yeah, they also block it linux guests...<br />Can someone with 980 try soft mod (with fake id patch on qemu) to quadro m5000 and try latest geforce driver with hyper-v on? <br />For me 680 works with latest geforce drivers and hyper-v, as grid k2 with faked id in qemu.<br />And about enabling NVFBC, without geforce experience, you can use GRID SDK, there is EnableNVFBC.exe that does same thing as switching shadowplay on/off, to enable better encoder for streaming.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545064">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545077" class="blockpost rowodd"> <h2><span><span class="conr">#5638</span> <a href="viewtopic.php?pid=1545077#p1545077">2015-07-16 16:00:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Windows 10 + OVMF + virtio-blk-pci is a no-go .<br />...<br />Anyone using Windows 10 ?</p></div></blockquote></div><p>I have been using Windows 10 for many months now, and just last night updated to the latest 10240 Build (RTM Supposidlt). I don&#039;t know what virtio-blk-pci is though? Is it like mapping a disk to the VM? I use Raw images.</p><div class="quotebox"><cite>slis wrote:</cite><blockquote><div><p>Can someone with 980 try soft mod (with fake id patch on qemu) to quadro m5000 and try latest geforce driver with hyper-v on?</p></div></blockquote></div><p>Slis, can you please explain or link to where you can change the PCI IDs via Qemu? I have a GTX760 that i&#039;d like to soft-mod via Qemu. I also have a GTX465 which I soft-modded via rom hacks into a Quadro 5k. It worked fine with ESXi but the performance isn&#039;t near my GTX760 for gaming... I would love to have my 760 be represented as a Quadro so I can enable the HyperV Flags - assuming it will help performance.</p><p>Also, I have been using the latest Windows 10 NVIDIA Drivers provided by Windows Update without issue.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545077">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545080" class="blockpost roweven"> <h2><span><span class="conr">#5639</span> <a href="viewtopic.php?pid=1545080#p1545080">2015-07-16 16:26:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>The_Moves wrote:</cite><blockquote><div><p>I have been using Windows 10 for many months now, and just last night updated to the latest 10240 Build (RTM Supposidlt). I don&#039;t know what virtio-blk-pci is though? Is it like mapping a disk to the VM? I use Raw images.</p></div></blockquote></div><p> virtio-blk-pci is a paravirtualized disk controller , and you attach your RAW image to it . its supposed to give better performance than other controllers in QEMU .</p><p>What alternatives should I use that would give good performance ?</p> <p class="postedit"><em>Last edited by Denso (2015-07-16 16:28:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545080">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545085" class="blockpost rowodd"> <h2><span><span class="conr">#5640</span> <a href="viewtopic.php?pid=1545085#p1545085">2015-07-16 16:57:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>The_Moves wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Windows 10 + OVMF + virtio-blk-pci is a no-go .<br />...<br />Anyone using Windows 10 ?</p></div></blockquote></div><p>I have been using Windows 10 for many months now, and just last night updated to the latest 10240 Build (RTM Supposidlt). I don&#039;t know what virtio-blk-pci is though? Is it like mapping a disk to the VM? I use Raw images.</p><div class="quotebox"><cite>slis wrote:</cite><blockquote><div><p>Can someone with 980 try soft mod (with fake id patch on qemu) to quadro m5000 and try latest geforce driver with hyper-v on?</p></div></blockquote></div><p>Slis, can you please explain or link to where you can change the PCI IDs via Qemu? I have a GTX760 that i&#039;d like to soft-mod via Qemu. I also have a GTX465 which I soft-modded via rom hacks into a Quadro 5k. It worked fine with ESXi but the performance isn&#039;t near my GTX760 for gaming... I would love to have my 760 be represented as a Quadro so I can enable the HyperV Flags - assuming it will help performance.</p><p>Also, I have been using the latest Windows 10 NVIDIA Drivers provided by Windows Update without issue.</p></div></blockquote></div><p>Patch is there...<br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1475170#p1475170" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 0#p1475170</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545085">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545113" class="blockpost roweven"> <h2><span><span class="conr">#5641</span> <a href="viewtopic.php?pid=1545113#p1545113">2015-07-16 18:21:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@The_Moves :</p><p>Can you share your Windows 10 QEMU command line ?</p><p>Many thanks !</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545113">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545116" class="blockpost rowodd"> <h2><span><span class="conr">#5642</span> <a href="viewtopic.php?pid=1545116#p1545116">2015-07-16 18:27:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>The_Moves wrote:</cite><blockquote><div><p>I have been using Windows 10 for many months now, and just last night updated to the latest 10240 Build (RTM Supposidlt). I don&#039;t know what virtio-blk-pci is though? Is it like mapping a disk to the VM? I use Raw images.</p></div></blockquote></div><p> virtio-blk-pci is a paravirtualized disk controller , and you attach your RAW image to it . its supposed to give better performance than other controllers in QEMU .</p><p>What alternatives should I use that would give good performance ?</p></div></blockquote></div><p>I use virtio-blk-scsi. It gave me best results in atto disk benchmark...</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545116">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545123" class="blockpost roweven"> <h2><span><span class="conr">#5643</span> <a href="viewtopic.php?pid=1545123#p1545123">2015-07-16 18:38:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Duelist :</p><p>I&#039;m not entirely sure that it is the virtio-blk-pci controller that is the culprit . But I&#039;m sure that these happen when that BSOD occur :</p><div class="codebox"><pre class="vscroll"><code>[Thu Jul 16 20:28:22 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:37 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:37 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:37 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:14 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:19 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:19 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:19 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:33 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:38 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639</code></pre></div><p>Unfortuanetly , setting &quot;options kvm ignore_msrs=1&quot; didn&#039;t solve anything .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545123">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545133" class="blockpost rowodd"> <h2><span><span class="conr">#5644</span> <a href="viewtopic.php?pid=1545133#p1545133">2015-07-16 19:10:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>@Duelist :</p><p>I&#039;m not entirely sure that it is the virtio-blk-pci controller that is the culprit . But I&#039;m sure that these happen when that BSOD occur :</p><div class="codebox"><pre class="vscroll"><code>[Thu Jul 16 20:28:22 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:22 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:27 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:32 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:37 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:37 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:37 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:43 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:48 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:53 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:28:58 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:03 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:08 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:13 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:14 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:18 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:19 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:19 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:19 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:23 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:24 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:28 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:29 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:33 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:33 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:34 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:38 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:38 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:39 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:44 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:49 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:54 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm_get_msr_common: 92 callbacks suppressed [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:29:59 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm_get_msr_common: 91 callbacks suppressed [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639 [Thu Jul 16 20:30:04 2015] kvm [674]: vcpu0 ignored rdmsr: 0x639</code></pre></div><p>Unfortuanetly , setting &quot;options kvm ignore_msrs=1&quot; didn&#039;t solve anything .</p></div></blockquote></div><p>All it says is win10 asked CPU&#039;s MSR number 0x639, and the CPU didn&#039;t respond.<br />Try determining what is this MSR and why windows would want to read it. There&#039;s no one-line fix, i suppose.</p><br /><p>BTW:<br />Catalyst 15.7 broke on the second boot of the VM. It blanks the screen after greeting the user, and it refuses to delete itself - the installer is just doing nothing.<br />I don&#039;t know what caused this, system updates(i don&#039;t recall any important) or the catalyst itself. Beware.<br />UPD:<br />What the hell... Alright, my catalyst broke, i&#039;ve booted into safe mode and turned off my GPUs in device manager, booted with QXL and uninstalled catalyst via windows control panel...<br />I&#039;m 100% sure it said &quot;remove all versions&quot;...<br />VM reboot later, the GPU fires up, device manager shows HD7750(BOTH!), aero works...<br />3D WORKS! Crossfire is offline, though. There are some amd driver processes in taskmanager left.<br />I&#039;ve UNINSTALLED THE DRIVERS.<br />What did just happen?<br />protip: uninstall 14.12 before installing 15.7<br />protip2: do NOT install 15.7. It breaks my VM, making even the host system crash(it just shuts itself down, like in the dark old ages).</p> <p class="postedit"><em>Last edited by Duelist (2015-07-16 20:29:41)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545133">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545143" class="blockpost roweven"> <h2><span><span class="conr">#5645</span> <a href="viewtopic.php?pid=1545143#p1545143">2015-07-16 19:32:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>@The_Moves :</p><p>Can you share your Windows 10 QEMU command line ?</p><p>Many thanks !</p></div></blockquote></div><p>I&#039;m actually using libvirt/virsh to manage my VMs, here is my XML:</p><p><a href="http://pastebin.com/3kKMEq0F" rel="nofollow">http://pastebin.com/3kKMEq0F</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545143">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545151" class="blockpost rowodd"> <h2><span><span class="conr">#5646</span> <a href="viewtopic.php?pid=1545151#p1545151">2015-07-16 20:04:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Duelist &amp; @The_Moves :</p><p>Thank you both , I guess I&#039;ll wait for Windows 10 to be GA and see what would happen then <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Update :</p><p>Tried Seabios , it works like butter with Windows 10 . It is OVMF-only issue .</p> <p class="postedit"><em>Last edited by Denso (2015-07-16 20:48:27)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545151">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545207" class="blockpost roweven"> <h2><span><span class="conr">#5647</span> <a href="viewtopic.php?pid=1545207#p1545207">2015-07-16 22:53:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92337">MonopolyMan</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-05</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92337">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So all of a sudden my VM stopped working (same script and xml has worked before). I&#039;m getting &quot;vfio: error: device 0000:01:00.0 is already attached&quot; when I try to start the VM. </p><br /><p>The script I use:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash xrandr --output VGA1 --off set -x modprobe vfio-pci if [ -e /sys/bus/pci/devices/0000:01:00.0/driver ]; then echo 0000:01:00.0 &gt; /sys/bus/pci/devices/0000:01:00.0/driver/unbind fi echo 1002 6810 &gt; /sys/bus/pci/drivers/vfio-pci/new_id if [ -e /sys/bus/pci/devices/0000:01:00.1/driver ]; then echo 0000:01:00.1 &gt; /sys/bus/pci/devices/0000:01:00.1/driver/unbind fi echo 1002 AAB0 &gt; /sys/bus/pci/drivers/vfio-pci/new_id killall synergy killall synergyc sudo synergyc 192.168.1.14:24800 virsh start gamingvm set +x sleep 5 xrandr --output HDMI3 --off xrandr --output HDMI3 --mode 1600x900 exit 0</code></pre></div><p>The error I get when trying to run:</p><div class="codebox"><pre><code>error: Failed to start domain gamingvm error: internal error: early end of file from monitor: possible problem: qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: error: device 0000:01:00.0 is already attached qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545207">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545208" class="blockpost rowodd"> <h2><span><span class="conr">#5648</span> <a href="viewtopic.php?pid=1545208#p1545208">2015-07-16 23:01:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>MonopolyMan wrote:</cite><blockquote><div><p>So all of a sudden my VM stopped working (same script and xml has worked before). I&#039;m getting &quot;vfio: error: device 0000:01:00.0 is already attached&quot; when I try to start the VM.</p></div></blockquote></div><p>Have you tried turning it off and on again?&#160; The libvirt log (/var/log/libvirt/qemu/gamingvm.log) might provide some clues.&#160; Are you sure the XML doesn&#039;t list the device twice, maybe once via &lt;hostdev&gt; and again via &lt;qemu:args&gt;?&#160; That&#039;s as far as I&#039;ll guess without logs or xml.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545208">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545210" class="blockpost roweven"> <h2><span><span class="conr">#5649</span> <a href="viewtopic.php?pid=1545210#p1545210">2015-07-16 23:19:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>@Duelist &amp; @The_Moves :</p><p>Thank you both , I guess I&#039;ll wait for Windows 10 to be GA and see what would happen then <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Update :</p><p>Tried Seabios , it works like butter with Windows 10 . It is OVMF-only issue .</p></div></blockquote></div><p>I have the same issue with almost the same configuration. I tried uninstalling the nvidia driver from Windows 10, and now I get no issues with code error 43 and I have a full 1080P screen resolution.<br />I am now running stock Windows 10 nvidia driver on build 9926. (not Nvidia driver, but the Windows driver).</p> <p class="postedit"><em>Last edited by trimm (2015-07-16 23:21:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545210">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545211" class="blockpost rowodd"> <h2><span><span class="conr">#5650</span> <a href="viewtopic.php?pid=1545211#p1545211">2015-07-16 23:27:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92337">MonopolyMan</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-05</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92337">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>MonopolyMan wrote:</cite><blockquote><div><p>So all of a sudden my VM stopped working (same script and xml has worked before). I&#039;m getting &quot;vfio: error: device 0000:01:00.0 is already attached&quot; when I try to start the VM.</p></div></blockquote></div><p>Have you tried turning it off and on again?&#160; The libvirt log (/var/log/libvirt/qemu/gamingvm.log) might provide some clues.&#160; Are you sure the XML doesn&#039;t list the device twice, maybe once via &lt;hostdev&gt; and again via &lt;qemu:args&gt;?&#160; That&#039;s as far as I&#039;ll guess without logs or xml.</p></div></blockquote></div><p>The logs didn&#039;t provide any more information and I triple checked the XML before posting. Oddly enough, i just redefined the VM and it worked again. I didn&#039;t even change anything... </p><p>Regardless, thanks for your help.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545211">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=225">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=224">224</a> <a href="viewtopic.php?id=162768&amp;p=225">225</a> <strong>226</strong> <a href="viewtopic.php?id=162768&amp;p=227">227</a> <a href="viewtopic.php?id=162768&amp;p=228">228</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=227">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
