<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 152) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=152" title="Page 152" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=151" title="Page 151" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=153" title="Page 153" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=151">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=150">150</a> <a href="viewtopic.php?id=162768&amp;p=151">151</a> <strong>152</strong> <a href="viewtopic.php?id=162768&amp;p=153">153</a> <a href="viewtopic.php?id=162768&amp;p=154">154</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=153">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1491367" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#3776</span> <a href="viewtopic.php?pid=1491367#p1491367">2015-01-08 15:50:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>ok, I see. So more than 4 isn&#039;t gonna work. </p><p>I will use 4 then:</p><div class="codebox"><pre><code> &lt;vcpu placement=&#039;static&#039;&gt;4&lt;/vcpu&gt; &lt;cputune&gt; &lt;vcpupin vcpu=&#039;0&#039; cpuset=&#039;0&#039;/&gt; &lt;vcpupin vcpu=&#039;1&#039; cpuset=&#039;1&#039;/&gt; &lt;vcpupin vcpu=&#039;2&#039; cpuset=&#039;2&#039;/&gt; &lt;vcpupin vcpu=&#039;3&#039; cpuset=&#039;3&#039;/&gt; &lt;/cputune&gt;</code></pre></div><p>that looks simple. Hopefully I understood correctly.</p> <p class="postedit"><em>Last edited by 4kGamer (2015-01-08 15:52:20)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491367">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491368" class="blockpost roweven"> <h2><span><span class="conr">#3777</span> <a href="viewtopic.php?pid=1491368#p1491368">2015-01-08 15:51:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>sorry, double post</p> <p class="postedit"><em>Last edited by 4kGamer (2015-01-08 15:51:55)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491368">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491372" class="blockpost rowodd"> <h2><span><span class="conr">#3778</span> <a href="viewtopic.php?pid=1491372#p1491372">2015-01-08 15:57:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>And change</p><div class="codebox"><pre><code> &lt;cpu mode=&#039;host-passthrough&#039;&gt; &lt;topology sockets=&#039;1&#039; cores=&#039;4&#039; threads=&#039;2&#039;/&gt; &lt;/cpu&gt;</code></pre></div><p>to threads=&#039;1&#039;</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491372">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491375" class="blockpost roweven"> <h2><span><span class="conr">#3779</span> <a href="viewtopic.php?pid=1491375#p1491375">2015-01-08 16:01:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>ah yes, of course. Thank you Alex. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491375">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491381" class="blockpost rowodd"> <h2><span><span class="conr">#3780</span> <a href="viewtopic.php?pid=1491381#p1491381">2015-01-08 16:22:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>... although I don&#039;t know how they came up with those cpuset values.&#160; AFAIK, cpusets are the same as processor numbers, where the cores are generally enumerated before the threads.&#160; Thus on a 4-core w/ threads processor, 0-3 are cores and 4-7 are threads, where 4 is the thread sibling of 0, 5 of 1, etc.</p></div></blockquote></div><p>this whole core/socket/thread/sibling really gave me a headache...<br />i found out - as you described, that 0/4 is actually my first core, 1/5 2nd and so on; <br />Its new to me that e.g. 4 is only &quot;25%&quot; of the power - relative to 0 ... but anyways it didn&#039;t matter to me because my goal was to represent my real cpu as close as possible to the guest.</p><p>hence the&#160; threads=&#039;2&#039; and the exact pinning as i posted (2-6-3-7) - that way i was quite sure that windows also sees that 2 of the cores are &quot;thread&quot; cores - and hopefully does &quot;the right thing&quot; regarding its internal scheduling.</p><p>benchmarks backed this: guest with vcpus pinned this way:<br />root@pc:/usr/local/sbin&gt; cat vcpu-2637.sh<br />virsh vcpupin windows7 --vcpu 0 2<br />virsh vcpupin windows7 --vcpu 1 6<br />virsh vcpupin windows7 --vcpu 2 3<br />virsh vcpupin windows7 --vcpu 3 7</p><p>was faster in &quot;wprime&quot; thread benchmarking than guest with vcpus pinned that way:</p><p>root@pc:/usr/local/sbin&gt; cat vcpu-2367.sh<br />virsh vcpupin windows7 --vcpu 0 2<br />virsh vcpupin windows7 --vcpu 1 3<br />virsh vcpupin windows7 --vcpu 2 6<br />virsh vcpupin windows7 --vcpu 3 7</p><br /><p>so i concluded, a) windows &quot;knows&quot; about thread-cores b) my pinning was ok</p><p>HTH<br />Greetings</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 16:28:25)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491381">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491392" class="blockpost roweven"> <h2><span><span class="conr">#3781</span> <a href="viewtopic.php?pid=1491392#p1491392">2015-01-08 17:00:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>... although I don&#039;t know how they came up with those cpuset values.&#160; AFAIK, cpusets are the same as processor numbers, where the cores are generally enumerated before the threads.&#160; Thus on a 4-core w/ threads processor, 0-3 are cores and 4-7 are threads, where 4 is the thread sibling of 0, 5 of 1, etc.</p></div></blockquote></div><p>this whole core/socket/thread/sibling really gave me a headache...<br />i found out - as you described, that 0/4 is actually my first core, 1/5 2nd and so on; <br />Its new to me that e.g. 4 is only &quot;25%&quot; of the power - relative to 0 ... but anyways it didn&#039;t matter to me because my goal was to represent my real cpu as close as possible to the guest.</p><p>hence the&#160; threads=&#039;2&#039; and the excact pinning as i posted - that way i was quite sure that windows also sees that 2 of the cores are &quot;thread&quot; cores - and hopefully does &quot;the right thing&quot; regarding its internal scheduling.</p></div></blockquote></div><p>Aha, I missed that you used threads=2, so that makes a bit more sense.&#160; So you&#039;re actually trying to represent exactly half of your CPU to the guest.</p><div class="quotebox"><blockquote><div><p>benchmarks backed this: guest with vcpus pinned this way:<br />root@pc:/usr/local/sbin&gt; cat vcpu-2637.sh<br />virsh vcpupin windows7 --vcpu 0 2<br />virsh vcpupin windows7 --vcpu 1 6<br />virsh vcpupin windows7 --vcpu 2 3<br />virsh vcpupin windows7 --vcpu 3 7</p></div></blockquote></div><p>So let&#039;s look at your actual mapping:</p><p>cpuset: core,thread<br />2: 2,0<br />6: 2,1<br />3: 3,0<br />7: 3,1</p><p>ie. core/thread/core/thread</p><div class="quotebox"><blockquote><div><p>was faster in &quot;wprime&quot; thread benchmarking than guest with vcpus pinned that way:</p><p>root@pc:/usr/local/sbin&gt; cat vcpu-2367.sh<br />virsh vcpupin windows7 --vcpu 0 2<br />virsh vcpupin windows7 --vcpu 1 3<br />virsh vcpupin windows7 --vcpu 2 6<br />virsh vcpupin windows7 --vcpu 3 7</p><br /><p>so i concluded, a) windows &quot;knows&quot; about thread-cores b) my pinning was ok</p></div></blockquote></div><p>Here we&#039;ve got:</p><p>2: 2,0<br />3: 3,0<br />6: 2,1<br />7: 3,1</p><p>ie. core/core/thread/thread</p><p>I&#039;d expect the first mode would be what the guest expects.&#160; Were you using the same cpu topology for these tests, cores=2/threads=2?</p><p>My host system shows:</p><div class="codebox"><pre><code>$ egrep &quot;^processor|^core id&quot; /proc/cpuinfo processor : 0 core id : 0 processor : 1 core id : 1 processor : 2 core id : 2 processor : 3 core id : 3 processor : 4 core id : 0 processor : 5 core id : 1 processor : 6 core id : 2 processor : 7 core id : 3</code></pre></div><p>So bare metal is core/core/core/core/thread/thread/thread/thread, which I think is pretty standard.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491392">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491393" class="blockpost rowodd"> <h2><span><span class="conr">#3782</span> <a href="viewtopic.php?pid=1491393#p1491393">2015-01-08 17:11:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>yes, both vcpu-pinnings were tried with host-passthrough cpu; <br />and always with &quot;cores=2, threads=2&quot;, yes.</p><p>as i said - my goal was to represent my real cpu as close as possible.</p><p>here my host-system cpuinfo:</p><div class="codebox"><pre><code>root@pc:~&gt; egrep &quot;^processor|^core id&quot; /proc/cpuinfo processor : 0 core id : 0 processor : 1 core id : 1 processor : 2 core id : 2 processor : 3 core id : 3 processor : 4 core id : 0 processor : 5 core id : 1 processor : 6 core id : 2 processor : 7 core id : 3</code></pre></div><p>all of this is only a &quot;problem&quot; with intel hyperthreading cpu&#039;s - afaik amd &quot;only&quot; ships &quot;real&quot; cores, no hyperthreading, right?</p><p>P.S.: now i get your core/thread vs. core/core argument ; i&#039;ll try to redo my benchmarks, but iirc (its some time ago...) 2637 was superior to 2367...<br />It&#039;s afaik not documented what exactly libvirt does with &quot;threads=2&quot; config stanza - if it picks the &quot;threads&quot; itself and if it &quot;tells&quot; the guests these are &quot;just&quot; threading-cores... i don&#039;t know, so i benchmarked it; but - let me do it again <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Greetings!</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 17:32:00)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491393">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491400" class="blockpost roweven"> <h2><span><span class="conr">#3783</span> <a href="viewtopic.php?pid=1491400#p1491400">2015-01-08 17:41:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><p>all of this is only a &quot;problem&quot; with intel hyperthreading cpu&#039;s - afaik amd &quot;only&quot; ships &quot;real&quot; cores, no hyperthreading, right?</p></div></blockquote></div><p>Depends how you define &quot;problem&quot;.&#160; I find non-competitive performance to be a &quot;problem&quot;.&#160; Threading is a common way to try to make the most effective use of the pipeline.&#160; It requires the scheduler, and in this case the user, know that not all the processors are completely independent of each other.&#160; If you don&#039;t agree to that, disable it in your BIOS.&#160; Back in the P4 days threads were of questionable benefit for quite a few workloads, but I think they&#039;ve come a long way since then.</p><div class="quotebox"><blockquote><div><p>P.S.: now i get your core/thread vs. core/core argument ; i&#039;ll try to redo my benchmarks, but iirc (its some time ago...) 2637 was superior to 2367...<br />It&#039;s afaik not documented what exactly libvirt does with &quot;threads=2&quot; config stanza - if it picks the &quot;threads&quot; itself and if it &quot;tells&quot; the guests these are &quot;just&quot; threading-cores... i don&#039;t know, so i benchmarked it; but - let me do it again <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><p>It mirrors the QEMU args:</p><div class="codebox"><pre><code>-smp [cpus=]n[,maxcpus=cpus][,cores=cores][,threads=threads][,sockets=sockets] set the number of CPUs to &#039;n&#039; [default=1] maxcpus= maximum number of total cpus, including offline CPUs for hotplug, etc cores= number of CPU cores on one socket threads= number of threads on one CPU core sockets= number of discrete sockets in the system</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491400">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491402" class="blockpost rowodd"> <h2><span><span class="conr">#3784</span> <a href="viewtopic.php?pid=1491402#p1491402">2015-01-08 17:47:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok, a quick re-run of wprime with both (2367 and 2637) configs didn&#039;t reveal any visible difference ...</p><p>this either means, the cache-trashing effect is negliable - or libvirt/qemu does the &quot;right&quot; thing, and tells the guest that cpu #2 and #3 (with 2367) are threading-cores, and #0 and #1 are &quot;real&quot; cores ...</p><p>I think its the later <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491402">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491408" class="blockpost roweven"> <h2><span><span class="conr">#3785</span> <a href="viewtopic.php?pid=1491408#p1491408">2015-01-08 18:02:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>are you using wprime in Windows or do you run it from host?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491408">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491410" class="blockpost rowodd"> <h2><span><span class="conr">#3786</span> <a href="viewtopic.php?pid=1491410#p1491410">2015-01-08 18:05:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok this is bothering me, i re-did my benchmarks, this time more often for each case and under the very same conditions (guest was settled a few minutes after boot, so not too much interfered with the cpu-benchmark).<br />i did 6 benchmarks with wprime, 6 times the &quot;32m&quot; test; <br />here the results:</p><p>2367 setup:</p><p>1: 18,943<br />2: 20,157<br />3: 19,93<br />4: 19,058<br />5: 19,003<br />6: 18,95</p><p>2637 setup:</p><p>1: 18,892<br />2: 18,861<br />3: 18,943<br />4: 18,9<br />5: 19,011<br />6: 18,984</p><p>so - i retract my conclusion from post #3784 and say its better to tell qemu/libvirt what to do, it seems it doesn&#039;t do the right thing itself.</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 18:09:00)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491410">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491412" class="blockpost roweven"> <h2><span><span class="conr">#3787</span> <a href="viewtopic.php?pid=1491412#p1491412">2015-01-08 18:06:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>4k: yes within the guest; you want to know which vcpu-pinning is better - for the guest. The host doesn&#039;t care much about your kvm-cpu pinnings</p><p>Greetings</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491412">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491418" class="blockpost rowodd"> <h2><span><span class="conr">#3788</span> <a href="viewtopic.php?pid=1491418#p1491418">2015-01-08 18:18:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><p>Ok this is bothering me, i re-did my benchmarks, this time more often for each case and under the very same conditions (guest was settled a few minutes after boot, so not too much interfered with the cpu-benchmark).<br />i did 6 benchmarks with wprime, 6 times the &quot;32m&quot; test; <br />here the results:</p><p>2367 setup:</p><p>1: 18,943<br />2: 20,157<br />3: 19,93<br />4: 19,058<br />5: 19,003<br />6: 18,95</p><p>2637 setup:</p><p>1: 18,892<br />2: 18,861<br />3: 18,943<br />4: 18,9<br />5: 19,011<br />6: 18,984</p><p>so - i retract my conclusion from post #3784 and say its better to tell qemu/libvirt what to do, it seems it doesn&#039;t do the right thing itself.</p></div></blockquote></div><p>I don&#039;t think libvirt makes any attempt to re-interpret pinning.&#160; You tell it to pin a vCPU to one or more CPU and that&#039;s what it does.&#160; It doesn&#039;t care if the pinning target is in the correct order compared to the topology you&#039;re describing to the guest.&#160; So I think you&#039;ve reconfirmed the expected result here, right?&#160; If a topology with theads is described to the guest, the first half of the vCPUs enumerate the cores with one thread, the second half re-enumerate the cores with a different thread.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491418">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491419" class="blockpost roweven"> <h2><span><span class="conr">#3789</span> <a href="viewtopic.php?pid=1491419#p1491419">2015-01-08 18:20:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>It mirrors the QEMU args:</p></div></blockquote></div><p>yes, so far so good; let me rephrase my question then: its (at least to me) unknown, what qemu does with this config stanza.</p><p>best case would be (with threads=&gt;1), qemu searches for thread-cpu&#039;s, picks one of these as thread-cpus for the guest and TELLS the guest that this is a threading-cpu; <br />OTOH - we&#039;re defining the pinning ourselfs, so the rationale is i guess that if you do that, you know what you&#039;re doing, and nothing happens automatically.</p><p>well; i&#039;ll stick with my 2637 setup here, but your milage may vary.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>So I think you&#039;ve reconfirmed the expected result here, right?&#160; If a topology with theads is described to the guest, the first half of the vCPUs enumerate the cores with one thread, the second half re-enumerate the cores with a different thread.</p></div></blockquote></div><p>yes this is what i expected;</p><p>Rule of thumb: if you have a hyperthreading CPU and want 1:1 vcpu-pinning: take care of your thread-cores&#160; <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Greetings!</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 18:25:23)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491419">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491421" class="blockpost rowodd"> <h2><span><span class="conr">#3790</span> <a href="viewtopic.php?pid=1491421#p1491421">2015-01-08 18:30:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@4kgamer: also remember to define &quot;&#160; &#160; &lt;emulatorpin cpuset=&#039;0-1,4-5&#039;/&gt;&quot; - it takes a lot of cpu-load (which qemu itself generates to manage your guest) away from your guest-cpus</p><p>What i also have active, but never measured the concrete impact regarding benchmarks is<br />&quot; isolcpus=2,3,6,7 nohz_full=2,3,6,7 &quot; in my kernel-cmdline;</p><p>and &quot;CPUAffinity=0 1 4 5&quot; in my systemd&#039;s system.conf; this and &quot;isocpus&quot; helps to free up cpu&#039;s 2,3,6,7 for only kvm guests;</p><p>nohz_full _should_ enable the host-kernel to lower the &quot;Local timer interrupts&quot; rate on these cpu&#039;s which in turn lowers the cpu&#039;s work it&#039;s doing without the guest knowing...<br />( look at <a href="http://www.breakage.org/2013/11/15/nohz_fullgodmode/" rel="nofollow">http://www.breakage.org/2013/11/15/nohz_fullgodmode/</a> regarding nohz)</p><p>To free the kvm-cpus up from even more work, at boot i run this script:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash # 33 = 0,1,4,5 # 11 = 0,4 # 22 = 1,5 # 01 = 0 # 02 = 1 # 10 = 4 # 20 = 5 # irq balancing doesnt work well for more than one CPUs, so just one: irqmask1=02 #for some devices other interrupts: irqmask2=20 procmask=33 #rcuomask=$procmask rcuomask=22 #Interrupts: echo $irqmask1 &gt;/proc/irq/default_smp_affinity for irq in $(ls -1 /proc/irq/ ) ; do [ -w /proc/irq/$irq/smp_affinity ] &amp;&amp; echo $irqmask1 &gt;/proc/irq/$irq/smp_affinity 2&gt;/dev/null done # some interrupt-intensive hardware: for i in $(grep -i ahci /proc/interrupts | awk -F: &#039;{print $1}&#039;) ; do echo $irqmask2 &gt;/proc/irq/$i/smp_affinity ; done for i in $(grep -i eth /proc/interrupts | awk -F: &#039;{print $1}&#039;) ; do echo $irqmask2 &gt;/proc/irq/$i/smp_affinity ; done for i in $(grep -i nouveau /proc/interrupts | awk -F: &#039;{print $1}&#039;) ; do echo $irqmask2 &gt;/proc/irq/$i/smp_affinity ; done for i in $(grep -i xhci /proc/interrupts | awk -F: &#039;{print $1}&#039;) ; do echo $irqmask2 &gt;/proc/irq/$i/smp_affinity ; done # for mdadm echo &quot;$procmask&quot; &gt;/sys/devices/virtual/workqueue/writeback/cpumask echo &quot;$procmask&quot; &gt;/sys/devices/virtual/workqueue/raid5wq/cpumask echo &quot;$procmask&quot; &gt;/sys/bus/workqueue/devices/writeback/cpumask echo 0 &gt; /sys/bus/workqueue/devices/writeback/numa # adjusts rcuo kernel threads - see : https://www.kernel.org/doc/Documentation/timers/NO_HZ.txt for pid in $(pgrep rcuo) ; do taskset -p $rcuomask $pid &gt;/dev/null done</code></pre></div><br /><br /><p>Greetings!</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 19:02:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491421">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491428" class="blockpost roweven"> <h2><span><span class="conr">#3791</span> <a href="viewtopic.php?pid=1491428#p1491428">2015-01-08 18:44:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>It mirrors the QEMU args:</p></div></blockquote></div><p>yes, so far so good; let me rephrase my question then: its (at least to me) unknown, what qemu does with this config stanza.</p><p>best case would be (with threads=&gt;1), qemu searches for thread-cpu&#039;s, picks one of these as thread-cpus for the guest and TELLS the guest that this is a threading-cpu; <br />OTOH - we&#039;re defining the pinning ourselfs, so the rationale is i guess that if you do that, you know what you&#039;re doing, and nothing happens automatically.</p></div></blockquote></div><p>First, let&#039;s clear something up, what we&#039;re calling a &quot;core&quot; here is really just the first thread on the core.&#160; If the other thread has no work, the first thread should get roughly the full core.&#160; If the second thread has work and the first thread doesn&#039;t, the second thread should get roughly the whole core.&#160; It&#039;s only when both have work to do that we have an interaction.&#160; It&#039;s that interaction at the hardware level that we&#039;re trying to describe to the guest.&#160; As far as QEMU/KVM is concerned these are all just configuration bits for the guest that don&#039;t have any substantive effect on the vCPU.&#160; A vCPU is just a thread and it&#039;s up to the host scheduler where to run that thread.&#160; By pinning the vCPUs, we know we&#039;re going to have an interaction at the hardware level that the guest needs to be aware of, otherwise it will assume each vCPU is completely independent and make poor scheduling decisions.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491428">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491433" class="blockpost rowodd"> <h2><span><span class="conr">#3792</span> <a href="viewtopic.php?pid=1491433#p1491433">2015-01-08 18:50:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><p>@4kgamer: also remember to define &quot;&#160; &#160; &lt;emulatorpin cpuset=&#039;0-1,4-5&#039;/&gt;&quot; - it takes a lot of cpu-load (which qemu itself generates to manage your guest) away from your guest-cpus</p></div></blockquote></div><p>FWIW, you&#039;re the only one I&#039;ve seen using this option.&#160; It makes sense, 4k would want to use 4-7, but I&#039;m not sure how beneficial it is.</p><div class="quotebox"><blockquote><div><p>What i also have active, but never measured the concrete impact regarding benchmarks is<br />&quot; isolcpus=2,3,6,7 nohz_full=2,3,6,7 &quot; in my kernel-cmdline;</p><p>This _should_ enable the host-kernel to lower the &quot;Local timer interrupts&quot; rate on these cpu&#039;s which in turn lowers the cpu&#039;s work it&#039;s doing without the guest knowing...<br />( look at <a href="http://www.breakage.org/2013/11/15/nohz_fullgodmode/" rel="nofollow">http://www.breakage.org/2013/11/15/nohz_fullgodmode/</a> regarding nohz)</p></div></blockquote></div><p>Please be careful with isolcpus.&#160; This option excludes the listed CPUs from the general scheduler, so they won&#039;t be available to normal host processes without manual scheduling, regardless of whether a guest is currently running.&#160; If you&#039;re running the guest full time and want to reduce the host impact on it, this is a good option to use.</p><p>EDIT: correction, 4-7</p> <p class="postedit"><em>Last edited by aw (2015-01-08 19:13:50)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491433">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491434" class="blockpost roweven"> <h2><span><span class="conr">#3793</span> <a href="viewtopic.php?pid=1491434#p1491434">2015-01-08 18:56:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>right, all these hints are coming from someone who&#039;s kvm-guest is running 24/7 - as soon as the host boots up;</p><p>OTOH i am able to use all CPUs within the host - i just created a cpuset:</p><div class="codebox"><pre><code>cgcreate -t kaeptnb -g cpuset:/allcpus cgset -r cpuset.cpus=0-7 allcpus</code></pre></div><p>and when i want to run a task on the host which needs full cpu i just do e.g.</p><div class="codebox"><pre><code>cgexec -g cpuset:/allcpus mpv 4kmovie.mkv</code></pre></div> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 19:00:10)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491434">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491435" class="blockpost rowodd"> <h2><span><span class="conr">#3794</span> <a href="viewtopic.php?pid=1491435#p1491435">2015-01-08 19:12:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>thank you guys, I will try &lt;emulatorpin cpuset=&#039;0-1,4-5&#039;/&gt;&quot; and compare. Really grateful for this thread. Everyone that&#039;s helping: THANK YOU. I wouldn&#039;t be able to run the VM without you.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491435">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491439" class="blockpost roweven"> <h2><span><span class="conr">#3795</span> <a href="viewtopic.php?pid=1491439#p1491439">2015-01-08 19:27:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>FWIW, you&#039;re the only one I&#039;ve seen using this option.&#160; It makes sense, 4k would want to use 4-7, but I&#039;m not sure how beneficial it is.</p></div></blockquote></div><br /><p>I just took a look:</p><div class="codebox"><pre><code>ps -Leo cmd,pid,lwp,cputime,psr </code></pre></div><p>shows for the qemu processes:</p><p>qemu-system-x86_64 -enable- 23109 23109 00:01:23&#160; &#160;5<br />qemu-system-x86_64 -enable- 23109 23112 00:06:22&#160; &#160;2<br />qemu-system-x86_64 -enable- 23109 23113 00:05:31&#160; &#160;6<br />qemu-system-x86_64 -enable- 23109 23114 00:05:15&#160; &#160;3<br />qemu-system-x86_64 -enable- 23109 23115 00:06:52&#160; &#160;7<br />qemu-system-x86_64 -enable- 23109 23122 00:00:06&#160; &#160;2<br />qemu-system-x86_64 -enable- 23109 23123 00:00:01&#160; &#160;2<br />qemu-system-x86_64 -enable- 23109 23124 00:00:24&#160; &#160;3<br />qemu-system-x86_64 -enable- 23109 23125 00:00:00&#160; &#160;7<br />qemu-system-x86_64 -enable- 23109 23126 00:00:00&#160; &#160;3</p><p>so - only one thread is outside the vcpu-range, the first one;</p><br /><p>the first and the last 5 threads seem to be the emulator-threads,<br />i expected more - all but 4 vcpu-threads to be exact - to be on cpu 0,1,4 or 5.</p><p>So you may be right, it&#039;s not that much helpful - but OTOH its not bad, at least one thread is &quot;offloaded&quot; from the guest-cpus;</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 19:35:39)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491439">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491441" class="blockpost rowodd"> <h2><span><span class="conr">#3796</span> <a href="viewtopic.php?pid=1491441#p1491441">2015-01-08 19:34:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>kaeptnb wrote:</cite><blockquote><div><p>So you may be right, it&#039;s not that much helpful - but OTOH its not bad, at least one thread is &quot;offloaded&quot; from the guest-cpus;</p></div></blockquote></div><p>Theoretically, if you&#039;re using isolcpu, 2,3,6,7 shouldn&#039;t be available for general scheduling for the emulator anyway.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491441">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491442" class="blockpost roweven"> <h2><span><span class="conr">#3797</span> <a href="viewtopic.php?pid=1491442#p1491442">2015-01-08 19:36:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well i&#039;m surprised as well and can&#039;t explain why only one of the 6 emulator-threads are on non-guest cpus... strange</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491442">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491445" class="blockpost rowodd"> <h2><span><span class="conr">#3798</span> <a href="viewtopic.php?pid=1491445#p1491445">2015-01-08 19:51:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok, i set the emulatorpin to just one cpu (&#160; &#160; &lt;emulatorpin cpuset=&#039;1&#039;/&gt; ), restarted the guest, ran the &quot;1024m&quot; wprime test (just to see which threads are the vcpu threads and which are the emulator threads)</p><div class="codebox"><pre><code>watch &quot;ps -Leo cmd,pid,lwp,cputime,psr | grep qemu&quot; </code></pre></div><p>reveals, that the emulator-threads are NOT pinned - they change their cpu from time to time.<br />And i still see changing them to cpu&#039;s which should be &quot;protected&quot; by isol_cpu... strange</p> <p class="postedit"><em>Last edited by kaeptnb (2015-01-08 19:53:44)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491445">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491451" class="blockpost roweven"> <h2><span><span class="conr">#3799</span> <a href="viewtopic.php?pid=1491451#p1491451">2015-01-08 20:26:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79471">Bronek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: London</span></dd> <dd><span>Registered: 2014-02-14</span></dd> <dd><span>Posts: 90</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79471">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>After conversion to libvirt I have this:</p><div class="codebox"><pre class="vscroll"><code>&lt;domain type=&#039;kvm&#039;&gt; &lt;name&gt;windows1&lt;/name&gt; &lt;uuid&gt;de644f73-fd03-4e6a-81dd-eb3e8cdd5305&lt;/uuid&gt; &lt;memory unit=&#039;KiB&#039;&gt;16777216&lt;/memory&gt; &lt;currentMemory unit=&#039;KiB&#039;&gt;16777216&lt;/currentMemory&gt; &lt;memoryBacking&gt; &lt;hugepages&gt; &lt;page size=&#039;2048&#039; unit=&#039;KiB&#039;/&gt; &lt;/hugepages&gt; &lt;/memoryBacking&gt; &lt;vcpu placement=&#039;static&#039;&gt;8&lt;/vcpu&gt; &lt;cputune&gt; &lt;vcpupin vcpu=&#039;0&#039; cpuset=&#039;8&#039;/&gt; &lt;vcpupin vcpu=&#039;1&#039; cpuset=&#039;9&#039;/&gt; &lt;vcpupin vcpu=&#039;2&#039; cpuset=&#039;10&#039;/&gt; &lt;vcpupin vcpu=&#039;3&#039; cpuset=&#039;11&#039;/&gt; &lt;vcpupin vcpu=&#039;4&#039; cpuset=&#039;20&#039;/&gt; &lt;vcpupin vcpu=&#039;5&#039; cpuset=&#039;21&#039;/&gt; &lt;vcpupin vcpu=&#039;6&#039; cpuset=&#039;22&#039;/&gt; &lt;vcpupin vcpu=&#039;7&#039; cpuset=&#039;23&#039;/&gt; &lt;/cputune&gt; &lt;os&gt; &lt;type arch=&#039;x86_64&#039; machine=&#039;pc-i440fx-2.2&#039;&gt;hvm&lt;/type&gt; &lt;loader type=&#039;rom&#039;&gt;/usr/share/qemu/bios.bin&lt;/loader&gt; &lt;/os&gt; &lt;features&gt; &lt;acpi/&gt; &lt;apic/&gt; &lt;pae/&gt; &lt;hyperv&gt; &lt;relaxed state=&#039;on&#039;/&gt; &lt;vapic state=&#039;on&#039;/&gt; &lt;spinlocks state=&#039;on&#039; retries=&#039;4096&#039;/&gt; &lt;/hyperv&gt; &lt;/features&gt; &lt;cpu mode=&#039;custom&#039; match=&#039;exact&#039;&gt; &lt;model fallback=&#039;allow&#039;&gt;Penryn&lt;/model&gt; &lt;topology sockets=&#039;1&#039; cores=&#039;4&#039; threads=&#039;2&#039;/&gt; &lt;/cpu&gt; &lt;clock offset=&#039;localtime&#039;&gt; &lt;timer name=&#039;rtc&#039; tickpolicy=&#039;catchup&#039;/&gt; &lt;timer name=&#039;pit&#039; tickpolicy=&#039;delay&#039;/&gt; &lt;timer name=&#039;hpet&#039; present=&#039;no&#039;/&gt; &lt;timer name=&#039;hypervclock&#039; present=&#039;yes&#039;/&gt; &lt;/clock&gt; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt; &lt;on_reboot&gt;restart&lt;/on_reboot&gt; &lt;on_crash&gt;destroy&lt;/on_crash&gt; &lt;devices&gt; &lt;emulator&gt;/usr/bin/qemu-system-x86_64.xvga&lt;/emulator&gt; &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source dev=&#039;/dev/zvol/zdata/windows1&#039;/&gt; &lt;target dev=&#039;vda&#039; bus=&#039;virtio&#039;/&gt; &lt;boot order=&#039;1&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x02&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/home/bronek/virtio-win-0.1-81.iso&#039;/&gt; &lt;target dev=&#039;hdc&#039; bus=&#039;ide&#039;/&gt; &lt;readonly/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-ehci1&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x04&#039; function=&#039;0x7&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci1&#039;&gt; &lt;master startport=&#039;0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x04&#039; function=&#039;0x0&#039; multifunction=&#039;on&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;ide&#039; index=&#039;0&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x01&#039; function=&#039;0x1&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;pci&#039; index=&#039;0&#039; model=&#039;pci-root&#039;/&gt; &lt;interface type=&#039;bridge&#039;&gt; &lt;mac address=&#039;52:54:01:34:56:f7&#039;/&gt; &lt;source bridge=&#039;br0&#039;/&gt; &lt;model type=&#039;virtio&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x03&#039; function=&#039;0x0&#039;/&gt; &lt;/interface&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;vendor id=&#039;0x04d9&#039;/&gt; &lt;product id=&#039;0x2011&#039;/&gt; &lt;/source&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1b&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x09&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1d&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0a&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1a&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0b&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x81&#039; slot=&#039;0x00&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0e&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x83&#039; slot=&#039;0x00&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0f&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x82&#039; slot=&#039;0x00&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;rom file=&#039;/home/bronek/Turks.vga.rom&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x08&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;memballoon model=&#039;virtio&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x07&#039; function=&#039;0x0&#039;/&gt; &lt;/memballoon&gt; &lt;/devices&gt; &lt;/domain&gt;</code></pre></div><p>Note &quot;fancy&quot; &lt;emulator&gt;/usr/bin/qemu-system-x86_64.xvga&lt;/emulator&gt;, which is:</p><div class="codebox"><pre><code>root@gdansk ~ # cat /usr/bin/qemu-system-x86_64.xvga #!/bin/sh exec /usr/bin/qemu-system-x86_64 `echo &quot;$@&quot; | sed &#039;s/vga.rom/vga.rom,x-vga=on/g&#039;`</code></pre></div><p>It works briliantly,&#160; thanks aw for your hard work on this feature! Best of all, since it&#039;s virsh and I&#039;ve setup core isolation on my kernel, I now know that this virtual machine is guaranteed full access to selected PCI, CPU and RAM resources - and it starts automatically when I switch on my (metal) machine - it&#039;s really fast <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Small nigglees: there is now long list of devices under &quot;safely remove&quot; icon including all my passed thru PCI devices and Virtio ones as well. I hope I can find a way to somehow convince Windows that these should not be listed. Also, I had to &quot;downgrade&quot; VCPU from host, SandyBridge and Nehalem to Penryn (another stable choice was qemu64)</p> </div> <div class="postsignature postmsg"><hr /><p>Sorry about&#160; &quot;KVM VGA-Passthrough ...&quot; thread <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Anyone interested in continuing this discussion elsewhere, please contact me privately. I might be able to find it a new home.</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491451">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1491452" class="blockpost rowodd"> <h2><span><span class="conr">#3800</span> <a href="viewtopic.php?pid=1491452#p1491452">2015-01-08 20:36:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>...long story short...<br />I&#039;ve finally flashed my cards with UEFI-compatible &quot;secret&quot;(i can&#039;t get it anywhere anymore) firmware, but appears like windows7 doesn&#039;t really works right with it. I turn off CSM, boot up the windows, it shows the splash logo and then image freezes. Yay for windows7. So, OVMF/UEFI and windows 7 is possible but troublesome, so most folks shouldn&#039;t bother about it.</p><p>P.S. if anyone needs UEFI-combatible VBIOS file for ASUS HD7750(silent, 800mhz one, but i think it&#039;s possible to edit it for any card) - send me an e-mail, because i seem to be unable to get it officially from support anymore.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1491452">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=151">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=150">150</a> <a href="viewtopic.php?id=162768&amp;p=151">151</a> <strong>152</strong> <a href="viewtopic.php?id=162768&amp;p=153">153</a> <a href="viewtopic.php?id=162768&amp;p=154">154</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=153">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
