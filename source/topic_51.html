<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 51) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=51" title="Page 51" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=50" title="Page 50" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=52" title="Page 52" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=50">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=49">49</a> <a href="viewtopic.php?id=162768&amp;p=50">50</a> <strong>51</strong> <a href="viewtopic.php?id=162768&amp;p=52">52</a> <a href="viewtopic.php?id=162768&amp;p=53">53</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=52">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1387236" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1251</span> <a href="viewtopic.php?pid=1387236#p1387236">2014-02-28 22:37:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77842">Flyser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-19</span></dd> <dd><span>Posts: 29</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>#1: How is the Windows guest visualized (what/where is its display)?<br />My only experience with &quot;graphical access&quot; to KVM guests is via VNC, but that will not do it for gaming. So how is the guest visualized / what is its display? As far as I can understand from the thread people simply have a monitor connected directly to the graphics card which is passed through to the guest, is this understood correctly?</p></div></blockquote></div><p>Correct.</p><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>This directly connected monitor can then have multiple inputs which can be changed on the monitor itself or one could use a display switch box.</p></div></blockquote></div><p>I lost you there ... could you clarify?</p><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>#2: Any alternatives to #1?<br />In the thread I see a couple of discussions about copying the frame buffer of one graphics card to another, but all of them end with the poster saying it is just speculation and that it should be theoretically possible. Anyone who have succeeded with getting the video output from the guest into a window on the host via whatever method?</p></div></blockquote></div><p>Afaik there are no generic solutions. I use steam in-house streaming every now and then, but it only works for some games and is not very fast.</p><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>#3: Are two powerful graphics cards needed?<br />Quite a few posters have two quite powerful graphics cards installed. Isn&#039;t one powerful graphics card enough (one to pass to the guest used for playing games) and a less powerful one for running the host displays?</p></div></blockquote></div><p>One is enough. I use the integrated Intel GPU for the host and a powerful nvidia card for the guest.</p><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>#4: Is a dedicated sound card needed?<br />Do I need a dedicated sound card or can the host and guest share the onboard sound card?</p></div></blockquote></div><p>You can share your onboard sound card. Either with passthrough (and thus only usable by the guest) or shared between host and guest.</p><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>#5: Requirements for CPU and mother board?<br />Is it (more or less) sufficient to select a CPU with Intel VT-d or AMD-Vi, and a matching mother board (supporting the CPU and Intel VT-d / AMD-Vi)?</p></div></blockquote></div><p>In theory yes. In practice, there seem to be some mainboards that work better than others. see <a href="https://docs.google.com/spreadsheet/ccc?key=0Aryg5nO-kBebdFozaW9tUWdVd2VHM0lvck95TUlpMlE&amp;usp=drive_web#gid=0" rel="nofollow">https://docs.google.com/spreadsheet/ccc … _web#gid=0</a></p> <p class="postedit"><em>Last edited by Flyser (2014-02-28 22:39:31)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387236">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387247" class="blockpost roweven"> <h2><span><span class="conr">#1252</span> <a href="viewtopic.php?pid=1387247#p1387247">2014-02-28 23:10:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78314">MacCoaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-06</span></dd> <dd><span>Posts: 10</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Bronek wrote:</cite><blockquote><div><p>This is not your primary GPU now, is it? These things may change depending on your computer BIOS setup and PCIe slot location it is attached to.</p></div></blockquote></div><p>Nope. Never was my primary. Intel IGP is my primary, used for Linux console.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>The DMAR faults indicate they are blocking the 8970 from reading memory just below 128GB.&#160; It seems like a safe assumption that you don&#039;t have a 128GB VM, so the IOMMU is probably doing it&#039;s job by preventing these.&#160; Does the card still work on bare metal?&#160; It is possible that a failed memory controller on the card could be generating these accesses.&#160; Does the address remotely resemble the host or guest address of the device?&#160; (lspci in the host, info pci/info mtree in the qemu monitor)&#160; If you haven&#039;t already, a hard power cycle might be a good idea.</p></div></blockquote></div><p>I haven&#039;t tested bare metal, will do. Hard power cycles do nothing. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> I&#039;ll get the lspci (what do you need specifically?, -vv?) and info pci/mtree.</p><p>Thanks,</p><p>Will</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387247">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387289" class="blockpost rowodd"> <h2><span><span class="conr">#1253</span> <a href="viewtopic.php?pid=1387289#p1387289">2014-03-01 03:17:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>doubledr wrote:</cite><blockquote><div><p>Hi, aw</p><p>Is there any tutorial about how to use these tools? I want to help this topic too.</p></div></blockquote></div><p>You&#039;ll find kvm_stat in the qemu source tree, here are some instructions:</p><p><a href="https://docs.fedoraproject.org/en-US/Fedora/18/html/Virtualization_Administration_Guide/ch20s02.html" rel="nofollow">https://docs.fedoraproject.org/en-US/Fe … 20s02.html</a></p><p>Tracing is similarly easy, but the report generated is massive and takes some skill to analyze:</p><p><a href="http://www.linux-kvm.org/page/Tracing" rel="nofollow">http://www.linux-kvm.org/page/Tracing</a></p><p>Generally you&#039;ll want to run kvm_stat first to see what the heavy hitters are, then look in the trace output to try to figure out why they&#039;re being called.</p><p>There&#039;s a bit on perf here too:</p><p><a href="http://www.linux-kvm.org/page/Perf_events" rel="nofollow">http://www.linux-kvm.org/page/Perf_events</a></p><p>A simple place to start, especially if you&#039;re compiling your own qemu is to uncomment #define DEBUG_VFIO from hw/misc/vfio.c, recompile and test with that binary.&#160; You will get a ton of initial output but once the OS drivers are running it should slow down considerably.&#160; The output will never cease entirely though, all config space access will go through qemu and any of the quirks.&#160; So long as you don&#039;t see more than around a dozen lines per second, vfio is probably not the bottleneck.</p></div></blockquote></div><p>Thx, aw</p><p>I took several days to read throught these documents. But I think I am missing something. kvm_stat displays two columns of number, but what do they mean? The first document doesn&#039;t explain it. And I don&#039;t know what is the typical value for each counter... So when I type kvm_stat, I have no idea which counter is &quot;abnormal&quot;. I think the knowledge gap is pretty large here... <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387289">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387342" class="blockpost roweven"> <h2><span><span class="conr">#1254</span> <a href="viewtopic.php?pid=1387342#p1387342">2014-03-01 09:45:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79893">jonascj</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-28</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79893">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Flyser wrote:</cite><blockquote><div><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>This directly connected monitor can then have multiple inputs which can be changed on the monitor itself or one could use a display switch box.</p></div></blockquote></div><p>I lost you there ... could you clarify?</p></div></blockquote></div><p>I just meant that most people are looking for the guest to feel like it is just another application window on the host machine. They are trying to get as far away from dual boot as possible. So most people will probably choose a monitor with two inputs, one which can be connected to the host and one to the guest. That way they do not have a monitor whose sole purpose is to display the output of the guest; by selecting source on the monitor they can turn it into a secondary monitor for the host. Or if their monitor do not have two inputs maybe they invest in an vga/dvi switch which will let them switch between the input of the guest and host.</p><div class="quotebox"><cite>Flyser wrote:</cite><blockquote><div><div class="quotebox"><cite>jonascj wrote:</cite><blockquote><div><p>jonascj wrote:<br />#2: Any alternatives to #1?<br />In the thread I see a couple of discussions about copying the frame buffer of one graphics card to another, but all of them end with the poster saying it is just speculation and that it should be theoretically possible. Anyone who have succeeded with getting the video output from the guest into a window on the host via whatever method?</p></div></blockquote></div><p>Afaik there are no generic solutions. I use steam in-house streaming every now and then, but it only works for some games and is not very fast.</p></div></blockquote></div><p>I have a Thinkpad T420 laptop with Nvidia optimus technology (not intended to be used for this setup, just some perspective). There is a heap of trouble with having output on the display port and powersaving from the Optimus technology. One solution to get output on the display port is to &quot;setup a virtual display on the Intel GPU (so it now have the internal display and one virtual), render all output on the Intel GPU and then copy the contents of the virtual display to the Nvidia GPU for output via the display port&quot; (http://zachstechnotes.blogspot.co.at/2012/04/post-title.html , <a href="https://github.com/liskin/hybrid-screenclone)" rel="nofollow">https://github.com/liskin/hybrid-screenclone)</a>. </p><p>Of course the Nvidia GPU and Intel GPU of the T420 is &quot;connected&quot; through the Optimus technology, but if it is possible to copy display content between them in an Optimus setup maybe setups exist for desktop computers which would allow the same thing. Of course this would not be a generic solution (like you said: no generic solution exist).</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387342">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387376" class="blockpost rowodd"> <h2><span><span class="conr">#1255</span> <a href="viewtopic.php?pid=1387376#p1387376">2014-03-01 13:20:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79899">winie</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-01</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:alireza4051@yahoo.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>should i expect vga passthrough to work out of box with kernel 3.14 and qemu 2.0 or xen 4.4?</p><p>i have a 2x geforce 770 cards intel 4670 and asrock z87 extreme4</p><p>i&#039;m new to linux and the closest i have got to success is with xenserver 6.2 and esxi 5.5 i get yellow triangle in device manager with error code 43 under windows 8.1 guest.<br />i did this guide step by step in arch linux with gnome and linux mint 16, and both times virt-manager window doesn&#039;t respond after starting guest with vga passthrough</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387376">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387484" class="blockpost roweven"> <h2><span><span class="conr">#1256</span> <a href="viewtopic.php?pid=1387484#p1387484">2014-03-01 17:46:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78620">mostlyharmless</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-16</span></dd> <dd><span>Posts: 50</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78620">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@aw</p><div class="quotebox"><blockquote><div><p>Patches were just posted upstream to do lazy tracking of the debug registers.</p></div></blockquote></div><p>Presumably you have to be running 3.14-rc4 or linux-next for those patches to apply cleanly?&#160; I tried them on 3.13.2, and most applied, with a few failures I was able to fix manually, but I haven&#039;t tried compiling a kernel with them yet...&#160; [EDIT] and that wouldn&#039;t work anyway.</p><p>Anyway, I&#039;m not sure whether they apply to me in any case, as I don&#039;t have a Haswell processor, I have an IvyBridge. (4930K)&#160; </p><p>Also, Is that hv-time option relevant at all? I currently use -cpu host.</p> <p class="postedit"><em>Last edited by mostlyharmless (2014-03-01 22:16:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387484">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387584" class="blockpost rowodd"> <h2><span><span class="conr">#1257</span> <a href="viewtopic.php?pid=1387584#p1387584">2014-03-01 21:59:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78620">mostlyharmless</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-16</span></dd> <dd><span>Posts: 50</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78620">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@neona</p><div class="quotebox"><blockquote><div><p>Turns out I&#039;m an idiot, and installed a different qemu at some point that was earlier in my path than the one from qemu-git.&#160; Cleaned that out and sound works fine now.</p></div></blockquote></div><p>Hey, thanks, turns out I&#039;m the same sub-species of idiot; now my sound is working too!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387584">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387591" class="blockpost roweven"> <h2><span><span class="conr">#1258</span> <a href="viewtopic.php?pid=1387591#p1387591">2014-03-01 22:49:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mostlyharmless wrote:</cite><blockquote><div><p>@aw</p><div class="quotebox"><blockquote><div><p>Patches were just posted upstream to do lazy tracking of the debug registers.</p></div></blockquote></div><p>Presumably you have to be running 3.14-rc4 or linux-next for those patches to apply cleanly?&#160; I tried them on 3.13.2, and most applied, with a few failures I was able to fix manually, but I haven&#039;t tried compiling a kernel with them yet...&#160; [EDIT] and that wouldn&#039;t work anyway.</p><p>Anyway, I&#039;m not sure whether they apply to me in any case, as I don&#039;t have a Haswell processor, I have an IvyBridge. (4930K)&#160; </p><p>Also, Is that hv-time option relevant at all? I currently use -cpu host.</p></div></blockquote></div><p>It should help all Intel processors when the guest makes use of debug registers, it&#039;s not Haswell specific.&#160; hv-time is a Hyper-V enlightened time source which is more efficient than other emulated time sources.&#160; I saw an improvement of several FPS when using hv-time.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387591">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387757" class="blockpost rowodd"> <h2><span><span class="conr">#1259</span> <a href="viewtopic.php?pid=1387757#p1387757">2014-03-02 13:43:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78214">arny91</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 3</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78214">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi everyone</p><p>I installed every package suggested in the 1st post by nbhs in order to get qemu working with vfio-pci option<br />and edited every config file.<br />Till now i compiled the kernel twice, the second time i did i took care that the following options were selected<br />as builtin and not module:</p><p>CONFIG_VFIO_IOMMU_TYPE1=y<br />CONFIG_VFIO=y<br />CONFIG_VFIO_PCI=y<br />CONFIG_VFIO_PCI_VGA=y</p><p>Vt-d is enabled in the efi setup.</p><p>This is my configuration:</p><p>MB:MSI Z77A-GD80<br />CPU: Intel Core I7-2600<br />RAM:16GB ddr3 1866<br />DISK:128GB SSD Sata 3<br />Primary GPU: Intel® HD Graphics 2000<br />Secondary GPU: Nvidia GTX 280 &lt;-- Windows display</p><p>But when i try to launch qemu (after device passthrough with vfio-bind) i get this error:</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 8192 -cpu host -smp 6,sockets=1,cores=6,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: error no iommu_group for device qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed. qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device &#039;vfio-pci&#039; could not be initialized</code></pre></div><p>this is the output of </p><div class="codebox"><pre><code>dmesg | grep -e DMAR -e IOMMU [ 0.000000] ACPI: DMAR 000000009947a598 0000B8 (v01 INTEL SNB 00000001 INTL 00000001) [ 0.065036] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020e60262 ecap f0101a [ 0.065041] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap c9008020660262 ecap f0105a [ 0.065112] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1</code></pre></div><p>lspci:</p><div class="codebox"><pre><code>lspci 00:00.0 Host bridge: Intel Corporation 2nd Generation Core Processor Family DRAM Controller (rev 09) 00:01.0 PCI bridge: Intel Corporation Xeon E3-1200/2nd Generation Core Processor Family PCI Express Root Port (rev 09) 00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09) 00:14.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB xHCI Host Controller (rev 04) 00:16.0 Communication controller: Intel Corporation 7 Series/C210 Series Chipset Family MEI Controller #1 (rev 04) 00:19.0 Ethernet controller: Intel Corporation 82579V Gigabit Network Connection (rev 04) 00:1a.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #2 (rev 04) 00:1b.0 Audio device: Intel Corporation 7 Series/C210 Series Chipset Family High Definition Audio Controller (rev 04) 00:1c.0 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 1 (rev c4) 00:1c.4 PCI bridge: Intel Corporation 7 Series/C210 Series Chipset Family PCI Express Root Port 5 (rev c4) 00:1d.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #1 (rev 04) 00:1f.0 ISA bridge: Intel Corporation Z77 Express Chipset LPC Controller (rev 04) 00:1f.2 SATA controller: Intel Corporation 7 Series/C210 Series Chipset Family 6-port SATA Controller [AHCI mode] (rev 04) 00:1f.3 SMBus: Intel Corporation 7 Series/C210 Series Chipset Family SMBus Controller (rev 04) 01:00.0 VGA compatible controller: NVIDIA Corporation GT200b [GeForce GTX 285] (rev a1) 02:00.0 SATA controller: ASMedia Technology Inc. ASM1062 Serial ATA Controller (rev 01)</code></pre></div><p>here&#039;s the full dmesg<br /><a href="http://pastebin.com/SZ9aMVhG" rel="nofollow">http://pastebin.com/SZ9aMVhG</a></p><p>I also added intel_iommu=on, igfx=on, but this changed nothing.</p><p>Is there something else to adjust?<br />Thanks</p> <p class="postedit"><em>Last edited by arny91 (2014-03-02 13:44:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387757">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387767" class="blockpost roweven"> <h2><span><span class="conr">#1260</span> <a href="viewtopic.php?pid=1387767#p1387767">2014-03-02 14:22:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>arny91 wrote:</cite><blockquote><div><p>Hi everyone</p><p>here&#039;s the full dmesg<br /><a href="http://pastebin.com/SZ9aMVhG" rel="nofollow">http://pastebin.com/SZ9aMVhG</a></p><p>I also added intel_iommu=on, igfx=on, but this changed nothing.</p></div></blockquote></div><p>You have:</p><div class="codebox"><pre><code>[ 0.000000] Command line: initrd=\initramfs-linux-mainline.img root=/dev/sda2 rw,intel_iommu=on,igfx_on</code></pre></div><p>Change the comma between &quot;rw&quot; and &quot;intel_iommu&quot; to a space.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387767">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387942" class="blockpost rowodd"> <h2><span><span class="conr">#1261</span> <a href="viewtopic.php?pid=1387942#p1387942">2014-03-02 22:46:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78314">MacCoaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-06</span></dd> <dd><span>Posts: 10</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>The DMAR faults indicate they are blocking the 8970 from reading memory just below 128GB.&#160; It seems like a safe assumption that you don&#039;t have a 128GB VM, so the IOMMU is probably doing it&#039;s job by preventing these.&#160; Does the card still work on bare metal?&#160; It is possible that a failed memory controller on the card could be generating these accesses.&#160; Does the address remotely resemble the host or guest address of the device?&#160; (lspci in the host, info pci/info mtree in the qemu monitor)&#160; If you haven&#039;t already, a hard power cycle might be a good idea.</p></div></blockquote></div><p>Alright, finally had the time to get around to it.</p><p><strong><span class="bbu">lspci -vvv</span></strong></p><div class="codebox"><pre class="vscroll"><code>00:00.0 Host bridge: Intel Corporation Xeon E3-1200 v3 Processor DRAM Controller (rev 06) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort+ &gt;SERR- &lt;PERR- INTx- Latency: 0 Capabilities: [e0] Vendor Specific Information: Len=0c &lt;?&gt; 00:01.0 PCI bridge: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor PCI Express x16 Controller (rev 06) (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=00, secondary=01, subordinate=01, sec-latency=0 I/O behind bridge: 0000e000-0000efff Memory behind bridge: e0000000-f08fffff Prefetchable memory behind bridge: 00000000fff00000-00000000000fffff Secondary status: 66MHz- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort+ &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA+ MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [88] Subsystem: ASUSTeK Computer Inc. Device 8534 Capabilities: [80] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [90] MSI: Enable+ Count=1/1 Maskable- 64bit- Address: fee002f8 Data: 0000 Capabilities: [a0] Express (v2) Root Port (Slot+), MSI 00 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 256 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr- TransPend- LnkCap: Port #2, Speed 8GT/s, Width x16, ASPM L0s L1, Latency L0 &lt;256ns, L1 &lt;8us ClockPM- Surprise- LLActRep- BwNot+ LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt+ ABWMgmt+ SltCap: AttnBtn- PwrCtrl- MRL- AttnInd- PwrInd- HotPlug- Surprise- Slot #1, PowerLimit 75.000W; Interlock- NoCompl+ SltCtl: Enable: AttnBtn- PwrFlt- MRL- PresDet- CmdCplt- HPIrq- LinkChg- Control: AttnInd Unknown, PwrInd Unknown, Power- Interlock- SltSta: Status: AttnBtn- PowerFlt- MRL- CmdCplt- PresDet+ Interlock- Changed: MRL- PresDet+ LinkState- RootCtl: ErrCorrectable- ErrNon-Fatal- ErrFatal- PMEIntEna- CRSVisible- RootCap: CRSVisible- RootSta: PME ReqID 0000, PMEStatus- PMEPending- DevCap2: Completion Timeout: Not Supported, TimeoutDis-, LTR+, OBFF Via WAKE# ARIFwd- DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Via WAKE# ARIFwd- LnkCtl2: Target Link Speed: 8GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete+, EqualizationPhase1+ EqualizationPhase2+, EqualizationPhase3+, LinkEqualizationRequest- Capabilities: [100 v1] Virtual Channel Caps: LPEVC=0 RefClk=100ns PATEntryBits=1 Arb: Fixed- WRR32- WRR64- WRR128- Ctrl: ArbSelect=Fixed Status: InProgress- VC0: Caps: PATOffset=00 MaxTimeSlots=1 RejSnoopTrans- Arb: Fixed+ WRR32- WRR64- WRR128- TWRR128- WRR256- Ctrl: Enable+ ID=0 ArbSelect=Fixed TC/VC=ff Status: NegoPending- InProgress- Capabilities: [140 v1] Root Complex Link Desc: PortNumber=02 ComponentID=01 EltType=Config Link0: Desc: TargetPort=00 TargetComponent=01 AssocRCRB- LinkType=MemMapped LinkValid+ Addr: 00000000fed19000 Capabilities: [d94 v1] #19 Kernel driver in use: pcieport Kernel modules: shpchp 00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3 Processor Integrated Graphics Controller (rev 06) (prog-if 00 [VGA controller]) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 43 Region 0: Memory at f0c00000 (64-bit, non-prefetchable) [size=4M] Region 2: Memory at d0000000 (64-bit, prefetchable) [size=256M] Region 4: I/O ports at f000 [disabled] [size=64] Expansion ROM at &lt;unassigned&gt; [disabled] Capabilities: [90] MSI: Enable+ Count=1/1 Maskable- 64bit- Address: fee00018 Data: 0000 Capabilities: [d0] Power Management version 2 Flags: PMEClk- DSI+ D1- D2- AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [a4] PCI Advanced Features AFCap: TP+ FLR+ AFCtrl: FLR- AFStatus: TP- Kernel driver in use: i915 Kernel modules: i915 00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor HD Audio Controller (rev 06) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 48 Region 0: Memory at f1414000 (64-bit, non-prefetchable) [size=16K] Capabilities: [50] Power Management version 2 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [60] MSI: Enable+ Count=1/1 Maskable- 64bit- Address: fee003f8 Data: 0000 Capabilities: [70] Express (v1) Root Complex Integrated Endpoint, MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s unlimited, L1 unlimited ExtTag- RBE- FLReset+ DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr- TransPend- LnkCap: Port #0, Speed unknown, Width x0, ASPM unknown, Latency L0 &lt;64ns, L1 &lt;1us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; Disabled- Retrain- CommClk- ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed unknown, Width x0, TrErr- Train- SlotClk- DLActive- BWMgmt- ABWMgmt- Kernel driver in use: snd_hda_intel Kernel modules: snd_hda_intel 00:14.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB xHCI (rev 04) (prog-if 30 [XHCI]) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 45 Region 0: Memory at f1400000 (64-bit, non-prefetchable) [size=64K] Capabilities: [70] Power Management version 2 Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0-,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [80] MSI: Enable+ Count=1/8 Maskable- 64bit+ Address: 00000000fee00398 Data: 0000 Kernel driver in use: xhci_hcd Kernel modules: xhci_hcd 00:16.0 Communication controller: Intel Corporation 8 Series/C220 Series Chipset Family MEI Controller #1 (rev 04) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 47 Region 0: Memory at f141f000 (64-bit, non-prefetchable) [size=16] Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable- 64bit+ Address: 00000000fee003d8 Data: 0000 Kernel driver in use: mei_me Kernel modules: mei_me 00:1a.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #2 (rev 04) (prog-if 20 [EHCI]) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 20 Region 0: Memory at f141c000 (32-bit, non-prefetchable) [size=1K] Capabilities: [50] Power Management version 2 Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [58] Debug port: BAR=1 offset=00a0 Capabilities: [98] PCI Advanced Features AFCap: TP+ FLR+ AFCtrl: FLR- AFStatus: TP- Kernel driver in use: ehci-pci Kernel modules: ehci_pci 00:1b.0 Audio device: Intel Corporation 8 Series/C220 Series Chipset High Definition Audio Controller (rev 04) Subsystem: ASUSTeK Computer Inc. Device 8573 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 49 Region 0: Memory at f1410000 (64-bit, non-prefetchable) [size=16K] Capabilities: [50] Power Management version 2 Flags: PMEClk- DSI- D1- D2- AuxCurrent=55mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [60] MSI: Enable+ Count=1/1 Maskable- 64bit+ Address: 00000000fee00438 Data: 0000 Capabilities: [70] Express (v1) Root Complex Integrated Endpoint, MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE- FLReset+ DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #0, Speed unknown, Width x0, ASPM unknown, Latency L0 &lt;64ns, L1 &lt;1us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; Disabled- Retrain- CommClk- ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed unknown, Width x0, TrErr- Train- SlotClk- DLActive- BWMgmt- ABWMgmt- Capabilities: [100 v1] Virtual Channel Caps: LPEVC=0 RefClk=100ns PATEntryBits=1 Arb: Fixed- WRR32- WRR64- WRR128- Ctrl: ArbSelect=Fixed Status: InProgress- VC0: Caps: PATOffset=00 MaxTimeSlots=1 RejSnoopTrans- Arb: Fixed- WRR32- WRR64- WRR128- TWRR128- WRR256- Ctrl: Enable+ ID=0 ArbSelect=Fixed TC/VC=01 Status: NegoPending- InProgress- VC1: Caps: PATOffset=00 MaxTimeSlots=1 RejSnoopTrans- Arb: Fixed- WRR32- WRR64- WRR128- TWRR128- WRR256- Ctrl: Enable+ ID=2 ArbSelect=Fixed TC/VC=04 Status: NegoPending- InProgress- Kernel driver in use: snd_hda_intel Kernel modules: snd_hda_intel 00:1c.0 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #1 (rev d4) (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=00, secondary=02, subordinate=02, sec-latency=0 I/O behind bridge: 00002000-00002fff Memory behind bridge: cf200000-cf3fffff Prefetchable memory behind bridge: 00000000cf400000-00000000cf5fffff Secondary status: 66MHz- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA- MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [40] Express (v2) Root Port (Slot+), MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #1, Speed 5GT/s, Width x1, ASPM L0s L1, Latency L0 &lt;1us, L1 &lt;4us ClockPM- Surprise- LLActRep+ BwNot+ LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk- ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x0, TrErr- Train+ SlotClk+ DLActive- BWMgmt- ABWMgmt- SltCap: AttnBtn- PwrCtrl- MRL- AttnInd- PwrInd- HotPlug+ Surprise+ Slot #0, PowerLimit 0.000W; Interlock- NoCompl+ SltCtl: Enable: AttnBtn- PwrFlt- MRL- PresDet- CmdCplt- HPIrq- LinkChg- Control: AttnInd Unknown, PwrInd Unknown, Power- Interlock- SltSta: Status: AttnBtn- PowerFlt- MRL- CmdCplt- PresDet- Interlock- Changed: MRL- PresDet- LinkState- RootCtl: ErrCorrectable- ErrNon-Fatal- ErrFatal- PMEIntEna- CRSVisible- RootCap: CRSVisible- RootSta: PME ReqID 0000, PMEStatus- PMEPending- DevCap2: Completion Timeout: Range ABC, TimeoutDis+, LTR+, OBFF Via WAKE# ARIFwd- DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled ARIFwd- LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [80] MSI: Enable- Count=1/1 Maskable- 64bit- Address: 00000000 Data: 0000 Capabilities: [90] Subsystem: ASUSTeK Computer Inc. Device 8534 Capabilities: [a0] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Kernel driver in use: pcieport Kernel modules: shpchp 00:1c.1 PCI bridge: Intel Corporation 82801 PCI Bridge (rev d4) (prog-if 01 [Subtractive decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort+ &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=00, secondary=03, subordinate=04, sec-latency=0 I/O behind bridge: 0000d000-0000dfff Memory behind bridge: f1300000-f13fffff Prefetchable memory behind bridge: 00000000fff00000-00000000000fffff Secondary status: 66MHz- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort+ &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA- MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [40] Express (v2) Root Port (Slot+), MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #2, Speed 5GT/s, Width x1, ASPM L0s L1, Latency L0 &lt;1us, L1 &lt;16us ClockPM- Surprise- LLActRep+ BwNot+ LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk- ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive+ BWMgmt- ABWMgmt- SltCap: AttnBtn- PwrCtrl- MRL- AttnInd- PwrInd- HotPlug- Surprise- Slot #1, PowerLimit 10.000W; Interlock- NoCompl+ SltCtl: Enable: AttnBtn- PwrFlt- MRL- PresDet- CmdCplt- HPIrq- LinkChg- Control: AttnInd Unknown, PwrInd Unknown, Power- Interlock- SltSta: Status: AttnBtn- PowerFlt- MRL- CmdCplt- PresDet+ Interlock- Changed: MRL- PresDet- LinkState- RootCtl: ErrCorrectable- ErrNon-Fatal- ErrFatal- PMEIntEna- CRSVisible- RootCap: CRSVisible- RootSta: PME ReqID 0000, PMEStatus- PMEPending- DevCap2: Completion Timeout: Range ABC, TimeoutDis+, LTR+, OBFF Not Supported ARIFwd- DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled ARIFwd- LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [80] MSI: Enable- Count=1/1 Maskable- 64bit- Address: 00000000 Data: 0000 Capabilities: [90] Subsystem: ASUSTeK Computer Inc. Device 8534 Capabilities: [a0] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- 00:1c.2 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #3 (rev d4) (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=00, secondary=05, subordinate=05, sec-latency=0 I/O behind bridge: 0000c000-0000cfff Memory behind bridge: f1200000-f12fffff Prefetchable memory behind bridge: 00000000fff00000-00000000000fffff Secondary status: 66MHz- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA- MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [40] Express (v2) Root Port (Slot+), MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #3, Speed 5GT/s, Width x1, ASPM L0s L1, Latency L0 &lt;512ns, L1 &lt;16us ClockPM- Surprise- LLActRep+ BwNot+ LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive+ BWMgmt+ ABWMgmt- SltCap: AttnBtn- PwrCtrl- MRL- AttnInd- PwrInd- HotPlug- Surprise- Slot #2, PowerLimit 10.000W; Interlock- NoCompl+ SltCtl: Enable: AttnBtn- PwrFlt- MRL- PresDet- CmdCplt- HPIrq- LinkChg- Control: AttnInd Unknown, PwrInd Unknown, Power- Interlock- SltSta: Status: AttnBtn- PowerFlt- MRL- CmdCplt- PresDet+ Interlock- Changed: MRL- PresDet- LinkState- RootCtl: ErrCorrectable- ErrNon-Fatal- ErrFatal- PMEIntEna- CRSVisible- RootCap: CRSVisible- RootSta: PME ReqID 0000, PMEStatus- PMEPending- DevCap2: Completion Timeout: Range ABC, TimeoutDis+, LTR+, OBFF Not Supported ARIFwd- DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled ARIFwd- LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [80] MSI: Enable- Count=1/1 Maskable- 64bit- Address: 00000000 Data: 0000 Capabilities: [90] Subsystem: ASUSTeK Computer Inc. Device 8534 Capabilities: [a0] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Kernel driver in use: pcieport Kernel modules: shpchp 00:1c.3 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #4 (rev d4) (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=00, secondary=06, subordinate=06, sec-latency=0 I/O behind bridge: 0000b000-0000bfff Memory behind bridge: f1100000-f11fffff Prefetchable memory behind bridge: 00000000fff00000-00000000000fffff Secondary status: 66MHz- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA- MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [40] Express (v2) Root Port (Slot+), MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #4, Speed 5GT/s, Width x1, ASPM L0s L1, Latency L0 &lt;512ns, L1 &lt;16us ClockPM- Surprise- LLActRep+ BwNot+ LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive+ BWMgmt+ ABWMgmt- SltCap: AttnBtn- PwrCtrl- MRL- AttnInd- PwrInd- HotPlug- Surprise- Slot #3, PowerLimit 10.000W; Interlock- NoCompl+ SltCtl: Enable: AttnBtn- PwrFlt- MRL- PresDet- CmdCplt- HPIrq- LinkChg- Control: AttnInd Unknown, PwrInd Unknown, Power- Interlock- SltSta: Status: AttnBtn- PowerFlt- MRL- CmdCplt- PresDet+ Interlock- Changed: MRL- PresDet- LinkState- RootCtl: ErrCorrectable- ErrNon-Fatal- ErrFatal- PMEIntEna- CRSVisible- RootCap: CRSVisible- RootSta: PME ReqID 0000, PMEStatus- PMEPending- DevCap2: Completion Timeout: Range ABC, TimeoutDis+, LTR+, OBFF Not Supported ARIFwd- DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled ARIFwd- LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [80] MSI: Enable- Count=1/1 Maskable- 64bit- Address: 00000000 Data: 0000 Capabilities: [90] Subsystem: ASUSTeK Computer Inc. Device 8534 Capabilities: [a0] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Kernel driver in use: pcieport Kernel modules: shpchp 00:1c.4 PCI bridge: Intel Corporation 8 Series/C220 Series Chipset Family PCI Express Root Port #5 (rev d4) (prog-if 00 [Normal decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=00, secondary=07, subordinate=07, sec-latency=0 I/O behind bridge: 0000a000-0000afff Memory behind bridge: cf600000-cfafffff Prefetchable memory behind bridge: 00000000cfb00000-00000000cfbfffff Secondary status: 66MHz- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA- MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [40] Express (v2) Root Port (Slot+), MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 128 bytes DevSta: CorrErr+ UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #5, Speed 5GT/s, Width x4, ASPM L0s L1, Latency L0 &lt;512ns, L1 &lt;16us ClockPM- Surprise- LLActRep+ BwNot+ LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 5GT/s, Width x4, TrErr- Train- SlotClk+ DLActive+ BWMgmt+ ABWMgmt- SltCap: AttnBtn- PwrCtrl- MRL- AttnInd- PwrInd- HotPlug- Surprise- Slot #4, PowerLimit 25.000W; Interlock- NoCompl+ SltCtl: Enable: AttnBtn- PwrFlt- MRL- PresDet- CmdCplt- HPIrq- LinkChg- Control: AttnInd Unknown, PwrInd Unknown, Power- Interlock- SltSta: Status: AttnBtn- PowerFlt- MRL- CmdCplt- PresDet+ Interlock- Changed: MRL- PresDet- LinkState- RootCtl: ErrCorrectable- ErrNon-Fatal- ErrFatal- PMEIntEna- CRSVisible- RootCap: CRSVisible- RootSta: PME ReqID 0000, PMEStatus- PMEPending- DevCap2: Completion Timeout: Range ABC, TimeoutDis+, LTR+, OBFF Not Supported ARIFwd- DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled ARIFwd- LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [80] MSI: Enable- Count=1/1 Maskable- 64bit- Address: 00000000 Data: 0000 Capabilities: [90] Subsystem: ASUSTeK Computer Inc. Device 8534 Capabilities: [a0] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Kernel driver in use: pcieport Kernel modules: shpchp 00:1d.0 USB controller: Intel Corporation 8 Series/C220 Series Chipset Family USB EHCI #1 (rev 04) (prog-if 20 [EHCI]) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Interrupt: pin A routed to IRQ 23 Region 0: Memory at f141b000 (32-bit, non-prefetchable) [size=1K] Capabilities: [50] Power Management version 2 Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [58] Debug port: BAR=1 offset=00a0 Capabilities: [98] PCI Advanced Features AFCap: TP+ FLR+ AFCtrl: FLR- AFStatus: TP- Kernel driver in use: ehci-pci Kernel modules: ehci_pci 00:1f.0 ISA bridge: Intel Corporation C226 Series Chipset Family Server Advanced SKU LPC Controller (rev 04) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Capabilities: [e0] Vendor Specific Information: Len=0c &lt;?&gt; Kernel driver in use: lpc_ich Kernel modules: lpc_ich 00:1f.2 SATA controller: Intel Corporation 8 Series/C220 Series Chipset Family 6-port SATA Controller 1 [AHCI mode] (rev 04) (prog-if 01 [AHCI 1.0]) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz+ UDF- FastB2B+ ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0 Interrupt: pin B routed to IRQ 46 Region 0: I/O ports at f0b0 [size=8] Region 1: I/O ports at f0a0 [size=4] Region 2: I/O ports at f090 [size=8] Region 3: I/O ports at f080 [size=4] Region 4: I/O ports at f060 [size=32] Region 5: Memory at f141a000 (32-bit, non-prefetchable) [size=2K] Capabilities: [80] MSI: Enable+ Count=1/1 Maskable- 64bit- Address: fee003b8 Data: 0000 Capabilities: [70] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot+,D3cold-) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [a8] SATA HBA v1.0 BAR4 Offset=00000004 Kernel driver in use: ahci Kernel modules: ahci 00:1f.3 SMBus: Intel Corporation 8 Series/C220 Series Chipset Family SMBus Controller (rev 04) Subsystem: ASUSTeK Computer Inc. Device 8534 Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Interrupt: pin C routed to IRQ 18 Region 0: Memory at f1419000 (64-bit, non-prefetchable) [size=256] Region 4: I/O ports at f040 [size=32] Kernel modules: i2c_i801 01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Hawaii XT [Radeon HD 8970] (prog-if 00 [VGA controller]) Subsystem: PC Partner Limited / Sapphire Technology Device e285 Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort+ &gt;SERR- &lt;PERR- INTx- Interrupt: pin A routed to IRQ 16 Region 0: Memory at e0000000 (64-bit, prefetchable) [size=256M] Region 2: Memory at f0000000 (64-bit, prefetchable) [size=8M] Region 4: I/O ports at e000 [size=256] Region 5: Memory at f0800000 (32-bit, non-prefetchable) [size=256K] Expansion ROM at f0840000 [disabled] [size=128K] Capabilities: [48] Vendor Specific Information: Len=08 &lt;?&gt; Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1+ D2+ AuxCurrent=0mA PME(D0-,D1+,D2+,D3hot+,D3cold-) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [58] Express (v2) Legacy Endpoint, MSI 00 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s &lt;4us, L1 unlimited ExtTag+ AttnBtn- AttnInd- PwrInd- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag+ PhantFunc- AuxPwr- NoSnoop+ MaxPayload 256 bytes, MaxReadReq 512 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr- TransPend- LnkCap: Port #0, Speed 8GT/s, Width x16, ASPM L0s L1, Latency L0 &lt;64ns, L1 &lt;1us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Not Supported, TimeoutDis-, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkCtl2: Target Link Speed: 8GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete+, EqualizationPhase1+ EqualizationPhase2+, EqualizationPhase3+, LinkEqualizationRequest- Capabilities: [a0] MSI: Enable- Count=1/1 Maskable- 64bit+ Address: 00000000fee00458 Data: 0000 Capabilities: [100 v1] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150 v2] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn- Capabilities: [270 v1] #19 Capabilities: [2b0 v1] Address Translation Service (ATS) ATSCap: Invalidate Queue Depth: 00 ATSCtl: Enable-, Smallest Translation Unit: 00 Capabilities: [2c0 v1] #13 Capabilities: [2d0 v1] #1b Kernel driver in use: vfio-pci Kernel modules: radeon 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Device aac8 Subsystem: PC Partner Limited / Sapphire Technology Device aac8 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin B routed to IRQ 17 Region 0: Memory at f0860000 (64-bit, non-prefetchable) [size=16K] Capabilities: [48] Vendor Specific Information: Len=08 &lt;?&gt; Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1+ D2+ AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [58] Express (v2) Legacy Endpoint, MSI 00 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s &lt;4us, L1 unlimited ExtTag+ AttnBtn- AttnInd- PwrInd- RBE+ FLReset- DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported- RlxdOrd- ExtTag+ PhantFunc- AuxPwr- NoSnoop+ MaxPayload 256 bytes, MaxReadReq 512 bytes DevSta: CorrErr+ UncorrErr- FatalErr- UnsuppReq+ AuxPwr- TransPend- LnkCap: Port #0, Speed 8GT/s, Width x16, ASPM L0s L1, Latency L0 &lt;64ns, L1 &lt;1us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Not Supported, TimeoutDis-, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [a0] MSI: Enable- Count=1/1 Maskable- 64bit+ Address: 0000000000000000 Data: 0000 Capabilities: [100 v1] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150 v2] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn- Kernel driver in use: vfio-pci Kernel modules: snd_hda_intel 03:00.0 PCI bridge: ASMedia Technology Inc. ASM1083/1085 PCIe to PCI Bridge (rev 03) (prog-if 01 [Subtractive decode]) Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Bus: primary=03, secondary=04, subordinate=04, sec-latency=32 I/O behind bridge: 0000d000-0000dfff Memory behind bridge: f1300000-f13fffff Prefetchable memory behind bridge: 00000000fff00000-00000000000fffff Secondary status: 66MHz+ FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort+ &lt;SERR- &lt;PERR- BridgeCtl: Parity- SERR- NoISA- VGA- MAbort- &gt;Reset- FastB2B- PriDiscTmr- SecDiscTmr- DiscTmrStat- DiscTmrSERREn- Capabilities: [c0] Subsystem: ASUSTeK Computer Inc. Device 8489 04:02.0 FireWire (IEEE 1394): VIA Technologies, Inc. VT6306/7/8 [Fire II(M)] IEEE 1394 OHCI Controller (rev c0) (prog-if 10 [OHCI]) Subsystem: ASUSTeK Computer Inc. Device 82eb Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx- Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 32 (8000ns max), Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 19 Region 0: Memory at f1300000 (32-bit, non-prefetchable) [size=2K] Region 1: I/O ports at d000 [size=128] Capabilities: [50] Power Management version 2 Flags: PMEClk- DSI- D1- D2+ AuxCurrent=0mA PME(D0-,D1-,D2+,D3hot+,D3cold+) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Kernel driver in use: firewire_ohci Kernel modules: firewire_ohci 05:00.0 Ethernet controller: Intel Corporation I210 Gigabit Network Connection (rev 03) Subsystem: ASUSTeK Computer Inc. Device 8557 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 18 Region 0: Memory at f1200000 (32-bit, non-prefetchable) [size=512K] Region 2: I/O ports at c000 [size=32] Region 3: Memory at f1280000 (32-bit, non-prefetchable) [size=16K] Capabilities: [40] Power Management version 3 Flags: PMEClk- DSI+ D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=1 PME- Capabilities: [50] MSI: Enable- Count=1/1 Maskable+ 64bit+ Address: 0000000000000000 Data: 0000 Masking: 00000000 Pending: 00000000 Capabilities: [70] MSI-X: Enable+ Count=5 Masked- Vector table: BAR=3 offset=00000000 PBA: BAR=3 offset=00002000 Capabilities: [a0] Express (v2) Endpoint, MSI 00 DevCap: MaxPayload 512 bytes, PhantFunc 0, Latency L0s &lt;512ns, L1 &lt;64us ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset+ DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported+ RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop+ FLReset- MaxPayload 128 bytes, MaxReadReq 512 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #0, Speed 2.5GT/s, Width x1, ASPM L0s L1, Latency L0 &lt;2us, L1 &lt;16us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Range ABCD, TimeoutDis+, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkCtl2: Target Link Speed: 2.5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [100 v2] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn- Capabilities: [140 v1] Device Serial Number 74-d0-2b-ff-ff-97-9d-0c Capabilities: [1a0 v1] Transaction Processing Hints Device specific mode supported Steering table in TPH capability structure Kernel driver in use: igb Kernel modules: igb 06:00.0 Ethernet controller: Intel Corporation I210 Gigabit Network Connection (rev 03) Subsystem: ASUSTeK Computer Inc. Device 8557 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 21 Region 0: Memory at f1100000 (32-bit, non-prefetchable) [size=512K] Region 2: I/O ports at b000 [size=32] Region 3: Memory at f1180000 (32-bit, non-prefetchable) [size=16K] Capabilities: [40] Power Management version 3 Flags: PMEClk- DSI+ D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=1 PME- Capabilities: [50] MSI: Enable- Count=1/1 Maskable+ 64bit+ Address: 0000000000000000 Data: 0000 Masking: 00000000 Pending: 00000000 Capabilities: [70] MSI-X: Enable+ Count=5 Masked- Vector table: BAR=3 offset=00000000 PBA: BAR=3 offset=00002000 Capabilities: [a0] Express (v2) Endpoint, MSI 00 DevCap: MaxPayload 512 bytes, PhantFunc 0, Latency L0s &lt;512ns, L1 &lt;64us ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset+ DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported+ RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop+ FLReset- MaxPayload 128 bytes, MaxReadReq 512 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #0, Speed 2.5GT/s, Width x1, ASPM L0s L1, Latency L0 &lt;2us, L1 &lt;16us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 2.5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Range ABCD, TimeoutDis+, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkCtl2: Target Link Speed: 2.5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [100 v2] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn- Capabilities: [140 v1] Device Serial Number 74-d0-2b-ff-ff-97-9d-0d Capabilities: [1a0 v1] Transaction Processing Hints Device specific mode supported Steering table in TPH capability structure Kernel driver in use: igb Kernel modules: igb 07:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS2008 PCI-Express Fusion-MPT SAS-2 [Falcon] (rev 03) Subsystem: LSI Logic / Symbios Logic Device 3020 Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 16 Region 0: I/O ports at a000 [size=256] Region 1: Memory at cfa40000 (64-bit, non-prefetchable) [size=16K] Region 3: Memory at cf600000 (64-bit, non-prefetchable) [size=256K] Expansion ROM at cfb00000 [disabled] [size=512K] Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1+ D2+ AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-) Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [68] Express (v2) Endpoint, MSI 00 DevCap: MaxPayload 4096 bytes, PhantFunc 0, Latency L0s &lt;64ns, L1 &lt;1us ExtTag+ AttnBtn- AttnInd- PwrInd- RBE+ FLReset+ DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported+ RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop+ FLReset- MaxPayload 128 bytes, MaxReadReq 512 bytes DevSta: CorrErr+ UncorrErr- FatalErr- UnsuppReq+ AuxPwr- TransPend- LnkCap: Port #0, Speed 5GT/s, Width x8, ASPM L0s, Latency L0 &lt;64ns, L1 &lt;1us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- Retrain- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 5GT/s, Width x4, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Range BC, TimeoutDis+, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [d0] Vital Product Data Unknown small resource type 00, will not decode more. Capabilities: [a8] MSI: Enable- Count=1/1 Maskable- 64bit+ Address: 0000000000000000 Data: 0000 Capabilities: [c0] MSI-X: Enable+ Count=15 Masked- Vector table: BAR=1 offset=00002000 PBA: BAR=1 offset=00003800 Capabilities: [100 v1] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn- Capabilities: [138 v1] Power Budgeting &lt;?&gt; Capabilities: [150 v1] Single Root I/O Virtualization (SR-IOV) IOVCap: Migration-, Interrupt Message Number: 000 IOVCtl: Enable- Migration- Interrupt- MSE- ARIHierarchy- IOVSta: Migration- Initial VFs: 16, Total VFs: 16, Number of VFs: 0, Function Dependency Link: 00 VF offset: 1, stride: 1, Device ID: 0072 Supported Page Size: 00000553, System Page Size: 00000001 Region 0: Memory at 00000000cfa44000 (64-bit, non-prefetchable) Region 2: Memory at 00000000cf640000 (64-bit, non-prefetchable) VF Migration: offset: 00000000, BIR: 0 Capabilities: [190 v1] Alternative Routing-ID Interpretation (ARI) ARICap: MFVC- ACS-, Next Function: 0 ARICtl: MFVC- ACS-, Function Group: 0 Kernel driver in use: mpt2sas Kernel modules: mpt2sas</code></pre></div><p><strong><span class="bbu">info mtree and pci</span></strong></p><div class="codebox"><pre class="vscroll"><code>INFO MTREE: memory 0000000000000000-ffffffffffffffff (prio 0, RW): system 0000000000000000-00000000afffffff (prio 0, RW): alias ram-below-4g @pc.ram 0000000000000000-00000000afffffff 0000000000000000-ffffffffffffffff (prio -1, RW): pci 00000000000a0000-00000000000bffff (prio 1, RW): alias pci_bridge_vga_mem @pci_bridge_pci 00000000000a0000-00000000000bffff 00000000000c0000-00000000000dffff (prio 1, RW): pc.rom 00000000000e0000-00000000000fffff (prio 1, R-): alias isa-bios @pc.bios 0000000000000000-000000000001ffff 00000000d0000000-00000000efffffff (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000d0000000-00000000efffffff 00000000f0000000-00000000f0000000 (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000f0000000-00000000f0000000 00000000fe400000-00000000fe7fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe400000-00000000fe7fffff 00000000fe800000-00000000fe9fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe800000-00000000fe9fffff 00000000fea00000-00000000fea03fff (prio 1, RW): VFIO 0000:01:00.1 BAR 0 00000000fea00000-00000000fea03fff (prio 0, RW): VFIO 0000:01:00.1 BAR 0 mmap 00000000fea04000-00000000fea04fff (prio 1, RW): ahci 00000000fffe0000-00000000ffffffff (prio 0, R-): pc.bios 00000000000a0000-00000000000bffff (prio 1, RW): alias smram-region @pci 00000000000a0000-00000000000bffff 00000000000c0000-00000000000c3fff (prio 1, R-): alias pam-rom @pc.ram 00000000000c0000-00000000000c3fff 00000000000c4000-00000000000c7fff (prio 1, R-): alias pam-rom @pc.ram 00000000000c4000-00000000000c7fff 00000000000c8000-00000000000cbfff (prio 1, R-): alias pam-rom @pc.ram 00000000000c8000-00000000000cbfff 00000000000cc000-00000000000cffff (prio 1, R-): alias pam-rom @pc.ram 00000000000cc000-00000000000cffff 00000000000d0000-00000000000d3fff (prio 1, R-): alias pam-rom @pc.ram 00000000000d0000-00000000000d3fff 00000000000d1000-00000000000d3fff (prio 1000, RW): alias kvmvapic-rom @pc.ram 00000000000d1000-00000000000d3fff 00000000000d4000-00000000000d7fff (prio 1, R-): alias pam-rom @pc.ram 00000000000d4000-00000000000d7fff 00000000000d8000-00000000000dbfff (prio 1, R-): alias pam-rom @pc.ram 00000000000d8000-00000000000dbfff 00000000000dc000-00000000000dffff (prio 1, R-): alias pam-rom @pc.ram 00000000000dc000-00000000000dffff 00000000000e0000-00000000000e3fff (prio 1, R-): alias pam-rom @pc.ram 00000000000e0000-00000000000e3fff 00000000000e4000-00000000000e7fff (prio 1, R-): alias pam-rom @pc.ram 00000000000e4000-00000000000e7fff 00000000000e8000-00000000000ebfff (prio 1, R-): alias pam-rom @pc.ram 00000000000e8000-00000000000ebfff 00000000000ec000-00000000000effff (prio 1, RW): alias pam-ram @pc.ram 00000000000ec000-00000000000effff 00000000000f0000-00000000000fffff (prio 1, R-): alias pam-rom @pc.ram 00000000000f0000-00000000000fffff 00000000b0000000-00000000bfffffff (prio 0, RW): pcie-mmcfg 00000000fec00000-00000000fec00fff (prio 0, RW): kvm-ioapic 00000000fee00000-00000000feefffff (prio 4096, RW): icc-apic-container 00000000fee00000-00000000feefffff (prio 0, RW): kvm-apic-msi 0000000100000000-000000064fffffff (prio 0, RW): alias ram-above-4g @pc.ram 00000000b0000000-00000005ffffffff I/O 0000000000000000-000000000000ffff (prio 0, RW): io 0000000000000000-0000000000000007 (prio 0, RW): dma-chan 0000000000000008-000000000000000f (prio 0, RW): dma-cont 0000000000000020-0000000000000021 (prio 0, RW): kvm-pic 0000000000000040-0000000000000043 (prio 0, RW): kvm-pit 0000000000000060-0000000000000060 (prio 0, RW): i8042-data 0000000000000061-0000000000000061 (prio 0, RW): elcr 0000000000000064-0000000000000064 (prio 0, RW): i8042-cmd 0000000000000070-0000000000000071 (prio 0, RW): rtc 000000000000007e-000000000000007f (prio 0, RW): kvmvapic 0000000000000080-0000000000000080 (prio 0, RW): ioport80 0000000000000081-0000000000000083 (prio 0, RW): dma-page 0000000000000087-0000000000000087 (prio 0, RW): dma-page 0000000000000089-000000000000008b (prio 0, RW): dma-page 000000000000008f-000000000000008f (prio 0, RW): dma-page 0000000000000092-0000000000000092 (prio 0, RW): port92 00000000000000a0-00000000000000a1 (prio 0, RW): kvm-pic 00000000000000b2-00000000000000b3 (prio 0, RW): apm-io 00000000000000c0-00000000000000cf (prio 0, RW): dma-chan 00000000000000d0-00000000000000df (prio 0, RW): dma-cont 00000000000000f0-00000000000000f0 (prio 0, RW): ioportF0 00000000000003b0-00000000000003bb (prio 1, RW): alias pci_bridge_vga_io_lo @pci_bridge_io 00000000000003b0-00000000000003bb 00000000000003c0-00000000000003df (prio 1, RW): alias pci_bridge_vga_io_hi @pci_bridge_io 00000000000003c0-00000000000003df 00000000000003f1-00000000000003f5 (prio 0, RW): fdc 00000000000003f7-00000000000003f7 (prio 0, RW): fdc 00000000000004d0-00000000000004d0 (prio 0, RW): kvm-elcr 00000000000004d1-00000000000004d1 (prio 0, RW): kvm-elcr 0000000000000510-0000000000000511 (prio 0, RW): fwcfg 0000000000000cf8-0000000000000cfb (prio 0, RW): pci-conf-idx 0000000000000cf9-0000000000000cf9 (prio 1, RW): lpc-reset-control 0000000000000cfc-0000000000000cff (prio 0, RW): pci-conf-data 0000000000005658-0000000000005658 (prio 0, RW): vmport 000000000000b000-000000000000b07f (prio 0, RW): ich9-pm 000000000000b000-000000000000b003 (prio 0, RW): acpi-evt 000000000000b004-000000000000b005 (prio 0, RW): acpi-cnt 000000000000b008-000000000000b00b (prio 0, RW): acpi-tmr 000000000000b020-000000000000b02f (prio 0, RW): apci-gpe0 000000000000b030-000000000000b037 (prio 0, RW): apci-smi 000000000000b100-000000000000b13f (prio 1, RW): pm-smbus 000000000000c000-000000000000cfff (prio 1, RW): alias pci_bridge_io @pci_bridge_io 000000000000c000-000000000000cfff 000000000000d000-000000000000dfff (prio 1, RW): alias pci_bridge_io @pci_bridge_io 000000000000d000-000000000000dfff 000000000000e040-000000000000e05f (prio 1, RW): ahci-idp mch ICH9 LPC ich9-ahci 0000000000000000-ffffffffffffffff (prio 0, RW): alias bus master @system 0000000000000000-ffffffffffffffff ICH9 SMB i82801b11-bridge pci-bridge ich9-usb-ehci1 0000000000000000-ffffffffffffffff (prio 0, RW): alias bus master @system 0000000000000000-ffffffffffffffff ich9-usb-uhci1 0000000000000000-ffffffffffffffff (prio 0, RW): alias bus master @system 0000000000000000-ffffffffffffffff ich9-usb-uhci2 0000000000000000-ffffffffffffffff (prio 0, RW): alias bus master @system 0000000000000000-ffffffffffffffff ich9-usb-uhci3 0000000000000000-ffffffffffffffff (prio 0, RW): alias bus master @system 0000000000000000-ffffffffffffffff virtio-blk-pci virtio-net-pci virtio-balloon-pci ioh3420 vfio-pci vfio-pci aliases pc.ram 0000000000000000-00000005ffffffff (prio 0, RW): pc.ram pci_bridge_pci 0000000000000000-ffffffffffffffff (prio 0, RW): pci_bridge_pci 00000000000a0000-00000000000bffff (prio 1, RW): vfio-vga-mmio@0xa0000 00000000d0000000-00000000dfffffff (prio 1, RW): VFIO 0000:01:00.0 BAR 0 00000000d0000000-00000000dfffffff (prio 0, RW): VFIO 0000:01:00.0 BAR 0 mmap 00000000e0000000-00000000e07fffff (prio 1, RW): VFIO 0000:01:00.0 BAR 2 00000000e0000000-00000000e07fffff (prio 0, RW): VFIO 0000:01:00.0 BAR 2 mmap 00000000e0004000-00000000e0004fff (prio 1, RW): vfio-ati-bar2-4000-quirk 00000000fe800000-00000000fe83ffff (prio 1, RW): VFIO 0000:01:00.0 BAR 5 00000000fe800000-00000000fe83ffff (prio 0, RW): VFIO 0000:01:00.0 BAR 5 mmap pc.bios 00000000fffe0000-00000000ffffffff (prio 0, R-): pc.bios pci_bridge_pci 0000000000000000-ffffffffffffffff (prio 0, RW): pci_bridge_pci 00000000f0000000-00000000f0000000 (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000f0000000-00000000f0000000 00000000fe400000-00000000fe5fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe400000-00000000fe5fffff 00000000fe600000-00000000fe6000ff (prio 1, RW): shpc-bar 00000000fe600000-00000000fe60009f (prio 0, RW): shpc-mmio pci 0000000000000000-ffffffffffffffff (prio -1, RW): pci 00000000000a0000-00000000000bffff (prio 1, RW): alias pci_bridge_vga_mem @pci_bridge_pci 00000000000a0000-00000000000bffff 00000000000c0000-00000000000dffff (prio 1, RW): pc.rom 00000000000e0000-00000000000fffff (prio 1, R-): alias isa-bios @pc.bios 0000000000000000-000000000001ffff 00000000d0000000-00000000efffffff (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000d0000000-00000000efffffff 00000000f0000000-00000000f0000000 (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000f0000000-00000000f0000000 00000000fe400000-00000000fe7fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe400000-00000000fe7fffff 00000000fe800000-00000000fe9fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe800000-00000000fe9fffff 00000000fea00000-00000000fea03fff (prio 1, RW): VFIO 0000:01:00.1 BAR 0 00000000fea00000-00000000fea03fff (prio 0, RW): VFIO 0000:01:00.1 BAR 0 mmap 00000000fea04000-00000000fea04fff (prio 1, RW): ahci 00000000fffe0000-00000000ffffffff (prio 0, R-): pc.bios pci_bridge_io 0000000000000000-000000000000ffff (prio 0, RW): pci_bridge_io 00000000000003b0-00000000000003bb (prio 1, RW): vfio-vga-io@0x3b0 00000000000003c0-00000000000003df (prio 1, RW): vfio-vga-io@0x3c0 00000000000003c3-00000000000003c3 (prio 0, RW): vfio-ati-3c3-quirk 000000000000d000-000000000000d0ff (prio 1, RW): VFIO 0000:01:00.0 BAR 4 000000000000d000-000000000000d007 (prio 1, RW): vfio-ati-bar4-window-quirk 000000000000d000-000000000000d000 (prio 0, RW): VFIO 0000:01:00.0 BAR 4 mmap pci_bridge_io 0000000000000000-000000000000ffff (prio 0, RW): pci_bridge_io 000000000000c000-000000000000cfff (prio 1, RW): alias pci_bridge_io @pci_bridge_io 000000000000c000-000000000000cfff system 0000000000000000-ffffffffffffffff (prio 0, RW): system 0000000000000000-00000000afffffff (prio 0, RW): alias ram-below-4g @pc.ram 0000000000000000-00000000afffffff 0000000000000000-ffffffffffffffff (prio -1, RW): pci 00000000000a0000-00000000000bffff (prio 1, RW): alias pci_bridge_vga_mem @pci_bridge_pci 00000000000a0000-00000000000bffff 00000000000c0000-00000000000dffff (prio 1, RW): pc.rom 00000000000e0000-00000000000fffff (prio 1, R-): alias isa-bios @pc.bios 0000000000000000-000000000001ffff 00000000d0000000-00000000efffffff (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000d0000000-00000000efffffff 00000000f0000000-00000000f0000000 (prio 1, RW): alias pci_bridge_pref_mem @pci_bridge_pci 00000000f0000000-00000000f0000000 00000000fe400000-00000000fe7fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe400000-00000000fe7fffff 00000000fe800000-00000000fe9fffff (prio 1, RW): alias pci_bridge_mem @pci_bridge_pci 00000000fe800000-00000000fe9fffff 00000000fea00000-00000000fea03fff (prio 1, RW): VFIO 0000:01:00.1 BAR 0 00000000fea00000-00000000fea03fff (prio 0, RW): VFIO 0000:01:00.1 BAR 0 mmap 00000000fea04000-00000000fea04fff (prio 1, RW): ahci 00000000fffe0000-00000000ffffffff (prio 0, R-): pc.bios 00000000000a0000-00000000000bffff (prio 1, RW): alias smram-region @pci 00000000000a0000-00000000000bffff 00000000000c0000-00000000000c3fff (prio 1, R-): alias pam-rom @pc.ram 00000000000c0000-00000000000c3fff 00000000000c4000-00000000000c7fff (prio 1, R-): alias pam-rom @pc.ram 00000000000c4000-00000000000c7fff 00000000000c8000-00000000000cbfff (prio 1, R-): alias pam-rom @pc.ram 00000000000c8000-00000000000cbfff 00000000000cc000-00000000000cffff (prio 1, R-): alias pam-rom @pc.ram 00000000000cc000-00000000000cffff 00000000000d0000-00000000000d3fff (prio 1, R-): alias pam-rom @pc.ram 00000000000d0000-00000000000d3fff 00000000000d1000-00000000000d3fff (prio 1000, RW): alias kvmvapic-rom @pc.ram 00000000000d1000-00000000000d3fff 00000000000d4000-00000000000d7fff (prio 1, R-): alias pam-rom @pc.ram 00000000000d4000-00000000000d7fff 00000000000d8000-00000000000dbfff (prio 1, R-): alias pam-rom @pc.ram 00000000000d8000-00000000000dbfff 00000000000dc000-00000000000dffff (prio 1, R-): alias pam-rom @pc.ram 00000000000dc000-00000000000dffff 00000000000e0000-00000000000e3fff (prio 1, R-): alias pam-rom @pc.ram 00000000000e0000-00000000000e3fff 00000000000e4000-00000000000e7fff (prio 1, R-): alias pam-rom @pc.ram 00000000000e4000-00000000000e7fff 00000000000e8000-00000000000ebfff (prio 1, R-): alias pam-rom @pc.ram 00000000000e8000-00000000000ebfff 00000000000ec000-00000000000effff (prio 1, RW): alias pam-ram @pc.ram 00000000000ec000-00000000000effff 00000000000f0000-00000000000fffff (prio 1, R-): alias pam-rom @pc.ram 00000000000f0000-00000000000fffff 00000000b0000000-00000000bfffffff (prio 0, RW): pcie-mmcfg 00000000fec00000-00000000fec00fff (prio 0, RW): kvm-ioapic 00000000fee00000-00000000feefffff (prio 4096, RW): icc-apic-container 00000000fee00000-00000000feefffff (prio 0, RW): kvm-apic-msi 0000000100000000-000000064fffffff (prio 0, RW): alias ram-above-4g @pc.ram 00000000b0000000-00000005ffffffff pci_bridge_pci 0000000000000000-ffffffffffffffff (prio 0, RW): pci_bridge_pci 00000000fe440000-00000000fe440fff (prio 1, RW): virtio-net-pci-msix 00000000fe440000-00000000fe44002f (prio 0, RW): msix-table 00000000fe440800-00000000fe440807 (prio 0, RW): msix-pba 00000000fe441000-00000000fe441fff (prio 1, RW): ehci 00000000fe441000-00000000fe44100f (prio 0, RW): capabilities 00000000fe441020-00000000fe441063 (prio 0, RW): operational 00000000fe441064-00000000fe44107b (prio 0, RW): ports 00000000fe442000-00000000fe442fff (prio 1, RW): virtio-blk-pci-msix 00000000fe442000-00000000fe44201f (prio 0, RW): msix-table 00000000fe442800-00000000fe442807 (prio 0, RW): msix-pba pci_bridge_io 0000000000000000-000000000000ffff (prio 0, RW): pci_bridge_io 000000000000c000-000000000000c03f (prio 1, RW): virtio-pci 000000000000c040-000000000000c05f (prio 1, RW): virtio-pci 000000000000c060-000000000000c07f (prio 1, RW): uhci 000000000000c080-000000000000c09f (prio 1, RW): uhci 000000000000c0a0-000000000000c0bf (prio 1, RW): uhci 000000000000c0c0-000000000000c0df (prio 1, RW): virtio-pci INFO PCI: Bus 0, device 0, function 0: Host bridge: PCI device 8086:29c0 id &quot;&quot; Bus 0, device 1, function 0: Audio controller: PCI device 1002:aac8 IRQ 11. BAR0: 64 bit memory at 0xfea00000 [0xfea03fff]. id &quot;&quot; Bus 0, device 28, function 0: PCI bridge: PCI device 8086:3420 BUS 0. secondary bus 1. subordinate bus 1. IO range [0xd000, 0xdfff] memory range [0xfe800000, 0xfe9fffff] prefetchable memory range [0xd0000000, 0xefffffff] id &quot;root&quot; Bus 1, device 0, function 0: VGA controller: PCI device 1002:67b0 IRQ 10. BAR0: 64 bit prefetchable memory at 0xd0000000 [0xdfffffff]. BAR2: 64 bit prefetchable memory at 0xe0000000 [0xe07fffff]. BAR4: I/O at 0xd000 [0xd0ff]. BAR5: 32 bit memory at 0xfe800000 [0xfe83ffff]. BAR6: 32 bit memory at 0xffffffffffffffff [0x0001fffe]. id &quot;&quot; Bus 0, device 30, function 0: PCI bridge: PCI device 8086:244e BUS 0. secondary bus 2. subordinate bus 3. IO range [0xc000, 0xcfff] memory range [0xfe400000, 0xfe7fffff] prefetchable memory range [0xf0000000, 0xefffffff] id &quot;pci.1&quot; Bus 2, device 1, function 0: PCI bridge: PCI device 1b36:0001 IRQ 10. BUS 2. secondary bus 3. subordinate bus 3. IO range [0xc000, 0xcfff] memory range [0xfe400000, 0xfe5fffff] prefetchable memory range [0xf0000000, 0xefffffff] BAR0: 64 bit memory at 0xfe600000 [0xfe6000ff]. id &quot;pci.2&quot; Bus 3, device 1, function 0: Ethernet controller: PCI device 1af4:1000 IRQ 11. BAR0: I/O at 0xc040 [0xc05f]. BAR1: 32 bit memory at 0xfe440000 [0xfe440fff]. BAR6: 32 bit memory at 0xffffffffffffffff [0x0003fffe]. id &quot;net0&quot; Bus 3, device 2, function 0: USB controller: PCI device 8086:2934 IRQ 11. BAR4: I/O at 0xc060 [0xc07f]. id &quot;&quot; Bus 3, device 2, function 1: USB controller: PCI device 8086:2935 IRQ 10. BAR4: I/O at 0xc080 [0xc09f]. id &quot;&quot; Bus 3, device 2, function 2: USB controller: PCI device 8086:2936 IRQ 10. BAR4: I/O at 0xc0a0 [0xc0bf]. id &quot;&quot; Bus 3, device 2, function 7: USB controller: PCI device 8086:293a IRQ 11. BAR0: 32 bit memory at 0xfe441000 [0xfe441fff]. id &quot;usb&quot; Bus 3, device 3, function 0: SCSI controller: PCI device 1af4:1001 IRQ 10. BAR0: I/O at 0xc000 [0xc03f]. BAR1: 32 bit memory at 0xfe442000 [0xfe442fff]. id &quot;virtio-disk0&quot; Bus 3, device 4, function 0: Class 0255: PCI device 1af4:1002 IRQ 10. BAR0: I/O at 0xc0c0 [0xc0df]. id &quot;balloon0&quot; Bus 0, device 31, function 0: ISA bridge: PCI device 8086:2918 id &quot;&quot; Bus 0, device 31, function 2: SATA controller: PCI device 8086:2922 IRQ 10. BAR4: I/O at 0xe040 [0xe05f]. BAR5: 32 bit memory at 0xfea04000 [0xfea04fff]. id &quot;&quot; Bus 0, device 31, function 3: SMBus: PCI device 8086:2930 IRQ 10. BAR4: I/O at 0xb100 [0xb13f]. id &quot;&quot;</code></pre></div><p>Sorry for the big dump. I don&#039;t see anything out of the ordinary, unless I&#039;m being blind? I&#039;m going to try and see if I can get the card to run in native Linux with the opensource drivers.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387942">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387953" class="blockpost roweven"> <h2><span><span class="conr">#1262</span> <a href="viewtopic.php?pid=1387953#p1387953">2014-03-02 23:25:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>For the moment, I&#039;m actually giving up on using VT-d, and have switched to Windows as the host and Linux as a storage-only guest.&#160; I&#039;m tired of all those assertion failures and the need to suspend and resume the host for the guest to start.</p><p>Incidentally, before Borderlands patch, the VM gave a mere 25% of the bare-hardware performance (30FPS vs 120FPS). I haven&#039;t tried with the patches.</p><p>As for rendering to a window on the host, you&#039;d essentially need something like Lucid Virtu MVP, with the emulated Cirrus card as the output device, rather than an Intel card.<br />On my system, the &quot;Star Swarm&quot; mantle demo can use the Radeon for rendering, while displaying the output on the Intel GPU.&#160; Who knows... maybe you can do the same with the Cirrus!</p><p>For switching between host and guest, I&#039;d actually recommend using a KVM switch, and passing through an actual USB controller.&#160; I tried passing through a hub instead, but the only thing that got forwarded was the hub itself.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387953">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387957" class="blockpost rowodd"> <h2><span><span class="conr">#1263</span> <a href="viewtopic.php?pid=1387957#p1387957">2014-03-02 23:32:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78314">MacCoaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-06</span></dd> <dd><span>Posts: 10</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>MacCoaster wrote:</cite><blockquote><div><p>I&#039;m going to try and see if I can get the card to run in native Linux with the opensource drivers.</p></div></blockquote></div><p>Well, crap:</p><div class="codebox"><pre class="vscroll"><code>[ 1902.089496] [drm] radeon kernel modesetting enabled. [ 1902.089542] radeon 0000:01:00.0: enabling device (0000 -&gt; 0003) [ 1902.089732] [drm] initializing kernel modesetting (HAWAII 0x1002:0x67B0 0x174B:0xE285). [ 1902.089760] [drm] register mmio base: 0xF0800000 [ 1902.089761] [drm] register mmio size: 262144 [ 1902.089769] [drm] doorbell mmio base: 0xF0000000 [ 1902.089769] [drm] doorbell mmio size: 8388608 [ 1902.566774] ATOM BIOS: C67101 [ 1902.566789] [drm] GPU not posted. posting now... [ 1902.587575] radeon 0000:01:00.0: VRAM: 4096M 0x0000000000000000 - 0x00000000FFFFFFFF (4096M used) [ 1902.587576] radeon 0000:01:00.0: GTT: 1024M 0x0000000100000000 - 0x000000013FFFFFFF [ 1902.587577] [drm] Detected VRAM RAM=4096M, BAR=256M [ 1902.587578] [drm] RAM width 512bits DDR [ 1902.587701] [TTM] Zone kernel: Available graphics memory: 16461126 kiB [ 1902.587714] [TTM] Zone dma32: Available graphics memory: 2097152 kiB [ 1902.587714] [TTM] Initializing pool allocator [ 1902.587717] [TTM] Initializing DMA pool allocator [ 1902.587726] [drm] radeon: 4096M of VRAM memory ready [ 1902.587726] [drm] radeon: 1024M of GTT memory ready. [ 1902.587948] [drm] GART: num cpu pages 262144, num gpu pages 262144 [ 1902.588381] [drm] probing gen 2 caps for device 8086:c01 = 261ad03/e [ 1902.588383] [drm] PCIE gen 3 link speeds already enabled [ 1902.589539] [drm] Loading HAWAII Microcode [ 1902.590805] [drm] PCIE GART of 1024M enabled (table at 0x0000000000277000). [ 1902.590897] radeon 0000:01:00.0: WB enabled [ 1902.590906] radeon 0000:01:00.0: fence driver on ring 0 use gpu addr 0x0000000100000c00 and cpu addr 0xffff8807e9679c00 [ 1902.590907] radeon 0000:01:00.0: fence driver on ring 1 use gpu addr 0x0000000100000c04 and cpu addr 0xffff8807e9679c04 [ 1902.590908] radeon 0000:01:00.0: fence driver on ring 2 use gpu addr 0x0000000100000c08 and cpu addr 0xffff8807e9679c08 [ 1902.590908] radeon 0000:01:00.0: fence driver on ring 3 use gpu addr 0x0000000100000c0c and cpu addr 0xffff8807e9679c0c [ 1902.590909] radeon 0000:01:00.0: fence driver on ring 4 use gpu addr 0x0000000100000c10 and cpu addr 0xffff8807e9679c10 [ 1902.591283] radeon 0000:01:00.0: fence driver on ring 5 use gpu addr 0x0000000000076c98 and cpu addr 0xffffc90022836c98 [ 1902.591284] [drm] Supports vblank timestamp caching Rev 2 (21.10.2013). [ 1902.591284] [drm] Driver supports precise vblank timestamp query. [ 1902.591298] radeon 0000:01:00.0: irq 61 for MSI/MSI-X [ 1902.591304] radeon 0000:01:00.0: radeon: using MSI. [ 1902.591323] [drm] radeon: irq initialized. [ 1902.593780] [drm] ring test on 0 succeeded in 4 usecs [ 1902.593845] [drm] ring test on 1 succeeded in 3 usecs [ 1902.593857] [drm] ring test on 2 succeeded in 3 usecs [ 1902.594025] [drm] ring test on 3 succeeded in 2 usecs [ 1902.594035] [drm] ring test on 4 succeeded in 2 usecs [ 1902.650012] [drm] ring test on 5 succeeded in 2 usecs [ 1902.670004] [drm] UVD initialized successfully. [ 1902.671134] [drm] Enabling audio 0 support [ 1902.671134] [drm] Enabling audio 1 support [ 1902.671135] [drm] Enabling audio 2 support [ 1902.671136] [drm] Enabling audio 3 support [ 1902.671137] [drm] Enabling audio 4 support [ 1902.671137] [drm] Enabling audio 5 support [ 1902.671280] [drm] ib test on ring 0 succeeded in 0 usecs [ 1902.671420] [drm] ib test on ring 1 succeeded in 0 usecs [ 1902.671592] [drm] ib test on ring 2 succeeded in 0 usecs [ 1902.671728] [drm] ib test on ring 3 succeeded in 0 usecs [ 1902.671864] [drm] ib test on ring 4 succeeded in 1 usecs [ 1902.692772] [drm] ib test on ring 5 succeeded [ 1902.713505] [drm] Radeon Display Connectors [ 1902.713507] [drm] Connector 0: [ 1902.713508] [drm] DP-2 [ 1902.713509] [drm] HPD2 [ 1902.713511] [drm] DDC: 0x6530 0x6530 0x6534 0x6534 0x6538 0x6538 0x653c 0x653c [ 1902.713511] [drm] Encoders: [ 1902.713512] [drm] DFP1: INTERNAL_UNIPHY2 [ 1902.713513] [drm] Connector 1: [ 1902.713514] [drm] HDMI-A-4 [ 1902.713515] [drm] HPD3 [ 1902.713516] [drm] DDC: 0x6550 0x6550 0x6554 0x6554 0x6558 0x6558 0x655c 0x655c [ 1902.713517] [drm] Encoders: [ 1902.713518] [drm] DFP2: INTERNAL_UNIPHY2 [ 1902.713519] [drm] Connector 2: [ 1902.713520] [drm] DVI-D-1 [ 1902.713521] [drm] HPD1 [ 1902.713522] [drm] DDC: 0x6560 0x6560 0x6564 0x6564 0x6568 0x6568 0x656c 0x656c [ 1902.713523] [drm] Encoders: [ 1902.713524] [drm] DFP3: INTERNAL_UNIPHY1 [ 1902.713525] [drm] Connector 3: [ 1902.713526] [drm] DVI-D-2 [ 1902.713526] [drm] HPD6 [ 1902.713528] [drm] DDC: 0x6580 0x6580 0x6584 0x6584 0x6588 0x6588 0x658c 0x658c [ 1902.713529] [drm] Encoders: [ 1902.713529] [drm] DFP4: INTERNAL_UNIPHY [ 1902.713636] [drm] Internal thermal controller with fan control [ 1902.713661] [drm] radeon: power management initialized [ 1902.868919] [drm] fb mappable at 0xE1488000 [ 1902.868921] [drm] vram apper at 0xE0000000 [ 1902.868921] [drm] size 9216000 [ 1902.868922] [drm] fb depth is 24 [ 1902.868922] [drm] pitch is 7680 [ 1902.868953] radeon 0000:01:00.0: fb1: radeondrmfb frame buffer device [ 1902.868977] [drm] Initialized radeon 2.35.0 20080528 for 0000:01:00.0 on minor 1 [ 1907.863768] [drm] Disabling audio 0 support [ 1907.863770] [drm] Disabling audio 1 support [ 1907.863770] [drm] Disabling audio 2 support [ 1907.863771] [drm] Disabling audio 3 support [ 1907.863772] [drm] Disabling audio 4 support [ 1907.863772] [drm] Disabling audio 5 support [ 1907.874010] dmar: DRHD: handling fault status reg 3 [ 1907.889233] dmar: DMAR:[DMA Read] Request device [01:00.0] fault addr 100315000 DMAR:[fault reason 06] PTE Read access is not set [ 1917.918561] radeon 0000:01:00.0: GPU lockup CP stall for more than 10053msec [ 1917.940335] radeon 0000:01:00.0: GPU lockup (waiting for 0x0000000000000002 last fence id 0x0000000000000001 on ring 3) [ 1929.846660] [drm] probing gen 2 caps for device 8086:c01 = 261ad03/e [ 1929.846663] [drm] PCIE gen 3 link speeds already enabled [ 1929.847829] radeon 0000:01:00.0: ffff8807ee59c400 pin failed [ 1929.869772] [drm:cik_resume] *ERROR* cik startup failed on resume [ 1929.892186] dmar: DRHD: handling fault status reg 3 [ 1929.892207] [drm:cik_ib_test] *ERROR* radeon: fence wait failed (-35). [ 1929.892208] [drm:radeon_ib_ring_tests] *ERROR* radeon: failed testing IB on ring 1 (-35). [ 1929.892236] [drm:cik_ib_test] *ERROR* radeon: fence wait failed (-35). [ 1929.892236] [drm:radeon_ib_ring_tests] *ERROR* radeon: failed testing IB on ring 2 (-35). [ 1929.892275] [drm:cik_sdma_ib_test] *ERROR* radeon: fence wait failed (-35). [ 1929.892275] [drm:radeon_ib_ring_tests] *ERROR* radeon: failed testing IB on ring 3 (-35). [ 1929.892303] [drm:cik_sdma_ib_test] *ERROR* radeon: fence wait failed (-35). [ 1929.892303] [drm:radeon_ib_ring_tests] *ERROR* radeon: failed testing IB on ring 4 (-35). [ 1930.116523] dmar: DMAR:[DMA Read] Request device [01:00.0] fault addr 100115000 DMAR:[fault reason 06] PTE Read access is not set [ 1938.674784] radeon 0000:01:00.0: ffff8807ee59c400 unpin not necessary [ 1966.369162] type=1006 audit(1393802873.962:6): pid=7164 uid=0 old auid=4294967295 new auid=0 old ses=4294967295 new ses=5 res=1</code></pre></div><p>Edit: this seems to happen only if the Radeon isn&#039;t assigned as the primary video card (over the IGP). Once I told my motherboard&#039;s BIOS to set the PCI-E as the primary VGA, it seems to work fine natively. Going to see if I can translate this to a working VM again.</p><p>Edit 2: nope</p><div class="codebox"><pre><code>[ 256.508640] vfio-pci 0000:01:00.0: BAR 0: can&#039;t reserve [mem 0xe0000000-0xefffffff 64bit pref]</code></pre></div> <p class="postedit"><em>Last edited by MacCoaster (2014-03-03 00:15:08)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387957">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387981" class="blockpost roweven"> <h2><span><span class="conr">#1264</span> <a href="viewtopic.php?pid=1387981#p1387981">2014-03-03 02:15:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78314">MacCoaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-06</span></dd> <dd><span>Posts: 10</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m able to get it to work again by using pci-assign, not vfio anymore.</p><p>WTF.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387981">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1387987" class="blockpost rowodd"> <h2><span><span class="conr">#1265</span> <a href="viewtopic.php?pid=1387987#p1387987">2014-03-03 03:18:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>MacCoaster wrote:</cite><blockquote><div><p>I&#039;m able to get it to work again by using pci-assign, not vfio anymore.</p><p>WTF.</p></div></blockquote></div><p>Your graphics card has Address Translation Services (ATS), aka a device IOMMU.&#160; That usually doesn&#039;t cause problems, but since you&#039;re seeing stray addresses and since pci-assign works, what happens if you hide it, using something like this:</p><div class="codebox"><pre><code>--- a/drivers/vfio/pci/vfio_pci_config.c +++ b/drivers/vfio/pci/vfio_pci_config.c @@ -89,7 +89,7 @@ static u16 pci_ext_cap_length[] = { [PCI_EXT_CAP_ID_CAC] = 0, /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup obsolete */ [PCI_EXT_CAP_ID_ACS] = 0xFF, [PCI_EXT_CAP_ID_ARI] = PCI_EXT_CAP_ARI_SIZEOF, - [PCI_EXT_CAP_ID_ATS] = PCI_EXT_CAP_ATS_SIZEOF, + [PCI_EXT_CAP_ID_ATS] = 0, [PCI_EXT_CAP_ID_SRIOV] = PCI_EXT_CAP_SRIOV_SIZEOF, [PCI_EXT_CAP_ID_MRIOV] = 0, /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup not yet */ [PCI_EXT_CAP_ID_MCAST] = PCI_EXT_CAP_MCAST_ENDPOINT_SIZEOF,</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1387987">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388004" class="blockpost roweven"> <h2><span><span class="conr">#1266</span> <a href="viewtopic.php?pid=1388004#p1388004">2014-03-03 05:06:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78314">MacCoaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-06</span></dd> <dd><span>Posts: 10</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Your graphics card has Address Translation Services (ATS), aka a device IOMMU.&#160; That usually doesn&#039;t cause problems, but since you&#039;re seeing stray addresses and since pci-assign works, what happens if you hide it, using something like this: ...</p></div></blockquote></div><p>First boot, VFIO works again. Rebooted the VM itself and seems to work fine, something it couldn&#039;t do reliably before. This one patch might be working well for the Radeon R9 290X. Anything else I should be testing?</p><p>Edit Spoke too soon. Looks like I can&#039;t reboot the VM reliably anymore. But real machine reboot seems to work fine and the Radeon keeps coming back up reliably in the VM.</p><p>Edit 2: the USB card I got (Renesas) still doesn&#039;t work. Code 10 in the VM, @333 (when it first boots) and @374 when I disable it and re-enable it in the VM using Device Manager.</p><div class="codebox"><pre class="vscroll"><code>[ 333.211539] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.238128] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.238134] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.251441] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.251447] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.251450] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.264767] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.264772] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.264776] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.264780] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.278093] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.278098] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.278102] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.278106] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.278110] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.291419] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.291424] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.291428] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.291431] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.291435] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.291439] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 333.304754] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.304760] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.304764] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.304767] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.304771] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.304775] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 333.304778] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 333.318068] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.318073] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.318077] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.318081] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.318085] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.318088] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 333.318092] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 333.318096] vfio-pci 0000:03:00.0: irq 70 for MSI/MSI-X [ 374.563010] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.596290] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.596296] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.612944] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.612949] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.612953] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.629600] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.629606] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.629610] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.629613] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.646259] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.646264] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.646268] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.646272] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.646275] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.666245] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.666250] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.666254] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.666258] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.666261] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.666265] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 374.686231] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.686237] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.686240] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.686244] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.686248] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.686251] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 374.686255] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 374.702888] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.702893] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.702897] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.702901] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.702904] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.702908] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 374.702911] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 374.702915] vfio-pci 0000:03:00.0: irq 70 for MSI/MSI-X</code></pre></div><p>and the <strong>lspci -vv -s 3:</strong> output:</p><div class="codebox"><pre class="vscroll"><code>03:00.0 USB controller: Renesas Technology Corp. uPD720201 USB 3.0 Host Controller (rev 03) (prog-if 30 [XHCI]) Control: I/O- Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Interrupt: pin A routed to IRQ 18 Region 0: Memory at f1400000 (64-bit, non-prefetchable) [disabled] [size=8K] Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D3 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [70] MSI: Enable- Count=1/8 Maskable- 64bit+ Address: 0000000000000000 Data: 0000 Capabilities: [90] MSI-X: Enable- Count=8 Masked- Vector table: BAR=0 offset=00001000 PBA: BAR=0 offset=00001080 Capabilities: [a0] Express (v2) Endpoint, MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s unlimited, L1 unlimited ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset- DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 512 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #0, Speed 5GT/s, Width x1, ASPM L0s L1, Exit Latency L0s &lt;4us, L1 unlimited ClockPM+ Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Not Supported, TimeoutDis+, LTR+, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [100 v1] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- AERCap: First Error Pointer: 00, GenCap- CGenEn- ChkCap- ChkEn- Capabilities: [150 v1] Latency Tolerance Reporting Max snoop latency: 0ns Max no snoop latency: 0ns Kernel driver in use: vfio-pci Kernel modules: xhci_hcd</code></pre></div><p>Anything I can do?</p> <p class="postedit"><em>Last edited by MacCoaster (2014-03-03 05:53:26)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388004">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388019" class="blockpost rowodd"> <h2><span><span class="conr">#1267</span> <a href="viewtopic.php?pid=1388019#p1388019">2014-03-03 08:26:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77628">mbirkis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77628">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>For a long time i have had issues when trying to start the guest (win 8.1).</p><p>My problems where that the guest boot process would stop before it could finish, then it would hang there for a bit until the host qemu process stopped. In order to boot my guest i had to restart the host 1-2 times and it would work until next time i powered down my host. And then the reboot process had to be repeated.</p><p>I think i may have found a solution which i wanted to share in case other people was having this problem.</p><p>What i did was disable the &quot;fast boot&quot; option in the windows 8.1 guest, after that it has worked flawlessly for me (3 host reboots now).</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388019">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388024" class="blockpost roweven"> <h2><span><span class="conr">#1268</span> <a href="viewtopic.php?pid=1388024#p1388024">2014-03-03 09:09:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78214">arny91</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 3</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78214">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks, were just the commas to prevent IOMMU from being enabled.</p><p>I attached a 2nd hdd with a windows install and it boots! This is the command line i use</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 8192 -cpu host -smp 6,sockets=1,cores=6,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on -device ahci,bus=pcie.0,id=ahci -drive file=/dev/sdb,id=disk,cache=none,if=virtio -usb -usbdevice host:1532:001c -usbdevice host:0e6a:6001 -device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0</code></pre></div><p>The GPU just gets passed-through finely, but i&#039;m sure there is something else to tweak.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388024">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388099" class="blockpost rowodd"> <h2><span><span class="conr">#1269</span> <a href="viewtopic.php?pid=1388099#p1388099">2014-03-03 15:36:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>MacCoaster wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Your graphics card has Address Translation Services (ATS), aka a device IOMMU.&#160; That usually doesn&#039;t cause problems, but since you&#039;re seeing stray addresses and since pci-assign works, what happens if you hide it, using something like this: ...</p></div></blockquote></div><p>First boot, VFIO works again. Rebooted the VM itself and seems to work fine, something it couldn&#039;t do reliably before. This one patch might be working well for the Radeon R9 290X. Anything else I should be testing?</p><p>Edit Spoke too soon. Looks like I can&#039;t reboot the VM reliably anymore. But real machine reboot seems to work fine and the Radeon keeps coming back up reliably in the VM.</p></div></blockquote></div><p>Have you tried this:</p><div class="codebox"><pre><code>--- a/hw/misc/vfio.c +++ b/hw/misc/vfio.c @@ -3209,7 +3209,7 @@ static void vfio_pci_reset_handler(void *opaque) QLIST_FOREACH(group, &amp;group_list, next) { QLIST_FOREACH(vdev, &amp;group-&gt;device_list, next) { - if (!vdev-&gt;reset_works || (!vdev-&gt;has_flr &amp;&amp; vdev-&gt;has_pm_reset)) { + if (!vdev-&gt;reset_works || !vdev-&gt;has_flr) { vdev-&gt;needs_reset = true; } }</code></pre></div><div class="quotebox"><blockquote><div><p>Edit 2: the USB card I got (Renesas) still doesn&#039;t work. Code 10 in the VM, @333 (when it first boots) and @374 when I disable it and re-enable it in the VM using Device Manager.</p><div class="codebox"><pre class="vscroll"><code>[ 333.211539] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.238128] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.238134] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.251441] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.251447] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.251450] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.264767] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.264772] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.264776] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.264780] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.278093] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.278098] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.278102] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.278106] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.278110] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.291419] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.291424] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.291428] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.291431] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.291435] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.291439] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 333.304754] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.304760] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.304764] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.304767] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.304771] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.304775] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 333.304778] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 333.318068] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 333.318073] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 333.318077] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 333.318081] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 333.318085] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 333.318088] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 333.318092] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 333.318096] vfio-pci 0000:03:00.0: irq 70 for MSI/MSI-X [ 374.563010] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.596290] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.596296] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.612944] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.612949] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.612953] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.629600] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.629606] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.629610] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.629613] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.646259] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.646264] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.646268] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.646272] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.646275] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.666245] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.666250] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.666254] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.666258] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.666261] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.666265] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 374.686231] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.686237] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.686240] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.686244] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.686248] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.686251] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 374.686255] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 374.702888] vfio-pci 0000:03:00.0: irq 63 for MSI/MSI-X [ 374.702893] vfio-pci 0000:03:00.0: irq 64 for MSI/MSI-X [ 374.702897] vfio-pci 0000:03:00.0: irq 65 for MSI/MSI-X [ 374.702901] vfio-pci 0000:03:00.0: irq 66 for MSI/MSI-X [ 374.702904] vfio-pci 0000:03:00.0: irq 67 for MSI/MSI-X [ 374.702908] vfio-pci 0000:03:00.0: irq 68 for MSI/MSI-X [ 374.702911] vfio-pci 0000:03:00.0: irq 69 for MSI/MSI-X [ 374.702915] vfio-pci 0000:03:00.0: irq 70 for MSI/MSI-X</code></pre></div></div></blockquote></div><p>Nothing unusual there, just an artifact of how interrupts are setup.</p><div class="quotebox"><blockquote><div><p>and the <strong>lspci -vv -s 3:</strong> output:</p><div class="codebox"><pre class="vscroll"><code>03:00.0 USB controller: Renesas Technology Corp. uPD720201 USB 3.0 Host Controller (rev 03) (prog-if 30 [XHCI]) Control: I/O- Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Interrupt: pin A routed to IRQ 18 Region 0: Memory at f1400000 (64-bit, non-prefetchable) [disabled] [size=8K] Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1-,D2-,D3hot+,D3cold+) Status: D3 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME- Capabilities: [70] MSI: Enable- Count=1/8 Maskable- 64bit+ Address: 0000000000000000 Data: 0000 Capabilities: [90] MSI-X: Enable- Count=8 Masked- Vector table: BAR=0 offset=00001000 PBA: BAR=0 offset=00001080 Capabilities: [a0] Express (v2) Endpoint, MSI 00 DevCap: MaxPayload 128 bytes, PhantFunc 0, Latency L0s unlimited, L1 unlimited ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset- DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported- RlxdOrd- ExtTag- PhantFunc- AuxPwr- NoSnoop- MaxPayload 128 bytes, MaxReadReq 512 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend- LnkCap: Port #0, Speed 5GT/s, Width x1, ASPM L0s L1, Exit Latency L0s &lt;4us, L1 unlimited ClockPM+ Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 5GT/s, Width x1, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Not Supported, TimeoutDis+, LTR+, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [100 v1] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr- AERCap: First Error Pointer: 00, GenCap- CGenEn- ChkCap- ChkEn- Capabilities: [150 v1] Latency Tolerance Reporting Max snoop latency: 0ns Max no snoop latency: 0ns Kernel driver in use: vfio-pci Kernel modules: xhci_hcd</code></pre></div><p>Anything I can do?</p></div></blockquote></div><p>Dumb question, have you actually installed the driver for the device?&#160; Coming from Linux I&#039;m spoiled by adding a device and having it &quot;just work&quot;.&#160; Windows isn&#039;t that way and I forget that sometimes.&#160; In fact, just last week I though there might be some problem assigning the XHCI controller from the B85 chipset to a Win7 guest, but it was just a matter of going to the Intel website and installing the driver.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388099">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388546" class="blockpost roweven"> <h2><span><span class="conr">#1270</span> <a href="viewtopic.php?pid=1388546#p1388546">2014-03-04 21:28:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78314">MacCoaster</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-06</span></dd> <dd><span>Posts: 10</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Have you tried this:</p><div class="codebox"><pre><code>--- a/hw/misc/vfio.c +++ b/hw/misc/vfio.c @@ -3209,7 +3209,7 @@ static void vfio_pci_reset_handler(void *opaque) QLIST_FOREACH(group, &amp;group_list, next) { QLIST_FOREACH(vdev, &amp;group-&gt;device_list, next) { - if (!vdev-&gt;reset_works || (!vdev-&gt;has_flr &amp;&amp; vdev-&gt;has_pm_reset)) { + if (!vdev-&gt;reset_works || !vdev-&gt;has_flr) { vdev-&gt;needs_reset = true; } }</code></pre></div></div></blockquote></div><p>I&#039;ll try this when I can.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Dumb question, have you actually installed the driver for the device?&#160; Coming from Linux I&#039;m spoiled by adding a device and having it &quot;just work&quot;.&#160; Windows isn&#039;t that way and I forget that sometimes.&#160; In fact, just last week I though there might be some problem assigning the XHCI controller from the B85 chipset to a Win7 guest, but it was just a matter of going to the Intel website and installing the driver.</p></div></blockquote></div><p>Yep. Windows 8 has the driver which makes most if not all USB3 controllers work out of the box. I just tried a Windows native install and it seems like the USB3 card refuses to initialize there either (similarly to native Linux drivers), so I guess the card is bad. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388546">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388601" class="blockpost rowodd"> <h2><span><span class="conr">#1271</span> <a href="viewtopic.php?pid=1388601#p1388601">2014-03-05 00:00:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I`ve got problems with my sound again - it just randomly stopped working....<br />On the Log I get these entries:</p><div class="codebox"><pre><code>/etc/gdm/Xsession[915]: pulseaudio: pa_context_connect() failed /etc/gdm/Xsession[915]: pulseaudio: Reason: Connection refused /etc/gdm/Xsession[915]: pulseaudio: Failed to initialize PA contextaudio: Could not init `pa&#039; /etc/gdm/Xsession[915]: pulseaudio: pa_context_connect() failed /etc/gdm/Xsession[915]: pulseaudio: Reason: Connection refused /etc/gdm/Xsession[915]: pulseaudio: Failed to initialize PA contextaudio: Could not init `pa&#039; /etc/gdm/Xsession[915]: ALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave /etc/gdm/Xsession[915]: alsa: Could not initialize DAC /etc/gdm/Xsession[915]: alsa: Failed to open `default&#039;: /etc/gdm/Xsession[915]: alsa: Reason: Device or resource busy /etc/gdm/Xsession[915]: ALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave /etc/gdm/Xsession[915]: alsa: Could not initialize DAC /etc/gdm/Xsession[915]: alsa: Failed to open `default&#039;: /etc/gdm/Xsession[915]: alsa: Reason: Device or resource busy /etc/gdm/Xsession[915]: audio: Failed to create voice `dac&#039;</code></pre></div><p>I created a different VM with ubuntu where the sound worked. After I executed it as root it showed the same behaviour as the windows vm... Do you know what could be going wrong?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388601">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388648" class="blockpost roweven"> <h2><span><span class="conr">#1272</span> <a href="viewtopic.php?pid=1388648#p1388648">2014-03-05 04:27:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72881">alexis_evo</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-04</span></dd> <dd><span>Posts: 33</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=72881">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Using latest kernel/qemu from OP. Getting this error.</p><div class="codebox"><pre><code>qemu-system-x86_64: hw/pci/pcie.c:240: pcie_cap_slot_hotplug_common: Assertion `((pci_dev-&gt;devfn) &amp; 0x07) == 0&#039; failed.</code></pre></div><p>It boots fine after downgrading to qemu-git-2.0.r30691.g91abb80-1-x86_64.pkg.tar.xz.</p><p>Note that it errors when downgrading, because of the custom SeaBIOS file. I deleted /usr/share/qemu/bios.bin, downgraded, then reinstalled my SeaBIOS package.</p> <p class="postedit"><em>Last edited by alexis_evo (2014-03-05 04:33:20)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388648">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388671" class="blockpost rowodd"> <h2><span><span class="conr">#1273</span> <a href="viewtopic.php?pid=1388671#p1388671">2014-03-05 07:24:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78355">anickname</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-07</span></dd> <dd><span>Posts: 23</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>alexis_evo wrote:</cite><blockquote><div><p>Using latest kernel/qemu from OP. Getting this error.</p><div class="codebox"><pre><code>qemu-system-x86_64: hw/pci/pcie.c:240: pcie_cap_slot_hotplug_common: Assertion `((pci_dev-&gt;devfn) &amp; 0x07) == 0&#039; failed.</code></pre></div><p>It boots fine after downgrading to qemu-git-2.0.r30691.g91abb80-1-x86_64.pkg.tar.xz.</p><p>Note that it errors when downgrading, because of the custom SeaBIOS file. I deleted /usr/share/qemu/bios.bin, downgraded, then reinstalled my SeaBIOS package.</p></div></blockquote></div><p>You need this fix for the assertion :</p><p><a href="https://lists.gnu.org/archive/html/qemu-devel/2014-02/msg02774.html" rel="nofollow">https://lists.gnu.org/archive/html/qemu … 02774.html</a></p> <p class="postedit"><em>Last edited by anickname (2014-03-05 07:25:12)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388671">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388733" class="blockpost roweven"> <h2><span><span class="conr">#1274</span> <a href="viewtopic.php?pid=1388733#p1388733">2014-03-05 11:48:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79471">Bronek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: London</span></dd> <dd><span>Registered: 2014-02-14</span></dd> <dd><span>Posts: 90</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79471">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apoapo wrote:</cite><blockquote><div><p>I put in a second graphicscard and tested it again.<br />The good thing is. I had no problems to pass it to the VM... have seen the bios of the Card + seabios on the screen + Windows was booting (was booting to system repair, but I think that&#039;s because of other storage type)</p><p>The bad thing is, that both graphicscards are in the same iommu-group + 2 PCI-Controller 01.0 and 01.1. Think that is because my 2 PCIe Ports share share the 16 lanes, that are normally used by the first port.<br />So I think I will be abled to pass the card to the VM, but can&#039;t really use the primary card for Linux and I have to wait to get the Intel as Primary working ...</p></div></blockquote></div><p>personally I would look to move primary (i.e. used by hardware own BIOS) graphics card to slot which does not share IOMMU group with the other one .... if that excludes all 16 lanes slots, there is at least <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16814195103" rel="nofollow">one which will fit into X1 slot</a></p> </div> <div class="postsignature postmsg"><hr /><p>Sorry about&#160; &quot;KVM VGA-Passthrough ...&quot; thread <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Anyone interested in continuing this discussion elsewhere, please contact me privately. I might be able to find it a new home.</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388733">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1388738" class="blockpost rowodd"> <h2><span><span class="conr">#1275</span> <a href="viewtopic.php?pid=1388738#p1388738">2014-03-05 11:55:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Bronek wrote:</cite><blockquote><div><div class="quotebox"><cite>apoapo wrote:</cite><blockquote><div><p>I put in a second graphicscard and tested it again.<br />The good thing is. I had no problems to pass it to the VM... have seen the bios of the Card + seabios on the screen + Windows was booting (was booting to system repair, but I think that&#039;s because of other storage type)</p><p>The bad thing is, that both graphicscards are in the same iommu-group + 2 PCI-Controller 01.0 and 01.1. Think that is because my 2 PCIe Ports share share the 16 lanes, that are normally used by the first port.<br />So I think I will be abled to pass the card to the VM, but can&#039;t really use the primary card for Linux and I have to wait to get the Intel as Primary working ...</p></div></blockquote></div><p>personally I would look to move primary (i.e. used by hardware own BIOS) graphics card to slot which does not share IOMMU group with the other one .... if that excludes all 16 lanes slots, there is at least <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16814195103" rel="nofollow">one which will fit into X1 slot</a></p></div></blockquote></div><p>RIght now im passing through my primary card (radeon 6950) what i did was, use pci-stub to bind it at boot and i disabled the efifb framebuffer with video=efifb:off on my grub cmdline</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1388738">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=50">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=49">49</a> <a href="viewtopic.php?id=162768&amp;p=50">50</a> <strong>51</strong> <a href="viewtopic.php?id=162768&amp;p=52">52</a> <a href="viewtopic.php?id=162768&amp;p=53">53</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=52">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
