<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 46) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=46" title="Page 46" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=45" title="Page 45" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=47" title="Page 47" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=45">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=44">44</a> <a href="viewtopic.php?id=162768&amp;p=45">45</a> <strong>46</strong> <a href="viewtopic.php?id=162768&amp;p=47">47</a> <a href="viewtopic.php?id=162768&amp;p=48">48</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=47">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1379845" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1126</span> <a href="viewtopic.php?pid=1379845#p1379845">2014-02-09 15:12:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77842">Flyser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-19</span></dd> <dd><span>Posts: 29</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Kaidax wrote:</cite><blockquote><div><p>20 fps? Ouch, that&#039;s bad. gtx 660 is capable of much-much more.</p></div></blockquote></div><p>Could be related to the streaming... I don&#039;t have the time to test in detail today, but I can test a different game during the week.<br />While I did notice a drop in performance between native and kvm in Assassins Creed 4, it wasn&#039;t huge ...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1379845">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1379851" class="blockpost roweven"> <h2><span><span class="conr">#1127</span> <a href="viewtopic.php?pid=1379851#p1379851">2014-02-09 15:27:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79333">Kaidax</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79333.png?m=1391951511" width="80" height="80" alt="" /></dd> <dd><span>Registered: 2014-02-09</span></dd> <dd><span>Posts: 6</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:kudahkukarek@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Flyser wrote:</cite><blockquote><div><div class="quotebox"><cite>Kaidax wrote:</cite><blockquote><div><p>20 fps? Ouch, that&#039;s bad. gtx 660 is capable of much-much more.</p></div></blockquote></div><p>Could be related to the streaming...</p></div></blockquote></div><p>Not if you have &gt;20 fps for any other game at the same resolution... Did you try streaming at 640x480 all graphics options turned off?</p><div class="quotebox"><cite>Flyser wrote:</cite><blockquote><div><p> I don&#039;t have the time to test in detail today, but I can test a different game during the week.<br />While I did notice a drop in performance between native and kvm in Assassins Creed 4, it wasn&#039;t huge ...</p></div></blockquote></div><p>Well, I&#039;ve noticed that I can&#039;t get more than 62 fps in Arkham City no matter what... (gameplay, not benchmark mode) Also, Crysis is jerkier and drops frames more than on native...<br />But Borderlands 2 is the only game I&#039;ve encountered that COMPLETELY DIES on kvm, so it makes for a much better test.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1379851">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380005" class="blockpost rowodd"> <h2><span><span class="conr">#1128</span> <a href="viewtopic.php?pid=1380005#p1380005">2014-02-10 01:29:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;ve switched back to using libvirt, since EFI+i440fx works reliably with several devices assigned.</p><p>However, after a suspend/resume cycle (needed because the bus reset doesn&#039;t work),<br />the VM suddenly complains about one of the devices not being assignable!</p><p>I see this in the libvirt log:</p><p>error : virPCIDeviceIsAssignable:2260 : internal error: Device 0000:08:00.0 is behind a switch lacking ACS and cannot be assigned</p><p>08:00.0 sits behind a PLX PEX8606, which absolutely DOES have ACS.<br />It seems libvirt adds a second layer of checking, which somehow gets broken by suspend/resume.</p><p>Edit: &quot;fixed&quot; by editing /etc/libvirt/qemu.conf to set relaxed_acs_check = 1</p><p>EDIT again: What do I need to do to get PCI bus reset to work?&#160; Right now, I still have to suspend and resume the host to get the card reset when it&#039;s in a bad state.<br />At least host suspend/resume finally work, since I removed the Asus sound card.</p> <p class="postedit"><em>Last edited by DanaGoyette (2014-02-11 04:16:12)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380005">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380544" class="blockpost roweven"> <h2><span><span class="conr">#1129</span> <a href="viewtopic.php?pid=1380544#p1380544">2014-02-11 21:47:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Just curious, does any developer in QEMU notice about poor mem performance in Q35 setting?</p> <p class="postedit"><em>Last edited by doubledr (2014-02-11 21:48:21)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380544">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380549" class="blockpost rowodd"> <h2><span><span class="conr">#1130</span> <a href="viewtopic.php?pid=1380549#p1380549">2014-02-11 22:08:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>doubledr wrote:</cite><blockquote><div><p>Just curious, does any developer in QEMU notice about poor mem performance in Q35 setting?</p></div></blockquote></div><p>I&#039;d suggest finding a test case that shows the problem, is reproducible, and preferably does not depend on assigned devices and does use a Linux guest (or simple tool like memtest86).&#160; Report it to kvm &amp; qemu-devel mailing lists.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380549">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380611" class="blockpost roweven"> <h2><span><span class="conr">#1131</span> <a href="viewtopic.php?pid=1380611#p1380611">2014-02-12 01:13:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79398">Borg8401</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-11</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:borg8401@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>First off, I want to say thanks to nbhs and anyone else who has posted useful information or have helped others on this thread.&#160; I&#039;ve finally got passthrough working on my system and wanted to share my results and see if anyone has some suggestions as to how I could possibly improve my experience.&#160; I&#039;m currently running Arch Linux 2014.02.01, I haven&#039;t downloaded the patched kernel and qemu and seabios were installed from pacman.&#160; I&#039;m willing to give them all a shot but as my current setup is working fairly well I thought I&#039;d ask for some input before proceeding.</p><div class="codebox"><pre><code>Hardware Asus Rampage IV Extreme Intel i7 3930K @ 4.0GHz (4 cores, 8 threads given to guest) 16GB DDR3 2133MHz Corsair Vengeance (12288MB given to guest) AMD 4890 - Sapphire (Host - using open source drivers) Nvidia GTX 780 - Asus OC DirectCU II (Guest) Kingston HyperX 3K 120GB (Host, 16GB swap, 80GB raw image for guest) Seagate Barracuda 3TB (Given to guest as slave - games held here)</code></pre></div><p>My starting script is (loosely) based on the one used by Kaidax as it improved my WEI score from 5.9 to 7.6 (based on hard disk performance, other values did not change) as compared to OP&#039;s first post.&#160; I added vfi-bind into my starting script as it needs to be ran every time I reboot my host for some reason and this was a simple solution to not forget.&#160; &#160;Running &quot;export SDL_VIDEO_X11_DGAMOUSE=0&quot; helped some weird lag/loss of input/stuttering that I&#039;m experiencing with my mouse, however it has not completely solved the issue and I also suffer from something similar at times when using my keyboard; I added it into my script for no good reason really.&#160; On &quot;-machine type=pc,accel=kvm&quot; I still have no idea if there is a difference either way when using this option, so it can stay until I discover otherwise.</p><div class="codebox"><pre><code>/sbin/Win7 vfio-bind 0000:03:00.0 0000:03:00.1 export SDL_VIDEO_X11_DGAMOUSE=0 qemu-system-x86_64 -enable-kvm -machine type=pc,accel=kvm \ -m 12288 -mem-prealloc \ -cpu host -smp 8,sockets=1,cores=4,threads=2 \ -bios /usr/share/qemu/bios.bin -vga none \ -device ioh3420,bus=pci.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=03:00.0,bus=pci.0,x-vga=on \ -device vfio-pci,host=03:00.1,bus=pci.0 \ -drive file=/home/borg8401/windows.img,id=hd,format=raw,index=0 \ -drive file=/dev/sdb,id=hd2,format=raw,index=1 \ -usb -usbdevice host:1038:1200 -usbdevice host:06a3:0ccb</code></pre></div><p><strong>Results:</strong><br /><span class="postimg"><img src="http://i.imgur.com/yBdxtB3.png" alt="yBdxtB3.png" /></span></p><p>I&#039;ve uploaded a video that is comprised of one three minute clips each of War Thunder, Borderlands 2, and Battlefield 4 to demonstrate my current performance.&#160; <em>After uploading the video I realized my FPS was only being monitored during War Thunder, but you should still be able to get a general feel for the performance that I&#039;m getting (I will upload a fixed video and edit this post).</em>&#160; <a href="http://www.youtube.com/watch?v=oJB1Om6qJsg" rel="nofollow">http://www.youtube.com/watch?v=oJB1Om6qJsg</a></p><p>War Thunder plays at a (nearly) constant framerate of 60 FPS with vsync on and apart from occasional twitches is very playable.&#160; Borderlands 2 could be considered playable (by some) but is very choppy and the framerate is painfully inconsistent, definitely no where close to native performance.&#160; Battlefield 4 was easily the worst of the three and the lighting effects seemed to destroy any hopes of it being an enjoyable experience; also Punkbuster kicks me when trying to join an online game, stating that I have no ping.</p><p>Any suggestions moving forward would be greatly appreciated, if necessary I could go ahead and attempt installing the kernel, qemu and seabios from OP&#039;s post; I just don&#039;t want to break what I currently have working in the process as I&#039;m still fairly confused on how to go about building things in arch.</p> <p class="postedit"><em>Last edited by Borg8401 (2014-02-12 04:48:38)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380611">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380644" class="blockpost rowodd"> <h2><span><span class="conr">#1132</span> <a href="viewtopic.php?pid=1380644#p1380644">2014-02-12 05:09:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>doubledr wrote:</cite><blockquote><div><p>Just curious, does any developer in QEMU notice about poor mem performance in Q35 setting?</p></div></blockquote></div><p>I&#039;d suggest finding a test case that shows the problem, is reproducible, and preferably does not depend on assigned devices and does use a Linux guest (or simple tool like memtest86).&#160; Report it to kvm &amp; qemu-devel mailing lists.</p></div></blockquote></div><p>It is not that easy, all mem benchmark software crash... I can&#039;t find a good benchmark software.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380644">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380649" class="blockpost roweven"> <h2><span><span class="conr">#1133</span> <a href="viewtopic.php?pid=1380649#p1380649">2014-02-12 05:19:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Borg8401 wrote:</cite><blockquote><div><p>First off, I want to say thanks to nbhs and anyone else who has posted useful information or have helped others on this thread.&#160; I&#039;ve finally got passthrough working on my system and wanted to share my results and see if anyone has some suggestions as to how I could possibly improve my experience.&#160; I&#039;m currently running Arch Linux 2014.02.01, I haven&#039;t downloaded the patched kernel and qemu and seabios were installed from pacman.&#160; I&#039;m willing to give them all a shot but as my current setup is working fairly well I thought I&#039;d ask for some input before proceeding.</p><div class="codebox"><pre><code>Hardware Asus Rampage IV Extreme Intel i7 3930K @ 4.0GHz (4 cores, 8 threads given to guest) 16GB DDR3 2133MHz Corsair Vengeance (12288MB given to guest) AMD 4890 - Sapphire (Host - using open source drivers) Nvidia GTX 780 - Asus OC DirectCU II (Guest) Kingston HyperX 3K 120GB (Host, 16GB swap, 80GB raw image for guest) Seagate Barracuda 3TB (Given to guest as slave - games held here)</code></pre></div><p>My starting script is (loosely) based on the one used by Kaidax as it improved my WEI score from 5.9 to 7.6 (based on hard disk performance, other values did not change) as compared to OP&#039;s first post.&#160; I added vfi-bind into my starting script as it needs to be ran every time I reboot my host for some reason and this was a simple solution to not forget.&#160; &#160;Running &quot;export SDL_VIDEO_X11_DGAMOUSE=0&quot; helped some weird lag/loss of input/stuttering that I&#039;m experiencing with my mouse, however it has not completely solved the issue and I also suffer from something similar at times when using my keyboard; I added it into my script for no good reason really.&#160; On &quot;-machine type=pc,accel=kvm&quot; I still have no idea if there is a difference either way when using this option, so it can stay until I discover otherwise.</p><div class="codebox"><pre><code>/sbin/Win7 vfio-bind 0000:03:00.0 0000:03:00.1 export SDL_VIDEO_X11_DGAMOUSE=0 qemu-system-x86_64 -enable-kvm -machine type=pc,accel=kvm \ -m 12288 -mem-prealloc \ -cpu host -smp 8,sockets=1,cores=4,threads=2 \ -bios /usr/share/qemu/bios.bin -vga none \ -device ioh3420,bus=pci.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=03:00.0,bus=pci.0,x-vga=on \ -device vfio-pci,host=03:00.1,bus=pci.0 \ -drive file=/home/borg8401/windows.img,id=hd,format=raw,index=0 \ -drive file=/dev/sdb,id=hd2,format=raw,index=1 \ -usb -usbdevice host:1038:1200 -usbdevice host:06a3:0ccb</code></pre></div><p><strong>Results:</strong><br /><a href="http://i.imgur.com/yBdxtB3.png" rel="nofollow">http://i.imgur.com/yBdxtB3.png</a></p><p>I&#039;ve uploaded a video that is comprised of one three minute clips each of War Thunder, Borderlands 2, and Battlefield 4 to demonstrate my current performance.&#160; <em>After uploading the video I realized my FPS was only being monitored during War Thunder, but you should still be able to get a general feel for the performance that I&#039;m getting (I will upload a fixed video and edit this post).</em>&#160; <a href="http://www.youtube.com/watch?v=oJB1Om6qJsg" rel="nofollow">http://www.youtube.com/watch?v=oJB1Om6qJsg</a></p><p>War Thunder plays at a (nearly) constant framerate of 60 FPS with vsync on and apart from occasional twitches is very playable.&#160; Borderlands 2 could be considered playable (by some) but is very choppy and the framerate is painfully inconsistent, definitely no where close to native performance.&#160; Battlefield 4 was easily the worst of the three and the lighting effects seemed to destroy any hopes of it being an enjoyable experience; also Punkbuster kicks me when trying to join an online game, stating that I have no ping.</p><p>Any suggestions moving forward would be greatly appreciated, if necessary I could go ahead and attempt installing the kernel, qemu and seabios from OP&#039;s post; I just don&#039;t want to break what I currently have working in the process as I&#039;m still fairly confused on how to go about building things in arch.</p></div></blockquote></div><p>lighting is a serious problem in MS DX11 implementation. The same story happens in Dolphin WII emulator. When I am facing lighting in WII game, my fps in WII will drop from 60 to 20. It turns out that this is a CPU bounded problem. In Dolphin, I have to turn &quot;Skip EFB access from CPU&quot; on to avoid this problem. In general case, I guess pinning CPU to VM will help this situation. </p><p>PS: thx for your post, now I know that pcie will work with 440fx, let me try it in my box.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380649">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380654" class="blockpost rowodd"> <h2><span><span class="conr">#1134</span> <a href="viewtopic.php?pid=1380654#p1380654">2014-02-12 05:40:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79398">Borg8401</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-11</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:borg8401@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>doubledr wrote:</cite><blockquote><div><p>lighting is a serious problem in MS DX11 implementation. The same story happens in Dolphin WII emulator. When I am facing lighting in WII game, my fps in WII will drop from 60 to 20. It turns out that this is a CPU bounded problem. In Dolphin, I have to turn &quot;Skip EFB access from CPU&quot; on to avoid this problem. In general case, I guess pinning CPU to VM will help this situation. </p><p>PS: thx for your post, now I know that pcie will work with 440fx, let me try it in my box.</p></div></blockquote></div><br /><p>Attempted googling pinning of the CPU to qemu, not finding much on the subject (just stuff regarding NUMA and libvirt, which I don&#039;t use).&#160; Could anyone point me in the right direction?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380654">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380657" class="blockpost roweven"> <h2><span><span class="conr">#1135</span> <a href="viewtopic.php?pid=1380657#p1380657">2014-02-12 05:51:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Borg8401 wrote:</cite><blockquote><div><div class="quotebox"><cite>doubledr wrote:</cite><blockquote><div><p>lighting is a serious problem in MS DX11 implementation. The same story happens in Dolphin WII emulator. When I am facing lighting in WII game, my fps in WII will drop from 60 to 20. It turns out that this is a CPU bounded problem. In Dolphin, I have to turn &quot;Skip EFB access from CPU&quot; on to avoid this problem. In general case, I guess pinning CPU to VM will help this situation. </p><p>PS: thx for your post, now I know that pcie will work with 440fx, let me try it in my box.</p></div></blockquote></div><br /><p>Attempted googling pinning of the CPU to qemu, not finding much on the subject (just stuff regarding NUMA and libvirt, which I don&#039;t use).&#160; Could anyone point me in the right direction?</p></div></blockquote></div><p>It is in the top post, &quot;performance improvement&quot; section</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380657">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380658" class="blockpost rowodd"> <h2><span><span class="conr">#1136</span> <a href="viewtopic.php?pid=1380658#p1380658">2014-02-12 05:52:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79398">Borg8401</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-11</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:borg8401@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>doubledr wrote:</cite><blockquote><div><p>It is in the top post, &quot;performance improvement&quot; section</p></div></blockquote></div><p>Holy crap, I even remember staring at that earlier, thanks! lol</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380658">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380660" class="blockpost roweven"> <h2><span><span class="conr">#1137</span> <a href="viewtopic.php?pid=1380660#p1380660">2014-02-12 05:55:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>How can I get the VFIO_DEVICE_PCI_BUS_RESET changes into 3.13 and current qemu?&#160; I tried to build the vfio-vga-reset branch of qemu on Ubuntu 13.10, and got: </p><div class="codebox"><pre><code>hw/usb/host-libusb.c:243:5: error: ‘libusb_get_port_path’ is deprecated (declared at /usr/include/libusb-1.0/libusb.h:1358): Use libusb_get_port_numbers instead [-Werror=deprecated-declarations]</code></pre></div><p>My host has been suspending and resuming reasonably reliably since removing the Asus sound card, so long as the guest is not running.&#160; Still, it would be better to have the reset working.</p><p>I hope the bus reset won&#039;t require having x-vga=on.&#160; <br />Judging by the lack of glitches, EFI mode in Windows 8.1 doesn&#039;t seem to need the VGA registers.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380660">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380662" class="blockpost rowodd"> <h2><span><span class="conr">#1138</span> <a href="viewtopic.php?pid=1380662#p1380662">2014-02-12 05:56:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>UPDATE: I can confirm that vfio will work with 440FX. Yes, my VIA VL80X USB 3 adpater is back! All you have to do is to&#160; remove &quot;-M Q35&quot; and change &quot;pcie.0&quot; to &quot;pci.0&quot; in the script.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380662">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380678" class="blockpost roweven"> <h2><span><span class="conr">#1139</span> <a href="viewtopic.php?pid=1380678#p1380678">2014-02-12 07:01:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79398">Borg8401</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-11</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:borg8401@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>On pinning cores, I wish to pass through 4 physical cores, and 4 virtual cores to achieve my 4 core 8 thread setup from my startup script.&#160; Should I pass through cores 0-3 and 6-9 or cores 0-7?&#160; For clarification, I am unsure if it&#039;s setup:</p><p>physical-physical-physical-physical-physical-physical-virtual-virtual-virtual-virtual-virtual-virtual<br />-or-<br />physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual</p><p>Also, is there a way to deny access to the physical and virtual cores I select above to my host and limit it only to the remaining cores/threads?</p><p><em>EDIT:<br />I have tried all of the following combinations with nearly identical levels of success/performance when testing with BF4:</em></p><p><em>0-3 and 6-9 -cpu host -smp 4,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu host -smp 8,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu SandyBridge -smp 8,sockets=1,cores=4,threads=2</em></p><p><em>2-5 and 8-11 -cpu host -smp 4,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu host -smp 8,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu SandyBridge -smp 8,sockets=1,cores=4,threads=2</em></p><p><em>0-3 -cpu host -smp 4,sockets=1,cores=4,threads=1<br />0-3 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>2-5 -cpu host -smp 4,sockets=1,cores=4,threads=1<br />2-5 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>0-3 -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>2-5 -smp 4,sockets=1,cores=4,threads=1</em></p><p>It seems nothing I do to my CPU affects my experience, perhaps my performance issues are coming from somewhere else?&#160; Could it be possible that even though GPU-Z (in Windows guest) reports PCIE is running at x16 3.0 that this may not be the case?&#160; I could see that being a definite bottleneck that may not be noticeable in less demanding games, for instance upon testing Star Wars the Old Republic I had the same performance as if I were on a native Windows install.&#160; Something strange I have noticed however is graphics settings don&#039;t have an impact on performance either, I get the same FPS in BF4 on ultra or on low.</p> <p class="postedit"><em>Last edited by Borg8401 (2014-02-12 09:49:01)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380678">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380734" class="blockpost rowodd"> <h2><span><span class="conr">#1140</span> <a href="viewtopic.php?pid=1380734#p1380734">2014-02-12 10:19:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79333">Kaidax</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79333.png?m=1391951511" width="80" height="80" alt="" /></dd> <dd><span>Registered: 2014-02-09</span></dd> <dd><span>Posts: 6</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:kudahkukarek@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Borg8401 wrote:</cite><blockquote><div><p>On pinning cores, I wish to pass through 4 physical cores, and 4 virtual cores to achieve my 4 core 8 thread setup from my startup script.&#160; Should I pass through cores 0-3 and 6-9 or cores 0-7?&#160; For clarification, I am unsure if it&#039;s setup:</p><p>physical-physical-physical-physical-physical-physical-virtual-virtual-virtual-virtual-virtual-virtual<br />-or-<br />physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual</p><p>It seems nothing I do to my CPU affects my experience, perhaps my performance issues are coming from somewhere else?</p></div></blockquote></div><p>It&#039;s the first way. You can pin cores at runtime in virt-manager and verify that benchmarks won&#039;t like it one bit if you assign 0,6,1,7 to a 4-core VM, while 0,1,8,9 is fine. Pinning cores is a last touch to ensure performance, it won&#039;t make a huge difference; the scheduler is not as dumb as to assign two saturated vcores to a single core if it can help it, and the gains of reduced context-switching won&#039;t manifest in gaming.</p><div class="quotebox"><cite>Borg8401 wrote:</cite><blockquote><div><p>Could it be possible that even though GPU-Z (in Windows guest) reports PCIE is running at x16 3.0 that this may not be the case?</p></div></blockquote></div><p>That would&#039;ve impacted your score in benchmarks like 3DMark. I get the same score as on Windows.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380734">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380751" class="blockpost roweven"> <h2><span><span class="conr">#1141</span> <a href="viewtopic.php?pid=1380751#p1380751">2014-02-12 11:04:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Borg8401 wrote:</cite><blockquote><div><p>On pinning cores, I wish to pass through 4 physical cores, and 4 virtual cores to achieve my 4 core 8 thread setup from my startup script.&#160; Should I pass through cores 0-3 and 6-9 or cores 0-7?&#160; For clarification, I am unsure if it&#039;s setup:</p><p>physical-physical-physical-physical-physical-physical-virtual-virtual-virtual-virtual-virtual-virtual<br />-or-<br />physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual</p><p>Also, is there a way to deny access to the physical and virtual cores I select above to my host and limit it only to the remaining cores/threads?</p><p><em>EDIT:<br />I have tried all of the following combinations with nearly identical levels of success/performance when testing with BF4:</em></p><p><em>0-3 and 6-9 -cpu host -smp 4,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu host -smp 8,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu SandyBridge -smp 8,sockets=1,cores=4,threads=2</em></p><p><em>2-5 and 8-11 -cpu host -smp 4,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu host -smp 8,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu SandyBridge -smp 8,sockets=1,cores=4,threads=2</em></p><p><em>0-3 -cpu host -smp 4,sockets=1,cores=4,threads=1<br />0-3 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>2-5 -cpu host -smp 4,sockets=1,cores=4,threads=1<br />2-5 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>0-3 -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>2-5 -smp 4,sockets=1,cores=4,threads=1</em></p><p>It seems nothing I do to my CPU affects my experience, perhaps my performance issues are coming from somewhere else?&#160; Could it be possible that even though GPU-Z (in Windows guest) reports PCIE is running at x16 3.0 that this may not be the case?&#160; I could see that being a definite bottleneck that may not be noticeable in less demanding games, for instance upon testing Star Wars the Old Republic I had the same performance as if I were on a native Windows install.&#160; Something strange I have noticed however is graphics settings don&#039;t have an impact on performance either, I get the same FPS in BF4 on ultra or on low.</p></div></blockquote></div><p>you could try playing arround with kvm-intel options</p><div class="codebox"><pre><code>modinfo kvm-intel</code></pre></div><p>i found out disabling npt on my amd system (modprobe kvm-amd npt=0) made a huge difference in performance, as for vcpu pinning im using <a href="https://code.google.com/p/cpuset/" rel="nofollow">cset</a> and then using taskset to pin each vcpu to a cpu core, so on my 8 core amd system, arch gets cores 0-1 and windows 2-7</p><p>You can find my cset package here: <a href="http://www.fileswap.com/dl/yzZMZTTREg/" rel="nofollow">http://www.fileswap.com/dl/yzZMZTTREg/</a></p> <p class="postedit"><em>Last edited by nbhs (2014-02-12 11:09:27)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380751">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380778" class="blockpost rowodd"> <h2><span><span class="conr">#1142</span> <a href="viewtopic.php?pid=1380778#p1380778">2014-02-12 12:48:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79333">Kaidax</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79333.png?m=1391951511" width="80" height="80" alt="" /></dd> <dd><span>Registered: 2014-02-09</span></dd> <dd><span>Posts: 6</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:kudahkukarek@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>you could try playing arround with kvm-intel options</p><div class="codebox"><pre><code>modinfo kvm-intel</code></pre></div><p>i found out disabling npt on my amd system (modprobe kvm-amd npt=0) made a huge difference in performance, as for vcpu pinning im using <a href="https://code.google.com/p/cpuset/" rel="nofollow">cset</a> and then using taskset to pin each vcpu to a cpu core, so on my 8 core amd system, arch gets cores 0-1 and windows 2-7</p><p>You can find my cset package here: <a href="http://www.fileswap.com/dl/yzZMZTTREg/" rel="nofollow">http://www.fileswap.com/dl/yzZMZTTREg/</a></p></div></blockquote></div><p>Passthrough doesn&#039;t work at all with </p><div class="codebox"><pre><code> modprobe kvm_intel ept=0 </code></pre></div><p> and gpu-less benchmarks seem to be unaffected.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380778">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1380861" class="blockpost roweven"> <h2><span><span class="conr">#1143</span> <a href="viewtopic.php?pid=1380861#p1380861">2014-02-12 17:14:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78355">anickname</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-07</span></dd> <dd><span>Posts: 23</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Does anyone have some scripts for systemd or libvirt to start / poweroff the virtual machines ?<br />For libvirt, maybe some minimal templates (xml) ?</p> <p class="postedit"><em>Last edited by anickname (2014-02-12 17:15:52)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1380861">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381021" class="blockpost rowodd"> <h2><span><span class="conr">#1144</span> <a href="viewtopic.php?pid=1381021#p1381021">2014-02-13 03:41:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78023">doubledr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-26</span></dd> <dd><span>Posts: 13</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Borg8401 wrote:</cite><blockquote><div><p>On pinning cores, I wish to pass through 4 physical cores, and 4 virtual cores to achieve my 4 core 8 thread setup from my startup script.&#160; Should I pass through cores 0-3 and 6-9 or cores 0-7?&#160; For clarification, I am unsure if it&#039;s setup:</p><p>physical-physical-physical-physical-physical-physical-virtual-virtual-virtual-virtual-virtual-virtual<br />-or-<br />physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual-physical-virtual</p><p>Also, is there a way to deny access to the physical and virtual cores I select above to my host and limit it only to the remaining cores/threads?</p><p><em>EDIT:<br />I have tried all of the following combinations with nearly identical levels of success/performance when testing with BF4:</em></p><p><em>0-3 and 6-9 -cpu host -smp 4,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu host -smp 8,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=2<br />0-3 and 6-9 -cpu SandyBridge -smp 8,sockets=1,cores=4,threads=2</em></p><p><em>2-5 and 8-11 -cpu host -smp 4,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu host -smp 8,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=2<br />2-5 and 8-11 -cpu SandyBridge -smp 8,sockets=1,cores=4,threads=2</em></p><p><em>0-3 -cpu host -smp 4,sockets=1,cores=4,threads=1<br />0-3 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>2-5 -cpu host -smp 4,sockets=1,cores=4,threads=1<br />2-5 -cpu SandyBridge -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>0-3 -smp 4,sockets=1,cores=4,threads=1</em></p><p><em>2-5 -smp 4,sockets=1,cores=4,threads=1</em></p><p>It seems nothing I do to my CPU affects my experience, perhaps my performance issues are coming from somewhere else?&#160; Could it be possible that even though GPU-Z (in Windows guest) reports PCIE is running at x16 3.0 that this may not be the case?&#160; I could see that being a definite bottleneck that may not be noticeable in less demanding games, for instance upon testing Star Wars the Old Republic I had the same performance as if I were on a native Windows install.&#160; Something strange I have noticed however is graphics settings don&#039;t have an impact on performance either, I get the same FPS in BF4 on ultra or on low.</p></div></blockquote></div><p>Interesting, adjusting graphic setting should disable some CPU bounded visual effect code paths. Unless this issue is in the basic visual effects. Have you tried to limit the number of VCPU? It might be a SMP issue.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381021">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381130" class="blockpost roweven"> <h2><span><span class="conr">#1145</span> <a href="viewtopic.php?pid=1381130#p1381130">2014-02-13 16:11:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78620">mostlyharmless</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-16</span></dd> <dd><span>Posts: 50</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78620">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Just an addendum to anyone trying to run the amd binary drivers in the host:&#160; there is clearly an IOMMU/vt-d conflict with the fglrx driver, at least in the ASUS RIVE.&#160; Enable vt-d in bios: black screen in X with 99% CPU and no terminal response. Disable vt-d with no other change:&#160; normal 3-D acceleration and function.&#160; I&#039;ve confirmed this with kernels 3.10.7, 3.12.1 and 3.13.0/2 with the last three beta amd drivers.&#160; Since the radeon drivers don&#039;t support 3-D very well on the 7900 yet, I&#039;m going to try switching the cards so that the nvidia is host and the amd is guest.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381130">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381132" class="blockpost rowodd"> <h2><span><span class="conr">#1146</span> <a href="viewtopic.php?pid=1381132#p1381132">2014-02-13 16:13:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mostlyharmless wrote:</cite><blockquote><div><p>Just an addendum to anyone trying to run the amd binary drivers in the host:&#160; there is clearly an IOMMU/vt-d conflict with the fglrx driver, at least in the ASUS RIVE.&#160; Enable vt-d in bios: black screen in X with 99% CPU and no terminal response. Disable vt-d with no other change:&#160; normal 3-D acceleration and function.&#160; I&#039;ve confirmed this with kernels 3.10.7, 3.12.1 and 3.13.0/2 with the last three beta amd drivers.&#160; Since the radeon drivers don&#039;t support 3-D very well on the 7900 yet, I&#039;m going to try switching the cards so that the nvidia is host and the amd is guest.</p></div></blockquote></div><p>iommu=pt to put host devices in passthrough mode may also be an option.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381132">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381189" class="blockpost roweven"> <h2><span><span class="conr">#1147</span> <a href="viewtopic.php?pid=1381189#p1381189">2014-02-13 20:22:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78620">mostlyharmless</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-16</span></dd> <dd><span>Posts: 50</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78620">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>No, IOMMU=pt or in fact no IOMMU on the kernel line makes no difference.&#160; Just having vt-d activated in BIOS is sufficient to bork fglrx.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381189">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381195" class="blockpost rowodd"> <h2><span><span class="conr">#1148</span> <a href="viewtopic.php?pid=1381195#p1381195">2014-02-13 20:49:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>mostlyharmless wrote:</cite><blockquote><div><p>No, IOMMU=pt or in fact no IOMMU on the kernel line makes no difference.&#160; Just having vt-d activated in BIOS is sufficient to bork fglrx.</p></div></blockquote></div><p>Perhaps interrupt remapping support is broken, try nointremap.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381195">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381202" class="blockpost roweven"> <h2><span><span class="conr">#1149</span> <a href="viewtopic.php?pid=1381202#p1381202">2014-02-13 21:24:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So I&#039;ve still got much of this thread to read through, but before I burn too many cycles trying various things to see if I can get this to work the way I want I have two basic questions that I would like to knock out quickly....</p><p>1) Do I need multiple video cards or can this be done with just one?&#160; Ideally I would like to run the host as just a headless host and deal with it through ssh, so I would prefer not to have another card in there.&#160; &#160;It looks life vfio-pci would require multiple cards, but pci-assign might?</p><p>2) Any source I should look at to set this up from a fresh install?&#160; Reapplying the approach in the first post should work, but I&#039;ll take any other compiled info as well if someone wrote something up.</p><p>(I will update this post if I find the answers while reading the thread, but putting them out there anyhow)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381202">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1381256" class="blockpost rowodd"> <h2><span><span class="conr">#1150</span> <a href="viewtopic.php?pid=1381256#p1381256">2014-02-14 02:40:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m occasionally getting a guest video driver hang, accompanied by an oops on the host.<br />This also invariably results in a freeze on host shutdown.</p><div class="codebox"><pre class="vscroll"><code>[165349.140201] kernel tried to execute NX-protected page - exploit attempt? (uid: 0) [165349.144001] BUG: unable to handle kernel paging request at ffffea0005587340 [165349.147069] IP: [&lt;ffffea0005587340&gt;] 0xffffea0005587340 [165349.149381] PGD 47e5f3067 PUD 47e5f2067 PMD 80000004718001e3 [165349.152172] Oops: 0011 [#1] SMP [165349.153542] Modules linked in: usb_storage(F) xt_multiport(F) xt_conntrack(F) ipt_REJECT(F) sb_edac(F) dm_crypt(F) ip6table_filter(F) ip6_tables(F) xt_CHECKSUM(F) iptable_mangle(F) ipt_MASQUERADE(F) iptable_nat(F) nf_conntrack_ipv4(F) nf_defrag_ipv4(F) nf_nat_ipv4(F) nf_nat(F) nf_conntrack(F) xt_tcpudp(F) bridge(F) stp(F) llc(F) iptable_filter(F) ip_tables(F) x_tables(F) autofs4(F) deflate(F) ctr(F) twofish_generic(F) twofish_avx_x86_64(F) twofish_x86_64_3way(F) twofish_x86_64(F) twofish_common(F) camellia_generic(F) camellia_aesni_avx2(F) camellia_aesni_avx_x86_64(F) camellia_x86_64(F) serpent_avx2(F) serpent_avx_x86_64(F) serpent_sse2_x86_64(F) xts(F) serpent_generic(F) blowfish_generic(F) blowfish_x86_64(F) blowfish_common(F) cast5_avx_x86_64(F) cast5_generic(F) cast_common(F) des_generic(F) cmac(F) xcbc(F) rmd160(F) crypto_null(F) af_key(F) xfrm_algo(F) parport_pc(F) ppdev(F) bnep(F) rfcomm(F) bluetooth(F) joydev(F) iTCO_wdt(F) iTCO_vendor_support(F) dm_multipath(F) scsi_dh(F) x86_pkg_temp_thermal(F) intel_powerclamp(F) kvm_intel(F) snd_usb_audio(F) snd_hda_codec_hdmi(F) kvm(F) snd_usbmidi_lib(F) crct10dif_pclmul(F) hid_logitech_dj(F) crc32_pclmul(F) ghash_clmulni_intel(F) aesni_intel(F) snd_hda_codec_realtek(F) aes_x86_64(F) lrw(F) gf128mul(F) glue_helper(F) ablk_helper(F) cryptd(F) snd_hda_intel(F) i915(F) snd_hda_codec(F) snd_seq_midi(F) shpchp(F) snd_seq_midi_event(F) snd_hwdep(F) snd_rawmidi(F) snd_pcm(F) snd_seq(F) drm_kms_helper(F) snd_page_alloc(F) snd_seq_device(F) snd_timer(F) drm(F) lpc_ich(F) snd(F) i2c_algo_bit(F) soundcore(F) video(F) mac_hid(F) vfio_pci(F) vfio_iommu_type1(F) vfio(F) w83627ehf(F) hwmon_vid(F) coretemp(F) msr(F) cpuid(F) jc42(F) nfsd(F) binfmt_misc(F) auth_rpcgss(F) nfs_acl(F) nfs(F) lp(F) parport(F) lockd(F) sunrpc(F) fscache(F) nls_iso8859_1(F) zfs(POF) zunicode(POF) zavl(POF) zcommon(POF) znvpair(POF) spl(OF) btrfs(F) xor(F) hid_generic(F) raid6_pq(F) libcrc32c(F) usbhid(F) hid(F) firewire_ohci(F) firewire_core(F) crc_itu_t(F) ahci(F) libahci(F) e1000e(F) ptp(F) pps_core(F) microcode(F) [165349.234609] CPU: 4 PID: 2092 Comm: libvirtd Tainted: PF W O 3.13.0-acs #1 [165349.237988] Hardware name: Supermicro X10SAT/X10SAT, BIOS 1.0 08/27/2013 [165349.240918] task: ffff880455471800 ti: ffff880452446000 task.ti: ffff880452446000 [165349.245214] RIP: 0010:[&lt;ffffea0005587340&gt;] [&lt;ffffea0005587340&gt;] 0xffffea0005587340 [165349.248924] RSP: 0018:ffff880452447d98 EFLAGS: 00010246 [165349.251166] RAX: 0000000000000088 RBX: ffff880467e63098 RCX: 0000000000000000 [165349.253973] RDX: ffff880067ad5748 RSI: 0000000000560054 RDI: ffff880467e63098 [165349.257448] RBP: ffff880452447dc0 R08: 0000000000000246 R09: 0000000000000000 [165349.261025] R10: ffffffff8122f679 R11: ffffea0011496c00 R12: ffff880467e63140 [165349.263848] R13: ffffea0005587340 R14: 0000000000000000 R15: ffffffffffffffed [165349.267308] FS: 00007f8dcf8de840(0000) GS:ffff88047eb00000(0000) knlGS:0000000000000000 [165349.271130] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [165349.273672] CR2: ffffea0005587340 CR3: 0000000452763000 CR4: 00000000001407e0 [165349.277059] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000 [165349.279770] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400 [165349.283501] Stack: [165349.284079] ffffffff814aabf6 ffffffff817342cc 0000000000000004 ffff880467e63098 [165349.287573] 0000000000000004 ffff880452447df0 ffffffff814ab68d 0000000000000004 [165349.291175] ffff880467e63098 ffff880467e63140 0000000000000246 ffff880452447e20 [165349.294208] Call Trace: [165349.295446] [&lt;ffffffff814aabf6&gt;] ? __rpm_callback+0x36/0xc0 [165349.298879] [&lt;ffffffff817342cc&gt;] ? notifier_call_chain+0x4c/0x70 [165349.304086] [&lt;ffffffff814ab68d&gt;] rpm_idle+0x1bd/0x2b0 [165349.307279] [&lt;ffffffff814ab7dd&gt;] __pm_runtime_idle+0x5d/0x80 [165349.310657] [&lt;ffffffff8149f085&gt;] __device_release_driver+0x65/0xf0 [165349.314992] [&lt;ffffffff8149f133&gt;] device_release_driver+0x23/0x30 [165349.318650] [&lt;ffffffff8149dead&gt;] unbind_store+0xbd/0xe0 [165349.321664] [&lt;ffffffff8149d2d4&gt;] drv_attr_store+0x24/0x40 [165349.324955] [&lt;ffffffff8122e878&gt;] sysfs_write_file+0x128/0x1c0 [165349.329196] [&lt;ffffffff811b7934&gt;] vfs_write+0xb4/0x1f0 [165349.332390] [&lt;ffffffff811b8369&gt;] SyS_write+0x49/0xa0 [165349.335567] [&lt;ffffffff817389bf&gt;] tracesys+0xe1/0xe6 [165349.338873] Code: 00 00 00 ff ff ff ff 01 00 00 00 00 01 10 00 00 00 ad de 00 02 20 00 00 00 ad de 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 &lt;00&gt; 00 00 00 00 ff ff 02 00 00 00 00 00 00 00 00 00 00 00 00 00 [165349.349115] RIP [&lt;ffffea0005587340&gt;] 0xffffea0005587340 [165349.352128] RSP &lt;ffff880452447d98&gt; [165349.354904] CR2: ffffea0005587340 [165349.363300] ---[ end trace d2abebf797ae841e ]---</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1381256">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=45">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=44">44</a> <a href="viewtopic.php?id=162768&amp;p=45">45</a> <strong>46</strong> <a href="viewtopic.php?id=162768&amp;p=47">47</a> <a href="viewtopic.php?id=162768&amp;p=48">48</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=47">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
