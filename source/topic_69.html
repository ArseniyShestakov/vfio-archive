<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 69) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=69" title="Page 69" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=68" title="Page 68" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=70" title="Page 70" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=68">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=67">67</a> <a href="viewtopic.php?id=162768&amp;p=68">68</a> <strong>69</strong> <a href="viewtopic.php?id=162768&amp;p=70">70</a> <a href="viewtopic.php?id=162768&amp;p=71">71</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=70">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1415663" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1701</span> <a href="viewtopic.php?pid=1415663#p1415663">2014-05-15 04:18:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>@aw: Your VM startup script uses virsh nodedev-detach pci_0000_01_00_0 and virsh nodedev-reattach pci_0000_01_00_0 to detach and later reattach the graphics card. Does the reattach command reset the graphics card</p></div></blockquote></div><p>no</p><div class="quotebox"><blockquote><div><p>and/or make it available to the host?</p></div></blockquote></div><p>yes</p><div class="quotebox"><blockquote><div><p>Are these virsh commands in lieu of binding the card to pci-stub?</p></div></blockquote></div><p>It&#039;s in place of binding and unbinding the device to vfio-pci</p><p>man virsh:</p><div class="codebox"><pre><code> nodedev-detach nodedev [--driver backend_driver] Detach nodedev from the host, so that it can safely be used by guests via &lt;hostdev&gt; passthrough. This is reversed with nodedev- reattach, and is done automatically for managed devices. For compatibility purposes, this command can also be spelled nodedev- dettach. Different backend drivers expect the device to be bound to different dummy devices. For example, QEMU&#039;s &quot;kvm&quot; backend driver (the default) expects the device to be bound to pci-stub, but its &quot;vfio&quot; backend driver expects the device to be bound to vfio-pci. The --driver parameter can be used to specify the desired backend driver.</code></pre></div><p>virsh nodedev-dumpxml will also list the iommu group dependencies</p><div class="quotebox"><blockquote><div><p>Now to the qemu / kvm command options: Aside from running --help and getting a shortlist of options, is there any source of information on the many command line options that are used?</p></div></blockquote></div><p>Use the source.&#160; It&#039;s also useful to use virt-manager then look in the libvirt log files to extract the options it used for a given feature.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415663">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415664" class="blockpost roweven"> <h2><span><span class="conr">#1702</span> <a href="viewtopic.php?pid=1415664#p1415664">2014-05-15 04:28:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>You can also use -device ? to get a list of devices and -device foo,? to get a list of options for device foo.&#160; &#039;?&#039; works to get options lists for various other commands too.&#160; So start with --help and drill down with other options.&#160; There&#039;s also a fairly extensive man page for qemu.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415664">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415745" class="blockpost rowodd"> <h2><span><span class="conr">#1703</span> <a href="viewtopic.php?pid=1415745#p1415745">2014-05-15 11:52:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81915">manjack</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ewaller wrote:</cite><blockquote><div><p>Are those the first errors?&#160; Can you capture the entire output and post it to pastebin and provide us a link?<br />How are you compiling it?&#160; Are you using <em>makepkg</em>, or are you using something like&#160; <em>config</em> and <em>make install</em> ?</p></div></blockquote></div><p>Sorry, first time posting code here. i have already fixed the post.</p><p>Yes, I&#039;m using makepkg to compile it. The log is <a href="http://pastebin.com/FaUm18LB" rel="nofollow">here</a></p><p>Thanks!</p> <p class="postedit"><em>Last edited by manjack (2014-05-15 11:57:05)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415745">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415806" class="blockpost roweven"> <h2><span><span class="conr">#1704</span> <a href="viewtopic.php?pid=1415806#p1415806">2014-05-15 15:27:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=27289">ewaller</a></strong></dt> <dd class="usertitle"><strong>Forum Moderator</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/27289.jpg?m=1406180442" width="80" height="80" alt="" /></dd> <dd><span>From: Pasadena, CA</span></dd> <dd><span>Registered: 2009-07-13</span></dd> <dd><span>Posts: 10,547</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=27289">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>manjack wrote:</cite><blockquote><div><p>Sorry, first time posting code here. i have already fixed the post.</p></div></blockquote></div><p>No worries.&#160; And your readers appreciate it. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><blockquote><div><p>Yes, I&#039;m using makepkg to compile it. The log is <a href="http://pastebin.com/FaUm18LB" rel="nofollow">here</a></p></div></blockquote></div><p>There is a mismatch somewhere.&#160; The there is a macro definition in an included file that does not match the way it is being called.<br />Which qemu is it that you are trying to build?&#160; I looked in the AUR and there are several, and of course, there is the one in the ABS.<br />Also, is your system fully up to date?&#160; Have you run <em>pacman -Syu</em> to ensure you&#039;ve the latest version of all packagers?</p> </div> <div class="postsignature postmsg"><hr /><p>Nothing is too wonderful to be true, if it be consistent with the laws of nature -- <em>Michael Faraday</em><br />Like you, I have no idea what you are doing, but I am pretty sure it is wrong...<em>Jasonwryan</em><br />----<br /><a href="http://www.catb.org/~esr/faqs/smart-questions.html" rel="nofollow">How to Ask Questions the Smart Way</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415806">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415985" class="blockpost rowodd"> <h2><span><span class="conr">#1705</span> <a href="viewtopic.php?pid=1415985#p1415985">2014-05-16 03:54:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>You can also use -device ? to get a list of devices and -device foo,? to get a list of options for device foo.&#160; &#039;?&#039; works to get options lists for various other commands too.&#160; So start with --help and drill down with other options.&#160; There&#039;s also a fairly extensive man page for qemu.</p></div></blockquote></div><p>Thanks! And also for explaining virsh nodedev-detach... etc. I had used virsh before, but only for USB hosts. Under Xen I didn&#039;t have luck reattaching my graphics card to the host and using it (IIRC it would crash the host). Is that possible with kvm and a little luck?</p><p>A second scenario would be to pass the graphics card to another guest. Is this possible?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415985">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415987" class="blockpost roweven"> <h2><span><span class="conr">#1706</span> <a href="viewtopic.php?pid=1415987#p1415987">2014-05-16 04:12:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>You can also use -device ? to get a list of devices and -device foo,? to get a list of options for device foo.&#160; &#039;?&#039; works to get options lists for various other commands too.&#160; So start with --help and drill down with other options.&#160; There&#039;s also a fairly extensive man page for qemu.</p></div></blockquote></div><p>Thanks! And also for explaining virsh nodedev-detach... etc. I had used virsh before, but only for USB hosts. Under Xen I didn&#039;t have luck reattaching my graphics card to the host and using it (IIRC it would crash the host). Is that possible with kvm and a little luck?</p></div></blockquote></div><p>Unfortunately the Linux graphics drivers behave very poorly when you attempt to unbind devices from them.&#160; I haven&#039;t looked at fixing any of them yet, but I did run across this video recently that seems to show a GPU being dynamically released from Xorg, booting Windows, then being re-attached to Xorg - <a href="http://163216.genaker.web.hosting-test.net/qemu_kvm_%2B_vfio_%3D_virtual_machine_for_gaming_with_95_of_native_performance_%3D_no_more_dual_booting/vi/37D2bRsthfI.html" rel="nofollow">http://163216.genaker.web.hosting-test. … sthfI.html</a>&#160; Sounds like some scripts to do some xrandr magic before and after using the vm.&#160; blu3bird84, are you around to share your scripts?</p><div class="quotebox"><blockquote><div><p>A second scenario would be to pass the graphics card to another guest. Is this possible?</p></div></blockquote></div><p>If you mean sequentially, then yes, of course that works (assuming we can reset the device when qemu starts up).&#160; There&#039;s no concurrent access support.</p><p>I&#039;ll also note for this thread that I tried a GeForce 8400GS and found that there was absolutely no way to reset the card.&#160; A secondary bus reset doesn&#039;t phase it, the mode and framebuffer remain intact.&#160; Windows guests still manage to work well with it, but not so much Linux.&#160; The card is too old to spend much effort on it, but fyi, folks using vintage cards may run into such things.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415987">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416016" class="blockpost rowodd"> <h2><span><span class="conr">#1707</span> <a href="viewtopic.php?pid=1416016#p1416016">2014-05-16 06:55:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81794">Destroy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>Was it upgrading to qemu 2 that did the trick with booting the VM?</p></div></blockquote></div><p>Yes. Qemu2, kernel 3.14.2 (with a patch for a problem with chipset SATA Marvell)</p><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>About using only one VCPU: I noticed that you don&#039;t have any</p><div class="codebox"><pre><code>smp sockets=...,cores=...</code></pre></div></div></blockquote></div><p>I have added</p><div class="codebox"><pre><code>-smp sockets=1,cores=2 -cpu host,hv-time </code></pre></div><p>and I getting a better response <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> CPU Mark from 1633 to 2950, it is a 80%</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416016">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416048" class="blockpost roweven"> <h2><span><span class="conr">#1708</span> <a href="viewtopic.php?pid=1416048#p1416048">2014-05-16 09:09:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Finally, in today, I success to build 2 VMs with 2 x GTX480 on another PC.<br />Before that, I can&#039;t boot up 2nd VM when 1st VM is working.</p><p>And here is another PC&#039;s spec:<br />CPU: Intel Core i7 4820K<br />MB: MSI X79A-GD45 Plus<br />RAM: DDR3-1600 4G x 8<br />GPU(Host): AMD Radeon HD5450<br />GPU(Guest 1): NVIDIA GeForce GTX480<br />GPU(Guest 2): Same as Guest 1<br />Host OS: Ubuntu Server 12.04-3 (Kernel: Linux 3.14.0-rc4 x86_64)<br />Guest OS: Ubuntu Server 12.04-4 (Both)</p><p>Few days ago I found that I doing a wrong installation steps before, that&#039;s why I can&#039;t passthrough my USB keyboard into my VM.<br />So, I decide to delete everything and restart at begin.</p><p>Here is my new steps:</p><p>1. Download VFIO kernel and qemu from aw&#039;s github (qemu-vfio &amp; linux-vfio)</p><p>2. Install qemu-vfio first, note that if you want to use usb device in VM, you need to set configure as</p><div class="codebox"><pre><code>./configure --prefix=/usr --enable-libusb</code></pre></div><p>3. Then install linux-vfio, before reboot, set /etc/default/grub as</p><div class="codebox"><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash intel_iommu=on pci-stub.ids=10de:06c0,10de:0be5 vfio_iommu_type1.allow_unsafe_interrupts=1&quot;</code></pre></div><p>and update grub, then reboot.</p><p>4. After reboot, make vfio-bind.sh file at #1 post then save to /usr/bin</p><p>5. In #1 post, nbhs wrote Systemd Service so can make vfio-bind to bind GPU into VFIO automatically when boot, but Ubuntu 12.04 still using Upstart, so I have no idea but skip it.</p><p>6. So I make sh file so it can bind into VFIO when start VM:</p><div class="codebox"><pre><code>#!/bin/bash #1st VM settings vfio-bind 0000:03:00.0 0000:03:00.1 qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -smp 3,sockets=1,cores=3,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none -nographic -localtime \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=03:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=03:00.1,bus=root.1,addr=00.1 \ -device ahci,bus=pcie.0,id=ahci \ -usb -usbdevice host:03f0:0024 \ -drive file=/home/eddieak/uc1.img,id=disk,format=raw,if=virtio</code></pre></div><p>7. 1st VM is bootup, now bootup 2nd VM, same code, but different USB HID, GPU PCI num, and image:</p><div class="codebox"><pre><code>#!/bin/bash #2nd VM settings vfio-bind 0000:01:00.0 0000:01:00.1 qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -smp 3,sockets=1,cores=3,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none -nographic -localtime \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -device ahci,bus=pcie.0,id=ahci \ -usb -usbdevice host:413c:2003 \ -drive file=/home/eddieak/uc2.img,id=disk,format=raw,if=virtio</code></pre></div><p>8. Finally, this time each VM can bootup, and can boot into Ubuntu tty.<br />Also, type lspci can found GTX480.</p><br /><br /><p>Now it can do well at this time, but I got problems </p><p>1. When I reboot one of VM, it will stuck at blank screen again, need to reboot whole host so that can boot 2 VMs together again.<br />2. If one of the VM stuck, I can&#039;t terminate it immediately, even I tried Ctrl+C is no use. Need to reboot or hit restart button.</p><p>Does any solutions?</p> <p class="postedit"><em>Last edited by AKSN74 (2014-05-16 09:16:19)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416048">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416174" class="blockpost rowodd"> <h2><span><span class="conr">#1709</span> <a href="viewtopic.php?pid=1416174#p1416174">2014-05-16 16:30:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>AKSN74 wrote:</cite><blockquote><div><p>Here is my new steps:</p><p>1. Download VFIO kernel and qemu from aw&#039;s github (qemu-vfio &amp; linux-vfio)</p></div></blockquote></div><p>No, there&#039;s nothing there that you need.&#160; In your setup qemu 2.0 and kernel 3.15-rc should be perfectly fine.&#160; Most users will also need to use the i915 VGA arbiter patches for host IGD graphics.&#160; The only reason for 3.15-rc is because it has the bulk of the PCH root port ACS quirks.</p><div class="quotebox"><blockquote><div><p>2. Install qemu-vfio first, note that if you want to use usb device in VM, you need to set configure as</p><div class="codebox"><pre><code>./configure --prefix=/usr --enable-libusb</code></pre></div><p>3. Then install linux-vfio, before reboot, set /etc/default/grub as</p><div class="codebox"><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash intel_iommu=on pci-stub.ids=10de:06c0,10de:0be5 vfio_iommu_type1.allow_unsafe_interrupts=1&quot;</code></pre></div><p>and update grub, then reboot.</p></div></blockquote></div><p>You also likely don&#039;t need vfio_iommu_type1.allow_unsafe_interrupts=1.&#160; Any one on an AMD system and most people on Intel don&#039;t need this option.</p><div class="quotebox"><blockquote><div><p>4. After reboot, make vfio-bind.sh file at #1 post then save to /usr/bin</p><p>5. In #1 post, nbhs wrote Systemd Service so can make vfio-bind to bind GPU into VFIO automatically when boot, but Ubuntu 12.04 still using Upstart, so I have no idea but skip it.</p><p>6. So I make sh file so it can bind into VFIO when start VM:</p><div class="codebox"><pre><code>#!/bin/bash #1st VM settings vfio-bind 0000:03:00.0 0000:03:00.1 qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -smp 3,sockets=1,cores=3,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none -nographic -localtime \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=03:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=03:00.1,bus=root.1,addr=00.1 \ -device ahci,bus=pcie.0,id=ahci \ -usb -usbdevice host:03f0:0024 \ -drive file=/home/eddieak/uc1.img,id=disk,format=raw,if=virtio</code></pre></div><p>7. 1st VM is bootup, now bootup 2nd VM, same code, but different USB HID, GPU PCI num, and image:</p><div class="codebox"><pre><code>#!/bin/bash #2nd VM settings vfio-bind 0000:01:00.0 0000:01:00.1 qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -smp 3,sockets=1,cores=3,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none -nographic -localtime \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -device ahci,bus=pcie.0,id=ahci \ -usb -usbdevice host:413c:2003 \ -drive file=/home/eddieak/uc2.img,id=disk,format=raw,if=virtio</code></pre></div><p>8. Finally, this time each VM can bootup, and can boot into Ubuntu tty.<br />Also, type lspci can found GTX480.</p><br /><br /><p>Now it can do well at this time, but I got problems </p><p>1. When I reboot one of VM, it will stuck at blank screen again, need to reboot whole host so that can boot 2 VMs together again.<br />2. If one of the VM stuck, I can&#039;t terminate it immediately, even I tried Ctrl+C is no use. Need to reboot or hit restart button.</p><p>Does any solutions?</p></div></blockquote></div><p>Could you remove the comment around #define DEBUG_VFIO in hw/misc/vfio.c in your qemu tree, rebuild and install and report the last few lines you see before it hangs?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416174">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416177" class="blockpost roweven"> <h2><span><span class="conr">#1710</span> <a href="viewtopic.php?pid=1416177#p1416177">2014-05-16 16:57:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81915">manjack</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ewaller wrote:</cite><blockquote><div><div class="quotebox"><cite>manjack wrote:</cite><blockquote><div><p>Sorry, first time posting code here. i have already fixed the post.</p></div></blockquote></div><p>No worries.&#160; And your readers appreciate it. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><blockquote><div><p>Yes, I&#039;m using makepkg to compile it. The log is <a href="http://pastebin.com/FaUm18LB" rel="nofollow">here</a></p></div></blockquote></div><p>There is a mismatch somewhere.&#160; The there is a macro definition in an included file that does not match the way it is being called.<br />Which qemu is it that you are trying to build?&#160; I looked in the AUR and there are several, and of course, there is the one in the ABS.<br />Also, is your system fully up to date?&#160; Have you run <em>pacman -Syu</em> to ensure you&#039;ve the latest version of all packagers?</p></div></blockquote></div><p>Im trying to build the one on this post. I have tried to build again after i run pacman -Syu but i got the same error.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416177">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416299" class="blockpost rowodd"> <h2><span><span class="conr">#1711</span> <a href="viewtopic.php?pid=1416299#p1416299">2014-05-17 01:30:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Very thanks for your reply, I&#039;m really appreciate. Because I&#039;m still a beginner, so there is some steps I don&#039;t know how to do.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>No, there&#039;s nothing there that you need.&#160; In your setup qemu 2.0 and kernel 3.15-rc should be perfectly fine.&#160; Most users will also need to use the i915 VGA arbiter patches for host IGD graphics.&#160; The only reason for 3.15-rc is because it has the bulk of the PCH root port ACS quirks.</p></div></blockquote></div><p>Do I need to uninstall previous QEMU and kernel? If so, how do I uninstall it? Because I tried &quot;make uninstall&quot; is no use, and type &quot;make clean&quot; will delete whole install data.</p><p>EDIT: I successfully uninstall the kernel and installing a new kernel now.</p><br /><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Could you remove the comment around #define DEBUG_VFIO in hw/misc/vfio.c in your qemu tree, rebuild and install and report the last few lines you see before it hangs?</p></div></blockquote></div><p>I use vi to open this file and found what you said</p><div class="codebox"><pre><code>/* #define DEBUG_VFIO */ #ifdef DEBUG_VFIO #define DPRINTF(fmt, ...) \ do { fprintf(stderr, &quot;vfio: &quot; fmt, ## __VA_ARGS__); } while (0) #else #define DPRINTF(fmt, ...) \ do { } while (0) #endif</code></pre></div><p>So I just need to remove these code and compile again?</p> <p class="postedit"><em>Last edited by AKSN74 (2014-05-17 01:58:52)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416299">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416318" class="blockpost roweven"> <h2><span><span class="conr">#1712</span> <a href="viewtopic.php?pid=1416318#p1416318">2014-05-17 03:46:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>AKSN74 wrote:</cite><blockquote><div><p>Very thanks for your reply, I&#039;m really appreciate. Because I&#039;m still a beginner, so there is some steps I don&#039;t know how to do.</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>No, there&#039;s nothing there that you need.&#160; In your setup qemu 2.0 and kernel 3.15-rc should be perfectly fine.&#160; Most users will also need to use the i915 VGA arbiter patches for host IGD graphics.&#160; The only reason for 3.15-rc is because it has the bulk of the PCH root port ACS quirks.</p></div></blockquote></div><p>Do I need to uninstall previous QEMU and kernel? If so, how do I uninstall it? Because I tried &quot;make uninstall&quot; is no use, and type &quot;make clean&quot; will delete whole install data.</p><p>EDIT: I successfully uninstall the kernel and installing a new kernel now.</p><br /><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Could you remove the comment around #define DEBUG_VFIO in hw/misc/vfio.c in your qemu tree, rebuild and install and report the last few lines you see before it hangs?</p></div></blockquote></div><p>I use vi to open this file and found what you said</p><div class="codebox"><pre><code>/* #define DEBUG_VFIO */ #ifdef DEBUG_VFIO #define DPRINTF(fmt, ...) \ do { fprintf(stderr, &quot;vfio: &quot; fmt, ## __VA_ARGS__); } while (0) #else #define DPRINTF(fmt, ...) \ do { } while (0) #endif</code></pre></div><p>So I just need to remove these code and compile again?</p></div></blockquote></div><p>Just change:</p><p>/* #define DEBUG_VFIO */</p><p>to</p><p>#define DEBUG_VFIO</p><p>Recompile, install, and report the last few lines after it hangs, hopefully it gives us something to investigate next.&#160; You can change it back and recompile/install to remove the debug output.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416318">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416327" class="blockpost rowodd"> <h2><span><span class="conr">#1713</span> <a href="viewtopic.php?pid=1416327#p1416327">2014-05-17 05:03:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Just change:</p><p>/* #define DEBUG_VFIO */</p><p>to</p><p>#define DEBUG_VFIO</p><p>Recompile, install, and report the last few lines after it hangs, hopefully it gives us something to investigate next.&#160; You can change it back and recompile/install to remove the debug output.</p></div></blockquote></div><p>OK, I&#039;ll try in these days and report immediately after the result.</p><p>Oh, I forgot to ask, this will show on dmesg or tty?</p> <p class="postedit"><em>Last edited by AKSN74 (2014-05-17 08:11:31)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416327">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416484" class="blockpost roweven"> <h2><span><span class="conr">#1714</span> <a href="viewtopic.php?pid=1416484#p1416484">2014-05-17 19:28:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81915">manjack</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>does the qemu on this post have problem?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416484">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416534" class="blockpost rowodd"> <h2><span><span class="conr">#1715</span> <a href="viewtopic.php?pid=1416534#p1416534">2014-05-17 22:14:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>manjack wrote:</cite><blockquote><div><p>does the qemu on this post have problem?</p></div></blockquote></div><p>Do you really think this is a productive question?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416534">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416875" class="blockpost roweven"> <h2><span><span class="conr">#1716</span> <a href="viewtopic.php?pid=1416875#p1416875">2014-05-19 03:16:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Just change:</p><p>/* #define DEBUG_VFIO */</p><p>to</p><p>#define DEBUG_VFIO</p><p>Recompile, install, and report the last few lines after it hangs, hopefully it gives us something to investigate next.&#160; You can change it back and recompile/install to remove the debug output.</p></div></blockquote></div><p>Hello, I&#039;m testing right now.</p><p>when I reboot one of VM, it hangs, and vfio debug message unstoppable and repeatedly printing this</p><div class="codebox"><pre><code>vfio: vfio_vga_read (0x3cc, 1) = 0x1 vfio: vfio_vga_read (0x3d4, 1) = 0x0 vfio: vfio_vga_write (0x3d4, 0x0,1) vfio: vfio_vga_write (0x3d4, 0xa8, 1) vfio: vfio_vga_write (0x3d4, 0x80a8, 2) vfio: vfio_bar_write (0000:01:00.0:BAR5+0x8, 0x61000c, 4) ← This may happen in some times</code></pre></div><p>Because its too fast. So I use camera with high-speed shutter.<br />That binary code not only 0x3d4, but also 0x3cc 0x3d5, and recursing.<br />So I realize that it hangs like it stuck at these binary code.</p><p>EDIT: Disable nouveau still useless. And I still observe to message, so code may update.</p><p>EDIT2: After the message runs about 18 minutes the message only shows:</p><div class="codebox"><pre><code>vfio: vfio_vga_read (0xa8044, 2) = 0x0</code></pre></div><p>But after about 3 minutes, the message back to begining code again</p> <p class="postedit"><em>Last edited by AKSN74 (2014-05-19 03:59:08)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416875">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416897" class="blockpost rowodd"> <h2><span><span class="conr">#1717</span> <a href="viewtopic.php?pid=1416897#p1416897">2014-05-19 06:20:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82094">Namelles_One</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82094">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, guys!</p><p>Nowdays, I also get problems with vga passthrough <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />Maybe, it is simple and you can help me?</p><p>I have Gentoo Linux, GeForce 7900GS with nvidia proprietary driver on host and Radeon HD6950 passthrough to guest.<br />On guest I tried to install Windows 7 SP1.</p><p>So, the main problem is very common - when I installed ATI driver on Windows (so, I have installed only video driver, not all CCC) - after reboot I got BSOD with atikmpag.sys</p><p>Sad, but true <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Some more info about my system:</p><div class="codebox"><pre><code>Linux StaticEvil 3.12.13-gentoo #8 SMP Sun May 18 23:54:05 MSK 2014 x86_64 Intel(R) Core(TM) i5-4440 CPU @ 3.10GHz GenuineIntel GNU/Linux</code></pre></div><div class="codebox"><pre><code>dmesg | grep IOMMU [ 0.017465] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020660462 ecap f0101a [ 0.017888] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap d2008020660462 ecap f010da [ 0.018537] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.204011] IOMMU 0 0xfed90000: using Queued invalidation [ 0.204168] IOMMU 1 0xfed91000: using Queued invalidation [ 0.204325] IOMMU: Setting RMRR: [ 0.204487] IOMMU: Setting identity map for device 0000:00:02.0 [0xab800000 - 0xaf9fffff] [ 0.205117] IOMMU: Setting identity map for device 0000:00:1d.0 [0xa837a000 - 0xa8386fff] [ 0.205407] IOMMU: Setting identity map for device 0000:00:1a.0 [0xa837a000 - 0xa8386fff] [ 0.205694] IOMMU: Setting identity map for device 0000:00:14.0 [0xa837a000 - 0xa8386fff] [ 0.205988] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.206150] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff]</code></pre></div><div class="codebox"><pre><code>cat /proc/cmdline BOOT_IMAGE=/vmlinuz-3.12.13-gentoo root=/dev/sda3 ro net.ifnames=0 modprobe.blacklist=fglrx \ pci-stub.ids=1002:6719,1002:aa80 vfio_iommu_type1.allow_unsafe_interrupts=1</code></pre></div><div class="codebox"><pre><code>lsmod Module Size Used by 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_6.html topic_7.html topic_8.html topic_9.html kvm_intel 126738 0 kvm 369668 1 kvm_intel nvidia 11271958 30 ***</code></pre></div><div class="codebox"><pre><code>sudo lspci -nn 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_6.html topic_7.html topic_8.html topic_9.html 01:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Cayman PRO [Radeon HD 6950] [1002:6719] 01:00.1 Audio device [0403]: Advanced Micro Devices, Inc. [AMD/ATI] Cayman/Antilles HDMI Audio [Radeon HD 6900 Series] [1002:aa80] ***</code></pre></div><div class="codebox"><pre><code>qemu-system-x86_64 --version QEMU emulator version 2.0.0, Copyright (c) 2003-2008 Fabrice Bellard</code></pre></div><div class="codebox"><pre><code>cat /etc/modprobe.d/kvm.conf options kvm ignore_msrs=1 options kvm allow_unsafe_assigned_interrupts=1</code></pre></div><p>What can I forget? So, the most strange is, that once it boot good, without BSOD, but after reboot I get BSOD again and again. Strange and sad.</p><p>P.S. Before starting qemu I do:</p><div class="codebox"><pre><code>sudo vfio-bind 0000:01:00.0 0000:01:00.1</code></pre></div><p>then</p><div class="codebox"><pre><code>pkexec qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host -smp 6,sockets=1,cores=2,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device vfio-pci,host=01:00.0,x-vga=on -drive file=/var/lib/libvirt/images/Windows_7.img,id=disk,format=raw</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416897">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416905" class="blockpost roweven"> <h2><span><span class="conr">#1718</span> <a href="viewtopic.php?pid=1416905#p1416905">2014-05-19 06:59:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79534">zzz3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-16</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79534">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello.<br />Is it possible to passthrough radeon card and use another radeon in host?<br />How don&#039;t blacklist radeon driver and get it works.</p><p>Looks like I just have to use psi-stub for guest card and don&#039;t blacklist radeon driver.</p> <p class="postedit"><em>Last edited by zzz3000 (2014-05-19 07:19:21)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416905">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416917" class="blockpost rowodd"> <h2><span><span class="conr">#1719</span> <a href="viewtopic.php?pid=1416917#p1416917">2014-05-19 08:48:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Namelles_One wrote:</cite><blockquote><div><p>Hi, guys!</p><p>Nowdays, I also get problems with vga passthrough <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />Maybe, it is simple and you can help me?</p><p>I have Gentoo Linux, GeForce 7900GS with nvidia proprietary driver on host and Radeon HD6950 passthrough to guest.<br />On guest I tried to install Windows 7 SP1.</p><p>So, the main problem is very common - when I installed ATI driver on Windows (so, I have installed only video driver, not all CCC) - after reboot I got BSOD with atikmpag.sys</p><p>Sad, but true <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Some more info about my system:</p><div class="codebox"><pre><code>Linux StaticEvil 3.12.13-gentoo #8 SMP Sun May 18 23:54:05 MSK 2014 x86_64 Intel(R) Core(TM) i5-4440 CPU @ 3.10GHz GenuineIntel GNU/Linux</code></pre></div><div class="codebox"><pre><code>dmesg | grep IOMMU [ 0.017465] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020660462 ecap f0101a [ 0.017888] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap d2008020660462 ecap f010da [ 0.018537] IOAPIC id 2 under DRHD base 0xfed91000 IOMMU 1 [ 0.204011] IOMMU 0 0xfed90000: using Queued invalidation [ 0.204168] IOMMU 1 0xfed91000: using Queued invalidation [ 0.204325] IOMMU: Setting RMRR: [ 0.204487] IOMMU: Setting identity map for device 0000:00:02.0 [0xab800000 - 0xaf9fffff] [ 0.205117] IOMMU: Setting identity map for device 0000:00:1d.0 [0xa837a000 - 0xa8386fff] [ 0.205407] IOMMU: Setting identity map for device 0000:00:1a.0 [0xa837a000 - 0xa8386fff] [ 0.205694] IOMMU: Setting identity map for device 0000:00:14.0 [0xa837a000 - 0xa8386fff] [ 0.205988] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.206150] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff]</code></pre></div><div class="codebox"><pre><code>cat /proc/cmdline BOOT_IMAGE=/vmlinuz-3.12.13-gentoo root=/dev/sda3 ro net.ifnames=0 modprobe.blacklist=fglrx \ pci-stub.ids=1002:6719,1002:aa80 vfio_iommu_type1.allow_unsafe_interrupts=1</code></pre></div><div class="codebox"><pre><code>lsmod Module Size Used by 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_6.html topic_7.html topic_8.html topic_9.html kvm_intel 126738 0 kvm 369668 1 kvm_intel nvidia 11271958 30 ***</code></pre></div><div class="codebox"><pre><code>sudo lspci -nn 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_6.html topic_7.html topic_8.html topic_9.html 01:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Cayman PRO [Radeon HD 6950] [1002:6719] 01:00.1 Audio device [0403]: Advanced Micro Devices, Inc. [AMD/ATI] Cayman/Antilles HDMI Audio [Radeon HD 6900 Series] [1002:aa80] ***</code></pre></div><div class="codebox"><pre><code>qemu-system-x86_64 --version QEMU emulator version 2.0.0, Copyright (c) 2003-2008 Fabrice Bellard</code></pre></div><div class="codebox"><pre><code>cat /etc/modprobe.d/kvm.conf options kvm ignore_msrs=1 options kvm allow_unsafe_assigned_interrupts=1</code></pre></div><p>What can I forget? So, the most strange is, that once it boot good, without BSOD, but after reboot I get BSOD again and again. Strange and sad.</p><p>P.S. Before starting qemu I do:</p><div class="codebox"><pre><code>sudo vfio-bind 0000:01:00.0 0000:01:00.1</code></pre></div><p>then</p><div class="codebox"><pre><code>pkexec qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host -smp 6,sockets=1,cores=2,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device vfio-pci,host=01:00.0,x-vga=on -drive file=/var/lib/libvirt/images/Windows_7.img,id=disk,format=raw</code></pre></div></div></blockquote></div><p>Not only AMD GPU need to mount into VM, but also the AMD Audio device need to mount together.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416917">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416918" class="blockpost roweven"> <h2><span><span class="conr">#1720</span> <a href="viewtopic.php?pid=1416918#p1416918">2014-05-19 08:50:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80830">gneville</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-04-02</span></dd> <dd><span>Posts: 27</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi <strong>Namelles_One</strong></p><p>I managed to fix the bsods on reboots by following the instructions this guy had in his blog <a href="http://blog.ktz.me/?p=219" rel="nofollow">http://blog.ktz.me/?p=219</a> it works perfectly for me now.</p><div class="quotebox"><cite>Namelles_One wrote:</cite><blockquote><div><p>What can I forget? So, the most strange is, that once it boot good, without BSOD, but after reboot I get BSOD again and again. Strange and sad.</p></div></blockquote></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416918">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416920" class="blockpost rowodd"> <h2><span><span class="conr">#1721</span> <a href="viewtopic.php?pid=1416920#p1416920">2014-05-19 08:57:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82094">Namelles_One</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82094">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>AKSN74 wrote:</cite><blockquote><div><p>Not only AMD GPU need to mount into VM, but also the AMD Audio device need to mount together.</p></div></blockquote></div><p>So, I tried with Audio too - BSOD anyway, sorry.</p><div class="quotebox"><cite>gneville wrote:</cite><blockquote><div><p>I managed to fix the bsods on reboots by following the instructions this guy had in his blog <a href="http://blog.ktz.me/?p=219" rel="nofollow">http://blog.ktz.me/?p=219</a> it works perfectly for me now.</p></div></blockquote></div><p>So, you did not with qemu-kvm, but with xen?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416920">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416936" class="blockpost roweven"> <h2><span><span class="conr">#1722</span> <a href="viewtopic.php?pid=1416936#p1416936">2014-05-19 09:46:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80830">gneville</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-04-02</span></dd> <dd><span>Posts: 27</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>It works with qemu as well as Xen.</p><div class="quotebox"><cite>Namelles_One wrote:</cite><blockquote><div><p>So, you did not with qemu-kvm, but with xen?</p></div></blockquote></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416936">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416943" class="blockpost rowodd"> <h2><span><span class="conr">#1723</span> <a href="viewtopic.php?pid=1416943#p1416943">2014-05-19 10:18:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82094">Namelles_One</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82094">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>gneville wrote:</cite><blockquote><div><p>It works with qemu as well as Xen.</p><div class="quotebox"><cite>Namelles_One wrote:</cite><blockquote><div><p>So, you did not with qemu-kvm, but with xen?</p></div></blockquote></div></div></blockquote></div><p>It&#039;s all about rebooting, I see. But I get BSOD also when I boot qemu firstly, after rebooting host.</p><p>Or, even when I reboot guest with ATI drivers at least once - I got corrupted state and then can&#039;t boot it, before driver removing?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416943">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1416957" class="blockpost roweven"> <h2><span><span class="conr">#1724</span> <a href="viewtopic.php?pid=1416957#p1416957">2014-05-19 10:55:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79534">zzz3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-16</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79534">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have the same problem with HD7750.<br />The problem with windows radeon driver dissapeared only after I had installed&#160; fedora rawhide, so I am waiting fedora 21.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1416957">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1417073" class="blockpost rowodd"> <h2><span><span class="conr">#1725</span> <a href="viewtopic.php?pid=1417073#p1417073">2014-05-19 17:57:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82094">Namelles_One</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-18</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82094">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>zzz3000 wrote:</cite><blockquote><div><p>I have the same problem with HD7750.<br />The problem with windows radeon driver dissapeared only after I had installed&#160; fedora rawhide, so I am waiting fedora 21.</p></div></blockquote></div><p>Thank you! &quot;Rawhide&quot; - it is a keyword ^^</p><p>I&#039;ve update to 3.14.4 kernel and have stable Windows with driver! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>So, let&#039;s rock!</p><p><span class="postimg"><img src="http://s27.postimg.org/h3xigkk2b/Rating.png" alt="Rating.png" /></span></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1417073">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=68">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=67">67</a> <a href="viewtopic.php?id=162768&amp;p=68">68</a> <strong>69</strong> <a href="viewtopic.php?id=162768&amp;p=70">70</a> <a href="viewtopic.php?id=162768&amp;p=71">71</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=70">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
