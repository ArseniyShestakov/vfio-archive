<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 25) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=25" title="Page 25" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=24" title="Page 24" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=26" title="Page 26" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=24">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=23">23</a> <a href="viewtopic.php?id=162768&amp;p=24">24</a> <strong>25</strong> <a href="viewtopic.php?id=162768&amp;p=26">26</a> <a href="viewtopic.php?id=162768&amp;p=27">27</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=26">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1340782" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#601</span> <a href="viewtopic.php?pid=1340782#p1340782">2013-10-23 21:42:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Thank you and I am sorry for my inattention.<br />I have started VM via command bellow, but get black monitor - no signal... could you please help to investigate the issue?</p><p>qemu-system-x86_64 -M q35&#160; -m 4096&#160; -enable-kvm -cpu host&#160; -vga none \<br />-smp 1,sockets=1,cores=2,threads=1 \<br />-device ahci,bus=pcie.0,id=ahci \<br />-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />-device vfio-pci,host=01:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1 \<br />-device vfio-pci,host=01:00.1,bus=pcie.0 \<br />-drive file=/run/media/abrilevskiy/CopiedData/Soft/saucy-desktop-amd64.iso,id=isocd -device ide-cd,bus=ahci.1,drive=isocd \<br />-drive if=none,id=drive0,cache=none,aio=native,format=raw,file=/home/abrilevskiy/windows.img \<br />-device virtio-blk,drive=drive0,scsi=off,config-wce=off,x-data-plane=on</p><p>I have tried:<br />modprobe -r kvm_intel<br />modprobe kvm_intel emulate_invalid_guest_state=0<br />but it did not help</p></div></blockquote></div><p>post your hardware specs, and any message you get.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340782">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1340785" class="blockpost roweven"> <h2><span><span class="conr">#602</span> <a href="viewtopic.php?pid=1340785#p1340785">2013-10-23 21:46:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>i5-3470<br />AsRock Z77 pro4<br />Nvidia GT640 - Grid K1 (01:00.0)<br />ATI HD 7750 (02:00.0)</p><div class="codebox"><pre class="vscroll"><code>[ 0.368249] PCI-DMA: Intel(R) Virtualization Technology for Directed I/O [ 0.368333] ------------[ cut here ]------------ [ 0.368338] WARNING: CPU: 0 PID: 1 at drivers/pci/search.c:46 pci_find_upstream_pcie_bridge+0x77/0x90() [ 0.368339] Modules linked in: [ 0.368341] CPU: 0 PID: 1 Comm: swapper/0 Not tainted 3.12.0-1-mainline #1 [ 0.368342] Hardware name: To Be Filled By O.E.M. To Be Filled By O.E.M./Z77 Pro4, BIOS P1.70 01/17/2013 [ 0.368344] 0000000000000009 ffff880243811d20 ffffffff814eb993 0000000000000000 [ 0.368346] ffff880243811d58 ffffffff81061b5d ffff880243560098 ffff880243560000 [ 0.368347] ffff880243560098 0000000000000000 ffff880246c097e0 ffff880243811d68 [ 0.368349] Call Trace: [ 0.368354] [&lt;ffffffff814eb993&gt;] dump_stack+0x54/0x8d [ 0.368357] [&lt;ffffffff81061b5d&gt;] warn_slowpath_common+0x7d/0xa0 [ 0.368359] [&lt;ffffffff81061c3a&gt;] warn_slowpath_null+0x1a/0x20 [ 0.368361] [&lt;ffffffff812c3e47&gt;] pci_find_upstream_pcie_bridge+0x77/0x90 [ 0.368364] [&lt;ffffffff813d9d8d&gt;] intel_iommu_add_device+0x4d/0x220 [ 0.368366] [&lt;ffffffff813d0fb0&gt;] ? bus_set_iommu+0x50/0x50 [ 0.368368] [&lt;ffffffff813d0fda&gt;] add_iommu_group+0x2a/0x50 [ 0.368371] [&lt;ffffffff81385c93&gt;] bus_for_each_dev+0x63/0xa0 [ 0.368372] [&lt;ffffffff813d0fa8&gt;] bus_set_iommu+0x48/0x50 [ 0.368375] [&lt;ffffffff819279bc&gt;] intel_iommu_init+0xaad/0xba2 [ 0.368377] [&lt;ffffffff810523e5&gt;] ? free_init_pages+0x75/0xa0 [ 0.368380] [&lt;ffffffff818e2156&gt;] ? maybe_link.part.1+0x10f/0x10f [ 0.368382] [&lt;ffffffff818ea9a3&gt;] ? memblock_find_dma_reserve+0x124/0x124 [ 0.368384] [&lt;ffffffff818ea9b5&gt;] pci_iommu_init+0x12/0x3c [ 0.368386] [&lt;ffffffff810020fa&gt;] do_one_initcall+0xfa/0x1b0 [ 0.368389] [&lt;ffffffff81081f05&gt;] ? parse_args+0x225/0x3f0 [ 0.368391] [&lt;ffffffff818e1067&gt;] kernel_init_freeable+0x15a/0x1e0 [ 0.368393] [&lt;ffffffff818e089a&gt;] ? do_early_param+0x88/0x88 [ 0.368396] [&lt;ffffffff814de1a0&gt;] ? rest_init+0x90/0x90 [ 0.368398] [&lt;ffffffff814de1ae&gt;] kernel_init+0xe/0x190 [ 0.368400] [&lt;ffffffff814fa4bc&gt;] ret_from_fork+0x7c/0xb0 [ 0.368402] [&lt;ffffffff814de1a0&gt;] ? rest_init+0x90/0x90 [ 0.368405] ---[ end trace 8e9a9c119d6070f7 ]---</code></pre></div><div class="codebox"><pre class="vscroll"><code>sudo journalctl --no-pager | grep vfio Oct 23 00:41:47 abrilevskiy-pc.lan sudo[1078]: root : TTY=pts/1 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:01:00.0 0000:01:00.1 Oct 23 00:41:49 abrilevskiy-pc.lan sudo[1094]: root : TTY=pts/1 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:02:00.0 0000:02:00.1 Oct 23 00:43:38 abrilevskiy-pc.lan sudo[1168]: root : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:00:1a.0 Oct 23 00:43:42 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 00:44:02 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 00:44:02 abrilevskiy-pc.lan kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Oct 23 00:44:02 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 00:54:58 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 00:54:58 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 00:55:29 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 00:55:29 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 00:56:23 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 00:56:23 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 01:04:07 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:05:13 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:05:57 abrilevskiy-pc.lan kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:09:36 abrilevskiy-pc.lan sudo[1671]: abrilevskiy : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:02:00.0 0000:02:00.1 Oct 23 01:09:36 abrilevskiy-pc.lan kernel: usb_storage vfio_pci vfio_iommu_type1 vfio fuse isl6423 stv6110x stv090x x86_pkg_temp_thermal intel_powerclamp coretemp kvm_intel kvm crc32_pclmul crc32c_intel ghash_clmulni_intel aesni_intel aes_x86_64 lrw gf128mul glue_helper ablk_helper cryptd iTCO_wdt iTCO_vendor_support microcode joydev btusb bluetooth rfkill psmouse pcspkr serio_raw budget budget_core ttpci_eeprom saa7146 snd_hda_codec_hdmi dvb_core r8169 mii snd_hda_codec_realtek i915 snd_hda_intel snd_hda_codec intel_agp intel_gtt snd_hwdep snd_pcm drm_kms_helper video snd_page_alloc i2c_i801 drm snd_timer acpi_cpufreq snd button evdev mei_me i2c_algo_bit processor mei soundcore i2c_core shpchp lpc_ich hid_generic ext4 crc16 mbcache jbd2 usbhid hid sd_mod ahci libahci libata scsi_mod ehci_pci ehci_hcd xhci_hcd usbcore usb_common Oct 23 01:09:36 abrilevskiy-pc.lan kernel: Oct 23 01:09:36 abrilevskiy-pc.lan kernel: CPU: 2 PID: 1672 Comm: vfio-bind Tainted: G W 3.12.0-1-mainline #1 Oct 23 01:09:43 localhost.localdomain sudo[1767]: root : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:02:00.0 0000:02:00.1 Oct 23 01:09:51 localhost.localdomain kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:09:51 localhost.localdomain kernel: vfio-pci 0000:02:00.0: enabling device (0000 -&gt; 0003) Oct 23 01:09:51 localhost.localdomain kernel: vfio_ecap_init: 0000:02:00.0 hiding ecap 0x19@0x270 Oct 23 01:10:19 localhost.localdomain kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:10:19 localhost.localdomain kernel: vfio_ecap_init: 0000:02:00.0 hiding ecap 0x19@0x270 Oct 23 01:10:53 localhost.localdomain kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:10:53 localhost.localdomain kernel: vfio_ecap_init: 0000:02:00.0 hiding ecap 0x19@0x270 Oct 23 01:11:06 localhost.localdomain kernel: vfio-pci 0000:02:00.0: irq 45 for MSI/MSI-X Oct 23 01:11:12 localhost.localdomain kernel: vfio-pci 0000:02:00.1: irq 48 for MSI/MSI-X Oct 23 01:14:12 localhost.localdomain kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:14:12 localhost.localdomain kernel: vfio_ecap_init: 0000:02:00.0 hiding ecap 0x19@0x270 Oct 23 01:14:21 localhost.localdomain kernel: vfio_cap_init: 0000:00:1a.0 hiding cap 0xa Oct 23 01:14:21 localhost.localdomain kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:20:17 abrilevskiy-pc.lan sudo[1325]: root : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:01:00.0 0000:01:00.1 Oct 23 20:20:21 abrilevskiy-pc.lan sudo[1344]: root : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:02:00.0 0000:02:00.1 Oct 23 20:23:04 abrilevskiy-pc.lan kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Oct 23 20:23:04 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:23:53 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:24:32 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:26:51 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:30:30 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:38:28 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:40:02 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:40:48 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 23 20:41:43 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 24 00:24:33 abrilevskiy-pc.lan sudo[3886]: root : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:01:00.0 0000:01:00.1 Oct 24 00:24:40 abrilevskiy-pc.lan sudo[4036]: root : TTY=pts/2 ; PWD=/home/abrilevskiy ; USER=root ; COMMAND=./vfio-bind 0000:02:00.0 0000:02:00.1 Oct 24 00:25:12 abrilevskiy-pc.lan kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Oct 24 00:25:12 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 24 00:26:17 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 24 00:28:20 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Oct 24 00:32:28 abrilevskiy-pc.lan kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900</code></pre></div> <p class="postedit"><em>Last edited by myweb (2013-10-23 21:50:16)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340785">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1340786" class="blockpost rowodd"> <h2><span><span class="conr">#603</span> <a href="viewtopic.php?pid=1340786#p1340786">2013-10-23 21:50:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>i5-3470<br />AsRock Z77 pro4<br />Nvidia GT640 - Grid K1 (01:00.0)<br />ATI HD 7750 (02:00.0)</p><p>[&#160; &#160; 0.368249] PCI-DMA: Intel(R) Virtualization Technology for Directed I/O<br />[&#160; &#160; 0.368333] ------------[ cut here ]------------<br />[&#160; &#160; 0.368338] WARNING: CPU: 0 PID: 1 at drivers/pci/search.c:46 pci_find_upstream_pcie_bridge+0x77/0x90()<br />[&#160; &#160; 0.368339] Modules linked in:<br />[&#160; &#160; 0.368341] CPU: 0 PID: 1 Comm: swapper/0 Not tainted 3.12.0-1-mainline #1<br />[&#160; &#160; 0.368342] Hardware name: To Be Filled By O.E.M. To Be Filled By O.E.M./Z77 Pro4, BIOS P1.70 01/17/2013<br />[&#160; &#160; 0.368344]&#160; 0000000000000009 ffff880243811d20 ffffffff814eb993 0000000000000000<br />[&#160; &#160; 0.368346]&#160; ffff880243811d58 ffffffff81061b5d ffff880243560098 ffff880243560000<br />[&#160; &#160; 0.368347]&#160; ffff880243560098 0000000000000000 ffff880246c097e0 ffff880243811d68<br />[&#160; &#160; 0.368349] Call Trace:<br />[&#160; &#160; 0.368354]&#160; [&lt;ffffffff814eb993&gt;] dump_stack+0x54/0x8d<br />[&#160; &#160; 0.368357]&#160; [&lt;ffffffff81061b5d&gt;] warn_slowpath_common+0x7d/0xa0<br />[&#160; &#160; 0.368359]&#160; [&lt;ffffffff81061c3a&gt;] warn_slowpath_null+0x1a/0x20<br />[&#160; &#160; 0.368361]&#160; [&lt;ffffffff812c3e47&gt;] pci_find_upstream_pcie_bridge+0x77/0x90<br />[&#160; &#160; 0.368364]&#160; [&lt;ffffffff813d9d8d&gt;] intel_iommu_add_device+0x4d/0x220<br />[&#160; &#160; 0.368366]&#160; [&lt;ffffffff813d0fb0&gt;] ? bus_set_iommu+0x50/0x50<br />[&#160; &#160; 0.368368]&#160; [&lt;ffffffff813d0fda&gt;] add_iommu_group+0x2a/0x50<br />[&#160; &#160; 0.368371]&#160; [&lt;ffffffff81385c93&gt;] bus_for_each_dev+0x63/0xa0<br />[&#160; &#160; 0.368372]&#160; [&lt;ffffffff813d0fa8&gt;] bus_set_iommu+0x48/0x50<br />[&#160; &#160; 0.368375]&#160; [&lt;ffffffff819279bc&gt;] intel_iommu_init+0xaad/0xba2<br />[&#160; &#160; 0.368377]&#160; [&lt;ffffffff810523e5&gt;] ? free_init_pages+0x75/0xa0<br />[&#160; &#160; 0.368380]&#160; [&lt;ffffffff818e2156&gt;] ? maybe_link.part.1+0x10f/0x10f<br />[&#160; &#160; 0.368382]&#160; [&lt;ffffffff818ea9a3&gt;] ? memblock_find_dma_reserve+0x124/0x124<br />[&#160; &#160; 0.368384]&#160; [&lt;ffffffff818ea9b5&gt;] pci_iommu_init+0x12/0x3c<br />[&#160; &#160; 0.368386]&#160; [&lt;ffffffff810020fa&gt;] do_one_initcall+0xfa/0x1b0<br />[&#160; &#160; 0.368389]&#160; [&lt;ffffffff81081f05&gt;] ? parse_args+0x225/0x3f0<br />[&#160; &#160; 0.368391]&#160; [&lt;ffffffff818e1067&gt;] kernel_init_freeable+0x15a/0x1e0<br />[&#160; &#160; 0.368393]&#160; [&lt;ffffffff818e089a&gt;] ? do_early_param+0x88/0x88<br />[&#160; &#160; 0.368396]&#160; [&lt;ffffffff814de1a0&gt;] ? rest_init+0x90/0x90<br />[&#160; &#160; 0.368398]&#160; [&lt;ffffffff814de1ae&gt;] kernel_init+0xe/0x190<br />[&#160; &#160; 0.368400]&#160; [&lt;ffffffff814fa4bc&gt;] ret_from_fork+0x7c/0xb0<br />[&#160; &#160; 0.368402]&#160; [&lt;ffffffff814de1a0&gt;] ? rest_init+0x90/0x90<br />[&#160; &#160; 0.368405] ---[ end trace 8e9a9c119d6070f7 ]---</p></div></blockquote></div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on,igfx_on,pass-through pcie_acs_override=downstream quiet</p></div></blockquote></div><p>Boot with intel_iommu=on and remove the other stuff, also nvidia drivers on the host requires a patch</p><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>...<br />-device vfio-pci,host=01:00.0,x-vga=on,addr=0.0,multifunction=on,bus=root.1 \<br />-device vfio-pci,host=01:00.1,bus=pcie.0 \<br />...</p></div></blockquote></div><p>Are you trying to passthrough your primary card?</p> <p class="postedit"><em>Last edited by nbhs (2013-10-23 21:57:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340786">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1340788" class="blockpost roweven"> <h2><span><span class="conr">#604</span> <a href="viewtopic.php?pid=1340788#p1340788">2013-10-23 22:02:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Are you trying to passthrough your primary card?</p></div></blockquote></div><p>No, my primary card is Integrated video.<br />I compiled kernel with pcie_acs_override support, booted with:<br />Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on pcie_acs_override=downstream quiet and got working Live Ubuntu on ATI HD 7750. Also, Windows 8 is installed and working!!! Thank you very much!!! Graphics performance is 7.3 for 3d/2d.</p><p>But I can not do this for Nvidia...</p> <p class="postedit"><em>Last edited by myweb (2013-10-23 22:49:53)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340788">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1340820" class="blockpost rowodd"> <h2><span><span class="conr">#605</span> <a href="viewtopic.php?pid=1340820#p1340820">2013-10-23 23:15:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Are you trying to passthrough your primary card?</p></div></blockquote></div><p>No, my primary card is Integrated video.<br />I compiled kernel with pcie_acs_override support, booted with:<br />Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on pcie_acs_override=downstream quiet and got working Live Ubuntu on ATI HD 7750. Also, Windows 8 is installed and working!!! Thank you very much!!! Graphics performance is 7.3 for 3d/2d.</p><p>But I can not do this for Nvidia...</p></div></blockquote></div><p>nice!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340820">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1340832" class="blockpost roweven"> <h2><span><span class="conr">#606</span> <a href="viewtopic.php?pid=1340832#p1340832">2013-10-23 23:51:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I finally got my setup working! What caused the trouble was apparently a buggy IOMMU implementation on my Mainboard (Gigabyte 970A-UD3). I switched to an Asrock 990FX Extreme3 since that was the only affordable Mainboard which was confirmed to be working in this topic i could find.</p><p>Thanks for the help!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340832">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1340969" class="blockpost rowodd"> <h2><span><span class="conr">#607</span> <a href="viewtopic.php?pid=1340969#p1340969">2013-10-24 10:52:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Are you trying to passthrough your primary card?</p></div></blockquote></div><p>No, my primary card is Integrated video.<br />I compiled kernel with pcie_acs_override support, booted with:<br />Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on pcie_acs_override=downstream quiet and got working Live Ubuntu on ATI HD 7750. Also, Windows 8 is installed and working!!! Thank you very much!!! Graphics performance is 7.3 for 3d/2d.</p><p>But I can not do this for Nvidia...</p></div></blockquote></div><p>nice!</p></div></blockquote></div><p>Could you please specify what steps I should perform in order to investigate why my Nvidia card does not work?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1340969">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341091" class="blockpost roweven"> <h2><span><span class="conr">#608</span> <a href="viewtopic.php?pid=1341091#p1341091">2013-10-24 17:01:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53621">teekay</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-10-26</span></dd> <dd><span>Posts: 267</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53621">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>No, my primary card is Integrated video.<br />I compiled kernel with pcie_acs_override support, booted with:<br />Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on pcie_acs_override=downstream quiet and got working Live Ubuntu on ATI HD 7750. Also, Windows 8 is installed and working!!! Thank you very much!!! Graphics performance is 7.3 for 3d/2d.</p><p>But I can not do this for Nvidia...</p></div></blockquote></div><p>nice!</p></div></blockquote></div><p>Could you please specify what steps I should perform in order to investigate why my Nvidia card does not work?</p></div></blockquote></div><p>If you are trying to passthrough your nvidia card (and use your ATI for the host), either try to get rid of the nvidia drivers on the host, or simply pci-stub it.<br />Or are you trying to pass through both? (that&#039;s a bit unclear..)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341091">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341171" class="blockpost rowodd"> <h2><span><span class="conr">#609</span> <a href="viewtopic.php?pid=1341171#p1341171">2013-10-24 21:57:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I would like to setup and run simultaneously 2 virtual PC:<br />#1 Windows with ATI 7750 passthrough - works<br />#2 Linux with Nvidia GT 640 passthrough - not works<br />Host Linux should use Intel video card embeded in CPU</p><p>with -vga none I always get &quot;no signal&quot; on Nvidia GT 640 passthrough.<br />If boot to Kubuntu 12.10 live without specified &quot;-vga none&quot; monitor detecs signal and show black screen or some console messages from boot.<br />Newer version of Kubuntu does not boot to live: KDE crashed somehow (before dialog asking boot type: Live or Install), shows GUI that asking to enter password </p><br /><p>nouveau and radeon modules are blacklisted</p><p><span class="postimg"><img src="https://dl.dropboxusercontent.com/u/52618061/kubuntu_13.11_pass.png" alt="kubuntu_13.11_pass.png" /></span><br /><span class="postimg"><img src="https://dl.dropboxusercontent.com/u/52618061/kubuntu_13.10_syslog_nou.png" alt="kubuntu_13.10_syslog_nou.png" /></span></p><p>Seabios log:</p><div class="codebox"><pre class="vscroll"><code>Start bios (version ?-20130921_165137-mnt-storage-buildroots-extra-x86_64-eric) No Xen hypervisor found. Running on KVM Ram Size=0xb0000000 (0x0000000050000000 high) Relocating init from 0x000e22d1 to 0xaffe0950 (size 62952) Found QEMU fw_cfg CPU Mhz=3200 === PCI bus &amp; bridge init === PCI: pci_bios_init_bus_rec bus = 0x0 PCI: pci_bios_init_bus_rec bdf = 0xe0 PCI: primary bus = 0x0 PCI: secondary bus = 0xff -&gt; 0x1 PCI: pci_bios_init_bus_rec bus = 0x1 PCI: subordinate bus = 0x0 -&gt; 0x1 === PCI device probing === Found 10 PCI devices (max PCI bus is 01) === PCI new allocation pass #1 === PCI: check devices PCI: secondary bus 1 size 00001000 type io PCI: secondary bus 1 size 02000000 type mem PCI: secondary bus 1 size 20000000 type prefmem === PCI new allocation pass #2 === PCI: map device bdf=00:01.0 bar 1, addr 0000d000, size 00000040 [io] PCI: map device bdf=00:1f.3 bar 4, addr 0000d040, size 00000040 [io] PCI: map device bdf=00:03.0 bar 4, addr 0000d080, size 00000020 [io] PCI: map device bdf=00:1f.2 bar 4, addr 0000d0a0, size 00000020 [io] PCI: map device bdf=00:01.0 bar 6, addr fe000000, size 00040000 [mem] PCI: map device bdf=00:01.0 bar 0, addr fe040000, size 00020000 [mem] PCI: map device bdf=00:04.0 bar 0, addr fe060000, size 00004000 [mem] PCI: map device bdf=00:02.0 bar 0, addr fe064000, size 00001000 [mem] PCI: map device bdf=00:03.0 bar 5, addr fe065000, size 00001000 [mem] PCI: map device bdf=00:1f.2 bar 5, addr fe066000, size 00001000 [mem] PCI: map device bdf=01:00.0 bar 5, addr 0000c000, size 00000080 [io] PCI: map device bdf=01:00.0 bar 0, addr fc000000, size 01000000 [mem] PCI: map device bdf=01:00.0 bar 6, addr fd000000, size 00080000 [mem] PCI: map device bdf=01:00.0 bar 1, addr d0000000, size 10000000 [prefmem] PCI: map device bdf=01:00.0 bar 3, addr e0000000, size 02000000 [prefmem] PCI: init bdf=00:00.0 id=8086:29c0 PCI: init bdf=00:01.0 id=8086:100e PCI: init bdf=00:02.0 id=8086:1e2d PCI: init bdf=00:03.0 id=8086:2922 PCI: init bdf=00:04.0 id=10de:0e1b PCI: init bdf=00:1c.0 id=8086:3420 PCI: init bdf=00:1f.0 id=8086:2918 Q35 LPC init: elcr=00 0c Using pmtimer, ioport 0xb008, freq 3579 kHz PCI: init bdf=00:1f.2 id=8086:2922 PCI: init bdf=00:1f.3 id=8086:2930 PCI: init bdf=01:00.0 id=10de:0fc1 PCI: Enabling 01:00.0 for primary VGA PCI: Setting VGA enable on bridge 00:1c.0 Found 1 cpu(s) max supported 1 cpu(s) MP table addr=0x000f17c0 MPC table addr=0x000f17d0 size=232 SMBIOS ptr=0x000f17a0 table=0x000f1670 size=301 ACPI DSDT=0xafffd8e0 ACPI tables: RSDP=0x000f1640 RSDT=0xafffd8a0 Scan for VGA option rom Running option rom at c000:0003</code></pre></div> <p class="postedit"><em>Last edited by myweb (2013-10-24 22:19:12)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341171">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341175" class="blockpost roweven"> <h2><span><span class="conr">#610</span> <a href="viewtopic.php?pid=1341175#p1341175">2013-10-24 22:10:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I`ve got some trouble getting the sound working for my setup (everything else works fine). When I use your script from the first post i hear some scratches when the VM starts but windows doesnt have any soundoutput.<br />The device manager has an &quot;AMD High Definition Audio device&quot; and an &quot;Unknown device&quot;. Do you know what I could be doing wrong?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341175">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341185" class="blockpost rowodd"> <h2><span><span class="conr">#611</span> <a href="viewtopic.php?pid=1341185#p1341185">2013-10-24 23:05:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><p>I`ve got some trouble getting the sound working for my setup (everything else works fine). When I use your script from the first post i hear some scratches when the VM starts but windows doesnt have any soundoutput.<br />The device manager has an &quot;AMD High Definition Audio device&quot; and an &quot;Unknown device&quot;. Do you know what I could be doing wrong?</p></div></blockquote></div><p>What OS are you using? 32bit or 64bit? there should be a &quot;high definition audio device&quot; somewhere on the device manager thats the emulated sound card</p><p>EDIT: i updated my script to use cpuset (<a href="https://code.google.com/p/cpuset/" rel="nofollow">https://code.google.com/p/cpuset/</a>)</p> <p class="postedit"><em>Last edited by nbhs (2013-10-24 23:11:20)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341185">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341275" class="blockpost roweven"> <h2><span><span class="conr">#612</span> <a href="viewtopic.php?pid=1341275#p1341275">2013-10-25 06:05:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have enabled vfio debug, please find Debug output via link: <a href="https://dl.dropboxusercontent.com/u/52618061/gt640_vfio_debug.log.zip" rel="nofollow">https://dl.dropboxusercontent.com/u/526 … ug.log.zip</a><br />and stubbed Nvidia card:</p><div class="codebox"><pre><code>dmesg | grep stub [ 0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on pcie_acs_override=downstream pci-stub.ids=10de:0fc1,10de:0e1b quiet [ 0.000000] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=51388cdb-7737-469b-80db-268b2f41e16c ro intel_iommu=on pcie_acs_override=downstream pci-stub.ids=10de:0fc1,10de:0e1b quiet [ 0.418370] pci-stub: add 10DE:0FC1 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.418383] pci-stub 0000:01:00.0: claimed by stub [ 0.418392] pci-stub: add 10DE:0E1B sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.418399] pci-stub 0000:01:00.1: claimed by stub</code></pre></div> <p class="postedit"><em>Last edited by myweb (2013-10-25 06:18:15)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341275">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341345" class="blockpost rowodd"> <h2><span><span class="conr">#613</span> <a href="viewtopic.php?pid=1341345#p1341345">2013-10-25 12:00:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><p>I`ve got some trouble getting the sound working for my setup (everything else works fine). When I use your script from the first post i hear some scratches when the VM starts but windows doesnt have any soundoutput.<br />The device manager has an &quot;AMD High Definition Audio device&quot; and an &quot;Unknown device&quot;. Do you know what I could be doing wrong?</p></div></blockquote></div><p>What OS are you using? 32bit or 64bit? there should be a &quot;high definition audio device&quot; somewhere on the device manager thats the emulated sound card</p><p>EDIT: i updated my script to use cpuset (<a href="https://code.google.com/p/cpuset/" rel="nofollow">https://code.google.com/p/cpuset/</a>)</p></div></blockquote></div><p>I use Windows and Arch 64Bit.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341345">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1341536" class="blockpost roweven"> <h2><span><span class="conr">#614</span> <a href="viewtopic.php?pid=1341536#p1341536">2013-10-25 21:23:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><p>I`ve got some trouble getting the sound working for my setup (everything else works fine). When I use your script from the first post i hear some scratches when the VM starts but windows doesnt have any soundoutput.<br />The device manager has an &quot;AMD High Definition Audio device&quot; and an &quot;Unknown device&quot;. Do you know what I could be doing wrong?</p></div></blockquote></div><p>What OS are you using? 32bit or 64bit? there should be a &quot;high definition audio device&quot; somewhere on the device manager thats the emulated sound card</p><p>EDIT: i updated my script to use cpuset (<a href="https://code.google.com/p/cpuset/" rel="nofollow">https://code.google.com/p/cpuset/</a>)</p></div></blockquote></div><p>I use Windows and Arch 64Bit.</p></div></blockquote></div><p>Well unless you&#039;re using an old version of windows XP the audio drivers should be automatically installed.</p><p><span class="postimg"><img src="http://i.imgur.com/UMzAKXW.jpg" alt="UMzAKXW.jpg" /></span></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1341536">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342143" class="blockpost rowodd"> <h2><span><span class="conr">#615</span> <a href="viewtopic.php?pid=1342143#p1342143">2013-10-27 13:56:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75819">alphahere</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75819">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Recently upgrade packages to the latest version. </p><p>I had to apply the two patches list below for vga-passthrough for i915 (built in graphics card). The i915 was is the host and not the guest. This was recommend in a previous post and works well.</p><p><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … ba24389bee</a><br /><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … f81dea8a7d</a></p><p>Anyway will there be a more permanent solution for the Intel GPU in the future?</p><p>This may not be the best place to post this question but I thought I give it a shot here anyway. </p><p>Thanks.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342143">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342184" class="blockpost roweven"> <h2><span><span class="conr">#616</span> <a href="viewtopic.php?pid=1342184#p1342184">2013-10-27 16:37:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75076">SpacePirate</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-16</span></dd> <dd><span>Posts: 55</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:hiduei@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>What OS are you using? 32bit or 64bit? there should be a &quot;high definition audio device&quot; somewhere on the device manager thats the emulated sound card</p><p>EDIT: i updated my script to use cpuset (<a href="https://code.google.com/p/cpuset/" rel="nofollow">https://code.google.com/p/cpuset/</a>)</p></div></blockquote></div><p>I use Windows and Arch 64Bit.</p></div></blockquote></div><p>Well unless you&#039;re using an old version of windows XP the audio drivers should be automatically installed.</p><p><a href="http://i.imgur.com/UMzAKXW.jpg" rel="nofollow">http://i.imgur.com/UMzAKXW.jpg</a></p></div></blockquote></div><p>I use Windows 7. For me it looks almost the same like your screenshot, but instead of the &quot;High Definition Audio Device&quot; I`ve got an &quot;Unkown Device&quot;. When I uninstalled it and searched for plug`n`play devices in the Devicemanager, it took a while, and then I`ve got an BSOD.</p><p>Is there another Device that I could use?<br />Could the Error be produces by the fact, that the iso i used for installation is fairly old and that I dont have every update for Win7 yet, since it only updates some things per reboot (-.-) ?</p><p>EDIT: i switched the device to &quot;intel-hda&quot; (ich6) and now it works perfectly</p> <p class="postedit"><em>Last edited by SpacePirate (2013-10-27 21:31:11)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342184">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342556" class="blockpost rowodd"> <h2><span><span class="conr">#617</span> <a href="viewtopic.php?pid=1342556#p1342556">2013-10-28 18:13:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Dear All,</p><p>Could you please help to disable i915 driver right after boot?<br />I do not need GUI on IGD, I just need that all PCIE videocards are available for passthrough. As far as I understand (Alex, thank you for explanation) i915 driver does not allow to execute PCIE passthrough videocard in guest VM.<br />Thank you.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342556">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342564" class="blockpost roweven"> <h2><span><span class="conr">#618</span> <a href="viewtopic.php?pid=1342564#p1342564">2013-10-28 18:43:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>AAA!!! I blacklisted i915 module, booted to multi-user.target and Nvidia GT640 is successfully displayed Seabios messages and booted to Kubutu Live!!!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342564">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342580" class="blockpost rowodd"> <h2><span><span class="conr">#619</span> <a href="viewtopic.php?pid=1342580#p1342580">2013-10-28 19:42:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>AAA!!! I blacklisted i915 module, booted to multi-user.target and Nvidia GT640 is successfully displayed Seabios messages and booted to Kubutu Live!!!</p></div></blockquote></div><p>Gratz, have you tried applying the patches from the previous alphahere post?</p><div class="quotebox"><cite>alphahere wrote:</cite><blockquote><div><p>Recently upgrade packages to the latest version. </p><p>I had to apply the two patches list below for vga-passthrough for i915 (built in graphics card). The i915 was is the host and not the guest. This was recommend in a previous post and works well.</p><p><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … ba24389bee</a><br /><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … f81dea8a7d</a></p><p>Anyway will there be a more permanent solution for the Intel GPU in the future?</p><p>This may not be the best place to post this question but I thought I give it a shot here anyway. </p><p>Thanks.</p></div></blockquote></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342580">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342594" class="blockpost roweven"> <h2><span><span class="conr">#620</span> <a href="viewtopic.php?pid=1342594#p1342594">2013-10-28 20:20:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>AAA!!! I blacklisted i915 module, booted to multi-user.target and Nvidia GT640 is successfully displayed Seabios messages and booted to Kubutu Live!!!</p></div></blockquote></div><p>Gratz, have you tried applying the patches from the previous alphahere post?</p><div class="quotebox"><cite>alphahere wrote:</cite><blockquote><div><p>Recently upgrade packages to the latest version. </p><p>I had to apply the two patches list below for vga-passthrough for i915 (built in graphics card). The i915 was is the host and not the guest. This was recommend in a previous post and works well.</p><p><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … ba24389bee</a><br /><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … f81dea8a7d</a></p><p>Anyway will there be a more permanent solution for the Intel GPU in the future?</p><p>This may not be the best place to post this question but I thought I give it a shot here anyway. </p><p>Thanks.</p></div></blockquote></div></div></blockquote></div><p>I did not apply the patches - I can not open the links...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342594">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342607" class="blockpost rowodd"> <h2><span><span class="conr">#621</span> <a href="viewtopic.php?pid=1342607#p1342607">2013-10-28 21:29:12</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>AAA!!! I blacklisted i915 module, booted to multi-user.target and Nvidia GT640 is successfully displayed Seabios messages and booted to Kubutu Live!!!</p></div></blockquote></div><p>Gratz, have you tried applying the patches from the previous alphahere post?</p><div class="quotebox"><cite>alphahere wrote:</cite><blockquote><div><p>Recently upgrade packages to the latest version. </p><p>I had to apply the two patches list below for vga-passthrough for i915 (built in graphics card). The i915 was is the host and not the guest. This was recommend in a previous post and works well.</p><p><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … ba24389bee</a><br /><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … f81dea8a7d</a></p><p>Anyway will there be a more permanent solution for the Intel GPU in the future?</p><p>This may not be the best place to post this question but I thought I give it a shot here anyway. </p><p>Thanks.</p></div></blockquote></div></div></blockquote></div><p>I did not apply the patches - I can not open the links...</p></div></blockquote></div><p><a href="http://webcache.googleusercontent.com/search?safe=off&amp;sclient=psy-ab&amp;q=cache%3Ahttp%3A%2F%2Fo.cs.uvic.ca%3A20810%2Fperl%2Fcid.pl%3Fcid%3D6e1b4fdad5157bb9e88777d525704aba24389bee&amp;oq=cache%3Ahttp%3A%2F%2Fo.cs.uvic.ca%3A20810%2Fperl%2Fcid.pl%3Fcid%3D6e1b4fdad5157bb9e88777d525704aba24389bee&amp;gs_l=serp.3..0l4.21044.22241.0.22713.7.7.0.0.0.0.309.1363.2-4j1.5.0....2...1c.1.29.psy-ab..2.5.1351.TY6h3NSRc7k&amp;pbx=1" rel="nofollow"> First link</a></p><p><a href="http://webcache.googleusercontent.com/search?safe=off&amp;output=search&amp;sclient=psy-ab&amp;q=cache%3Ahttp%3A%2F%2Fo.cs.uvic.ca%3A20810%2Fperl%2Fcid.pl%3Fcid%3D81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d&amp;oq=cache%3Ahttp%3A%2F%2Fo.cs.uvic.ca%3A20810%2Fperl%2Fcid.pl%3Fcid%3D81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d&amp;gs_l=hp.3..0l4.974.2648.0.3144.7.7.0.0.0.0.383.1475.2-3j2.5.0....2...1c.1.29.psy-ab..2.5.1454.RWFXjTfMwq0&amp;pbx=1" rel="nofollow"> Second link</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342607">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342613" class="blockpost roweven"> <h2><span><span class="conr">#622</span> <a href="viewtopic.php?pid=1342613#p1342613">2013-10-28 21:44:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>AAA!!! I blacklisted i915 module, booted to multi-user.target and Nvidia GT640 is successfully displayed Seabios messages and booted to Kubutu Live!!!</p></div></blockquote></div><p>Gratz, have you tried applying the patches from the previous alphahere post?</p><div class="quotebox"><cite>alphahere wrote:</cite><blockquote><div><p>Recently upgrade packages to the latest version. </p><p>I had to apply the two patches list below for vga-passthrough for i915 (built in graphics card). The i915 was is the host and not the guest. This was recommend in a previous post and works well.</p><p><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … ba24389bee</a><br /><a href="http://o.cs.uvic.ca:20810/perl/cid.pl?cid=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://o.cs.uvic.ca:20810/perl/cid.pl?c … f81dea8a7d</a></p><p>Anyway will there be a more permanent solution for the Intel GPU in the future?</p><p>This may not be the best place to post this question but I thought I give it a shot here anyway. </p><p>Thanks.</p></div></blockquote></div></div></blockquote></div><p>I did not apply the patches - I can not open the links...</p></div></blockquote></div><p>Glad you got it working, I suppose blacklisting i915 is another way to work around it&#039;s broken-ness with VGA arbiter, but vgacon doesn&#039;t play nicely with arbitration either, it just doesn&#039;t opt-out.&#160; Here are (hopefully) working links to the i915 patches:</p><p><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … f81dea8a7d</a><br /><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … ba24389bee</a></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342613">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342619" class="blockpost rowodd"> <h2><span><span class="conr">#623</span> <a href="viewtopic.php?pid=1342619#p1342619">2013-10-28 21:53:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Gratz, have you tried applying the patches from the previous alphahere post?</p></div></blockquote></div><p>I did not apply the patches - I can not open the links...</p></div></blockquote></div><p>Glad you got it working, I suppose blacklisting i915 is another way to work around it&#039;s broken-ness with VGA arbiter, but vgacon doesn&#039;t play nicely with arbitration either, it just doesn&#039;t opt-out.&#160; Here are (hopefully) working links to the i915 patches:</p><p><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=81b5c7bc8de3e6f63419139c2fc91bf81dea8a7d" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … f81dea8a7d</a><br /><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/patch/?id=6e1b4fdad5157bb9e88777d525704aba24389bee" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … ba24389bee</a></p></div></blockquote></div><p>And how did the 7750 work?&#160; Did you happen to be using a pre-rc5 kernel that already included these?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342619">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342763" class="blockpost roweven"> <h2><span><span class="conr">#624</span> <a href="viewtopic.php?pid=1342763#p1342763">2013-10-29 04:58:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76015">coolper22@gmail.com</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Shanghai,China</span></dd> <dd><span>Registered: 2013-10-18</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76015">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>first, thanks for the greatest post.</p><p>I got i915 (built in graphics card) and GeForce GTX 650 working on windows 7 64bit, the hardware list:<br />Mainboard: GIGABYTE Z87M-D3H<br />CPU: i5-4430<br />Graphic Card: i915 (built in graphics card)<br />Graphic Card: GeForce GTX 650<br />I use kernel 3.12 rc6 with two patches about i915 that previous post, and qemu from git master with NoSnoop patch.</p><p>But on windows 7 32bit, in device manager,the &quot;Intel(R) 5520/5500/X58 I/O 集线器 PCI Express 根端口 0 - 3420&quot; driver show error code 12,This device cannot find enough free resources that it can use.<br />I try boot windows 7 32bit using q35(or only -readconfig ../docs/q35-chipset.cfg) without graphics card passthrough,it has the same problem.<br />I also try seabios rel-1.7.3.2,rel-1.7.3.1,rel-1.7.3,rel-1.7.2.2 and qemu 1.6.1,but no success.</p><p>Can somebody give me some suggestions?<br />I build qemu,seabios on Ubuntu 12.04 64bit.</p><p>Anybody passthrough graphics card to windows 7 32 bit successfully?</p><p>Anybody passthrough graphics card to windows xp 32 bit successfully?</p> <p class="postedit"><em>Last edited by coolper22@gmail.com (2013-10-29 08:15:34)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342763">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1342770" class="blockpost rowodd"> <h2><span><span class="conr">#625</span> <a href="viewtopic.php?pid=1342770#p1342770">2013-10-29 05:48:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72338">empie</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: The Netherlands</span></dd> <dd><span>Registered: 2013-06-15</span></dd> <dd><span>Posts: 9</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Will try blacklisting the i915 again. Up till now only Code 43 with Nvidia with i915 not on blacklist. <br />Got my 6870 working with 13.9 driver. Had to do the WorkaroundInstall=true trick to get it working even when it&#039;s missing a file. Played Skyrim and Tombraider for a few minutes and looked good. Used Intel audio for sound.<br />Using Kernel 3.12.0-rc4 on my ASrock Z77 WS and i7 3770.</p><p>@myweb: How do you do the vfio binding? Per device, or using the script from nbhs?</p><p>Is the pcie_acs_override useful? Haven&#039;t used it up till now.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1342770">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=24">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=23">23</a> <a href="viewtopic.php?id=162768&amp;p=24">24</a> <strong>25</strong> <a href="viewtopic.php?id=162768&amp;p=26">26</a> <a href="viewtopic.php?id=162768&amp;p=27">27</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=26">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
