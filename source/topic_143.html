<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 143) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=143" title="Page 143" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=142" title="Page 142" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=144" title="Page 144" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=142">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=141">141</a> <a href="viewtopic.php?id=162768&amp;p=142">142</a> <strong>143</strong> <a href="viewtopic.php?id=162768&amp;p=144">144</a> <a href="viewtopic.php?id=162768&amp;p=145">145</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=144">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1483490" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#3551</span> <a href="viewtopic.php?pid=1483490#p1483490">2014-12-11 10:10:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>As far as i understand it - the CSM actually provides VGA, aw told us a while ago about the fact that we explicitly do not want it.</p></div></blockquote></div><p>yep, i already thought about it being vga fallback as well. it won&#039;t do if it really is...<br />still, i think that win 7 setup running is a good sign - it&#039;s just that some kind of trick is needed to make it going. the hard part is uncovering this trick (and for now, i don&#039;t even have a clue on where to look for to get more info that may prove useful - i hope installer have some kind of logging) )</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483490">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483500" class="blockpost roweven"> <h2><span><span class="conr">#3552</span> <a href="viewtopic.php?pid=1483500#p1483500">2014-12-11 11:09:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>sinny wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>As far as i understand it - the CSM actually provides VGA, aw told us a while ago about the fact that we explicitly do not want it.</p></div></blockquote></div><p>yep, i already thought about it being vga fallback as well. it won&#039;t do if it really is...<br />still, i think that win 7 setup running is a good sign - it&#039;s just that some kind of trick is needed to make it going. the hard part is uncovering this trick (and for now, i don&#039;t even have a clue on where to look for to get more info that may prove useful - i hope installer have some kind of logging) )</p></div></blockquote></div><p>I have install running right now.</p><div class="codebox"><pre><code>qemu-system-x86_64 \ -boot menu=on \ -enable-kvm \ -monitor stdio \ -M q35 \ -m 1024 \ -cpu host \ -net none \ -rtc base=localtime \ -smp 1,sockets=1,cores=1,threads=1 \ -drive if=pflash,format=raw,readonly,file=/usr/share/edk2.git/ovmf-x64/OVMF_CODE-pure-efi.fd \ -drive if=pflash,format=raw,file=/mnt/hdd/qemu/OVMF_VARS.fd \ -drive file=&#039;/mnt/hdd/qemu/qemu-uefi-win7.img&#039;,id=disk,format=raw,aio=native,cache=none,if=none \ -drive file=&#039;/mnt/hdd/qemu/virtio.iso&#039;,id=cdrom,format=raw,readonly=on,if=none \ -drive file=&#039;/mnt/hdd/qemu/windows7.iso&#039;,id=cdrom2,format=raw,readonly=on,if=none \ -drive file=&#039;/dev/null&#039;,id=dummy \ -device virtio-scsi-pci \ -device virtio-blk-pci,drive=disk \ -device ide-cd,drive=cdrom \ -device scsi-cd,drive=cdrom2 \ -vga std</code></pre></div><p>Well, i could&#039;ve forced windowns instadamnation to use GPT, but... i just pressed &quot;next&quot; on the disk select menu, and it actually installs.</p><p>It MIGHT not detect the disks from the first time, saying something like &quot;driver was installed, but no new devices appeared&quot; - you just have to tell it &quot;try again, silly&quot;.</p><p>Wonderful fact: OVMF doesn&#039;t recognize IDE-CD and shows virtio-blk-pci as EFI Misc. device(seems like we&#039;ll need to use SCSI anyway, to force OVMF to at least try booting from it), BUT windows installation system recognizes IDE-CD and loads drivers from it just fine.</p><p>I doubt the use of q35, maybe with -M pc it will work too.</p><p>Isn&#039;t windows 7 is using legacy MBR-based bootloader? We MAY have to force the use of GPT to make it choose the right, EFI-compatible bootloader.</p><p>EDIT: Whoa, hasty update! It finished copying installation files on the disk, and hung. But CTRL-C thrown at qemu, and starting it over again actually made it booting the installer. It means we&#039;re booted from virtio-blk-pci. But it hung again.</p><p>Booting from the device(virtio-blk-pci,that is), after &quot;starting windows&quot; animation, results in a black screen, some disk activity(on the host!) and zero cpu consumption. I&#039;ve pushed the reset, windows said &quot;ow, that did hurt. safe mode?&quot; - booting in safe mode results in a message that &quot;windows installation won&#039;t continue in safe-mode, restart the computer normally&quot;.<br />That means:<br />1.<strong>IT BOOTS</strong>.Kind of.<br />2.Maybe resetting everything wasn&#039;t a good idea.<br />3.Try again!</p><p>Oh, i get it. Guest reboots just don&#039;t work.</p><p><span class="postimg"><img src="https://i.imgur.com/a5MviRd.png" alt="It uses GPT" /></span><br />It actually uses GPT. So we don&#039;t have to force it. The install is possible, you just need to do it right. Surprisingly enough, even a zero-ed out OVMF-based VM fails to reset. Maybe that&#039;s OVMF&#039;s problem.</p> <p class="postedit"><em>Last edited by Duelist (2014-12-11 11:29:55)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483500">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483533" class="blockpost rowodd"> <h2><span><span class="conr">#3553</span> <a href="viewtopic.php?pid=1483533#p1483533">2014-12-11 14:03:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>sinny wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>As far as i understand it - the CSM actually provides VGA, aw told us a while ago about the fact that we explicitly do not want it.</p></div></blockquote></div><p>yep, i already thought about it being vga fallback as well. it won&#039;t do if it really is...<br />still, i think that win 7 setup running is a good sign - it&#039;s just that some kind of trick is needed to make it going. the hard part is uncovering this trick (and for now, i don&#039;t even have a clue on where to look for to get more info that may prove useful - i hope installer have some kind of logging) )</p></div></blockquote></div><p>I have install running right now.</p><div class="codebox"><pre><code>qemu-system-x86_64 \ -boot menu=on \ -enable-kvm \ -monitor stdio \ -M q35 \ -m 1024 \ -cpu host \ -net none \ -rtc base=localtime \ -smp 1,sockets=1,cores=1,threads=1 \ -drive if=pflash,format=raw,readonly,file=/usr/share/edk2.git/ovmf-x64/OVMF_CODE-pure-efi.fd \ -drive if=pflash,format=raw,file=/mnt/hdd/qemu/OVMF_VARS.fd \ -drive file=&#039;/mnt/hdd/qemu/qemu-uefi-win7.img&#039;,id=disk,format=raw,aio=native,cache=none,if=none \ -drive file=&#039;/mnt/hdd/qemu/virtio.iso&#039;,id=cdrom,format=raw,readonly=on,if=none \ -drive file=&#039;/mnt/hdd/qemu/windows7.iso&#039;,id=cdrom2,format=raw,readonly=on,if=none \ -drive file=&#039;/dev/null&#039;,id=dummy \ -device virtio-scsi-pci \ -device virtio-blk-pci,drive=disk \ -device ide-cd,drive=cdrom \ -device scsi-cd,drive=cdrom2 \ -vga std</code></pre></div><p>Well, i could&#039;ve forced windowns instadamnation to use GPT, but... i just pressed &quot;next&quot; on the disk select menu, and it actually installs.</p><p>It MIGHT not detect the disks from the first time, saying something like &quot;driver was installed, but no new devices appeared&quot; - you just have to tell it &quot;try again, silly&quot;.</p><p>Wonderful fact: OVMF doesn&#039;t recognize IDE-CD and shows virtio-blk-pci as EFI Misc. device(seems like we&#039;ll need to use SCSI anyway, to force OVMF to at least try booting from it), BUT windows installation system recognizes IDE-CD and loads drivers from it just fine.</p><p>I doubt the use of q35, maybe with -M pc it will work too.</p><p>Isn&#039;t windows 7 is using legacy MBR-based bootloader? We MAY have to force the use of GPT to make it choose the right, EFI-compatible bootloader.</p><p>EDIT: Whoa, hasty update! It finished copying installation files on the disk, and hung. But CTRL-C thrown at qemu, and starting it over again actually made it booting the installer. It means we&#039;re booted from virtio-blk-pci. But it hung again.</p><p>Booting from the device(virtio-blk-pci,that is), after &quot;starting windows&quot; animation, results in a black screen, some disk activity(on the host!) and zero cpu consumption. I&#039;ve pushed the reset, windows said &quot;ow, that did hurt. safe mode?&quot; - booting in safe mode results in a message that &quot;windows installation won&#039;t continue in safe-mode, restart the computer normally&quot;.<br />That means:<br />1.<strong>IT BOOTS</strong>.Kind of.<br />2.Maybe resetting everything wasn&#039;t a good idea.<br />3.Try again!</p><p>Oh, i get it. Guest reboots just don&#039;t work.</p><p><a href="https://i.imgur.com/a5MviRd.png" rel="nofollow">https://i.imgur.com/a5MviRd.png</a><br />It actually uses GPT. So we don&#039;t have to force it. The install is possible, you just need to do it right. Surprisingly enough, even a zero-ed out OVMF-based VM fails to reset. Maybe that&#039;s OVMF&#039;s problem.</p></div></blockquote></div><p>Have you tried integrating your amd/nvidia drivers on the install disk to get past the black screen?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483533">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483550" class="blockpost roweven"> <h2><span><span class="conr">#3554</span> <a href="viewtopic.php?pid=1483550#p1483550">2014-12-11 15:41:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>OK i got windows 7 working using OVMF, so what i did was integrate redhat virtio drivers and qxl drivers into the windows installation disk using <a href="http://www.wincert.net/forum/files/file/5-win-toolkit/" rel="nofollow">win-toolkit</a> then i created a 4GB GPT fat32 formatted disk and copied the installation files there, then i launched QEMU with -vga qxl, a raw disk image, the windows installation image, also using -device virtio-scsi-pci ...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483550">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483567" class="blockpost rowodd"> <h2><span><span class="conr">#3555</span> <a href="viewtopic.php?pid=1483567#p1483567">2014-12-11 16:43:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>OK i got windows 7 working using OVMF, so what i did was integrate redhat virtio drivers and qxl drivers into the windows installation disk using <a href="http://www.wincert.net/forum/files/file/5-win-toolkit/" rel="nofollow">win-toolkit</a> then i created a 4GB GPT fat32 formatted disk and copied the installation files there, then i launched QEMU with -vga qxl, a raw disk image, the windows installation image, also using -device virtio-scsi-pci ...</p></div></blockquote></div><p>So you&#039;re running with -vga qxl and it still needs drivers? Strange. I was running with -vga std, and it needed drivers too! That&#039;s weird. But it&#039;s nice to see that i was right, and windows7+pure EFI+GPT is really possible. Guess i&#039;ll have to include -vga std drivers myself. Actually, maybe someone who made my(YARR) iso threw these drivers out.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483567">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483569" class="blockpost roweven"> <h2><span><span class="conr">#3556</span> <a href="viewtopic.php?pid=1483569#p1483569">2014-12-11 16:49:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>OK i got windows 7 working using OVMF, so what i did was integrate redhat virtio drivers and qxl drivers into the windows installation disk using <a href="http://www.wincert.net/forum/files/file/5-win-toolkit/" rel="nofollow">win-toolkit</a> then i created a 4GB GPT fat32 formatted disk and copied the installation files there, then i launched QEMU with -vga qxl, a raw disk image, the windows installation image, also using -device virtio-scsi-pci ...</p></div></blockquote></div><p>So you&#039;re running with -vga qxl and it still needs drivers? Strange. I was running with -vga std, and it needed drivers too! That&#039;s weird. But it&#039;s nice to see that i was right, and windows7+pure EFI+GPT is really possible. Guess i&#039;ll have to include -vga std drivers myself. Actually, maybe someone who made my(YARR) iso threw these drivers out.</p></div></blockquote></div><p>There are no -vga std drivers AFAIK, windows will use its standar vga driver which i believe is causing the problems, plus the only way you can install windows using EFI is with a GPT partitioned disk</p> <p class="postedit"><em>Last edited by nbhs (2014-12-11 16:49:51)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483569">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483571" class="blockpost rowodd"> <h2><span><span class="conr">#3557</span> <a href="viewtopic.php?pid=1483571#p1483571">2014-12-11 16:53:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>OK i got windows 7 working using OVMF, so what i did was integrate redhat virtio drivers and qxl drivers into the windows installation disk using <a href="http://www.wincert.net/forum/files/file/5-win-toolkit/" rel="nofollow">win-toolkit</a> then i created a 4GB GPT fat32 formatted disk and copied the installation files there, then i launched QEMU with -vga qxl, a raw disk image, the windows installation image, also using -device virtio-scsi-pci ...</p></div></blockquote></div><p>So you&#039;re running with -vga qxl and it still needs drivers? Strange. I was running with -vga std, and it needed drivers too! That&#039;s weird. But it&#039;s nice to see that i was right, and windows7+pure EFI+GPT is really possible. Guess i&#039;ll have to include -vga std drivers myself. Actually, maybe someone who made my(YARR) iso threw these drivers out.</p></div></blockquote></div><p>There are no -vga std drivers AFAIK, windows will use its standar vga driver which i believe is causing the problems, plus the only way you can install windows using EFI is with a GPT partitioned disk</p></div></blockquote></div><p>Isn&#039;t CSM helping when using MBR+UEFI?</p><p>Well, windows&#039; default VGA driver works in safe mode and during installation, that&#039;s a little bit borked.<br />Seems like it actually loads something different and it&#039;s broken. If i&#039;ll trick it to use the fall-back-default one, which is rendering in safemode and during boot-up animation..</p> <p class="postedit"><em>Last edited by Duelist (2014-12-11 16:54:58)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483571">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483575" class="blockpost roweven"> <h2><span><span class="conr">#3558</span> <a href="viewtopic.php?pid=1483575#p1483575">2014-12-11 17:01:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>So you&#039;re running with -vga qxl and it still needs drivers? Strange. I was running with -vga std, and it needed drivers too! That&#039;s weird. But it&#039;s nice to see that i was right, and windows7+pure EFI+GPT is really possible. Guess i&#039;ll have to include -vga std drivers myself. Actually, maybe someone who made my(YARR) iso threw these drivers out.</p></div></blockquote></div><p>There are no -vga std drivers AFAIK, windows will use its standar vga driver which i believe is causing the problems, plus the only way you can install windows using EFI is with a GPT partitioned disk</p></div></blockquote></div><p>Isn&#039;t CSM helping when using MBR+UEFI?</p><p>Well, windows&#039; default VGA driver works in safe mode and during installation, that&#039;s a little bit borked.<br />Seems like it actually loads something different and it&#039;s broken. If i&#039;ll trick it to use the fall-back-default one, which is rendering in safemode and during boot-up animation..</p></div></blockquote></div><p>Actually maybe it doesnt load anything at all</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483575">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483583" class="blockpost rowodd"> <h2><span><span class="conr">#3559</span> <a href="viewtopic.php?pid=1483583#p1483583">2014-12-11 17:29:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>There are no -vga std drivers AFAIK, windows will use its standar vga driver which i believe is causing the problems, plus the only way you can install windows using EFI is with a GPT partitioned disk</p></div></blockquote></div><p>Isn&#039;t CSM helping when using MBR+UEFI?</p><p>Well, windows&#039; default VGA driver works in safe mode and during installation, that&#039;s a little bit borked.<br />Seems like it actually loads something different and it&#039;s broken. If i&#039;ll trick it to use the fall-back-default one, which is rendering in safemode and during boot-up animation..</p></div></blockquote></div><p>Actually maybe it doesnt load anything at all</p></div></blockquote></div><p>That is very strange, because safe mode works. I&#039;ll try to grab a bootlog from a safe-mode boot to see which driver actually gets loaded in it.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483583">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483587" class="blockpost roweven"> <h2><span><span class="conr">#3560</span> <a href="viewtopic.php?pid=1483587#p1483587">2014-12-11 17:31:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Isn&#039;t CSM helping when using MBR+UEFI?</p><p>Well, windows&#039; default VGA driver works in safe mode and during installation, that&#039;s a little bit borked.<br />Seems like it actually loads something different and it&#039;s broken. If i&#039;ll trick it to use the fall-back-default one, which is rendering in safemode and during boot-up animation..</p></div></blockquote></div><p>Actually maybe it doesnt load anything at all</p></div></blockquote></div><p>That is very strange, because safe mode works. I&#039;ll try to grab a bootlog from a safe-mode boot to see which driver actually gets loaded in it.</p></div></blockquote></div><p>Yup like i said, its because it not loading the vga driver, go into safe mode and disable the the the display adapter</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483587">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483594" class="blockpost rowodd"> <h2><span><span class="conr">#3561</span> <a href="viewtopic.php?pid=1483594#p1483594">2014-12-11 17:55:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82238">sinny</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-24</span></dd> <dd><span>Posts: 75</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=82238">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>ok, nice to see people got it working - now i only need to somehow catch up.</p><p>for now i&#039;m getting weird issues - i definitely can not uefi-boot from any of 3 isos i got (all 3 are not recognized as FS&#039;s, onnly as BLK devices)<br />and installing from self-assembled image failed requiring drivers. still need more testing using all the data you assembled</p><p>i also tried using virt-manager plenty of time, but it seemed less manageable (due to lack of fine-grained control)</p><p>anyways, thanks for all the work - it&#039;s really valuable, considering the mess win8 is</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483594">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483598" class="blockpost roweven"> <h2><span><span class="conr">#3562</span> <a href="viewtopic.php?pid=1483598#p1483598">2014-12-11 18:05:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Actually maybe it doesnt load anything at all</p></div></blockquote></div><p>That is very strange, because safe mode works. I&#039;ll try to grab a bootlog from a safe-mode boot to see which driver actually gets loaded in it.</p></div></blockquote></div><p>Yup like i said, its because it not loading the vga driver, go into safe mode and disable the the the display adapter</p></div></blockquote></div><p>The problem is - i&#039;ll have to reinvent the bicycle: safe mode isn&#039;t functional. So it&#039;s either you&#039;re pushing all the needed drivers in the ISO at the very beginning, or you&#039;re booting a livecd system to fix the not-yet-installed system. Thankfully, that livecd may be MSDART, which is included in my installation ISO, so i can even fire up the explorer to have more-or-less GUI representation of what i&#039;ll need to do to revive the system. Or i could just shuffle through all available display devices and find one that works nice.</p><p>BTW, are you using -M pc or -M q35(like i am)?</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483598">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483601" class="blockpost rowodd"> <h2><span><span class="conr">#3563</span> <a href="viewtopic.php?pid=1483601#p1483601">2014-12-11 18:14:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>That is very strange, because safe mode works. I&#039;ll try to grab a bootlog from a safe-mode boot to see which driver actually gets loaded in it.</p></div></blockquote></div><p>Yup like i said, its because it not loading the vga driver, go into safe mode and disable the the the display adapter</p></div></blockquote></div><p>The problem is - i&#039;ll have to reinvent the bicycle: safe mode isn&#039;t functional. So it&#039;s either you&#039;re pushing all the needed drivers in the ISO at the very beginning, or you&#039;re booting a livecd system to fix the not-yet-installed system. Thankfully, that livecd may be MSDART, which is included in my installation ISO, so i can even fire up the explorer to have more-or-less GUI representation of what i&#039;ll need to do to revive the system. Or i could just shuffle through all available display devices and find one that works nice.</p><p>BTW, are you using -M pc or -M q35(like i am)?</p></div></blockquote></div><p>Both seem to work just fine, i suggest you try the method i mentioned before, it will save you a lot of time, perhaps its possible to load the qxl driver during the installation, idk and i havent tried, i also mentioned booting with -vga std ( this is of course post install ) and disabling it in safe mode also seems to allow windows to boot, as of trying another vga adapter, i dont think it will work since windows always try load its standard vga driver, another thing i tested is passing though my GPU ( R9 280x ) and it will work but the drivers have to be installed first ( booting with -vga qxl then installing the catalyst driver )</p> <p class="postedit"><em>Last edited by nbhs (2014-12-11 18:19:54)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483601">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483602" class="blockpost roweven"> <h2><span><span class="conr">#3564</span> <a href="viewtopic.php?pid=1483602#p1483602">2014-12-11 18:22:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Yup like i said, its because it not loading the vga driver, go into safe mode and disable the the the display adapter</p></div></blockquote></div><p>The problem is - i&#039;ll have to reinvent the bicycle: safe mode isn&#039;t functional. So it&#039;s either you&#039;re pushing all the needed drivers in the ISO at the very beginning, or you&#039;re booting a livecd system to fix the not-yet-installed system. Thankfully, that livecd may be MSDART, which is included in my installation ISO, so i can even fire up the explorer to have more-or-less GUI representation of what i&#039;ll need to do to revive the system. Or i could just shuffle through all available display devices and find one that works nice.</p><p>BTW, are you using -M pc or -M q35(like i am)?</p></div></blockquote></div><p>Both seem to work just fine, i suggest you try the method i mentioned before, it will save you a lot of time, perhaps its possible to load the qxl driver during the installation, idk and i havent tried, i also mentioned booting with -vga std ( this is of course post install ) and disabling it in safe mode also seems to allow windows to boot, as of trying another vga adapter, i dont think it will work since windows always loads its standard vga driver, another thing i tested is passing though my GPU ( R9 280x ) and it will work but the drivers have to be installed first ( booting with -vga qxl then installing the catalyst driver )</p></div></blockquote></div><p>But i&#039;ve installed the whole system using only -vga std and no other stuff! Tried changing it on that undead system to something else(-vga qxl for example) - and no, the install won&#039;t finish because there is no graphics.</p><p>BTW, great to know that even VFIO works with that tricky setup.</p><p>Also a thing i&#039;ve remembered: do you have guest reboots working? Because my test-system hangs in the OVMF after a reset, showing an underscore somewhere in the middle and nothing else. Only ctrl-c to qemu saves the day.</p> <p class="postedit"><em>Last edited by Duelist (2014-12-11 20:16:33)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483602">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483603" class="blockpost rowodd"> <h2><span><span class="conr">#3565</span> <a href="viewtopic.php?pid=1483603#p1483603">2014-12-11 18:24:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Also a think i&#039;ve remembered: do you have guest reboots working? Because my test-system hangs in the OVMF after a reset, showing an underscore somewhere in the middle and nothing else. Only ctrl-c to qemu saves the day.</p></div></blockquote></div><p>Looks like an issue with OVMF + q35</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483603">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483604" class="blockpost roweven"> <h2><span><span class="conr">#3566</span> <a href="viewtopic.php?pid=1483604#p1483604">2014-12-11 18:27:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>But i&#039;ve installed the whole system using only -vga std and no other stuff! Tried changing it on that undead system to something else(-vga qxl for example) - and no, the install won&#039;t finish because there is no graphics.</p></div></blockquote></div><p>Then i believe the only solution is integrating either amd/nvidia drivers or the qxl drivers, or perhaps replacing windows 7 vga driver with windows 8&#039;s one (if its possible at all)</p> <p class="postedit"><em>Last edited by nbhs (2014-12-11 18:27:59)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483604">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1483934" class="blockpost rowodd"> <h2><span><span class="conr">#3567</span> <a href="viewtopic.php?pid=1483934#p1483934">2014-12-12 21:04:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, I got my new hardware - including a new 1 TB SSD from Samsung. So I have one SSD for archlinux (240 GB) and the new Samsung SSD for virtualized Windows 8.1. </p><p>NOW: How do I add the SSD as a <strong>direct block device</strong> as AW suggested? I have done it like this:</p><div class="quotebox"><blockquote><div><p>&lt;devices&gt;<br />&#160; &#160; &lt;emulator&gt;/usr/sbin/qemu-system-x86_64&lt;/emulator&gt;<br /><strong>&#160; &#160; &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt;<br />&#160; &#160; &#160; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039; cache=&#039;none&#039; io=&#039;native&#039;/&gt;</strong><br />&#160; &#160; &#160; &lt;source dev=&#039;/dev/sdb&#039;/&gt;<br />&#160; &#160; &#160; &lt;target dev=&#039;vda&#039; bus=&#039;virtio&#039;/&gt;<br />&#160; &#160; &#160; &lt;boot order=&#039;1&#039;/&gt;<br />&#160; &#160; &#160; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x08&#039; function=&#039;0x0&#039;/&gt;<br />&#160; &#160; &lt;/disk&gt;</p></div></blockquote></div><p>It did install Windows like that. But I am not sure it&#039;s correct. I really want as much performance as possible in a VM. </p><br /><p>Thank you guys for your help!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1483934">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484068" class="blockpost roweven"> <h2><span><span class="conr">#3568</span> <a href="viewtopic.php?pid=1484068#p1484068">2014-12-13 11:43:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>4kGamer wrote:</cite><blockquote><div><p>Hi, I got my new hardware - including a new 1 TB SSD from Samsung. So I have one SSD for archlinux (240 GB) and the new Samsung SSD for virtualized Windows 8.1.</p></div></blockquote></div><br /><p>Offtopic question:<br />1TB SSD?! Entirely for windows?! Why would you need linux in that case?<br />I&#039;m fine with my 60+10(SSD) setup, as it hosts some games on steam and i&#039;m using linux as a main system, not the secondary. I&#039;d understand if you would use all the info from something like redhat&#039;s VM security guide or fiddled with iptables so hard, that even skype wouldn&#039;t work, just for security reasons, but setting up vfio entirely for gaming..</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484068">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484087" class="blockpost rowodd"> <h2><span><span class="conr">#3569</span> <a href="viewtopic.php?pid=1484087#p1484087">2014-12-13 13:13:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=86302">4kGamer</a></strong></dt> <dd class="usertitle"><strong>Banned</strong></dd> <dd><span>Registered: 2014-10-29</span></dd> <dd><span>Posts: 82</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:oktayaslantas@gmx.de">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I need linux as a backend for Live TV. I know, there are easier and more efficient ways like building a second minimal server for it, but I like the idea of having one system that can do it all.<br />And regarding the 1TB SSD: there&#039;s been a great offer last week. And having all my games on one SSD isn&#039;t too bad right? <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>btw: I did some testing and I am sure the disk performance isn&#039;t right. Please help guys.</p> <p class="postedit"><em>Last edited by 4kGamer (2014-12-13 13:36:08)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484087">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484103" class="blockpost roweven"> <h2><span><span class="conr">#3570</span> <a href="viewtopic.php?pid=1484103#p1484103">2014-12-13 14:28:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I don&#039;t have a spare ssd large enough for my VM, instead I use a small one in front of a spinning disk with bcache.&#160; I&#039;m currently using multi-queue virtio-scsi for the guest and it seems pretty quick.</p><div class="codebox"><pre><code> &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039; cache=&#039;none&#039; io=&#039;native&#039;/&gt; &lt;source file=&#039;/mnt/store/vm/Steam.raw&#039;/&gt; &lt;backingStore/&gt; &lt;target dev=&#039;sda&#039; bus=&#039;scsi&#039;/&gt; &lt;alias name=&#039;scsi0-0-0-0&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt; &lt;controller type=&#039;scsi&#039; index=&#039;0&#039; model=&#039;virtio-scsi&#039;&gt; &lt;driver queues=&#039;4&#039;/&gt; &lt;alias name=&#039;scsi0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x0&#039;/&gt; &lt;/controller&gt;</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484103">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484200" class="blockpost rowodd"> <h2><span><span class="conr">#3571</span> <a href="viewtopic.php?pid=1484200#p1484200">2014-12-13 20:43:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>multi-queue virtio-scsi</p></div></blockquote></div><p>Can you hint on how to do that via command-line?<br />BTW, it seems somewhat strange that virtio-blk is slower than virtio-scsi with scsi disk attached.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484200">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484202" class="blockpost roweven"> <h2><span><span class="conr">#3572</span> <a href="viewtopic.php?pid=1484202#p1484202">2014-12-13 20:57:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>multi-queue virtio-scsi</p></div></blockquote></div><p>Can you hint on how to do that via command-line?<br />BTW, it seems somewhat strange that virtio-blk is slower than virtio-scsi with scsi disk attached.</p></div></blockquote></div><p>I think these are the relevant lines from the libvirt log:</p><div class="codebox"><pre><code>-device virtio-scsi-pci,id=scsi0,num_queues=4,bus=pci.0,addr=0x5 \ -drive file=/mnt/store/vm/Steam.raw,if=none,id=drive-scsi0-0-0-0,format=raw,cache=none,aio=native \ -device scsi-hd,bus=scsi0.0,channel=0,scsi-id=0,lun=0,drive=drive-scsi0-0-0-0,id=scsi0-0-0-0,bootindex=1</code></pre></div><p>I don&#039;t know which is faster between virtio-blk and virtio-scsi, try it and see.&#160; I just picked up multi-queue virtio-scsi based on the virt tuning and optimization guide.&#160; There&#039;s also x-data-plane=on support in virtio-blk-pci which you can google about.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484202">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484377" class="blockpost rowodd"> <h2><span><span class="conr">#3573</span> <a href="viewtopic.php?pid=1484377#p1484377">2014-12-14 16:08:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87305">oegat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-14</span></dd> <dd><span>Posts: 3</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:falck.andreas@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I am trying to pass through an MSI geforce GTX 970 as a <em>secondary</em> adapter, to a Windows 8.1 vm. I get the Code 43 error in device manager, even though I seem to have followed aw:s instructions on how to work around nvidia&#039;s &quot;bugs&quot;.&#160; Can anyone see an explanation in what follows?</p><p>The card is a drop-in replacement for a radeon 7790, which was working with vfio passthrough just before. So my problem is arguably device-specific. Note that I&#039;m trying secondary passthrough, so no extra vga logic involved (unless I misunderstood things and this misunderstanding is the reason for my problems).</p><p>System: Opteron magny-cours (two 6134 cpu:s), on Supermicro H8DG6<br />Numa turned off in cmos while testing.<br />Host vga: amd firepro v4900 (radeon driver)</p><p>ubuntu 14.10 (upgraded from 14.04 during testing this, in order to get support for kvm=off)<br />qemu 2.1/2.2 (same result)<br />libvirt 1.2.8<br />virt-manager 1.0.1<br />Nvidia driver: 244.11 / 244.75 (same result with both, cannot try older since the gpu is too new)</p><p>Passed thru adapters:<br />Geforce GTX 970 (gpu+audio): 42:00.{01} (giving code 43 error)<br />TI USB 73x0: 41:00.0 (usb controller for kb+mouse, works fine)</p><p>I run libvirt for help with CPU-pinning, using &#039;virsh edit&#039; for settings not understood by virt-manager. The qemu command line it gives rise to is this one:</p><div class="codebox"><pre class="vscroll"><code>qemu-system-x86_64 -enable-kvm -name Win8 -S -machine pc-i440fx-2.2,accel=kvm,usb=off,mem-merge=off -cpu host,kvm=off -m 4096 -mem-prealloc -mem-path /hugepages/libvirt/qemu -realtime mlock=on -smp 1,sockets=1,cores=1,threads=1 -uuid xxx -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/Win8.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc -no-shutdown -boot order=c,menu=on,strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -device ahci,id=ahci0,bus=pci.0,addr=0x6 -drive file=/dev/sdb,if=none,id=drive-ide0-0-0,format=raw -device ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0 -drive file=/dev/zvol/data/win8d,if=none,id=drive-ide0-0-1,format=raw -device ide-hd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -drive file=/opt/images/en-gb_windows_8_n_x64_dvd_915799.iso,if=none,id=drive-ide0-1-0,readonly=on,format=raw -device ide-cd,bus=ide.1,unit=0,drive=drive-ide0-1-0,id=ide0-1-0 -netdev tap,fd=24,id=hostnet0 -device e1000,netdev=hostnet0,id=net0,mac=52:54:00:46:9f:a9,bus=pci.0,addr=0x3 -netdev tap,fd=25,id=hostnet1 -device e1000,netdev=hostnet1,id=net1,mac=52:54:00:25:10:ce,bus=pci.0,addr=0x9 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -device usb-tablet,id=input0 -vnc 127.0.0.1:0 -device VGA,id=video0,bus=pci.0,addr=0x2 -device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -device vfio-pci,host=42:00.0,id=hostdev0,bus=pci.0,addr=0x8,rombar=1 -device vfio-pci,host=42:00.1,id=hostdev1,bus=pci.0,addr=0xa,rombar=1 -device vfio-pci,host=41:00.0,id=hostdev2,bus=pci.0,addr=0x7 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x5 -msg timestamp=on</code></pre></div><p>I replaced the real UUID above with xxx, and when running qemu 2.1 the machinetype was &#039;pc-i440fx-trusty&#039;. Otherwise was everything the same. So the question is, <strong>am I missing something, or could it be some other previously undocumented quirk in my setup which is detected by the nvidia driver?</strong></p><p>Unless I am mistaken that a Geforce 970 can be passed through as secondary this easily. I have assumed that options such as x-vga=on and/or custom firmware won&#039;t be needed when doing it this way. I also tried turing MSI on and off in windows, but without luck.</p><p><em>(As you see I am running ubuntu as host, not arch. I&#039;m posting here anyway because I think it is a good thing to keep the collected research on vfio passthrough in one place at this stage, and because the level of abstraction of the techniques discussed here is anyway above the workings of specific package managers and service daemons. I hope I am not breaking any forum rule or such.)</em></p><p>Edit: broke up the qemu command line for readability.</p> <p class="postedit"><em>Last edited by oegat (2014-12-14 16:22:25)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484377">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484380" class="blockpost roweven"> <h2><span><span class="conr">#3574</span> <a href="viewtopic.php?pid=1484380#p1484380">2014-12-14 16:13:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>oegat wrote:</cite><blockquote><div><p>Unless I am mistaken that a Geforce 970 can be passed through as secondary this easily.</p></div></blockquote></div><p>You are mistaken</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484380">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1484385" class="blockpost rowodd"> <h2><span><span class="conr">#3575</span> <a href="viewtopic.php?pid=1484385#p1484385">2014-12-14 16:44:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87305">oegat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-12-14</span></dd> <dd><span>Posts: 3</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:falck.andreas@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>You are mistaken</p></div></blockquote></div><p>Thanks, then I must have taken the wrong path somewhere. Explains a lot.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1484385">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=142">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=141">141</a> <a href="viewtopic.php?id=162768&amp;p=142">142</a> <strong>143</strong> <a href="viewtopic.php?id=162768&amp;p=144">144</a> <a href="viewtopic.php?id=162768&amp;p=145">145</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=144">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
