<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 217) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=217" title="Page 217" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=216" title="Page 216" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=218" title="Page 218" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=216">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=215">215</a> <a href="viewtopic.php?id=162768&amp;p=216">216</a> <strong>217</strong> <a href="viewtopic.php?id=162768&amp;p=218">218</a> <a href="viewtopic.php?id=162768&amp;p=219">219</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=218">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1538647" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5401</span> <a href="viewtopic.php?pid=1538647#p1538647">2015-06-22 06:33:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Gentooist in me speaks again: &quot;Nope. If you&#039;re missing some dependencies, make could just say something &quot;oh, you don&#039;t have that software, well, i&#039;ll just drop it&#039;s support out completely&quot; and continue building. Moreover, in gentoo there&#039;s a feature called USE-flags to specifically tell the toolchain that you want some select features.&quot;</p><p>And also, you can check your iptables.</p></div></blockquote></div><p>Well , I&#039;ll build em packages again using yaourt . How can I save the build log for examining it later ?</p><p>Oh , and I don&#039;t use iptaples or any other firewalls for the time being , so its not the cause for this issue .</p><p>Cheers !</p></div></blockquote></div><p>As you might have guessed, i&#039;m not so familiar with arch&#039;s build system or whatever you&#039;ve used(gentoo uses ebuilds where it&#039;s almost always just make $MAKE_OPTS, LFS uses plain make and make install, fedora uses rpmbuild which uses, if i remember right some special environment for make install call), i can&#039;t help you with extracting the build log. It&#039;s just a general advice to examine the build log when you change nothing but the compiler&#039;s version and something breaks.</p><p>If you haven&#039;t configured your kernel manually, you certainly do have iptables(or it&#039;s alternatives) and netfilter installed, so it doesn&#039;t hurt to check or even flush them all and see if it works.<br />&quot;iptables --flush -t filter&quot; should work, if i remember right.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538647">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538726" class="blockpost roweven"> <h2><span><span class="conr">#5402</span> <a href="viewtopic.php?pid=1538726#p1538726">2015-06-22 11:55:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91723">supertrampx</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-07</span></dd> <dd><span>Posts: 11</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:joe.cayouette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>supertrampx wrote:</cite><blockquote><div><p>I have checked MSI enable on my GTx 970. In linux it reports MSI: enable-&#160; &#160; in windows when I view the connection type pci, i see the card after driver install using msi. </p><br /><p>I am getting this error occasionally after a freeze and vm crashes, usually when I am installing, or accessing the graphics card.</p><p>qemu-system-x86_64: vfio_err_notifier_handler(0000:04:00.0) Unrecoverable error detected.&#160; Please collect any data possible and then kill the guest</p><p>any thoughts or ideas?</p></div></blockquote></div><p>You got a fatal AER error.&#160; Are you overclocking?&#160; You can boot the host with pci=noaer to disable it, but that&#039;s no guarantee that the you&#039;re not still getting bus errors.</p></div></blockquote></div><br /><br /><br /><p>I am not overclocking. I will try the recommended pci=noaer tag.</p><p>also quick note, I found this response by another SR-2 Classified user on another forum perhaps it is of relevance?</p><p>&quot;<br />Long answer: There is a bug in the NF200 PCIe bridges that will prevent you from allocating more than about 2.5GB of RAM (possibly less, depending on the hardware you have in the machine) to each VM. </p><p>It can be worked around if you are using the latest bleeding edge QEMU (used by both Xen and KVM). I&#039;ve been running such a system for years, long before the required QEMU feature was added, but I had to bodge a patch onto hvmloader to make it mark all the low RAM between 1GB and 4GB as reserved to make it work. Otherwise when the VM accesses the RAM that overlaps with the PCI IOMEM region (aperture) it will trample the real IOMEM region, which will crash the machine, and if it is the disk controller&#039;s IOMEM it is trampling, it can corrupt your data, too.&quot;</p><p>Tips on how to reserve this ram, or patch the kernel to reserve it would be excellent!<br />Thanks in advanced, a fix on this would be awesome!<br />Passthrough works great, but freezes often due to these AER bugs</p> <p class="postedit"><em>Last edited by supertrampx (2015-06-22 11:57:12)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538726">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538732" class="blockpost rowodd"> <h2><span><span class="conr">#5403</span> <a href="viewtopic.php?pid=1538732#p1538732">2015-06-22 12:11:13</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>supertrampx wrote:</cite><blockquote><div><p>Long answer: There is a bug in the NF200 PCIe bridges that will prevent you from allocating more than about 2.5GB of RAM (possibly less, depending on the hardware you have in the machine) to each VM.</p></div></blockquote></div><p>I&#039;m going off memory of something that I noted but didn&#039;t look into too closely, but I think I did see this&#160; occurring before I switched to Q35... that would explain why the available memory never looked right.</p><p>Edit:<br />self clarification if nothing else.... not saying that I have a nf200 pcie, just saying that that sounded similar to what I remember seeing.&#160; So it&#039;s at least calming to me to see that it could have been related to the machine type I was using and misconfigured PCI root stuff.&#160; Perhaps it was something else entirely.</p> <p class="postedit"><em>Last edited by Blind Tree Frog (2015-06-22 14:37:40)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538732">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538733" class="blockpost roweven"> <h2><span><span class="conr">#5404</span> <a href="viewtopic.php?pid=1538733#p1538733">2015-06-22 12:12:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>@Duelist :</p><p>I am certain that if there were problems with the building proccess , the whole thing would throw and error and ask if you would like to start from the begining .</p></div></blockquote></div><p>Gentooist in me speaks again: &quot;Nope. If you&#039;re missing some dependencies, make could just say something &quot;oh, you don&#039;t have that software, well, i&#039;ll just drop it&#039;s support out completely&quot; and continue building. Moreover, in gentoo there&#039;s a feature called USE-flags to specifically tell the toolchain that you want some select features.&quot;</p></div></blockquote></div><p>Assuming the Makefile was written with such support. (as a general statement... i didn&#039;t pay attention to what we are building right now)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538733">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538758" class="blockpost rowodd"> <h2><span><span class="conr">#5405</span> <a href="viewtopic.php?pid=1538758#p1538758">2015-06-22 13:39:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92054">nlamember</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-22</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92054">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello everyone, Could anybody help me with my problem? Here is the situation: 1. Compute Node [Ubuntu 14.04.02, KVM, Kilo] with Nvidia Tesla K40 I passed it by using this method: <a href="https://wiki.openstack.org/wiki/Pci_passthrough" rel="nofollow">https://wiki.openstack.org/wiki/Pci_passthrough</a> I download all drivers and CUDA libraries + I compiled all sample files succesfully. However when I run them they run but in the end the do not finish <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" />. For example run log of deviceQuery:<br />----------------------------------------------<br />deviceQuery Starting... <br />CUDA Device Query (Runtime API) version (CUDART static linking) <br />Detected 1 CUDA Capable device(s) Device 0: &quot;Tesla K40m&quot; <br />//INFO ABOUT IT <br />Compute Mode: &lt; Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) &gt;</p><p>deviceQuery, <br />CUDA Driver = CUDART, <br />CUDA Driver Version = 7.0, <br />CUDA Runtime Version = 7.0, <br />NumDevs = 1, <br />Device0 = Tesla K40m <br />Result = PASS<br />|<br />--------------------------------------<br />And then it just hangs, only option is to ctrl+c. Moreover I installed everything on host too and there it finished sucessfully without any problems. Any help will be appreciated.</p><p>dmesg on VM says only: <br />[ 1475.225692] nvidia 0000:00:08.0: irq 51 for MSI/MSI-X <br />dmesg on host: <br />kernel: [ 2897.503162] vfio-pci 0000:02:00.0: irq 324 for MSI/MSI-X</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538758">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538767" class="blockpost roweven"> <h2><span><span class="conr">#5406</span> <a href="viewtopic.php?pid=1538767#p1538767">2015-06-22 14:11:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;ve heard some news about XenGT(or KVMGT or whatever) in linux 4.1, but <a href="https://lkml.org/lkml/2015/6/22/8" rel="nofollow">lkml</a> doesn&#039;t hint me on details.<br />Can anyone give me a brief info about it&#039;s state? Does anybody knows about it?</p><p>Oh, and also, since we all need some very robust input to our VMs, there&#039;s a new way of doing this: <a href="https://www.kraxel.org/blog/2015/06/new-member-in-the-virtio-family-input-devices/" rel="nofollow">virtio-input</a>. If i understand correctly, it&#039;s inside 4.1 release now.</p> <p class="postedit"><em>Last edited by Duelist (2015-06-22 14:16:25)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538767">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538768" class="blockpost rowodd"> <h2><span><span class="conr">#5407</span> <a href="viewtopic.php?pid=1538768#p1538768">2015-06-22 14:23:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91638">PrinzipDesSees</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-04</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91638">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I finally got the x-vga working with a wrapper script, it was the stupidest ninja typo ever. </p><p>Many thanks @aw for all the information in the vfio blogspot and to OP and aw with info and explanation in this thread! Finally everything works like a charm.</p><p>@Denso</p><p>&lt;bla&gt;<br />And here in the gentoo handbook in english:<br /><a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Portage/Files#Logging_features" rel="nofollow">https://wiki.gentoo.org/wiki/Handbook:A … g_features</a></p><p>PORT_LOGDIR saves the entire logs into the specified path<br />The options with elog allow for filtering specific logclasses and further things.<br />&lt;/bla&gt;</p><p>oops right, yaourt is from arch, not gentoo, I have mistaken it with the other package manager in gentoo. Ignore this.</p><br /><p>EDIT:</p><p>@Duelist<br />That seems very interesting, I&#039;ll post here if I find something specific about it.</p><p>Here something on the xen mailinglist, seems they havent got it into the official kernel yet but there is a link to multiple github repos containing preview code.<br />They have also done a demo patch for using the thing on qemu. It seems however that this only works for intel graphics currently.<br /><a href="http://lists.xen.org/archives/html/xen-devel/2014-02/msg01848.html" rel="nofollow">http://lists.xen.org/archives/html/xen- … 01848.html</a></p><p>They renamed the thing to Intel GVT<br /><a href="https://01.org/xen/blogs/wangbo85/2015/intel-gvt-gxengt-pubic-release-q12015-0" rel="nofollow">https://01.org/xen/blogs/wangbo85/2015/ … e-q12015-0</a></p> <p class="postedit"><em>Last edited by PrinzipDesSees (2015-06-22 14:39:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538768">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538772" class="blockpost roweven"> <h2><span><span class="conr">#5408</span> <a href="viewtopic.php?pid=1538772#p1538772">2015-06-22 14:29:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>PrinzipDesSees wrote:</cite><blockquote><div><p>@Denso</p><p>And here in the gentoo handbook in english:<br /><a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Portage/Files#Logging_features" rel="nofollow">https://wiki.gentoo.org/wiki/Handbook:A … g_features</a></p><p>PORT_LOGDIR saves the entire logs into the specified path<br />The options with elog allow for filtering specific logclasses and further things.</p></div></blockquote></div><p>Dude, i&#039;m certainly sure he uses arch, so your gentoo-specific advice is a bit off.<br />A gentooist in me spoke because the first thing you do when something breaks in gentoo is reading the build log. Same thing for LFS, so considering the fact he compiled his QEMU with a cutting-edge fresh GCC and stumbled into problems - maybe build log would be useful to check.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538772">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538774" class="blockpost rowodd"> <h2><span><span class="conr">#5409</span> <a href="viewtopic.php?pid=1538774#p1538774">2015-06-22 14:34:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>supertrampx wrote:</cite><blockquote><div><p>Long answer: There is a bug in the NF200 PCIe bridges that will prevent you from allocating more than about 2.5GB of RAM (possibly less, depending on the hardware you have in the machine) to each VM. </p><p>It can be worked around if you are using the latest bleeding edge QEMU (used by both Xen and KVM). I&#039;ve been running such a system for years, long before the required QEMU feature was added, but I had to bodge a patch onto hvmloader to make it mark all the low RAM between 1GB and 4GB as reserved to make it work. Otherwise when the VM accesses the RAM that overlaps with the PCI IOMEM region (aperture) it will trample the real IOMEM region, which will crash the machine, and if it is the disk controller&#039;s IOMEM it is trampling, it can corrupt your data, too.&quot;</p><p>Tips on how to reserve this ram, or patch the kernel to reserve it would be excellent!<br />Thanks in advanced, a fix on this would be awesome!<br />Passthrough works great, but freezes often due to these AER bugs</p></div></blockquote></div><p>This sounds like exactly what ACS and IOMMU groups are meant to protect.&#160; Researching the NF200, it looks like it&#039;s specifically designed to optimize peer-to-peer traffic *without* forwarding it upstream and therefore without IOMMU interaction.&#160; Can I assume that you need to use the ACS override patch to even assign devices behind the NF200 to separate VMs?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538774">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538808" class="blockpost roweven"> <h2><span><span class="conr">#5410</span> <a href="viewtopic.php?pid=1538808#p1538808">2015-06-22 17:00:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79909">CharlieBra7o</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-01</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Finally got VGA passthrough working stably with 4.1.0 kernel, VFI-PCI, OVMF ROM and manually loaded VGA ROM with EFI support. Thanks to aw&#039;s amazing blogspot posts <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>One issue, however, remains:<br />I&#039;m trying to <strong>passthrough a X-Fi (PCI-E) sound card</strong>, since I just can&#039;t get sound passed through to the on-board sound card linux uses...<br />So I added the <strong>sound card (06:00.0 - alone in an IOMMU group)</strong> to the vfio-pci module and added the device in the virt-manager GUI (just like I do with the graphics card). After the OS (Win 8.1) installation and first boot the sound works fine with the built-in drivers. However, after installing the official X-Fi drivers for Win 8.1, my system seems to run into trouble handling the IRQ (&quot;<strong>irq 18: nobody cared [...] Disabling IRQ #18</strong>&quot;). The Windows loading screen then takes 2 minutes after the IRQ issue comes up (on first boot it takes more like 5 secs...).</p><p>Here is some (cropped to the essential info) output describing the problem and determining where the IRQ belongs to:</p><p><strong>dmesg</strong> &gt; <a href="http://ix.io/jeY" rel="nofollow">http://ix.io/jeY</a> (see the block [Jun22 16:33] at the very bottom)<br /><strong>/proc/interrupts</strong> &gt; <a href="http://ix.io/jf0" rel="nofollow">http://ix.io/jf0</a> (IRQ #18 handles the vfio-pci interrupt for the sound card, which is 06:00.1)<br /><strong>lspci -v</strong> &gt; <a href="http://ix.io/jeZ" rel="nofollow">http://ix.io/jeZ</a> (this are all the devices registered to IRQ #18)</p><p>Rebooting the host and reloading the vfio-pci kernel module don&#039;t produce different behavior, neither does uninstalling the X-Fi drivers again and/or installing the ones from windows update. I also reinstalled Win 8.1 like 4 times now, and everything happens exactly the same way. I don&#039;t really get what&#039;s going on there... :\</p> <p class="postedit"><em>Last edited by CharlieBra7o (2015-06-22 17:34:58)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538808">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538815" class="blockpost rowodd"> <h2><span><span class="conr">#5411</span> <a href="viewtopic.php?pid=1538815#p1538815">2015-06-22 17:15:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>CharlieBra7o wrote:</cite><blockquote><div><p>Finally got VGA passthrough working stably with 4.1.0 kernel, VFI-PCI, OVMF ROM and manually loaded VGA ROM with EFI support. Thanks to aw&#039;s amazing blogspot posts <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>One issue, however, remains:<br />I&#039;m trying to <strong>passthrough a X-Fi (PCI-E) sound card</strong>, since I just can&#039;t get sound passed through to the on-board sound card linux uses...<br />So I added the <strong>sound card (06:00.0 - alone in an IOMMU group)</strong> to the vfio-pci module and added the device in the virt-manager GUI (just like I do with the graphics card). After the OS (Win 8.1) installation and first boot the sound works fine with the built-in drivers. However, after installing the official X-Fi drivers for Win 8.1, my system seems to run into trouble handling the IRQ (&quot;<strong>irq 18: nobody cared [...] Disabling IRQ #18</strong>&quot;). The Windows loading screen then takes 2 minutes after the IRQ issue comes up (on first boot it takes more like 5 secs...).</p><p>Here is some (cropped to the essential info) output describing the problem and determining where the IRQ belongs to:</p><p><strong>dmesg</strong> &gt; <a href="http://ix.io/jeY" rel="nofollow">http://ix.io/jeY</a> (see the block [Jun22 16:33] at the very bottom)<br /><strong>/proc/interrupts</strong> &gt; <a href="http://ix.io/jf0" rel="nofollow">http://ix.io/jf0</a> (IRQ #18 handles the vfio-pci interrupt for the sound card, which is 06:00.1)<br /><strong>lspci -nnk</strong> &gt; <a href="http://ix.io/jeZ" rel="nofollow">http://ix.io/jeZ</a> (this are all the devices )</p><p>Rebooting the host and reloading the vfio-pci kernel module don&#039;t produce different behavior, neither does uninstalling the X-Fi drivers again and/or installing the ones from windows update. I also reinstalled Win 8.1 like 4 times now, and everything happens exactly the same way. I don&#039;t really get what&#039;s going on there... :\</p></div></blockquote></div><p>Probably broken INTx masking on the sound card.&#160; You can try using the nointxmask=1 option to vfio-pci, which can be kind of difficult to manage because you&#039;ll need to get exclusive interrupts for everything, or you could try something like this to just require an exclusive interrupt for the sound card:</p><div class="codebox"><pre><code>diff --git a/drivers/pci/quirks.c b/drivers/pci/quirks.c index c6dc1df..e0e6cb3 100644 --- a/drivers/pci/quirks.c +++ b/drivers/pci/quirks.c @@ -3051,6 +3051,7 @@ DECLARE_PCI_FIXUP_HEADER(PCI_VENDOR_ID_CHELSIO, 0x0030, quirk_broken_intx_masking); DECLARE_PCI_FIXUP_HEADER(0x1814, 0x0601, /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Ralink RT2800 802.11n PCI */ quirk_broken_intx_masking); +DECLARE_PCI_FIXUP_HEADER(0x1102, 0x000b, quirk_broken_intx_masking); /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_206.html topic_207.html topic_208.html topic_209.html topic_20.html topic_210.html topic_211.html topic_212.html topic_213.html topic_214.html topic_215.html topic_216.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html Realtek RTL8169 PCI Gigabit Ethernet Controller (rev 10) 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_114.html topic_115.html topic_116.html topic_117.html topic_118.html topic_119.html topic_11.html topic_120.html topic_121.html topic_122.html topic_123.html topic_124.html topic_125.html topic_126.html topic_127.html topic_128.html topic_129.html topic_12.html topic_130.html topic_131.html topic_132.html topic_133.html topic_134.html topic_135.html topic_136.html topic_137.html topic_138.html topic_139.html topic_13.html topic_140.html topic_141.html topic_142.html topic_143.html topic_144.html topic_145.html topic_146.html topic_147.html topic_148.html topic_149.html topic_14.html topic_150.html topic_151.html topic_152.html topic_153.html topic_154.html topic_155.html topic_156.html topic_157.html topic_158.html topic_159.html topic_15.html topic_160.html topic_161.html topic_162.html topic_163.html topic_164.html topic_165.html topic_166.html topic_167.html topic_168.html topic_169.html topic_16.html topic_170.html topic_171.html topic_172.html topic_173.html topic_174.html topic_175.html topic_176.html topic_177.html topic_178.html topic_179.html topic_17.html topic_180.html topic_181.html topic_182.html topic_183.html topic_184.html topic_185.html topic_186.html topic_187.html topic_188.html topic_189.html topic_18.html topic_190.html topic_191.html topic_192.html topic_193.html topic_194.html topic_195.html topic_196.html topic_197.html topic_198.html topic_199.html topic_19.html topic_1.html topic_200.html topic_201.html topic_202.html topic_203.html topic_204.html topic_205.html topic_206.html topic_207.html topic_208.html topic_209.html topic_20.html topic_210.html topic_211.html topic_212.html topic_213.html topic_214.html topic_215.html topic_216.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html Subsystem: Realtek RTL8169/8110 Family PCI Gigabit Ethernet NIC</code></pre></div><p>(the <em>-nn</em> part of you lspci didn&#039;t seem to take, so double check that vendor:device ID).</p><p>You might also read <a href="http://vfio.blogspot.com/2014/09/vfio-interrupts-and-how-to-coax-windows.html" rel="nofollow">the article on my blog about getting devices to use MSI</a>, that&#039;s usually the better option for something as latency sensitive as audio anyway.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538815">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538820" class="blockpost roweven"> <h2><span><span class="conr">#5412</span> <a href="viewtopic.php?pid=1538820#p1538820">2015-06-22 17:33:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><blockquote><div><p>oops right, yaourt is from arch, not gentoo, I have mistaken it with the other package manager in gentoo. Ignore this.</p></div></blockquote></div><p>No problem man , thanks for spending the time looking for this ! <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><blockquote><div><p>Dude, i&#039;m certainly sure he uses arch</p></div></blockquote></div><p>For me , Arch is the only Linux out there . <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Anyway , I&#039;ll try downgrading to GCC 4.9 and see if it would fix those issues . I&#039;ll keep you posted !</p><p>Edit : Sigh , isn&#039;t there a &quot;Legacy&quot; repo for Arch ? <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Edit 2 :</p><p>So I finally captured the build log (GCC 5.1) , it threw a lot of warnings :</p><div class="codebox"><pre class="vscroll"><code>nbd.c: In function &#039;nbd_trip&#039;: nbd.c:1321:15: warning: &#039;request.len&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] ret = blk_read(exp-&gt;blk, ^ nbd.c:1385:54: warning: &#039;request.from&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] ret = blk_co_discard(exp-&gt;blk, (request.from + exp-&gt;dev_offset) ^ nbd.c:1291:18: warning: &#039;request.handle&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] reply.handle = request.handle; ^ nbd.c:1354:26: warning: &#039;request.type&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] if (request.type &amp; NBD_CMD_FLAG_FUA) { ^ block/vmdk.c: In function &#039;vmdk_open_desc_file.isra.12&#039;: block/vmdk.c:848:39: warning: &#039;extent&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] extent-&gt;flat_start_offset = flat_offset &lt;&lt; 9; ^ block/vmdk.c:776:17: note: &#039;extent&#039; was declared here VmdkExtent *extent; ^ block/vmdk.c: In function &#039;vmdk_open_vmdk4&#039;: block/vmdk.c:701:24: warning: &#039;extent&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] extent-&gt;has_marker = le32_to_cpu(header.flags) &amp; VMDK4_FLAG_MARKER; ^ block/vmdk.c: In function &#039;vmdk_open_sparse&#039;: block/vmdk.c:513:9: warning: &#039;extent&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] ret = vmdk_init_tables(bs, extent, errp); ^ block/vmdk.c:492:17: note: &#039;extent&#039; was declared here VmdkExtent *extent; ^ hw/input/adb.c: In function &#039;adb_poll&#039;: hw/input/adb.c:81:23: warning: array subscript is above array bounds [-Warray-bounds] d = s-&gt;devices[i]; ^ hw/usb/hcd-ohci.c: In function &#039;ohci_service_ed_list.part.6&#039;: hw/usb/hcd-ohci.c:414:26: warning: array subscript is above array bounds [-Warray-bounds] if ((ohci-&gt;rhport[i].ctrl &amp; OHCI_PORT_PES) == 0) { ^ hw/usb/hcd-ohci.c:414:26: warning: array subscript is above array bounds [-Warray-bounds] if ((ohci-&gt;rhport[i].ctrl &amp; OHCI_PORT_PES) == 0) { ^ slirp/mbuf.c: In function &#039;m_cat&#039;: slirp/mbuf.c:136:1: warning: assuming signed overflow does not occur when assuming that (X + c) &lt; X is always false [-Wstrict-overflow] m_cat(struct mbuf *m, struct mbuf *n) ^ slirp/mbuf.c:158:11: warning: assuming signed overflow does not occur when assuming that (X + c) &lt; X is always false [-Wstrict-overflow] if(m-&gt;m_size&gt;size) return; ^ slirp/socket.c: In function &#039;soread&#039;: slirp/socket.c:193:5: warning: &#039;n&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] if (n == 2 &amp;&amp; nn == iov[0].iov_len) { ^ In file included from /usr/lib/glib-2.0/include/glibconfig.h:9:0, from /usr/include/glib-2.0/glib/gtypes.h:32, from /usr/include/glib-2.0/glib/galloca.h:32, from /usr/include/glib-2.0/glib.h:30, from /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/include/glib-compat.h:19, from /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/include/qemu-common.h:43, from slirp/socket.c:8: slirp/socket.c: In function &#039;soreadbuf&#039;: /usr/include/glib-2.0/glib/gmacros.h:240:39: warning: &#039;iov.iov_len&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] #define MIN(a, b) (((a) &lt; (b)) ? (a) : (b)) ^ slirp/socket.c:215:15: note: &#039;iov.iov_len&#039; was declared here struct iovec iov[2]; ^ slirp/socket.c: In function &#039;sorecvoob&#039;: slirp/socket.c:193:5: warning: &#039;n&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] if (n == 2 &amp;&amp; nn == iov[0].iov_len) { ^ slirp/socket.c:153:6: note: &#039;n&#039; was declared here int n, nn; ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c: In function &#039;get_real_device&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c:649:44: warning: &#039;id&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] pci_dev-&gt;dev.config[1] = (id &amp; 0xff00) &gt;&gt; 8; ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c: In function &#039;assign_failed_examine&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c:771:12: warning: &#039;device_id&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] return g_strdup_printf( ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c:771:12: warning: &#039;vendor_id&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] In file included from /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-m68k/translate.c:23:0: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-m68k/translate.c: In function &#039;disas_tas&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/tcg/tcg-op.h:58:5: warning: &#039;addr&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] tcg_gen_op2(&amp;tcg_ctx, opc, GET_TCGV_I32(a1), GET_TCGV_I32(a2)); ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-m68k/translate.c:1507:10: note: &#039;addr&#039; was declared here TCGv addr; ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-sh4/helper.c: In function &#039;superh_cpu_get_phys_page_debug&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-sh4/helper.c:527:12: warning: &#039;physical&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] return physical; ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-sh4/helper.c: In function &#039;superh_cpu_get_phys_page_debug&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-sh4/helper.c:527:12: warning: &#039;physical&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] return physical; ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c: In function &#039;get_real_device&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c:649:44: warning: &#039;id&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] pci_dev-&gt;dev.config[1] = (id &amp; 0xff00) &gt;&gt; 8; ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c: In function &#039;assign_failed_examine&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c:771:12: warning: &#039;device_id&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] return g_strdup_printf( ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/hw/i386/kvm/pci-assign.c:771:12: warning: &#039;vendor_id&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] In file included from /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-m68k/translate.c:23:0: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-m68k/translate.c: In function &#039;disas_tas&#039;: /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/tcg/tcg-op.h:58:5: warning: &#039;addr&#039; may be used uninitialized in this function [-Wmaybe-uninitialized] tcg_gen_op2(&amp;tcg_ctx, opc, GET_TCGV_I32(a1), GET_TCGV_I32(a2)); ^ /tmp/yaourt-tmp-root/aur-qemu-git/src/qemu/target-m68k/translate.c:1507:10: note: &#039;addr&#039; was declared here TCGv addr; ^ libtool: warning: remember to run &#039;libtool --finish /usr/lib&#039; libtool: warning: &#039;libcacard.la&#039; has not been installed in &#039;/usr/lib&#039;</code></pre></div><p>Anyone can make any sense of these ? and wether they&#039;re related to the bridged networking issues I&#039;m having ?</p><p>Thanks !</p> <p class="postedit"><em>Last edited by Denso (2015-06-22 17:52:02)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538820">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538888" class="blockpost rowodd"> <h2><span><span class="conr">#5413</span> <a href="viewtopic.php?pid=1538888#p1538888">2015-06-22 22:45:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79909">CharlieBra7o</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-01</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>(the <em>-nn</em> part of you lspci didn&#039;t seem to take, so double check that vendor:device ID).</p></div></blockquote></div><p>Actually it was just -v. I just mistyped it coz I typed &quot;-nnk&quot; about 1000 times the last few days <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> Edited my post accordingly...</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>You might also read <a href="http://vfio.blogspot.com/2014/09/vfio-interrupts-and-how-to-coax-windows.html" rel="nofollow">the article on my blog about getting devices to use MSI</a>, that&#039;s usually the better option for something as latency sensitive as audio anyway.</p></div></blockquote></div><p>I just tried MSI. The card supports it (according to lspci -v), and it gets enabled (/proc/interrupts and devmgmt.msc tell me that) after I set the DWORD in the registry. But with MSI there is still no sound... Even trying to (re)install the sound drivers with MSI enabled doesn&#039;t work - the problem is, that every driver I install (tried 3 different ones), deletes or sets the MSI DWORD to 0, so INTx is used again, resulting in no sound... Is there a trick to this?</p><p>The weirdest thing, however, is, that the sound works fine right after the installation (when MSI is turned OFF). Doesn&#039;t make any sense to me at all...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538888">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538890" class="blockpost roweven"> <h2><span><span class="conr">#5414</span> <a href="viewtopic.php?pid=1538890#p1538890">2015-06-22 22:50:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@CharlieBra7o</p><p>Maybe the card doesn&#039;t really work with MSI either, interrupts are surprisingly difficult for hardware to get right.&#160; I&#039;d pursue the broken intx masking path if MSI doesn&#039;t immediately work.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538890">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538916" class="blockpost rowodd"> <h2><span><span class="conr">#5415</span> <a href="viewtopic.php?pid=1538916#p1538916">2015-06-23 02:16:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi everyone !</p><p>I removed the qemu-git package and installed the pre-compiled package from the Extra repository , and everything is working like it should !</p><p>So it surely has something to do with GCC 5 .</p><p>Regards .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538916">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538985" class="blockpost roweven"> <h2><span><span class="conr">#5416</span> <a href="viewtopic.php?pid=1538985#p1538985">2015-06-23 10:41:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77444">Volle</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-05</span></dd> <dd><span>Posts: 37</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77444">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hey guys,</p><p>thanks for all this info in this thread but before i start to try this out i&#039;ve got one question:<br />Is there a way to still render the guest in the qemu window?<br />I&#039;m asking since i want to use this on my notebook without an additional screen connected.</p><p>Greetings<br /> Chris</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538985">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1538999" class="blockpost rowodd"> <h2><span><span class="conr">#5417</span> <a href="viewtopic.php?pid=1538999#p1538999">2015-06-23 12:02:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Volle wrote:</cite><blockquote><div><p>Hey guys,</p><p>thanks for all this info in this thread but before i start to try this out i&#039;ve got one question:<br />Is there a way to still render the guest in the qemu window?<br />I&#039;m asking since i want to use this on my notebook without an additional screen connected.</p><p>Greetings<br /> Chris</p></div></blockquote></div><p>Have multiple profiles for the same machine and you should get that (ie: same hard drive, different launch parameters).&#160; That said, I&#039;m fairly certain that Windows will not appreciate you doing this at all (since it doesn&#039;t like the hardware changing from under it).&#160; Linux may not either, but I don&#039;t know offhand how much it will complain.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1538999">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539002" class="blockpost roweven"> <h2><span><span class="conr">#5418</span> <a href="viewtopic.php?pid=1539002#p1539002">2015-06-23 12:17:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77444">Volle</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-05</span></dd> <dd><span>Posts: 37</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77444">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Blind Tree Frog wrote:</cite><blockquote><div><p>Have multiple profiles for the same machine and you should get that (ie: same hard drive, different launch parameters).&#160; That said, I&#039;m fairly certain that Windows will not appreciate you doing this at all (since it doesn&#039;t like the hardware changing from under it).&#160; Linux may not either, but I don&#039;t know offhand how much it will complain.</p></div></blockquote></div><p>I think you didn&#039;t get me right <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /><br />What i want to do is that i never use a screen and only use the vm in a window ... <br />But i was reading Alex Williamson&#039;s blog (RTFM) and found my answer: no...</p><p>I think i misread this forum post (post #10 in <a href="https://forums.virtualbox.org/viewtopic.php?f=7&amp;t=64298)" rel="nofollow">https://forums.virtualbox.org/viewtopic … 7&amp;t=64298)</a> <br />I know its about virtualbox and not qemu but they should be similar.</p><p>So no vgpu passthrough for me :&lt;</p><p>Thanks anyways</p><p> Chris</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539002">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539005" class="blockpost rowodd"> <h2><span><span class="conr">#5419</span> <a href="viewtopic.php?pid=1539005#p1539005">2015-06-23 12:27:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Volle wrote:</cite><blockquote><div><p>I think you didn&#039;t get me right <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /><br />What i want to do is that i never use a screen and only use the vm in a window ... <br />But i was reading Alex Williamson&#039;s blog (RTFM) and found my answer: no...</p><p>I think i misread this forum post (post #10 in <a href="https://forums.virtualbox.org/viewtopic.php?f=7&amp;t=64298)" rel="nofollow">https://forums.virtualbox.org/viewtopic … 7&amp;t=64298)</a> <br />I know its about virtualbox and not qemu but they should be similar.</p><p>So no vgpu passthrough for me :&lt;</p></div></blockquote></div><p>There is a reason that I didn&#039;t get you... that makes no sense in context of this discussion <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><br /><p>Yeah, no you just want to run QEMU (or Virtualbox, or VMWare) normally and ignore the passthrough stuff.&#160; &#160;Technically if you had a second video card I guess you could run passthrough on it and then use VNC to push it to a window on your host, but then you are back to the host&#039;s graphics and lose any advantage of the guest having his own card.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539005">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539009" class="blockpost roweven"> <h2><span><span class="conr">#5420</span> <a href="viewtopic.php?pid=1539009#p1539009">2015-06-23 13:04:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Blind Tree Frog wrote:</cite><blockquote><div><p>Technically if you had a second video card I guess you could run passthrough on it and then use VNC to push it to a window on your host, but then you are back to the host&#039;s graphics and lose any advantage of the guest having his own card.</p></div></blockquote></div><p>That&#039;s not at all true, using an assigned GPU is a huge advantage for guest graphics, even if using something like a TightVNC server in the guest to connect.&#160; Local connections via VNC also get the benefit that we have many Gbps of throughput using the internal bridge.&#160; There are several videos on youtube using this model where games run a quite playable frame rates.</p><p>If your guest is Win8+, it&#039;s also possible to use both an assigned GPU and emulated graphics.&#160; You can get 3D rendering into the emulated window, but the performance is significantly slower in this model.&#160; The better approach is to use the emulated graphics for boot, disable it for the guest OS, and connect via guest VNC once running.&#160; If you can&#039;t use that emulated + assigned GPU model, then you lose access to the VM until the guest VNC server is running.&#160; This can work too, but if Windows ever wants to go into recovery mode, you&#039;d need to remove the assigned GPU and add an emulated VGA to interact.</p><p>The more troubling problem in a laptop is that the secondary graphics in a hybrid laptop is rarely as isolated as a discrete GPU on a desktop.&#160; As far as I&#039;m aware, few, if any, have made it work.&#160; The GPU ROM is often embedded in ACPI, so likely needs to be extracted by doing a dump, disassemble, and encoding of the ROM table.&#160; Even then, mystery Code 43s seem to plaque dual graphics laptop users.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539009">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539011" class="blockpost rowodd"> <h2><span><span class="conr">#5421</span> <a href="viewtopic.php?pid=1539011#p1539011">2015-06-23 13:08:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77444">Volle</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-05</span></dd> <dd><span>Posts: 37</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77444">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Blind Tree Frog wrote:</cite><blockquote><div><p>There is a reason that I didn&#039;t get you... that makes no sense in context of this discussion <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>Yeah, no you just want to run QEMU (or Virtualbox, or VMWare) normally and ignore the passthrough stuff.&#160; &#160;Technically if you had a second video card I guess you could run passthrough on it and then use VNC to push it to a window on your host, but then you are back to the host&#039;s graphics and lose any advantage of the guest having his own card.</p></div></blockquote></div><p>I&#039;ve got a notebook with an Intel HD chip and an Nvidia 940M<br />Host: arch using the Intel HD chip rendering the desktop<br />Guest: win8.1 using the Nvidia 940M </p><p>My intention was running a game on the Guest (since there is &#039;no&#039; game support in linux yet)</p><p>[edit]<br />ninja&#039;d by aw.<br />Yes this exactly what i want to do!<br />I&#039;ll give it a try (like you explained) maybe i can get it to work ....</p><p>thanks</p> <p class="postedit"><em>Last edited by Volle (2015-06-23 13:11:57)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539011">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539013" class="blockpost roweven"> <h2><span><span class="conr">#5422</span> <a href="viewtopic.php?pid=1539013#p1539013">2015-06-23 13:12:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Blind Tree Frog wrote:</cite><blockquote><div><p>Technically if you had a second video card I guess you could run passthrough on it and then use VNC to push it to a window on your host, but then you are back to the host&#039;s graphics and lose any advantage of the guest having his own card.</p></div></blockquote></div><p>That&#039;s not at all true, using an assigned GPU is a huge advantage for guest graphics, even if using something like a TightVNC server in the guest to connect.&#160; Local connections via VNC also get the benefit that we have many Gbps of throughput using the internal bridge.&#160; There are several videos on youtube using this model where games run a quite playable frame rates.</p></div></blockquote></div><p> yes, &quot;any advantage&quot; was the wrong choice of words.&#160; The guest still gets hardware acceleration, but there is a performance hit from the VNC interface between machines</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539013">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539029" class="blockpost rowodd"> <h2><span><span class="conr">#5423</span> <a href="viewtopic.php?pid=1539029#p1539029">2015-06-23 14:44:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Did something happen to kraxel.org RPM git repo? My DNF seems to fail to update. I haven&#039;t investigated that yet.</p><div class="codebox"><pre><code>Cannot download edk2/edk2.git-ovmf-x64-0-20150623.b1070.g37fe82e.noarch.rpm</code></pre></div><p>Hmm, the rpm is in place, it&#039;s named differently:....b1071/g3cd2484<br />Seems like a successful build occured when i&#039;ve ran dnf update.</p> <p class="postedit"><em>Last edited by Duelist (2015-06-23 15:03:27)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539029">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539036" class="blockpost roweven"> <h2><span><span class="conr">#5424</span> <a href="viewtopic.php?pid=1539036#p1539036">2015-06-23 15:02:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Did something happen to kraxel.org RPM git repo? My DNF seems to fail to update. I haven&#039;t investigated that yet.</p><p>Hmm.. Seems like jenkins feels itself bad - there&#039;s a jenkins spec, there&#039;s an ovmf build target, but</p><div class="codebox"><pre><code>Cannot download edk2/edk2.git-ovmf-x64-0-20150623.b1070.g37fe82e.noarch.rpm</code></pre></div><p>I&#039;m not so familiar with jenkins, but something is broken.</p></div></blockquote></div><p>Your repo data is out of date <a href="https://www.kraxel.org/repos/jenkins/edk2/" rel="nofollow">https://www.kraxel.org/repos/jenkins/edk2/</a></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539036">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1539037" class="blockpost rowodd"> <h2><span><span class="conr">#5425</span> <a href="viewtopic.php?pid=1539037#p1539037">2015-06-23 15:04:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Did something happen to kraxel.org RPM git repo? My DNF seems to fail to update. I haven&#039;t investigated that yet.</p><p>Hmm.. Seems like jenkins feels itself bad - there&#039;s a jenkins spec, there&#039;s an ovmf build target, but</p><div class="codebox"><pre><code>Cannot download edk2/edk2.git-ovmf-x64-0-20150623.b1070.g37fe82e.noarch.rpm</code></pre></div><p>I&#039;m not so familiar with jenkins, but something is broken.</p></div></blockquote></div><p>Your repo data is out of date <a href="https://www.kraxel.org/repos/jenkins/edk2/" rel="nofollow">https://www.kraxel.org/repos/jenkins/edk2/</a></p></div></blockquote></div><p>Yeah, i was right, i was trying to update the minute new build have appeared.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1539037">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=216">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=215">215</a> <a href="viewtopic.php?id=162768&amp;p=216">216</a> <strong>217</strong> <a href="viewtopic.php?id=162768&amp;p=218">218</a> <a href="viewtopic.php?id=162768&amp;p=219">219</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=218">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
