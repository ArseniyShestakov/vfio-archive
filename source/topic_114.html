<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 114) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=114" title="Page 114" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=113" title="Page 113" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=115" title="Page 115" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=113">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=112">112</a> <a href="viewtopic.php?id=162768&amp;p=113">113</a> <strong>114</strong> <a href="viewtopic.php?id=162768&amp;p=115">115</a> <a href="viewtopic.php?id=162768&amp;p=116">116</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=115">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1461544" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#2826</span> <a href="viewtopic.php?pid=1461544#p1461544">2014-09-29 18:06:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77651">noobman</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-13</span></dd> <dd><span>Posts: 21</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>About not being able to passthrough the onboard usb controllers, I also had that situation also with a gigabyte mobo, where apparently i could not pass any of the onboard usb controllers. None at all. What i found to be working was to disable the xhci controller entirelly, from bios. And then the passthrough was possible (for me), with either of the other remaining controllers, like a charm. Playing around with bios setup options for xhci and ehci paid off for me. Worth a try imo.</p> <p class="postedit"><em>Last edited by noobman (2014-09-29 18:10:26)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461544">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461557" class="blockpost roweven"> <h2><span><span class="conr">#2827</span> <a href="viewtopic.php?pid=1461557#p1461557">2014-09-29 18:37:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Lauer wrote:</cite><blockquote><div><p>dmesg | grep vgaarb</p><div class="codebox"><pre><code>[ 0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=e7fe3792-3cba-cf01-605e-37923cbacf01 rw quiet i915.enable_hd_vgaarb=1 pci-stub.ids=1002:6720,1002:aa88 intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 kvm_intel.emulate_invalid_guest_state=0 [ 0.000000] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=e7fe3792-3cba-cf01-605e-37923cbacf01 rw quiet i915.enable_hd_vgaarb=1 pci-stub.ids=1002:6720,1002:aa88 intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 kvm_intel.emulate_invalid_guest_state=0 [ 0.504315] vgaarb: device added: PCI:0000:00:02.0,decodes=io+mem,owns=io+mem,locks=none [ 0.504320] vgaarb: device added: PCI:0000:01:00.0,decodes=io+mem,owns=none,locks=none [ 0.504322] vgaarb: loaded [ 0.504323] vgaarb: bridge control possible 0000:01:00.0 [ 0.504324] vgaarb: no bridge control possible 0000:00:02.0 [ 1.723418] vgaarb: device changed decodes: PCI:0000:00:02.0,olddecodes=io+mem,decodes=io:owns=io+mem</code></pre></div><p>Any advice would be appreciated.</p></div></blockquote></div><p>Do you have host nvidia? If so - apply a patch.<br /><a href="http://www.mail-archive.com/qemu-devel@nongnu.org/msg174066.html" rel="nofollow">http://www.mail-archive.com/qemu-devel@ … 74066.html</a><br /><a href="https://bpaste.net/show/109185" rel="nofollow">https://bpaste.net/show/109185</a></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461557">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461567" class="blockpost rowodd"> <h2><span><span class="conr">#2828</span> <a href="viewtopic.php?pid=1461567#p1461567">2014-09-29 19:59:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85490">et38</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-29</span></dd> <dd><span>Posts: 3</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>noobman wrote:</cite><blockquote><div><p>About not being able to passthrough the onboard usb controllers, I also had that situation also with a gigabyte mobo, where apparently i could not pass any of the onboard usb controllers. None at all. What i found to be working was to disable the xhci controller entirelly, from bios. And then the passthrough was possible (for me), with either of the other remaining controllers, like a charm. Playing around with bios setup options for xhci and ehci paid off for me. Worth a try imo.</p></div></blockquote></div><p>I was looking at the passtrough setup with ga-z97x-u3dh. If it&#039;s working, why is the motherboard not recommended in the list?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461567">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461571" class="blockpost roweven"> <h2><span><span class="conr">#2829</span> <a href="viewtopic.php?pid=1461571#p1461571">2014-09-29 20:14:13</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>If the hardware is lying about it&#039;s support for snoop control then then a patch like below should stop the error.</p><div class="codebox"><pre><code>--- a/include/linux/intel-iommu.h +++ b/include/linux/intel-iommu.h @@ -126,7 +126,7 @@ static inline void dmar_writeq(void __iomem *addr, u64 val) #define ecap_ir_support(e) ((e &gt;&gt; 3) &amp; 0x1) #define ecap_dev_iotlb_support(e) (((e) &gt;&gt; 2) &amp; 0x1) #define ecap_max_handle_mask(e) ((e &gt;&gt; 20) &amp; 0xf) -#define ecap_sc_support(e) ((e &gt;&gt; 7) &amp; 0x1) /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Snooping Control */ +#define ecap_sc_support(e) ((e &gt;&gt; 7) &amp; 0x0) /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Snooping Control */ /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup IOTLB_REG */ #define DMA_TLB_FLUSH_GRANU_OFFSET 60</code></pre></div></div></blockquote></div><p>I&#039;ve applied this patch, and now the device works without errors.&#160; &#160;Sweet!<br />For reference:</p><div class="codebox"><pre class="vscroll"><code>01:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Whistler [Radeon E6760] [1002:6743] (prog-if 00 [VGA controller]) Subsystem: Hightech Information System Ltd. Device [1787:2323] Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+ Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx- Latency: 0, Cache Line Size: 64 bytes Interrupt: pin A routed to IRQ 51 Region 0: Memory at c0000000 (64-bit, prefetchable) [size=256M] Region 2: Memory at eee20000 (64-bit, non-prefetchable) [size=128K] Region 4: I/O ports at e000 [size=256] Expansion ROM at eee00000 [disabled] [size=128K] Capabilities: [50] Power Management version 3 Flags: PMEClk- DSI- D1+ D2+ AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-) Status: D0 NoSoftRst- PME-Enable- DSel=0 DScale=0 PME- Capabilities: [58] Express (v2) Legacy Endpoint, MSI 00 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s &lt;4us, L1 unlimited ExtTag+ AttnBtn- AttnInd- PwrInd- RBE+ FLReset- DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported- RlxdOrd- ExtTag+ PhantFunc- AuxPwr- NoSnoop+ MaxPayload 256 bytes, MaxReadReq 512 bytes DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr- TransPend- LnkCap: Port #0, Speed 5GT/s, Width x16, ASPM L0s L1, Exit Latency L0s &lt;64ns, L1 &lt;1us ClockPM- Surprise- LLActRep- BwNot- LnkCtl: ASPM Disabled; RCB 64 bytes Disabled- CommClk+ ExtSynch- ClockPM- AutWidDis- BWInt- AutBWInt- LnkSta: Speed 5GT/s, Width x16, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt- DevCap2: Completion Timeout: Not Supported, TimeoutDis-, LTR-, OBFF Not Supported DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR-, OBFF Disabled LnkCtl2: Target Link Speed: 5GT/s, EnterCompliance- SpeedDis- Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS- Compliance De-emphasis: -6dB LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete-, EqualizationPhase1- EqualizationPhase2-, EqualizationPhase3-, LinkEqualizationRequest- Capabilities: [a0] MSI: Enable+ Count=1/1 Maskable- 64bit+ Address: 00000000fee00418 Data: 0000 Capabilities: [100 v1] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150 v1] Advanced Error Reporting UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol- UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol- CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+ AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn- Kernel driver in use: vfio-pci</code></pre></div><p>EDIT: This may have also fixed passthrough of my ASMedia ASM1062 SATA controller, as well.</p> <p class="postedit"><em>Last edited by DanaGoyette (2014-09-29 23:08:15)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461571">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461608" class="blockpost rowodd"> <h2><span><span class="conr">#2830</span> <a href="viewtopic.php?pid=1461608#p1461608">2014-09-29 23:14:58</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85053">Lauer</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-11</span></dd> <dd><span>Posts: 9</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>Lauer wrote:</cite><blockquote><div><p>dmesg | grep vgaarb</p><div class="codebox"><pre><code>[ 0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=e7fe3792-3cba-cf01-605e-37923cbacf01 rw quiet i915.enable_hd_vgaarb=1 pci-stub.ids=1002:6720,1002:aa88 intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 kvm_intel.emulate_invalid_guest_state=0 [ 0.000000] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-linux-mainline root=UUID=e7fe3792-3cba-cf01-605e-37923cbacf01 rw quiet i915.enable_hd_vgaarb=1 pci-stub.ids=1002:6720,1002:aa88 intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 kvm_intel.emulate_invalid_guest_state=0 [ 0.504315] vgaarb: device added: PCI:0000:00:02.0,decodes=io+mem,owns=io+mem,locks=none [ 0.504320] vgaarb: device added: PCI:0000:01:00.0,decodes=io+mem,owns=none,locks=none [ 0.504322] vgaarb: loaded [ 0.504323] vgaarb: bridge control possible 0000:01:00.0 [ 0.504324] vgaarb: no bridge control possible 0000:00:02.0 [ 1.723418] vgaarb: device changed decodes: PCI:0000:00:02.0,olddecodes=io+mem,decodes=io:owns=io+mem</code></pre></div><p>Any advice would be appreciated.</p></div></blockquote></div><p>Do you have host nvidia? If so - apply a patch.<br /><a href="http://www.mail-archive.com/qemu-devel@nongnu.org/msg174066.html" rel="nofollow">http://www.mail-archive.com/qemu-devel@ … 74066.html</a><br /><a href="https://bpaste.net/show/109185" rel="nofollow">https://bpaste.net/show/109185</a></p></div></blockquote></div><p>Intel IGP and AMD 6990M.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461608">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461617" class="blockpost roweven"> <h2><span><span class="conr">#2831</span> <a href="viewtopic.php?pid=1461617#p1461617">2014-09-30 00:41:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>DanaGoyette wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>If the hardware is lying about it&#039;s support for snoop control then then a patch like below should stop the error.</p><div class="codebox"><pre><code>--- a/include/linux/intel-iommu.h +++ b/include/linux/intel-iommu.h @@ -126,7 +126,7 @@ static inline void dmar_writeq(void __iomem *addr, u64 val) #define ecap_ir_support(e) ((e &gt;&gt; 3) &amp; 0x1) #define ecap_dev_iotlb_support(e) (((e) &gt;&gt; 2) &amp; 0x1) #define ecap_max_handle_mask(e) ((e &gt;&gt; 20) &amp; 0xf) -#define ecap_sc_support(e) ((e &gt;&gt; 7) &amp; 0x1) /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Snooping Control */ +#define ecap_sc_support(e) ((e &gt;&gt; 7) &amp; 0x0) /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup Snooping Control */ /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup IOTLB_REG */ #define DMA_TLB_FLUSH_GRANU_OFFSET 60</code></pre></div></div></blockquote></div><p>I&#039;ve applied this patch, and now the device works without errors.&#160; &#160;Sweet!</p></div></blockquote></div><p>Please post the resulting /tmp/dmar.dsl file from:</p><div class="codebox"><pre><code>$ sudo iasl -p /tmp/dmar -d /sys/firmware/acpi/tables/DMAR</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461617">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461618" class="blockpost rowodd"> <h2><span><span class="conr">#2832</span> <a href="viewtopic.php?pid=1461618#p1461618">2014-09-30 00:46:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Alex , did you check the log I posted about DMA errors when using VFIO ? It&#039;s in the previous page !&#160; : )</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461618">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461624" class="blockpost roweven"> <h2><span><span class="conr">#2833</span> <a href="viewtopic.php?pid=1461624#p1461624">2014-09-30 01:25:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Alex , did you check the log I posted about DMA errors when using VFIO ? It&#039;s in the previous page !&#160; : )</p></div></blockquote></div><p>Looks like:</p><p><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=08336fd218e087cc4fcc458e6b6dcafe8702b098" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … fe8702b098</a></p><p>Are you running 3.14 or newer?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461624">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461625" class="blockpost rowodd"> <h2><span><span class="conr">#2834</span> <a href="viewtopic.php?pid=1461625#p1461625">2014-09-30 01:27:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Alex , did you check the log I posted about DMA errors when using VFIO ? It&#039;s in the previous page !&#160; : )</p></div></blockquote></div><p>Looks like:</p><p><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=08336fd218e087cc4fcc458e6b6dcafe8702b098" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … fe8702b098</a></p><p>Are you running 3.14 or newer?</p></div></blockquote></div><p>Yes , 3.16.3 .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461625">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461627" class="blockpost roweven"> <h2><span><span class="conr">#2835</span> <a href="viewtopic.php?pid=1461627#p1461627">2014-09-30 01:37:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Alex , did you check the log I posted about DMA errors when using VFIO ? It&#039;s in the previous page !&#160; : )</p></div></blockquote></div><p>Looks like:</p><p><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=08336fd218e087cc4fcc458e6b6dcafe8702b098" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … fe8702b098</a></p><p>Are you running 3.14 or newer?</p></div></blockquote></div><p>Yes , 3.16.3 .</p></div></blockquote></div><p>Still seems potentially related to large pages.&#160; Does using either of these options avoid it?</p><p>a) boot arg: intel_iommu=on,sp_off</p><p>b) module arg: vfio_iommu_type1 disable_hugepages=1</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461627">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461636" class="blockpost rowodd"> <h2><span><span class="conr">#2836</span> <a href="viewtopic.php?pid=1461636#p1461636">2014-09-30 02:24:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Please post the resulting /tmp/dmar.dsl file from:</p><div class="codebox"><pre><code>$ sudo iasl -p /tmp/dmar -d /sys/firmware/acpi/tables/DMAR</code></pre></div></div></blockquote></div><div class="codebox"><pre class="vscroll"><code>/* 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html Intel ACPI Component Architecture 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html AML Disassembler version 20140214-64 [Mar 29 2014] 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html Copyright (c) 2000 - 2014 Intel Corporation 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html Disassembly of /sys/firmware/acpi/tables/DMAR, Mon Sep 29 19:22:29 2014 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html ACPI Data Table [DMAR] 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html 1.sh topic_100.html topic_101.html topic_102.html topic_103.html topic_104.html topic_105.html topic_106.html topic_107.html topic_108.html topic_109.html topic_10.html topic_110.html topic_111.html topic_112.html topic_113.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_68.html topic_69.html topic_6.html topic_70.html topic_71.html topic_72.html topic_73.html topic_74.html topic_75.html topic_76.html topic_77.html topic_78.html topic_79.html topic_7.html topic_80.html topic_81.html topic_82.html topic_83.html topic_84.html topic_85.html topic_86.html topic_87.html topic_88.html topic_89.html topic_8.html topic_90.html topic_91.html topic_92.html topic_93.html topic_94.html topic_95.html topic_96.html topic_97.html topic_98.html topic_99.html topic_9.html Format: [HexOffset DecimalOffset ByteLength] FieldName : FieldValue */ [000h 0000 4] Signature : &quot;DMAR&quot; [DMA Remapping table] [004h 0004 4] Table Length : 000000A8 [008h 0008 1] Revision : 01 [009h 0009 1] Checksum : 57 [00Ah 0010 6] Oem ID : &quot;INTEL &quot; [010h 0016 8] Oem Table ID : &quot;BDW &quot; [018h 0024 4] Oem Revision : 00000001 [01Ch 0028 4] Asl Compiler ID : &quot;INTL&quot; [020h 0032 4] Asl Compiler Revision : 00000001 [024h 0036 1] Host Address Width : 26 [025h 0037 1] Flags : 03 [026h 0038 10] Reserved : 00 00 00 00 00 00 00 00 00 00 [030h 0048 2] Subtable Type : 0000 [Hardware Unit Definition] [032h 0050 2] Length : 0018 [034h 0052 1] Flags : 00 [035h 0053 1] Reserved : 00 [036h 0054 2] PCI Segment Number : 0000 [038h 0056 8] Register Base Address : 00000000FED90000 [040h 0064 1] Device Scope Entry Type : 01 [041h 0065 1] Entry Length : 08 [042h 0066 2] Reserved : 0000 [044h 0068 1] Enumeration ID : 00 [045h 0069 1] PCI Bus Number : 00 [046h 0070 2] PCI Path : 02,00 [048h 0072 2] Subtable Type : 0000 [Hardware Unit Definition] [04Ah 0074 2] Length : 0020 [04Ch 0076 1] Flags : 01 [04Dh 0077 1] Reserved : 00 [04Eh 0078 2] PCI Segment Number : 0000 [050h 0080 8] Register Base Address : 00000000FED91000 [058h 0088 1] Device Scope Entry Type : 03 [059h 0089 1] Entry Length : 08 [05Ah 0090 2] Reserved : 0000 [05Ch 0092 1] Enumeration ID : 08 [05Dh 0093 1] PCI Bus Number : F0 [05Eh 0094 2] PCI Path : 1F,00 [060h 0096 1] Device Scope Entry Type : 04 [061h 0097 1] Entry Length : 08 [062h 0098 2] Reserved : 0000 [064h 0100 1] Enumeration ID : 00 [065h 0101 1] PCI Bus Number : F0 [066h 0102 2] PCI Path : 0F,00 [068h 0104 2] Subtable Type : 0001 [Reserved Memory Region] [06Ah 0106 2] Length : 0020 [06Ch 0108 2] Reserved : 0000 [06Eh 0110 2] PCI Segment Number : 0000 [070h 0112 8] Base Address : 000000006DEA5000 [078h 0120 8] End Address (limit) : 000000006DEB3FFF [080h 0128 1] Device Scope Entry Type : 01 [081h 0129 1] Entry Length : 08 [082h 0130 2] Reserved : 0000 [084h 0132 1] Enumeration ID : 00 [085h 0133 1] PCI Bus Number : 00 [086h 0134 2] PCI Path : 14,00 [088h 0136 2] Subtable Type : 0001 [Reserved Memory Region] [08Ah 0138 2] Length : 0020 [08Ch 0140 2] Reserved : 0000 [08Eh 0142 2] PCI Segment Number : 0000 [090h 0144 8] Base Address : 000000006F000000 [098h 0152 8] End Address (limit) : 000000007F1FFFFF [0A0h 0160 1] Device Scope Entry Type : 01 [0A1h 0161 1] Entry Length : 08 [0A2h 0162 2] Reserved : 0000 [0A4h 0164 1] Enumeration ID : 00 [0A5h 0165 1] PCI Bus Number : 00 [0A6h 0166 2] PCI Path : 02,00 Raw Table Data: Length 168 (0xA8) 0000: 44 4D 41 52 A8 00 00 00 01 57 49 4E 54 45 4C 20 DMAR.....WINTEL 0010: 42 44 57 20 00 00 00 00 01 00 00 00 49 4E 54 4C BDW ........INTL 0020: 01 00 00 00 26 03 00 00 00 00 00 00 00 00 00 00 ....&amp;........... 0030: 00 00 18 00 00 00 00 00 00 00 D9 FE 00 00 00 00 ................ 0040: 01 08 00 00 00 00 02 00 00 00 20 00 01 00 00 00 .......... ..... 0050: 00 10 D9 FE 00 00 00 00 03 08 00 00 08 F0 1F 00 ................ 0060: 04 08 00 00 00 F0 0F 00 01 00 20 00 00 00 00 00 .......... ..... 0070: 00 50 EA 6D 00 00 00 00 FF 3F EB 6D 00 00 00 00 .P.m.....?.m.... 0080: 01 08 00 00 00 00 14 00 01 00 20 00 00 00 00 00 .......... ..... 0090: 00 00 00 6F 00 00 00 00 FF FF 1F 7F 00 00 00 00 ...o............ 00A0: 01 08 00 00 00 00 02 00 ........</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461636">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461641" class="blockpost roweven"> <h2><span><span class="conr">#2837</span> <a href="viewtopic.php?pid=1461641#p1461641">2014-09-30 02:55:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>DanaGoyette wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Please post the resulting /tmp/dmar.dsl file from:</p><div class="codebox"><pre><code>$ sudo iasl -p /tmp/dmar -d /sys/firmware/acpi/tables/DMAR</code></pre></div></div></blockquote></div><div class="codebox"><pre><code>/* [030h 0048 2] Subtable Type : 0000 [Hardware Unit Definition] [032h 0050 2] Length : 0018 [034h 0052 1] Flags : 00 [035h 0053 1] Reserved : 00 [036h 0054 2] PCI Segment Number : 0000 [038h 0056 8] Register Base Address : 00000000FED90000 [040h 0064 1] Device Scope Entry Type : 01 [041h 0065 1] Entry Length : 08 [042h 0066 2] Reserved : 0000 [044h 0068 1] Enumeration ID : 00 [045h 0069 1] PCI Bus Number : 00 [046h 0070 2] PCI Path : 02,00 [048h 0072 2] Subtable Type : 0000 [Hardware Unit Definition] [04Ah 0074 2] Length : 0020 [04Ch 0076 1] Flags : 01 [04Dh 0077 1] Reserved : 00 [04Eh 0078 2] PCI Segment Number : 0000 [050h 0080 8] Register Base Address : 00000000FED91000</code></pre></div></div></blockquote></div><p>Ok, as expected you have two IOMMU hardware units, the first is exclusively for the IGD (00:02.0).&#160; We can match that to dmesg by comparing the base address:</p><div class="codebox"><pre><code>dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020660462 ecap f0101a</code></pre></div><p>The 2nd IOMMU hardware unit has the INCLUDE_PCI_ALL flag bit set, so everything else is handled by this IOMMU, which we can also verify by base address:</p><div class="codebox"><pre><code>dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap d2008c20660462 ecap f010da</code></pre></div><p>So, unless you&#039;re trying to assign IGD, we know you&#039;re exclusively using IOMMU1, which has an extended capability register value of 0xf010da.&#160; Bit 7 in that register indicates support for Snoop Control and you&#039;ve already verified that ignoring this bit fixes the problem.&#160; When SC is supported, we can program the IOMMU page tables with the SNP bit set which causes processor caches to be snooped regardless of the NoSnoop tag on the transaction.&#160; This effectively makes all DMA cache coherent and KVM doesn&#039;t need to emulated WBINVD to maintain coherency.</p><p>In your case the hardware tells us that SC is supported, but the IOMMU page table hardware considers it a reserved bit and throws a fault.&#160; What CPU model are you using?&#160; Is it perhaps a prototype?&#160; I believe some systems have a BIOS config option to toggle IOMMU caching support, if you have such an option, disable it.&#160; I think you&#039;re looking at either a hardware or BIOS issue.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461641">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461648" class="blockpost rowodd"> <h2><span><span class="conr">#2838</span> <a href="viewtopic.php?pid=1461648#p1461648">2014-09-30 03:39:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Looks like:</p><p><a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=08336fd218e087cc4fcc458e6b6dcafe8702b098" rel="nofollow">http://git.kernel.org/cgit/linux/kernel … fe8702b098</a></p><p>Are you running 3.14 or newer?</p></div></blockquote></div><p>Yes , 3.16.3 .</p></div></blockquote></div><p>Still seems potentially related to large pages.&#160; Does using either of these options avoid it?</p><p>a) boot arg: intel_iommu=on,sp_off</p><p>b) module arg: vfio_iommu_type1 disable_hugepages=1</p></div></blockquote></div><p>YES ! <br />adding : &quot;vfio_iommu_type1.disable_hugepages=1&quot; to boot parameters solved the issue . Now I&#039;ll see if I can reboot this VM without crashing the host !</p><p>EDIT : Aaaand , it reboots just fine !</p><p>Thank you Alex , we appreciate your kind efforts !</p> <p class="postedit"><em>Last edited by Denso (2014-09-30 03:55:44)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461648">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461658" class="blockpost roweven"> <h2><span><span class="conr">#2839</span> <a href="viewtopic.php?pid=1461658#p1461658">2014-09-30 05:19:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>So, unless you&#039;re trying to assign IGD, we know you&#039;re exclusively using IOMMU1, which has an extended capability register value of 0xf010da.&#160; Bit 7 in that register indicates support for Snoop Control and you&#039;ve already verified that ignoring this bit fixes the problem.&#160; When SC is supported, we can program the IOMMU page tables with the SNP bit set which causes processor caches to be snooped regardless of the NoSnoop tag on the transaction.&#160; This effectively makes all DMA cache coherent and KVM doesn&#039;t need to emulated WBINVD to maintain coherency.</p><p>In your case the hardware tells us that SC is supported, but the IOMMU page table hardware considers it a reserved bit and throws a fault.&#160; What CPU model are you using?&#160; Is it perhaps a prototype?&#160; I believe some systems have a BIOS config option to toggle IOMMU caching support, if you have such an option, disable it.&#160; I think you&#039;re looking at either a hardware or BIOS issue.</p></div></blockquote></div><p>For reference, the CPU is a Xeon E3-1245v3.</p><p>I looked around in my BIOS, and there were no options for IOMMU caching -- but there WAS an option for X2APIC Opt-Out.<br />X2APIC Opt-Out was enabled, so I disabled it.&#160; Now I&#039;ve booted the non-patched kernel, and the errors are no longer occurring.&#160; <br />Thanks for the suggestion of checking the BIOS settings.</p><div class="codebox"><pre><code>[ 0.067534] dmar: Host address width 39 [ 0.067537] dmar: DRHD base: 0x000000fed90000 flags: 0x0 [ 0.067544] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap c0000020660462 ecap f0101a [ 0.067546] dmar: DRHD base: 0x000000fed91000 flags: 0x1 [ 0.067551] dmar: IOMMU 1: reg_base_addr fed91000 ver 1:0 cap d2008c20660462 ecap f010da [ 0.067552] dmar: RMRR base: 0x0000006dea5000 end: 0x0000006deb3fff [ 0.067553] dmar: RMRR base: 0x0000006f000000 end: 0x0000007f1fffff [ 0.067618] IOAPIC id 8 under DRHD base 0xfed91000 IOMMU 1 [ 0.067621] Queued invalidation will be enabled to support x2apic and Intr-remapping. [ 0.067731] Enabled IRQ remapping in x2apic mode [ 0.067733] Enabling x2apic [ 0.067734] Enabled x2apic [ 0.067738] Switched APIC routing to cluster x2apic. [ 0.629294] DMAR: No ATSR found [ 0.629318] IOMMU 0 0xfed90000: using Queued invalidation [ 0.629319] IOMMU 1 0xfed91000: using Queued invalidation [ 0.629321] IOMMU: Setting RMRR: [ 0.629330] IOMMU: Setting identity map for device 0000:00:02.0 [0x6f000000 - 0x7f1fffff] [ 0.630530] IOMMU: Setting identity map for device 0000:00:14.0 [0x6dea5000 - 0x6deb3fff] [ 0.630547] IOMMU: Prepare 0-16MiB unity mapping for LPC [ 0.630554] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff]</code></pre></div> <p class="postedit"><em>Last edited by DanaGoyette (2014-09-30 05:23:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461658">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461730" class="blockpost rowodd"> <h2><span><span class="conr">#2840</span> <a href="viewtopic.php?pid=1461730#p1461730">2014-09-30 14:00:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hey everyone .</p><p>So I&#039;m trying to use OVMF instead of SeaBIOS , I used ovmf-svn package from AUR and added the option &quot;-pflash /*path to ovmf_x64.bin*&quot; to my VM aguments . Also I deleted &quot;-vga none&quot; AND &quot;x-vga=on&quot; .</p><p>It booted just fine , GPU works as primary no problem . </p><p>Except for one big issue :</p><p>It doesn&#039;t detect either my VM&#039;s HDD nor ISOs .</p><p>So it goes like this :</p><p>EFI Floppy<br />EFI Floppy 1<br />EFI Misc Device<br />EFI Network</p><p>then it drops me to the UEFI shell .</p><p>Any reason why it didn&#039;t pickup my HDD or ISO images to boot from ?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461730">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461744" class="blockpost roweven"> <h2><span><span class="conr">#2841</span> <a href="viewtopic.php?pid=1461744#p1461744">2014-09-30 15:10:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Hey everyone .</p><p>So I&#039;m trying to use OVMF instead of SeaBIOS , I used ovmf-svn package from AUR and added the option &quot;-pflash /*path to ovmf_x64.bin*&quot; to my VM aguments . Also I deleted &quot;-vga none&quot; AND &quot;x-vga=on&quot; .</p><p>It booted just fine , GPU works as primary no problem . </p><p>Except for one big issue :</p><p>It doesn&#039;t detect either my VM&#039;s HDD nor ISOs .</p><p>So it goes like this :</p><p>EFI Floppy<br />EFI Floppy 1<br />EFI Misc Device<br />EFI Network</p><p>then it drops me to the UEFI shell .</p><p>Any reason why it didn&#039;t pickup my HDD or ISO images to boot from ?</p></div></blockquote></div><p>What interface are you using to expose them to the guest?&#160; IDE?&#160; AHCI?&#160; virtio?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461744">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461752" class="blockpost rowodd"> <h2><span><span class="conr">#2842</span> <a href="viewtopic.php?pid=1461752#p1461752">2014-09-30 15:47:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Hey everyone .</p><p>So I&#039;m trying to use OVMF instead of SeaBIOS , I used ovmf-svn package from AUR and added the option &quot;-pflash /*path to ovmf_x64.bin*&quot; to my VM aguments . Also I deleted &quot;-vga none&quot; AND &quot;x-vga=on&quot; .</p><p>It booted just fine , GPU works as primary no problem . </p><p>Except for one big issue :</p><p>It doesn&#039;t detect either my VM&#039;s HDD nor ISOs .</p><p>So it goes like this :</p><p>EFI Floppy<br />EFI Floppy 1<br />EFI Misc Device<br />EFI Network</p><p>then it drops me to the UEFI shell .</p><p>Any reason why it didn&#039;t pickup my HDD or ISO images to boot from ?</p></div></blockquote></div><p>What interface are you using to expose them to the guest?&#160; IDE?&#160; AHCI?&#160; virtio?</p></div></blockquote></div><p>Virtio for the HDD and IDE for the ISOs ... This is the entire command :</p><div class="codebox"><pre><code>qemu-system-x86_64 -name main -nographic \ -enable-kvm -M q35 -m 6000 -cpu Haswell,hv_time,hv_relaxed,hv_vapic,hv_spinlocks=0x1000,kvm=off -smp 2,sockets=1,cores=1,threads=2 \ -pflash /VMs/ovmf_x64.bin \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \ -drive file=/VMs/Win_Main.img,if=virtio,cache=none \ -drive file=/VMs/Win8.iso,id=isocd -device ide-cd,bus=ide.1,drive=isocd \ -drive file=/VMs/virtio.iso,id=isocd2 -device ide-cd,bus=ide.2,drive=isocd2 \ -net nic,model=virtio,macaddr=1c:2c:44:11:99:2d -net bridge,br=br0 \ -usb -usbdevice host:15d9:0a4f -usbdevice host:045e:0745 \ -localtime \ -monitor unix:/tmp/vm_main,server,nowait &amp;</code></pre></div> <p class="postedit"><em>Last edited by Denso (2014-09-30 15:48:15)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461752">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461757" class="blockpost roweven"> <h2><span><span class="conr">#2843</span> <a href="viewtopic.php?pid=1461757#p1461757">2014-09-30 15:54:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Virtio for the HDD and IDE for the ISOs ... This is the entire command :</p><div class="codebox"><pre><code>qemu-system-x86_64 -name main -nographic \ -enable-kvm -M q35 -m 6000 -cpu Haswell,hv_time,hv_relaxed,hv_vapic,hv_spinlocks=0x1000,kvm=off -smp 2,sockets=1,cores=1,threads=2 \ -pflash /VMs/ovmf_x64.bin \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \ -drive file=/VMs/Win_Main.img,if=virtio,cache=none \ -drive file=/VMs/Win8.iso,id=isocd -device ide-cd,bus=ide.1,drive=isocd \ -drive file=/VMs/virtio.iso,id=isocd2 -device ide-cd,bus=ide.2,drive=isocd2 \ -net nic,model=virtio,macaddr=1c:2c:44:11:99:2d -net bridge,br=br0 \ -usb -usbdevice host:15d9:0a4f -usbdevice host:045e:0745 \ -localtime \ -monitor unix:/tmp/vm_main,server,nowait &amp;</code></pre></div></div></blockquote></div><p>Any particular reason for using q35?&#160; When you get an EFI shell, do you have any disks available?&#160; EFI shell is just like DOS except the disk are named fs0:, fs1:, etc rather than C:, D:...&#160; If you have disks you can try to find a a boot EFI file and execute it.&#160; You can also try adding bootindex=# to each drive to try to force a boot order.&#160; I haven&#039;t had time yet to try to attempt a q35+ovmf install and I have little reason to switch from 440fx other than curiosity.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461757">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461759" class="blockpost rowodd"> <h2><span><span class="conr">#2844</span> <a href="viewtopic.php?pid=1461759#p1461759">2014-09-30 16:03:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Virtio for the HDD and IDE for the ISOs ... This is the entire command :</p><div class="codebox"><pre><code>qemu-system-x86_64 -name main -nographic \ -enable-kvm -M q35 -m 6000 -cpu Haswell,hv_time,hv_relaxed,hv_vapic,hv_spinlocks=0x1000,kvm=off -smp 2,sockets=1,cores=1,threads=2 \ -pflash /VMs/ovmf_x64.bin \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \ -drive file=/VMs/Win_Main.img,if=virtio,cache=none \ -drive file=/VMs/Win8.iso,id=isocd -device ide-cd,bus=ide.1,drive=isocd \ -drive file=/VMs/virtio.iso,id=isocd2 -device ide-cd,bus=ide.2,drive=isocd2 \ -net nic,model=virtio,macaddr=1c:2c:44:11:99:2d -net bridge,br=br0 \ -usb -usbdevice host:15d9:0a4f -usbdevice host:045e:0745 \ -localtime \ -monitor unix:/tmp/vm_main,server,nowait &amp;</code></pre></div></div></blockquote></div><p>Any particular reason for using q35?&#160; When you get an EFI shell, do you have any disks available?&#160; EFI shell is just like DOS except the disk are named fs0:, fs1:, etc rather than C:, D:...&#160; If you have disks you can try to find a a boot EFI file and execute it.&#160; You can also try adding bootindex=# to each drive to try to force a boot order.&#160; I haven&#039;t had time yet to try to attempt a q35+ovmf install and I have little reason to switch from 440fx other than curiosity.</p></div></blockquote></div><p>Tried 440fx , but it complains that it can&#039;t find &quot;pcie.0&quot; for the GPU . What am I missing ?</p><p>And no disks are found in UEFI (No fs# , just BLK# which are the floppies I think) .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461759">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461760" class="blockpost roweven"> <h2><span><span class="conr">#2845</span> <a href="viewtopic.php?pid=1461760#p1461760">2014-09-30 16:07:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Tried 440fx , but it complains that it can&#039;t find &quot;pcie.0&quot; for the GPU . What am I missing ?</p><p>And no disks are found in UEFI (No fs# , just BLK# which are the floppies I think) .</p></div></blockquote></div><p>This</p><div class="codebox"><pre><code>-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \</code></pre></div><p>Becomes this with 440fx:</p><div class="codebox"><pre><code>-device vfio-pci,host=05:00.0,addr=06.0,multifunction=on \ -device vfio-pci,host=05:00.1,addr=06.1 \ -device vfio-pci,host=00:1b.0,addr=7.0 \</code></pre></div><p>I picked arbitrary addresses, feel free to change them.</p> <p class="postedit"><em>Last edited by aw (2014-09-30 16:08:08)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461760">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461763" class="blockpost rowodd"> <h2><span><span class="conr">#2846</span> <a href="viewtopic.php?pid=1461763#p1461763">2014-09-30 16:18:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Tried 440fx , but it complains that it can&#039;t find &quot;pcie.0&quot; for the GPU . What am I missing ?</p><p>And no disks are found in UEFI (No fs# , just BLK# which are the floppies I think) .</p></div></blockquote></div><p>This</p><div class="codebox"><pre><code>-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \</code></pre></div><p>Becomes this with 440fx:</p><div class="codebox"><pre><code>-device vfio-pci,host=05:00.0,addr=06.0,multifunction=on \ -device vfio-pci,host=05:00.1,addr=06.1 \ -device vfio-pci,host=00:1b.0,addr=7.0 \</code></pre></div><p>I picked arbitrary addresses, feel free to change them.</p></div></blockquote></div><p>OK , it booted fine , but still no disks . Host is running on legacy BIOS , perhaps that&#039;s the reason ?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461763">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461764" class="blockpost roweven"> <h2><span><span class="conr">#2847</span> <a href="viewtopic.php?pid=1461764#p1461764">2014-09-30 16:24:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77651">noobman</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-13</span></dd> <dd><span>Posts: 21</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>et38 wrote:</cite><blockquote><div><div class="quotebox"><cite>noobman wrote:</cite><blockquote><div><p>About not being able to passthrough the onboard usb controllers, I also had that situation also with a gigabyte mobo, where apparently i could not pass any of the onboard usb controllers. None at all. What i found to be working was to disable the xhci controller entirelly, from bios. And then the passthrough was possible (for me), with either of the other remaining controllers, like a charm. Playing around with bios setup options for xhci and ehci paid off for me. Worth a try imo.</p></div></blockquote></div><p>I was looking at the passtrough setup with ga-z97x-u3dh. If it&#039;s working, why is the motherboard not recommended in the list?</p></div></blockquote></div><p>I had a bad experience with it, it has many issues. First off the one above, have to disable xhci entirelly from bios, from which point the 3.0 usb is not entirelly lost but become 2.0 instead, and then and only then one can passthrough other usb controllers (F7 bios). Not sure why its like that, i guess its probably due to a particular usb tree implementation. Also the latest bios i tried (F7 again) spilled some other errors so imo that bios is also bit broke. E.g. board gave &quot;cannot find upstream pcie&quot; an error like that, again i guess due to the pci arhitecture tree, but this last one got fixed i think in 3.17. Back few (1-2-3?) months ago i think stock kernels gave like 10+ different errors on it, researched and customized and patched one and got the number down. The uefi side threw some errors, and i disabled it also, but that is ok coz i just dont like uefi anyway. Also a number of strange errors when i iommu isolate MEI controller, something which i like to do and which should be fine but in this case wasnt. Dunno how it is now if there is any F8 bios or other fixes are in 3.17+ or not, because i made the system for a friend and its gone (so all comments are just from my memory), but otherwise its working with passthrough. Board on the overall also had many small issues which added up for me. Just to have an ideea, for example the warning for CPU max temp and fan are disabled as default settings (warnings or ctrl) so just by using bios default settings there is nothing that would prevent a catastrophe if the cpu gets to max temp and over it (e.g. if fan fails). For me those default settings show how much attention was given to the board. I think the board was among first z97 implementation and i think it simply got rushed over to launch. Quite some months ago i was looking for the latest, looked great on paper and specs, but a worse in practice so i just ended up as not happy with it. &quot;Not recommented &quot;is just that, a recommendation, just take it like that, you could get one and have your own and maybe different experience with it. But just saying this, if you want something specifially for passthrough and looking to buy, then simply why not get what the guy which does vfio have, like the 990FX which i think that is what aw has (?) not sure lol, but that paired with an 8 core cpu could be quite a performant option. But that is just a thought, nothing more. Mentioning coz that would be my choice right now, and most likely next time i will do exactly that.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461764">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461787" class="blockpost rowodd"> <h2><span><span class="conr">#2848</span> <a href="viewtopic.php?pid=1461787#p1461787">2014-09-30 18:05:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><p>Tried 440fx , but it complains that it can&#039;t find &quot;pcie.0&quot; for the GPU . What am I missing ?</p><p>And no disks are found in UEFI (No fs# , just BLK# which are the floppies I think) .</p></div></blockquote></div><p>This</p><div class="codebox"><pre><code>-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \</code></pre></div><p>Becomes this with 440fx:</p><div class="codebox"><pre><code>-device vfio-pci,host=05:00.0,addr=06.0,multifunction=on \ -device vfio-pci,host=05:00.1,addr=06.1 \ -device vfio-pci,host=00:1b.0,addr=7.0 \</code></pre></div><p>I picked arbitrary addresses, feel free to change them.</p></div></blockquote></div><p>OK , it booted fine , but still no disks . Host is running on legacy BIOS , perhaps that&#039;s the reason ?</p></div></blockquote></div><p>The host using legacy/UEFI BIOS is completely separate from the guest, I think it more likely has something to do with how you&#039;re specifying the disks.&#160; I typically specify an installation and virtio ISO like this:</p><div class="codebox"><pre><code>-drive file=/ISOs/msdn/en_windows_8.1_professional_n_vl_with_update_x64_dvd_4065208.iso,if=none,id=dvd0,media=cdrom \ -device ide-cd,drive=dvd0,bootindex=2 \ -drive file=/ISOs/virtio-win-0.1-74.iso,if=none,id=dvd1,media=cdrom \ -device ide-cd,drive=dvd1 \</code></pre></div><p>The guest disk should really look more like this:</p><div class="codebox"><pre><code>-drive file=/path/to/guest/disk.img,cache=none,if=none,id=drive0,aio=threads \ -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 \</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461787">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461795" class="blockpost roweven"> <h2><span><span class="conr">#2849</span> <a href="viewtopic.php?pid=1461795#p1461795">2014-09-30 18:37:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>This</p><div class="codebox"><pre><code>-device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=05:00.0,bus=root.1,addr=00.0,multifunction=on \ -device vfio-pci,host=05:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1b.0,bus=pcie.0 \</code></pre></div><p>Becomes this with 440fx:</p><div class="codebox"><pre><code>-device vfio-pci,host=05:00.0,addr=06.0,multifunction=on \ -device vfio-pci,host=05:00.1,addr=06.1 \ -device vfio-pci,host=00:1b.0,addr=7.0 \</code></pre></div><p>I picked arbitrary addresses, feel free to change them.</p></div></blockquote></div><p>OK , it booted fine , but still no disks . Host is running on legacy BIOS , perhaps that&#039;s the reason ?</p></div></blockquote></div><p>The host using legacy/UEFI BIOS is completely separate from the guest, I think it more likely has something to do with how you&#039;re specifying the disks.&#160; I typically specify an installation and virtio ISO like this:</p><div class="codebox"><pre><code>-drive file=/ISOs/msdn/en_windows_8.1_professional_n_vl_with_update_x64_dvd_4065208.iso,if=none,id=dvd0,media=cdrom \ -device ide-cd,drive=dvd0,bootindex=2 \ -drive file=/ISOs/virtio-win-0.1-74.iso,if=none,id=dvd1,media=cdrom \ -device ide-cd,drive=dvd1 \</code></pre></div><p>The guest disk should really look more like this:</p><div class="codebox"><pre><code>-drive file=/path/to/guest/disk.img,cache=none,if=none,id=drive0,aio=threads \ -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 \</code></pre></div></div></blockquote></div><p>Finally OVMF detected my Win8.iso , however trying to execute /EFI/BOOT/BOOTX64.EFI hangs the guest for 3 seconds then returns to the shell prompt .</p><p>Googling told me to execute that file to start the Windows installer&#160; : (</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461795">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1461797" class="blockpost rowodd"> <h2><span><span class="conr">#2850</span> <a href="viewtopic.php?pid=1461797#p1461797">2014-09-30 18:44:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85490">et38</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-29</span></dd> <dd><span>Posts: 3</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>noobman wrote:</cite><blockquote><div><p>But just saying this, if you want something specifially for passthrough and looking to buy, then simply why not get what the guy which does vfio have, like the 990FX which i think that is what aw has (?) not sure lol, but that paired with an 8 core cpu could be quite a performant option. But that is just a thought, nothing more. Mentioning coz that would be my choice right now, and most likely next time i will do exactly that.</p></div></blockquote></div><p>I&#039;ve been thinking (a lot) of an 8-core Amd system, but the power consumption difference (vs. Intel 4c+HT) is just annoying. I&#039;m just trying to see if there are any preferredly (Gigabyte/Asus/Z97/H97) motherboards offering relatively painless vga passthrough experience. Guests would probably be Steam OS / other dev distros.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1461797">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=113">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=112">112</a> <a href="viewtopic.php?id=162768&amp;p=113">113</a> <strong>114</strong> <a href="viewtopic.php?id=162768&amp;p=115">115</a> <a href="viewtopic.php?id=162768&amp;p=116">116</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=115">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
