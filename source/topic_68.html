<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 68) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=68" title="Page 68" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=67" title="Page 67" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=69" title="Page 69" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=67">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=66">66</a> <a href="viewtopic.php?id=162768&amp;p=67">67</a> <strong>68</strong> <a href="viewtopic.php?id=162768&amp;p=69">69</a> <a href="viewtopic.php?id=162768&amp;p=70">70</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=69">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1413986" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1676</span> <a href="viewtopic.php?pid=1413986#p1413986">2014-05-10 03:52:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>With Xen I did not have any issue running Passmark 8 - it just works. See my passmark results <a href="http://forums.linuxmint.com/viewtopic.php?f=225&amp;t=153482#p797962" rel="nofollow">here</a>.</p></div></blockquote></div><p>I notice in the CPU-z screen that Xen is reporting the CPU as family 6, model D.&#160; So that&#039;s not accurate either.&#160; It would be really interesting if you could change that model to match your physical CPU and see if Xen gets the same BSOD.&#160; I expect KVM would also work with -cpu SandyBridge,model=13 (aka &#039;D&#039; in decimal)</p><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>In that same thread I posted a CPU performance comparison between KVM and Xen, see <a href="http://forums.linuxmint.com/viewtopic.php?f=225&amp;t=153482&amp;p=856822#p856822" rel="nofollow">here</a>.</p></div></blockquote></div><p>Questionable comparison with one running in safemode.&#160; Safemode may exclude SSE, since you note it didn&#039;t run that test.&#160; I&#039;m confused though that your model is also listed as D under KVM, maybe my hypothesis is completely off.&#160; You also seem to have nested VT-x support enabled.&#160; Some here seem to think that hurts performance (I&#039;ve never tried it myself).&#160; To disable, unload and reload the kvm-intel module with nested=0 (modprobe -r kvm-intel; modprobe kvm-intel nested=0).</p></div></blockquote></div><p>I checked my CPU model and CPU-Z - whether running on KVM or Xen - does report it correctly. See <a href="http://www.cpu-world.com/cgi-bin/CompareCPUID.pl?CPUID=20720&amp;CPUID=18581&amp;CPUID=15883&amp;PROCESS=Compare+selected" rel="nofollow">cpu-world</a>. My CPU is a SandyBridge-E i7 3930K, C2 stepping.</p><p>From that I take that I should try -cpu SandyBridge,model=45</p><p>Unfortunately it might take me a couple of days until I can test again.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1413986">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414274" class="blockpost roweven"> <h2><span><span class="conr">#1677</span> <a href="viewtopic.php?pid=1414274#p1414274">2014-05-11 02:18:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi again. Everything working fine for me, but I met weird problem with my SATA controller passthrough:</p><div class="quotebox"><blockquote><div><p>05:00.0 SATA controller: ASMedia Technology Inc. ASM1062 Serial ATA Controller (rev 01)</p></div></blockquote></div><p>Everything working fine on Windows 8.1 guest, but with Ubuntu 12.04 or Windows 7 guest there is problem appear. First time VM booting just fine, but next time I VM stuck on boot for long time and then report &quot;Boot failed: could not read the boot disk&quot;. It&#039;s looks like both Ubuntu and Win7 don&#039;t reset controller properly on shutdown.</p><p>I find out that if I attach controller to ahci driver and back to vfio it&#039;s working fine again:</p><div class="codebox"><pre><code>echo &quot;1b21 0612&quot; &gt; /sys/bus/pci/drivers/ahci/new_id echo &quot;0000:05:00.0&quot; &gt; /sys/bus/pci/devices/0000\:05\:00.0/driver/unbind echo &quot;0000:05:00.0&quot; &gt; /sys/bus/pci/drivers/ahci/bind echo &quot;1b21 0612&quot; &gt; /sys/bus/pci/drivers/ahci/remove_id echo &quot;1b21 0612&quot; &gt; /sys/bus/pci/drivers/vfio-pci/new_id echo &quot;0000:05:00.0&quot; &gt; /sys/bus/pci/devices/0000\:05\:00.0/driver/unbind echo &quot;0000:05:00.0&quot; &gt; /sys/bus/pci/drivers/vfio-pci/bind echo &quot;1b21 0612&quot; &gt; /sys/bus/pci/drivers/vfio-pci/remove_id</code></pre></div><p>Is anyone else have same problem? Any solution for this?</p><p>PS: Full configuration of qemu VM:</p><div class="codebox"><pre class="vscroll"><code>qemu-system-x86_64 \ -name &quot;vm_vfio_pci&quot; \ \ -bios /usr/share/qemu/bios.bin \ -enable-kvm \ \ -M q35 \ \ -vga none \ -device qxl \ \ -m 5G \ \ -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ \ -net none \ \ -soundhw hda \ \ -usb \ -device usb-kbd \ -device usb-mouse \ \ \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=04:00.0,bus=pcie.0 \ -device vfio-pci,host=05:00.0,bus=pcie.0 \ \ -device virtio-scsi-pci,id=scsi \ -drive file=/opt/vm/win.iso,id=disk,format=qcow2 \ -device scsi-hd,drive=disk</code></pre></div> <p class="postedit"><em>Last edited by SXX (2014-05-11 02:19:49)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414274">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414340" class="blockpost rowodd"> <h2><span><span class="conr">#1678</span> <a href="viewtopic.php?pid=1414340#p1414340">2014-05-11 10:08:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81662">maduraa</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-01</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81662">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>maduraa wrote:</cite><blockquote><div><p>I saw on an online forum that some motherboards have the PCI slots behind a switch and they do not support passthrough, is this true?</p><div class="codebox"><pre><code>-[0000:00]-+-00.0 +-01.0-[01]--+-00.0 | \-00.1 +-02.0 +-03.0 +-14.0 +-16.0 +-1a.0 +-1b.0 +-1c.0-[02]-- +-1c.3-[03]----00.0 +-1c.7-[04]----00.0 +-1d.0 +-1f.0 +-1f.2 \-1f.3</code></pre></div><p>Is there any thing wrong in the about lspci -t output that&#039;d disqualify my board? 01:00.0, 01:00.1 are for VGA and VGA audio</p></div></blockquote></div><p>a) PCIe switches don&#039;t prevent device assigned, b) you don&#039;t have one.&#160; PCIe-to-PCI bridges mean that all the devices behind the bridge may need to be assigned together, which may include multiple slots... you don&#039;t have one of those either.</p></div></blockquote></div><p>Thanks aw, I tried the VGA arbiter patches but didn&#039;t see any output from the card, should I try 3.15?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414340">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414433" class="blockpost roweven"> <h2><span><span class="conr">#1679</span> <a href="viewtopic.php?pid=1414433#p1414433">2014-05-11 17:10:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81915">manjack</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, thanks for the great guide. I&#039;m kinda new here and arch linux.<br />I would like to ask if anything work fine, do i have to type those command every time i wanna start the VM?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414433">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414509" class="blockpost rowodd"> <h2><span><span class="conr">#1680</span> <a href="viewtopic.php?pid=1414509#p1414509">2014-05-11 21:18:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81928">jb660</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks nbhs for this excellent tutorial.</p><br /><p>I previously managed to successfully pass-through my video card but after formatting my desktop I can&#039;t make it work again.<br />When I try to launch the vm qemu starts without errors but nothing appears on the output of my graphics card .</p><p>I use all the packages given on the first post.<br />I have a GTX780 - i7 4770 (host GPU) - Asrock Z87 pro3</p><p>output of dmesg</p><div class="codebox"><pre><code>[ 1873.347383] vfio_ecap_init: 0000:04:00.0 hiding ecap 0x19@0x900</code></pre></div><p>output of lspci -v</p><div class="codebox"><pre><code>04:00.0 VGA compatible controller: NVIDIA Corporation GK110 [GeForce GTX 780] (rev a1) (prog-if 00 [VGA controller]) Subsystem: NVIDIA Corporation Device 104b Flags: fast devsel, IRQ 16 Memory at ea000000 (32-bit, non-prefetchable) [size=16M] Memory at e0000000 (64-bit, prefetchable) [size=128M] Memory at e8000000 (64-bit, prefetchable) [size=32M] I/O ports at e000 [size=128] Expansion ROM at eb000000 [disabled] [size=512K] Capabilities: &lt;access denied&gt; Kernel driver in use: vfio-pci Kernel modules: nouveau 04:00.1 Audio device: NVIDIA Corporation GK110 HDMI Audio (rev a1) Subsystem: NVIDIA Corporation Device 104b Flags: fast devsel, IRQ 17 Memory at eb080000 (32-bit, non-prefetchable) [size=16K] Capabilities: &lt;access denied&gt; Kernel driver in use: vfio-pci Kernel modules: snd_hda_intel</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414509">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414570" class="blockpost roweven"> <h2><span><span class="conr">#1681</span> <a href="viewtopic.php?pid=1414570#p1414570">2014-05-12 03:29:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@jb660: The nouveau driver is taking control of your video card. You should blacklist it. Also, I&#039;m not sure which method nbhs described in his tutorial, but I have seen good results with binding the graphics card to pci_stub using the initramfs method.</p><p>You could check that your pci_stub binding method is working by checking for USB hosts in lspci and binding one of it to pci_stub (preferable not the one with keyboard/mouse connected to it). Then check with lspci -v.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414570">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414571" class="blockpost rowodd"> <h2><span><span class="conr">#1682</span> <a href="viewtopic.php?pid=1414571#p1414571">2014-05-12 03:35:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>manjack wrote:</cite><blockquote><div><p>Hi, thanks for the great guide. I&#039;m kinda new here and arch linux.<br />I would like to ask if anything work fine, do i have to type those command every time i wanna start the VM?</p></div></blockquote></div><p>You can copy/paste the command into a file, put</p><div class="codebox"><pre><code>#!/bin/sh</code></pre></div><p> in the first line (or .../bash instead of .../sh), and make it executable. Voila, you got a shell script.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414571">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414593" class="blockpost roweven"> <h2><span><span class="conr">#1683</span> <a href="viewtopic.php?pid=1414593#p1414593">2014-05-12 06:07:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81928">jb660</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>@jb660: The nouveau driver is taking control of your video card. You should blacklist it. Also, I&#039;m not sure which method nbhs described in his tutorial, but I have seen good results with binding the graphics card to pci_stub using the initramfs method.</p><p>You could check that your pci_stub binding method is working by checking for USB hosts in lspci and binding one of it to pci_stub (preferable not the one with keyboard/mouse connected to it). Then check with lspci -v.</p></div></blockquote></div><p>The nouveau driver is already blacklisted <br />cat /etc/modprobe.d/blacklist.conf</p><div class="codebox"><pre><code>blacklist nouveau</code></pre></div><p>I use the pci-stub method and it seems to work as I have this output.</p><p>dmesg | grep stub</p><div class="codebox"><pre><code>[ 0.419737] pci-stub: add 10DE:1004 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.419744] pci-stub 0000:04:00.0: claimed by stub [ 0.419747] pci-stub: add 10DE:0E1A sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.419751] pci-stub 0000:04:00.1: claimed by stub</code></pre></div><p>and vfio-bind works without problems afterwards</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414593">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414626" class="blockpost rowodd"> <h2><span><span class="conr">#1684</span> <a href="viewtopic.php?pid=1414626#p1414626">2014-05-12 08:21:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81915">manjack</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><div class="quotebox"><cite>manjack wrote:</cite><blockquote><div><p>Hi, thanks for the great guide. I&#039;m kinda new here and arch linux.<br />I would like to ask if anything work fine, do i have to type those command every time i wanna start the VM?</p></div></blockquote></div><p>You can copy/paste the command into a file, put</p><div class="codebox"><pre><code>#!/bin/sh</code></pre></div><p> in the first line (or .../bash instead of .../sh), and make it executable. Voila, you got a shell script.</p></div></blockquote></div><br /><p>Many Thanks!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414626">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414819" class="blockpost roweven"> <h2><span><span class="conr">#1685</span> <a href="viewtopic.php?pid=1414819#p1414819">2014-05-12 18:29:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81948">thehighhat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-12</span></dd> <dd><span>Posts: 5</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>How do passthrough&#039;d devices get returned to the host?</p><br /><p>-----</p><p>Here is what I have:<br />&#160; mobo:&#160; Tyan S7025<br />&#160; kernel:&#160; 3.13<br />&#160; guest:&#160; windows 7 64bit&#160; <br />&#160; host vga:&#160; aspeed onboard graphics<br />&#160; pcie gpu:&#160; gtx470</p><p>Here is what I did:<br />&#160; set bios to enable vt-d<br />&#160; set bios to use onboard aspeed for host<br />&#160; no gui installed on linux host<br />&#160; ssh into linux host from another machine<br />&#160; blacklist nouveau <br />&#160; vfio_iommu_type1 allow_unsafe_interrupts=1<br />&#160; using vfio-bind script with the gtx470 lscpi values<br />&#160; started vm with this command</p><div class="codebox"><pre><code>qemu-system-x86_64 \ -enable-kvm \ -machine type=q35,accel=kvm \ -cpu host \ -smp cpus=4 \ -m 4G \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=04:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=00:b1.0 \ -drive file=/path/to/win7.raw,format=raw,cache=none,id=disk \ -device ide-hd,bus=ide.0,drive=disk \ -usb \ -usbdevice host:064d:c25b \ -bios /path/to/qemu/bios.bin \ -vga none \ -nographic \ -name &quot;vm-kvm&quot; </code></pre></div><p>&#160; attach monitor to gtx470</p><p>&#160; the usb keyboard was originally attached to host<br />&#160; &#160; this command assigns it to the guest<br />&#160; the onboard sound device is attached</p><br /><p>the vm runs perfectly.&#160; </p><p>except, after it shutdowns, two issues:</p><p>&#160; 1.&#160; how do reassign the usb keyboard and audio chipset back to the host<br />&#160; 2.&#160; how can reuse the graphics card.&#160; <br />&#160; &#160; &#160; &#160;2a.&#160; whenever I try to start the vm again i get error:</p><div class="codebox"><pre><code>qemu-system-x86_64: vfio-pci: Cannot read device rom at 0000:04:00.0 Device option ROM contents are probably invalid (check dmesg). Skip option ROM probe with rombar=0, or load from file with romfile=</code></pre></div><p>&#160; </p><p>thoughts?</p><br /><p>GPU passthrough of GTX470 to a Windows 7 guest</p> <p class="postedit"><em>Last edited by thehighhat (2014-05-14 20:14:20)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414819">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414825" class="blockpost rowodd"> <h2><span><span class="conr">#1686</span> <a href="viewtopic.php?pid=1414825#p1414825">2014-05-12 18:53:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>jb660 wrote:</cite><blockquote><div><div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>@jb660: The nouveau driver is taking control of your video card. You should blacklist it. Also, I&#039;m not sure which method nbhs described in his tutorial, but I have seen good results with binding the graphics card to pci_stub using the initramfs method.</p><p>You could check that your pci_stub binding method is working by checking for USB hosts in lspci and binding one of it to pci_stub (preferable not the one with keyboard/mouse connected to it). Then check with lspci -v.</p></div></blockquote></div><p>The nouveau driver is already blacklisted <br />cat /etc/modprobe.d/blacklist.conf</p><div class="codebox"><pre><code>blacklist nouveau</code></pre></div><p>I use the pci-stub method and it seems to work as I have this output.</p><p>dmesg | grep stub</p><div class="codebox"><pre><code>[ 0.419737] pci-stub: add 10DE:1004 sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.419744] pci-stub 0000:04:00.0: claimed by stub [ 0.419747] pci-stub: add 10DE:0E1A sub=FFFFFFFF:FFFFFFFF cls=00000000/00000000 [ 0.419751] pci-stub 0000:04:00.1: claimed by stub</code></pre></div><p>and vfio-bind works without problems afterwards</p></div></blockquote></div><p>Strange, so how come your lspci -v lists nouveau?</p><div class="codebox"><pre><code>Kernel modules: nouveau</code></pre></div> <p class="postedit"><em>Last edited by powerhouse (2014-05-12 18:54:18)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414825">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414900" class="blockpost roweven"> <h2><span><span class="conr">#1687</span> <a href="viewtopic.php?pid=1414900#p1414900">2014-05-12 23:37:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81794">Destroy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>This begins to take form but...<br />I could install windows 7 but at the last part when is detecting and configuring the hardware I got a BSOD error 0x00000116 with the file nvlddmkm.sys (nvidia driver).</p><p>As I say in my post 1655, my 1st&#160; video card is a buildin intel and the 2nd is a Nvidia 7600GT.</p><p>I was able to start windows removing the parameter &quot;-vga none&quot; and &quot;x-vga=on&quot;.it said In the proprieties of the Nvidia card&#160; that It does not have enough resources. I thought that installing the latest drivers for my video card it will work but still crash. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>The next thing I did was start windows in SAFE MODE. Windows finally start this are the resources that use:<br />nvidia 7600 gt<br />windows 7<br />interval<br />memory&#160; &#160; &#160;FB000000-FBFFFFFF<br />&#160; E0000000-EFFFFFFF<br />&#160; FC000000-FCFFFFFF<br />I/O&#160; &#160; C000-C07F<br />IRQ&#160; &#160; 10</p><p>My command line is</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,romfile=/media/800/destroy_varios/donwload2/virtualizacion/MSI.7600GT.256.060310.rom \ -bios /var/lib/libvirt/bios/seabios-hp2.bin \ -boot menu=on \ -device piix4-ide,bus=pcie.0,id=piix4-ide \ -drive file=/media/Utils/Sistemas\ Operativos/windows/win7.iso,id=isocd -device ide-cd,bus=piix4-ide.1,drive=isocd \ -drive file=/media/800/Virtual\ Machines/disks-virt/win7-A.qcow2,id=disk,format=qcow2 -device ide-hd,bus=piix4-ide.0,drive=disk \ -usb -usbdevice host:040b:2013 </code></pre></div><p>any idea? Please help</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414900">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1414954" class="blockpost rowodd"> <h2><span><span class="conr">#1688</span> <a href="viewtopic.php?pid=1414954#p1414954">2014-05-13 05:07:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Destroy wrote:</cite><blockquote><div><p>This begins to take form but...<br />I could install windows 7 but at the last part when is detecting and configuring the hardware I got a BSOD error 0x00000116 with the file nvlddmkm.sys (nvidia driver).</p><p>As I say in my post 1655, my 1st&#160; video card is a buildin intel and the 2nd is a Nvidia 7600GT.</p><p>I was able to start windows removing the parameter &quot;-vga none&quot; and &quot;x-vga=on&quot;.it said In the proprieties of the Nvidia card&#160; that It does not have enough resources. I thought that installing the latest drivers for my video card it will work but still crash. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>The next thing I did was start windows in SAFE MODE. Windows finally start this are the resources that use:<br />nvidia 7600 gt<br />windows 7<br />interval<br />memory&#160; &#160; &#160;FB000000-FBFFFFFF<br />&#160; E0000000-EFFFFFFF<br />&#160; FC000000-FCFFFFFF<br />I/O&#160; &#160; C000-C07F<br />IRQ&#160; &#160; 10</p><p>My command line is</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,romfile=/media/800/destroy_varios/donwload2/virtualizacion/MSI.7600GT.256.060310.rom \ -bios /var/lib/libvirt/bios/seabios-hp2.bin \ -boot menu=on \ -device piix4-ide,bus=pcie.0,id=piix4-ide \ -drive file=/media/Utils/Sistemas\ Operativos/windows/win7.iso,id=isocd -device ide-cd,bus=piix4-ide.1,drive=isocd \ -drive file=/media/800/Virtual\ Machines/disks-virt/win7-A.qcow2,id=disk,format=qcow2 -device ide-hd,bus=piix4-ide.0,drive=disk \ -usb -usbdevice host:040b:2013 </code></pre></div><p>any idea? Please help</p></div></blockquote></div><p>I was about to write how I installed a 7300LE in my system and it seems to be running just fine... but then the VM hung refreshing the Windows experience index.&#160; Repeatedly.&#160; It does seem to run the Heaven benchmark though, very, very slowly, and some parts it just doesn&#039;t render correctly.&#160; Nvidia doesn&#039;t even support 7-series cards anymore and cards with better performance can be bought for $10US.&#160; Anyway,&#160; my experience seems better than yours.&#160; I&#039;m running an upstream 3.15-rc4 kernel with the i915 patches plus stock Fedora qemu-kvm-2.0.0-4.fc20.x86_64.&#160; I&#039;ve been having quite a bit of success using the default 440FX QEMU machine:</p><div class="codebox"><pre><code>#!/bin/sh -x virsh nodedev-detach pci_0000_01_00_0 QEMU=/bin/qemu-kvm QEMU_AUDIO_DRV=pa \ $QEMU \ -enable-kvm -rtc base=localtime \ -m 4g -smp sockets=1,cores=2 -cpu host,hv-time \ -vga none -nographic \ -monitor stdio \ -nodefconfig \ -device intel-hda -device hda-output \ -device vfio-pci,host=1:00.0,x-vga=on \ -netdev tap,id=br0,vhost=on \ -device virtio-net-pci,mac=02:12:34:56:78:91,netdev=br0 \ -drive file=/dev/vg_vm/lv_win7_nvidia,cache=none,if=none,id=win7,aio=native \ -device virtio-blk-pci,drive=win7,bootindex=0 virsh nodedev-reattach pci_0000_01_00_0</code></pre></div><p>Also, if you need Marvell SATA patches, try my dma-alias-v3 branch at git://github.com/awilliam/linux-vfio.git</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1414954">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415166" class="blockpost roweven"> <h2><span><span class="conr">#1689</span> <a href="viewtopic.php?pid=1415166#p1415166">2014-05-13 18:41:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80088">pereczes</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-08</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>hi, not really pci passthrough, but related. Bought this DisplayLink AOC monitor, and unfortunately I am victim of superficial information about availability of linux drivers. That would be still ok, but the real disaster is that I cannot use the Displaylink in a virtual machine. Funny enough under Virtualbox it complains that it cannot work with the primary card, but under kvm/qemu it tries to turn on the monitor, it seems like the backlight is on but that is all. Anybody any experience with this DisplayLink in virtual machine? I know that AOC stated that it would not work... nevertheless...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415166">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415168" class="blockpost rowodd"> <h2><span><span class="conr">#1690</span> <a href="viewtopic.php?pid=1415168#p1415168">2014-05-13 18:49:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>pereczes wrote:</cite><blockquote><div><p>hi, not really pci passthrough, but related. Bought this DisplayLink AOC monitor, and unfortunately I am victim of superficial information about availability of linux drivers. That would be still ok, but the real disaster is that I cannot use the Displaylink in a virtual machine. Funny enough under Virtualbox it complains that it cannot work with the primary card, but under kvm/qemu it tries to turn on the monitor, it seems like the backlight is on but that is all. Anybody any experience with this DisplayLink in virtual machine? I know that AOC stated that it would not work... nevertheless...</p></div></blockquote></div><p>It&#039;s just a USB device, right?&#160; You might need to expose a USB 2 or 3 controller to the guest for it to work with USB passthrough.&#160; Otherwise, I don&#039;t see why it wouldn&#039;t work with an assigned PCI USB2+ controller.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415168">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415169" class="blockpost roweven"> <h2><span><span class="conr">#1691</span> <a href="viewtopic.php?pid=1415169#p1415169">2014-05-13 18:56:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80088">pereczes</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-08</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>pereczes wrote:</cite><blockquote><div><p>hi, not really pci passthrough, but related. Bought this DisplayLink AOC monitor, and unfortunately I am victim of superficial information about availability of linux drivers. That would be still ok, but the real disaster is that I cannot use the Displaylink in a virtual machine. Funny enough under Virtualbox it complains that it cannot work with the primary card, but under kvm/qemu it tries to turn on the monitor, it seems like the backlight is on but that is all. Anybody any experience with this DisplayLink in virtual machine? I know that AOC stated that it would not work... nevertheless...</p></div></blockquote></div><p>It&#039;s just a USB device, right?&#160; You might need to expose a USB 2 or 3 controller to the guest for it to work with USB pass-through.&#160; Otherwise, I don&#039;t see why it wouldn&#039;t work with an assigned PCI USB2+ controller.</p></div></blockquote></div><p>You see... that was my reasoning as well, easy to go in wrong direction. The problem that these b*tards look at the graphic card. They seem to attach to the graphic card like a mushroom or other parasite, extract the liquid and send it USB <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415169">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415171" class="blockpost rowodd"> <h2><span><span class="conr">#1692</span> <a href="viewtopic.php?pid=1415171#p1415171">2014-05-13 18:57:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>pereczes wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>pereczes wrote:</cite><blockquote><div><p>hi, not really pci passthrough, but related. Bought this DisplayLink AOC monitor, and unfortunately I am victim of superficial information about availability of linux drivers. That would be still ok, but the real disaster is that I cannot use the Displaylink in a virtual machine. Funny enough under Virtualbox it complains that it cannot work with the primary card, but under kvm/qemu it tries to turn on the monitor, it seems like the backlight is on but that is all. Anybody any experience with this DisplayLink in virtual machine? I know that AOC stated that it would not work... nevertheless...</p></div></blockquote></div><p>It&#039;s just a USB device, right?&#160; You might need to expose a USB 2 or 3 controller to the guest for it to work with USB pass-through.&#160; Otherwise, I don&#039;t see why it wouldn&#039;t work with an assigned PCI USB2+ controller.</p></div></blockquote></div><p>You see... that was my reasoning as well, easy to go in wrong direction. The problem that these b*tards look at the graphic card. They seem to attach to the graphic card like a mushroom or other parasite, extract the liquid and send it USB <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> .</p></div></blockquote></div><p>Ugh.&#160; Send it back</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415171">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415185" class="blockpost roweven"> <h2><span><span class="conr">#1693</span> <a href="viewtopic.php?pid=1415185#p1415185">2014-05-13 19:52:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81928">jb660</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>powerhouse wrote:</cite><blockquote><div><p>...</p><p>Strange, so how come your lspci -v lists nouveau?</p><div class="codebox"><pre><code>Kernel modules: nouveau</code></pre></div></div></blockquote></div><p>I think that is the standard behaviour ( <a href="https://bbs.archlinux.org/viewtopic.php?pid=1373419#p1373419" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 9#p1373419</a> )</p><p>moreover </p><div class="codebox"><pre><code>lsmod | grep nouveau</code></pre></div><p> does not return anything</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415185">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415287" class="blockpost rowodd"> <h2><span><span class="conr">#1694</span> <a href="viewtopic.php?pid=1415287#p1415287">2014-05-14 01:47:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81794">Destroy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>jb660 wrote:</cite><blockquote><div><p>I previously managed to successfully pass-through my video card but after formatting my desktop I can&#039;t make it work again.<br />When I try to launch the vm qemu starts without errors but nothing appears on the output of my graphics card .</p></div></blockquote></div><p>This happened to my too. Only the first time the VM seems fine, the next call nothing appear until I added the rom of the video card</p><div class="codebox"><pre><code>....,x-vga=on,romfile=/media/800/destroy_varios/donwload2/virtualizacion/MSI.7600GT.256.060310.rom</code></pre></div><div class="quotebox"><cite>jb660 wrote:</cite><blockquote><div><p>output of lspci -v</p><div class="codebox"><pre><code>04:00.0 VGA compatible controller: NVIDIA Corporation GK110 [GeForce GTX 780] (rev a1) (prog-if 00 [VGA controller]) Subsystem: NVIDIA Corporation Device 104b Flags: fast devsel, IRQ 16 Memory at ea000000 (32-bit, non-prefetchable) [size=16M] Memory at e0000000 (64-bit, prefetchable) [size=128M] Memory at e8000000 (64-bit, prefetchable) [size=32M] I/O ports at e000 [size=128] Expansion ROM at eb000000 [disabled] [size=512K] Capabilities: &lt;access denied&gt; Kernel driver in use: vfio-pci Kernel modules: nouveau</code></pre></div></div></blockquote></div><p>powerhouse is incorrect, here you have 2 lines:<br /> Kernel driver in use: vfio-pci - is saying you current driver<br />Kernel modules: nouveau - is saying that this driver could use your hardware</p><p>but this is weird: Capabilities: &lt;access denied&gt;</p> <p class="postedit"><em>Last edited by Destroy (2014-05-14 02:13:47)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415287">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415292" class="blockpost roweven"> <h2><span><span class="conr">#1695</span> <a href="viewtopic.php?pid=1415292#p1415292">2014-05-14 02:11:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81794">Destroy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>I was about to write how I installed a 7300LE in my system and it seems to be running just fine... but then the VM hung refreshing the Windows experience index.&#160; Repeatedly.&#160; It does seem to run the Heaven benchmark though, very, very slowly, and some parts it just doesn&#039;t render correctly.&#160; Nvidia doesn&#039;t even support 7-series cards anymore and cards with better performance can be bought for $10US.&#160; Anyway,&#160; my experience seems better than yours.&#160; I&#039;m running an upstream 3.15-rc4 kernel with the i915 patches plus stock Fedora qemu-kvm-2.0.0-4.fc20.x86_64.&#160; I&#039;ve been having quite a bit of success using the default 440FX QEMU machine:</p></div></blockquote></div><p>I have upgraded to qemu-2 and now the VM start fine <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="codebox"><pre><code>#!/bin/sh -x virsh nodedev-detach pci_0000_01_00_0 QEMU=/bin/qemu-kvm QEMU_AUDIO_DRV=pa \ $QEMU \ -enable-kvm -rtc base=localtime \ -m 4g -smp sockets=1,cores=2 -cpu host,hv-time \ -vga none -nographic \ -monitor stdio \ -nodefconfig \ -device intel-hda -device hda-output \ -device vfio-pci,host=1:00.0,x-vga=on \ -netdev tap,id=br0,vhost=on \ -device virtio-net-pci,mac=02:12:34:56:78:91,netdev=br0 \ -drive file=/dev/vg_vm/lv_win7_nvidia,cache=none,if=none,id=win7,aio=native \ -device virtio-blk-pci,drive=win7,bootindex=0 virsh nodedev-reattach pci_0000_01_00_0</code></pre></div></div></blockquote></div><p>What are the advantages of &quot;rtc base=localtime&quot;, &quot;-monitor stdio&quot; &quot;-nodefconfig&quot; and &quot;hv-time&quot;?</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Also, if you need Marvell SATA patches, try my dma-alias-v3 branch at git://github.com/awilliam/linux-vfio.git</p></div></blockquote></div><p>do you have a patch file? I don&#039;t know how to get it for linux-3.14.2. I have never used git before.</p><p>Nevertheless I am able to boot windows correctly without BSOD but after I tried to run the test using Passmark PerformanceTest benchmark I got another BSOD now with DirectIO64 file. <br />I think this is the same problem that have powerhouse.</p><p>I&#039;ll try this later</p><div class="codebox"><pre><code>echo &quot;options kvm ignore_msrs=1&quot; &gt;&gt; /etc/modprobe.d/kvm.conf</code></pre></div><p>More news tomorrow</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415292">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415315" class="blockpost rowodd"> <h2><span><span class="conr">#1696</span> <a href="viewtopic.php?pid=1415315#p1415315">2014-05-14 06:22:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81794">Destroy</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 10</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>It&#039;s working!!!</p><p>thanks for this</p><div class="codebox"><pre><code>echo &quot;options kvm ignore_msrs=1&quot; &gt;&gt; /etc/modprobe.d/kvm.conf</code></pre></div><p>The Windows 7 experience runs fully and give me a 5.1 because my video card <br />Also running&#160; Passmark PerformanceTest does not crash the system, <br />meanwhile in the host dmesg shows</p><div class="codebox"><pre class="vscroll"><code>[ 8805.345943] kvm [2308]: vcpu0 ignored rdmsr: 0xce [10525.815384] kvm [2308]: vcpu0 ignored rdmsr: 0xce [10525.819608] kvm [2308]: vcpu0 ignored rdmsr: 0xe8 [10525.823808] kvm [2308]: vcpu0 ignored rdmsr: 0xe8 [10525.823819] kvm [2308]: vcpu0 ignored rdmsr: 0xe7 [10525.828023] kvm [2308]: vcpu0 ignored rdmsr: 0xe7 [10525.828045] kvm [2308]: vcpu0 ignored rdmsr: 0x31 [10525.828049] kvm [2308]: vcpu0 ignored rdmsr: 0x35 [10525.828052] kvm [2308]: vcpu0 ignored rdmsr: 0x39 [10525.828068] kvm [2308]: vcpu0 ignored rdmsr: 0xce [10525.828071] kvm [2308]: vcpu0 ignored rdmsr: 0x1ad [10531.211800] kvm_get_msr_common: 56 callbacks suppressed [10531.211805] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10531.211811] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10531.211897] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10531.211972] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10531.726573] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10531.726581] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10531.726664] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10531.726739] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10532.241382] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10532.241391] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10536.359825] kvm_get_msr_common: 30 callbacks suppressed [10536.359830] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10536.359836] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10536.359921] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10536.359995] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10536.874625] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10536.874633] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10536.874718] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10536.874793] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10537.389450] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10537.389459] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10541.507914] kvm_get_msr_common: 30 callbacks suppressed [10541.507919] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10541.507926] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10541.508012] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10541.508087] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10542.032144] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10542.032152] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10542.032232] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10542.032302] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10542.553052] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10542.553060] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10546.671482] kvm_get_msr_common: 30 callbacks suppressed [10546.671487] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10546.671494] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10546.671578] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10546.671653] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10547.186743] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10547.186749] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10547.186800] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10547.186845] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10547.701166] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10547.701176] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10551.819542] kvm_get_msr_common: 30 callbacks suppressed [10551.819547] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10551.819554] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10551.819685] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10551.820311] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10552.334294] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10552.334303] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10552.334386] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10552.334472] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10552.849163] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10552.849172] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10556.967604] kvm_get_msr_common: 30 callbacks suppressed [10556.967609] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10556.967616] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10556.967701] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10556.967775] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10557.482480] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10557.482489] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10557.482588] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10557.482713] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10557.997470] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10557.997479] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10562.115632] kvm_get_msr_common: 30 callbacks suppressed [10562.115637] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10562.115643] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10562.115728] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10562.115801] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10562.630407] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10562.630416] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10562.630499] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10562.630588] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10563.145239] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10563.145247] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10567.263657] kvm_get_msr_common: 30 callbacks suppressed [10567.263661] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10567.263667] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10567.263754] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10567.263828] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10567.778420] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10567.778430] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10567.778517] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10567.778607] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10568.293303] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10568.293312] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10572.411700] kvm_get_msr_common: 30 callbacks suppressed [10572.411704] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10572.411711] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10572.411797] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10572.411871] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10572.926492] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10572.926502] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10572.926587] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10572.926783] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10573.446144] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10573.446153] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10577.575379] kvm_get_msr_common: 30 callbacks suppressed [10577.575384] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10577.575391] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10577.575475] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10577.575549] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10578.090146] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10578.090155] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10578.090241] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10578.090315] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10578.604912] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10578.604921] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10582.723344] kvm_get_msr_common: 30 callbacks suppressed [10582.723348] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10582.723355] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10582.723439] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10582.723514] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10583.238144] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10583.238153] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10583.238743] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10583.238969] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10583.757245] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10583.757253] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10587.871387] kvm_get_msr_common: 30 callbacks suppressed [10587.871391] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10587.871398] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10587.871482] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10587.871556] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10588.386205] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10588.386214] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10588.386298] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10588.386371] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10588.901250] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10588.901259] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10593.019411] kvm_get_msr_common: 30 callbacks suppressed [10593.019415] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10593.019422] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10593.019506] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10593.019630] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10593.534219] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10593.534229] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10593.534358] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10593.534432] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10594.049187] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10594.049196] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10598.183053] kvm_get_msr_common: 30 callbacks suppressed [10598.183058] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10598.183064] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10598.183149] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10598.183223] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10598.697835] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10598.697843] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10598.697928] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10598.698002] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10599.212738] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10599.212747] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10603.331055] kvm_get_msr_common: 30 callbacks suppressed [10603.331059] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10603.331066] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10603.331151] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10603.331224] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10603.845911] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10603.845920] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10603.846006] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10603.846137] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10604.360691] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10604.360701] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10608.494737] kvm_get_msr_common: 30 callbacks suppressed [10608.494742] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10608.494749] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10608.494833] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10608.494922] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10609.009558] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10609.009567] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10609.009649] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10609.009722] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10609.524341] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10609.524350] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10613.649505] kvm_get_msr_common: 30 callbacks suppressed [10613.649510] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10613.649516] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10613.649637] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10613.649707] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10614.177452] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10614.177460] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10614.177539] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10614.177609] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10614.687996] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10614.688004] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10618.806408] kvm_get_msr_common: 30 callbacks suppressed [10618.806413] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10618.806419] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10618.806503] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10618.806769] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10619.321199] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10619.321208] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10619.321293] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10619.321367] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10619.835983] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10619.835992] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10623.954401] kvm_get_msr_common: 30 callbacks suppressed [10623.954406] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10623.954412] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10623.954496] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10623.954570] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10624.469241] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10624.469250] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10624.469334] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10624.469408] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10624.984063] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10624.984072] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10629.102434] kvm_get_msr_common: 30 callbacks suppressed [10629.102438] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10629.102445] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10629.102528] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10629.102602] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10629.617282] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10629.617291] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10629.617376] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10629.617449] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10630.132252] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10630.132260] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10634.266098] kvm_get_msr_common: 30 callbacks suppressed [10634.266103] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10634.266110] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10634.266228] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10634.266862] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10634.780919] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10634.780928] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10634.781013] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10634.781103] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10635.300753] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10635.300761] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10639.429779] kvm_get_msr_common: 30 callbacks suppressed [10639.429783] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10639.429790] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10639.429875] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10639.429950] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10639.944542] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10639.944551] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10639.944636] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10639.944709] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10640.459346] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10640.459355] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10644.577795] kvm_get_msr_common: 30 callbacks suppressed [10644.577799] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10644.577806] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10644.577888] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10644.577962] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10645.092611] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10645.092620] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10645.092774] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10645.092849] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10645.611679] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10645.611687] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10649.725820] kvm_get_msr_common: 30 callbacks suppressed [10649.725824] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10649.725831] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10649.725966] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10649.726589] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10650.240613] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10650.240621] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10650.240748] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10650.240820] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10650.755402] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10650.755411] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10654.874206] kvm_get_msr_common: 30 callbacks suppressed [10654.874210] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10654.874217] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10654.874303] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10654.874376] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10655.388652] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10655.388661] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10655.388747] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10655.388821] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10655.903505] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10655.903515] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10660.021885] kvm_get_msr_common: 30 callbacks suppressed [10660.021889] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10660.021896] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10660.021981] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10660.022055] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10660.536674] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10660.536682] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10660.536767] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10660.536841] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10661.051499] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10661.051508] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10665.169926] kvm_get_msr_common: 30 callbacks suppressed [10665.169930] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10665.169937] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10665.170021] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10665.170096] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10665.684738] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10665.684748] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10665.685339] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10665.685436] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10666.199504] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10666.199513] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10670.333574] kvm_get_msr_common: 30 callbacks suppressed [10670.333579] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10670.333585] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10670.333669] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10670.333798] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10670.848386] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10670.848394] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10670.848528] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10670.848602] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10671.363159] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10671.363169] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10675.481562] kvm_get_msr_common: 30 callbacks suppressed [10675.481567] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10675.481573] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10675.481669] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10675.481743] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10675.996663] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10675.996673] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10675.996755] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10675.996829] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10676.511176] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10676.511184] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10680.629924] kvm_get_msr_common: 30 callbacks suppressed [10680.629929] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10680.629936] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10680.630020] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10680.630094] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10681.144424] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10681.144434] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10681.145031] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10681.145188] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10681.659228] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10681.659237] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10685.777657] kvm_get_msr_common: 30 callbacks suppressed [10685.777662] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10685.777668] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10685.777801] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10685.777875] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10686.292426] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10686.292435] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10686.292519] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10686.292594] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10686.807295] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10686.807305] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10690.925679] kvm_get_msr_common: 30 callbacks suppressed [10690.925683] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10690.925690] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10690.925775] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10690.925850] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10691.440495] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10691.440504] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10691.440629] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10691.440704] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10691.955308] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10691.955317] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10696.073708] kvm_get_msr_common: 30 callbacks suppressed [10696.073712] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10696.073719] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10696.073806] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10696.073880] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10696.588536] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10696.588545] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10696.588630] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10696.588754] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10697.103308] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10697.103317] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10701.246230] kvm_get_msr_common: 30 callbacks suppressed [10701.246234] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10701.246241] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10701.246357] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10701.246431] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10701.767725] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10701.767733] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10701.767812] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10701.767881] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10702.282606] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10702.282616] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10706.401172] kvm_get_msr_common: 30 callbacks suppressed [10706.401177] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10706.401183] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10706.401268] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10706.401341] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10706.915828] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10706.915837] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10706.915925] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10706.915999] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10707.430601] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10707.430610] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10711.549035] kvm_get_msr_common: 30 callbacks suppressed [10711.549040] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10711.549046] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10711.549131] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10711.549205] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10712.064015] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10712.064023] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10712.064107] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10712.064181] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10712.578612] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10712.578622] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10716.697039] kvm_get_msr_common: 30 callbacks suppressed [10716.697044] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10716.697051] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10716.697135] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10716.697208] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10717.211880] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10717.211890] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10717.212004] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10717.212078] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10717.726689] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10717.726698] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10721.845098] kvm_get_msr_common: 30 callbacks suppressed [10721.845103] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10721.845110] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10721.845193] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10721.845266] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10722.360083] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10722.360091] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10722.360207] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10722.360280] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10722.874715] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10722.874724] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10726.993455] kvm_get_msr_common: 30 callbacks suppressed [10726.993459] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10726.993466] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10726.993551] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10726.993626] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10727.507937] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10727.507945] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10727.508030] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10727.508104] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10728.022716] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10728.022724] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10732.156819] kvm_get_msr_common: 30 callbacks suppressed [10732.156824] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10732.156831] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10732.156917] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10732.157626] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10732.671554] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10732.671563] kvm [2308]: vcpu0 ignored rdmsr: 0x611 [10732.671649] kvm [2308]: vcpu0 ignored rdmsr: 0x639 [10732.671800] kvm [2308]: vcpu0 ignored rdmsr: 0x641 [10733.186383] kvm [2308]: vcpu0 ignored rdmsr: 0x1a2 [10733.186393] kvm [2308]: vcpu0 ignored rdmsr: 0x611</code></pre></div><p>The bad things are the result in the Passmark PerformanceTest for my Intel i5 3330 (using 1 core and 1 thread), the video card Nvidia 7600GT seems in the range. I don&#039;t know what thing about the memory test. <br />CPU Mark: 1633<br />2D Graphics Mark: 571<br />3D Graphics Mark: 185.5<br />Memory Mark: 1693<br />Disk Mark: 1151</p><p>Using</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 2048 -cpu host \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on,romfile=/media/800/destroy_varios/donwload2/virtualizacion/MSI.7600GT.256.060310.rom \ -bios /var/lib/libvirt/bios/seabios-hp2.bin \ -vnc 127.0.0.1:0 -vga none \ -boot menu=on \ -device piix4-ide,bus=pcie.0,id=piix4-ide \ -drive file=/media/800/Virtual\ Machines/disks-virt/win7-A.qcow2,id=disk,format=qcow2 -device ide-hd,bus=piix4-ide.0,drive=disk \ -usb -usbdevice host:040b:2013 </code></pre></div> <p class="postedit"><em>Last edited by Destroy (2014-05-14 06:26:37)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415315">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415406" class="blockpost roweven"> <h2><span><span class="conr">#1697</span> <a href="viewtopic.php?pid=1415406#p1415406">2014-05-14 13:42:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81915">manjack</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-11</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>hi guys, i got the following error when compiling qemu</p><div class="codebox"><pre class="vscroll"><code>/home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:315:31: note: in expansion of macro ‘__put_user_e’ # define __put_user(x, hptr) __put_user_e(x, hptr, le) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/syscall.c:6958:17: note: in expansion of macro ‘__put_user’ __put_user(value.freeswap, &amp;target_value-&gt;freeswap); ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:301:19: error: right-hand operand of comma expression has no effect [-Werror=unused-value] ((hptr), (x)), 0) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:315:31: note: in expansion of macro ‘__put_user_e’ # define __put_user(x, hptr) __put_user_e(x, hptr, le) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/syscall.c:6959:17: note: in expansion of macro ‘__put_user’ __put_user(value.procs, &amp;target_value-&gt;procs); ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:301:19: error: right-hand operand of comma expression has no effect [-Werror=unused-value] ((hptr), (x)), 0) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:315:31: note: in expansion of macro ‘__put_user_e’ # define __put_user(x, hptr) __put_user_e(x, hptr, le) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/syscall.c:6960:17: note: in expansion of macro ‘__put_user’ __put_user(value.totalhigh, &amp;target_value-&gt;totalhigh); ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:301:19: error: right-hand operand of comma expression has no effect [-Werror=unused-value] ((hptr), (x)), 0) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:315:31: note: in expansion of macro ‘__put_user_e’ # define __put_user(x, hptr) __put_user_e(x, hptr, le) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/syscall.c:6961:17: note: in expansion of macro ‘__put_user’ __put_user(value.freehigh, &amp;target_value-&gt;freehigh); ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:301:19: error: right-hand operand of comma expression has no effect [-Werror=unused-value] ((hptr), (x)), 0) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/qemu.h:315:31: note: in expansion of macro ‘__put_user_e’ # define __put_user(x, hptr) __put_user_e(x, hptr, le) ^ /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/linux-user/syscall.c:6962:17: note: in expansion of macro ‘__put_user’ __put_user(value.mem_unit, &amp;target_value-&gt;mem_unit); ^ cc1: all warnings being treated as errors /home/manjack/Downloads/qemu-git/src/qemu-git-2.0.r32705.gf30d56e/rules.mak:33: recipe for target &#039;linux-user/syscall.o&#039; failed make[1]: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_6.html topic_7.html topic_8.html topic_9.html [linux-user/syscall.o] Error 1 Makefile:163: recipe for target &#039;subdir-aarch64-linux-user&#039; failed make: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_66.html topic_67.html topic_6.html topic_7.html topic_8.html topic_9.html [subdir-aarch64-linux-user] Error 2 ==&gt; ERROR: A failure occurred in build(). Aborting...</code></pre></div><p>can anyone help please?</p> <p class="postedit"><em>Last edited by manjack (2014-05-15 11:47:48)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415406">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415445" class="blockpost rowodd"> <h2><span><span class="conr">#1698</span> <a href="viewtopic.php?pid=1415445#p1415445">2014-05-14 15:18:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=27289">ewaller</a></strong></dt> <dd class="usertitle"><strong>Forum Moderator</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/27289.jpg?m=1406180442" width="80" height="80" alt="" /></dd> <dd><span>From: Pasadena, CA</span></dd> <dd><span>Registered: 2009-07-13</span></dd> <dd><span>Posts: 10,547</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=27289">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Every time a member posts program output without using <a href="https://bbs.archlinux.org/help.php#bbcode" rel="nofollow">BBCode</a> [ code] tags God kills a kitten.<br />Please fix your post.&#160; There is also a link to the BBCode help under every message post box on the forums.</p> <p class="postedit"><em>Last edited by ewaller (2014-05-14 15:18:45)</em></p> </div> <div class="postsignature postmsg"><hr /><p>Nothing is too wonderful to be true, if it be consistent with the laws of nature -- <em>Michael Faraday</em><br />Like you, I have no idea what you are doing, but I am pretty sure it is wrong...<em>Jasonwryan</em><br />----<br /><a href="http://www.catb.org/~esr/faqs/smart-questions.html" rel="nofollow">How to Ask Questions the Smart Way</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415445">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415450" class="blockpost roweven"> <h2><span><span class="conr">#1699</span> <a href="viewtopic.php?pid=1415450#p1415450">2014-05-14 15:25:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=27289">ewaller</a></strong></dt> <dd class="usertitle"><strong>Forum Moderator</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/27289.jpg?m=1406180442" width="80" height="80" alt="" /></dd> <dd><span>From: Pasadena, CA</span></dd> <dd><span>Registered: 2009-07-13</span></dd> <dd><span>Posts: 10,547</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=27289">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Are those the first errors?&#160; Can you capture the entire output and post it to pastebin and provide us a link?<br />How are you compiling it?&#160; Are you using <em>makepkg</em>, or are you using something like&#160; <em>config</em> and <em>make install</em> ?</p> </div> <div class="postsignature postmsg"><hr /><p>Nothing is too wonderful to be true, if it be consistent with the laws of nature -- <em>Michael Faraday</em><br />Like you, I have no idea what you are doing, but I am pretty sure it is wrong...<em>Jasonwryan</em><br />----<br /><a href="http://www.catb.org/~esr/faqs/smart-questions.html" rel="nofollow">How to Ask Questions the Smart Way</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415450">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1415657" class="blockpost rowodd"> <h2><span><span class="conr">#1700</span> <a href="viewtopic.php?pid=1415657#p1415657">2014-05-15 03:54:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71524">powerhouse</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-05-22</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71524">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@jb660: Destroy is right - the &quot;Driver in use&quot; is what counts.</p><p>@Destroy: Good to know that it works now, and that you can run Passmark Performance Test. Need to try it (perhaps on Sunday I&#039;ll have a little time).</p><p>Was it upgrading to qemu 2 that did the trick with booting the VM?</p><p>About using only one VCPU: I noticed that you don&#039;t have any</p><div class="codebox"><pre><code>smp sockets=...,cores=...</code></pre></div><p>option.</p><p>@aw: Your VM startup script uses virsh nodedev-detach pci_0000_01_00_0 and virsh nodedev-reattach pci_0000_01_00_0 to detach and later reattach the graphics card. Does the reattach command reset the graphics card, and/or make it available to the host? Are these virsh commands in lieu of binding the card to pci-stub?</p><p>Now to the qemu / kvm command options: Aside from running --help and getting a shortlist of options, is there any source of information on the many command line options that are used?</p><p>Perhaps I&#039;m too stupid or incapable of doing a Google search, but I get a feeling I&#039;m being kept in the dark. Can someone point me to a (concise) source of information?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1415657">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=67">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=66">66</a> <a href="viewtopic.php?id=162768&amp;p=67">67</a> <strong>68</strong> <a href="viewtopic.php?id=162768&amp;p=69">69</a> <a href="viewtopic.php?id=162768&amp;p=70">70</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=69">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
