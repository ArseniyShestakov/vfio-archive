<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 10) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=10" title="Page 10" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=9" title="Page 9" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=11" title="Page 11" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=9">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=8">8</a> <a href="viewtopic.php?id=162768&amp;p=9">9</a> <strong>10</strong> <a href="viewtopic.php?id=162768&amp;p=11">11</a> <a href="viewtopic.php?id=162768&amp;p=12">12</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=11">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1299117" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#226</span> <a href="viewtopic.php?pid=1299117#p1299117">2013-07-11 20:00:35</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73111">argon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-11</span></dd> <dd><span>Posts: 5</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello and thank you for your great tutorial.</p><p>I did everything I needed to do (what you mentioned), dmesg does not show any errors, however my second monitor<br />is not turning on.</p><p>I was trying two approaches: at first I had assigned my second GPU (nvidia 7600GT) to a machine, and then installed windows7.<br />After that I did everything to make this hardware work - installation of drivers, but in hardware manager in windows, there is<br />an info: &quot;bla bla does not work, because it has problems&quot; or something similar. I thought, maybe using command line I&#039;d be more <br />lucky, and I tried with</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host -smp 2,sockets=1,cores=2,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -nographic -boot c -drive file=/var/lib/libvirt/images/Windows7.img,if=virtio</code></pre></div><p><strong>Windows is starting (I hear how HDD works)</strong>, but my screen is still dead. I haven&#039;t tried any qemu/kernel patching yet.<br />Do you have any ideas what should I do?</p><p><strong>EDIT: </strong> I actually managed to make this work. I&#039;ll describe my case later.</p> <p class="postedit"><em>Last edited by argon (2013-07-13 13:35:49)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299117">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299726" class="blockpost roweven"> <h2><span><span class="conr">#227</span> <a href="viewtopic.php?pid=1299726#p1299726">2013-07-13 16:30:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73111">argon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-11</span></dd> <dd><span>Posts: 5</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok, I&#039;ll try to be quick here. What helped me was in fact pointing out to qemu where seabios has its<br />roms. After I&#039;ve compiled seabios given on the first page, I added </p><div class="codebox"><pre><code>-L /path/to/seabios/out/ -L /usr/share/qemu/bios.bin</code></pre></div><p>to the command line and my GPU responded and now I am able to use it without any problems.<br />However I&#039;m not sure whether mobo BIOS update I did, was helpful - probably.</p><p>I also have to say, I am also using patched linux-mainline and qemu.<br />My hardware:<br />MB: ASUS M4A89TD PRO USB3.0<br />Host GPU: ASUS NVIDIA GTX460<br />Guest GPU: GIGABYTE NVIDIA 7600GT</p> <p class="postedit"><em>Last edited by argon (2013-07-13 16:33:54)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299726">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299751" class="blockpost rowodd"> <h2><span><span class="conr">#228</span> <a href="viewtopic.php?pid=1299751#p1299751">2013-07-13 17:38:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>apoapo wrote:</cite><blockquote><div><p>I finally got some progress.</p><p>After trying mainline kernel and with vbios, I went to bios/uefi and turned the Primary VGA card from onboard to pci-express ...<br />Now I see the seabios in passthroughed screen, but with blinking cursor in it, so i will try some things <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p></div></blockquote></div><p>Hello,</p><p>Could you please describe how did you get vbios and how you specified vbios for qemu?</p><p>Thank you in advance!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299751">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299770" class="blockpost roweven"> <h2><span><span class="conr">#229</span> <a href="viewtopic.php?pid=1299770#p1299770">2013-07-13 18:58:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>argon wrote:</cite><blockquote><div><p>Ok, I&#039;ll try to be quick here. What helped me was in fact pointing out to qemu where seabios has its<br />roms. After I&#039;ve compiled seabios given on the first page, I added </p><div class="codebox"><pre><code>-L /path/to/seabios/out/ -L /usr/share/qemu/bios.bin</code></pre></div><p>to the command line and my GPU responded and now I am able to use it without any problems.<br />However I&#039;m not sure whether mobo BIOS update I did, was helpful - probably.</p><p>I also have to say, I am also using patched linux-mainline and qemu.<br />My hardware:<br />MB: ASUS M4A89TD PRO USB3.0<br />Host GPU: ASUS NVIDIA GTX460<br />Guest GPU: GIGABYTE NVIDIA 7600GT</p></div></blockquote></div><p>Sorry for the late reply i was kinda busy working, so you&#039;re saying it didnt work with the -bios command? my seabios package should install it to /usr/share/qemu/bios.bin by default</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299770">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299772" class="blockpost rowodd"> <h2><span><span class="conr">#230</span> <a href="viewtopic.php?pid=1299772#p1299772">2013-07-13 19:00:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>naythuwin wrote:</cite><blockquote><div><p>[abcd@unknow ~]$ qemu-system-x86_64 -enable-kvm -m 2048 -cpu host -smp 2 -device vfio-pci,host=05:00.0,x-vga=on -bios /usr/share/qemu/bios.bin -vga none<br />KVM internal error. Suberror: 1<br />emulation failure<br />EAX=00000000 EBX=00000000 ECX=0000a19e EDX=000003d4<br />ESI=00009e48 EDI=0000823c EBP=0000c58a ESP=00008232<br />EIP=0009ffff EFL=00010006 [-----P-] CPL=0 II=0 A20=1 SMM=0 HLT=0<br />ES =0000 00000000 ffffffff 00809300<br />CS =0000 00000000 ffffffff 00809b00<br />SS =0000 00000000 ffffffff 00809300<br />DS =0000 00000000 ffffffff 00809300<br />FS =0000 00000000 ffffffff 00809300<br />GS =0000 00000000 ffffffff 00809300<br />LDT=0000 00000000 0000ffff 00008200<br />TR =0000 00000000 0000ffff 00008b00<br />GDT=&#160; &#160; &#160;000fd808 00000037<br />IDT=&#160; &#160; &#160;00000000 000003ff<br />CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000<br />DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 <br />DR6=00000000ffff0ff0 DR7=0000000000000400<br />EFER=0000000000000000<br />Code=00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 &lt;00&gt; ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</p><p>cpu : intel core i7<br />mobo : foxconn h61ap<br />kernel : Linux abcdef 3.10.0-1-mainline #1 SMP PREEMPT Wed Jul 10 23:38:07 MMT 2013 x86_64 GNU/Linux<br />graphic : onboard intel and pny geforce 8400gs pci 512M low profile</p><p>lspci | grep VGA<br />00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)<br />05:00.0 VGA compatible controller: NVIDIA Corporation G98 [GeForce 8400 GS Rev. 2] (rev a1)</p><p>secondery passthrough is work for me but primary is not<br />help me!</p></div></blockquote></div><p>Does this only happens when using vfio-pci? You should also use the q35 model and put your gpu behind a root port like the redhat dev recommended</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299772">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299775" class="blockpost roweven"> <h2><span><span class="conr">#231</span> <a href="viewtopic.php?pid=1299775#p1299775">2013-07-13 19:03:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>apoapo wrote:</cite><blockquote><div><p>I finally got some progress.</p><p>After trying mainline kernel and with vbios, I went to bios/uefi and turned the Primary VGA card from onboard to pci-express ...<br />Now I see the seabios in passthroughed screen, but with blinking cursor in it, so i will try some things <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p></div></blockquote></div><p>Hello,</p><p>Could you please describe how did you get vbios and how you specified vbios for qemu?</p><p>Thank you in advance!</p></div></blockquote></div><p>myweb here&#039;s the discussion of some user that got it working with an intel board: <a href="http://lists.gnu.org/archive/html/qemu-devel/2013-05/msg01722.html" rel="nofollow">http://lists.gnu.org/archive/html/qemu- … 01722.html</a>, also like i mentioned before this patch might be of use <a href="http://lists.gnu.org/archive/html/qemu-devel/2013-05/msg01722.html" rel="nofollow">http://lists.gnu.org/archive/html/qemu- … 01722.html</a> you could also try doing a bug report on qemu-devel or kvm-devel</p> <p class="postedit"><em>Last edited by nbhs (2013-07-13 19:08:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299775">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299802" class="blockpost rowodd"> <h2><span><span class="conr">#232</span> <a href="viewtopic.php?pid=1299802#p1299802">2013-07-13 20:22:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73111">argon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-11</span></dd> <dd><span>Posts: 5</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>argon wrote:</cite><blockquote><div><p>Ok, I&#039;ll try to be quick here. What helped me was in fact pointing out to qemu where seabios has its<br />roms. After I&#039;ve compiled seabios given on the first page, I added </p><div class="codebox"><pre><code>-L /path/to/seabios/out/ -L /usr/share/qemu/bios.bin</code></pre></div><p>to the command line and my GPU responded and now I am able to use it without any problems.<br />However I&#039;m not sure whether mobo BIOS update I did, was helpful - probably.</p><p>I also have to say, I am also using patched linux-mainline and qemu.<br />My hardware:<br />MB: ASUS M4A89TD PRO USB3.0<br />Host GPU: ASUS NVIDIA GTX460<br />Guest GPU: GIGABYTE NVIDIA 7600GT</p></div></blockquote></div><p>Sorry for the late reply i was kinda busy working, so you&#039;re saying it didnt work with the -bios command? my seabios package should install it to /usr/share/qemu/bios.bin by default</p></div></blockquote></div><p>No problem, I really enjoyed digging in the issue by myself <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. And no, it didn&#039;t work.<br />But now, I realized that somehow md5 of those two bios.bin files were different. So maybe<br />I haven&#039;t in fact installed your package but I was only going to...</p><p>Now md5 sums are correct, and it should work.</p> <p class="postedit"><em>Last edited by argon (2013-07-13 20:23:22)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299802">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1299808" class="blockpost roweven"> <h2><span><span class="conr">#233</span> <a href="viewtopic.php?pid=1299808#p1299808">2013-07-13 20:31:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>argon wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>argon wrote:</cite><blockquote><div><p>Ok, I&#039;ll try to be quick here. What helped me was in fact pointing out to qemu where seabios has its<br />roms. After I&#039;ve compiled seabios given on the first page, I added </p><div class="codebox"><pre><code>-L /path/to/seabios/out/ -L /usr/share/qemu/bios.bin</code></pre></div><p>to the command line and my GPU responded and now I am able to use it without any problems.<br />However I&#039;m not sure whether mobo BIOS update I did, was helpful - probably.</p><p>I also have to say, I am also using patched linux-mainline and qemu.<br />My hardware:<br />MB: ASUS M4A89TD PRO USB3.0<br />Host GPU: ASUS NVIDIA GTX460<br />Guest GPU: GIGABYTE NVIDIA 7600GT</p></div></blockquote></div><p>Sorry for the late reply i was kinda busy working, so you&#039;re saying it didnt work with the -bios command? my seabios package should install it to /usr/share/qemu/bios.bin by default</p></div></blockquote></div><p>No problem, I really enjoyed digging in the issue by myself <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. And no, it didn&#039;t work.<br />But now, I realized that somehow md5 of those two bios.bin files were different. So maybe<br />I haven&#039;t in fact installed your package but I was only going to...</p><p>Now md5 sums are correct, and it should work.</p></div></blockquote></div><p>Im actually surprised you got that card working gratz.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1299808">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300648" class="blockpost rowodd"> <h2><span><span class="conr">#234</span> <a href="viewtopic.php?pid=1300648#p1300648">2013-07-16 06:29:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73230">reintseri</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-16</span></dd> <dd><span>Posts: 6</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi everyone and thanks for this tutorial, exiting stuff.</p><p>Do you guys know if there&#039;s any chance on getting this to work on a Mac Pro (2009). I guess<br />after a firmware update VT-d support should be present. I have OS X and Arch dual boot setup<br />but for some reason the /sys/bus/pci/drivers/vfio-pci folder doesn&#039;t exist. No iommu_group links<br />in the graphics card folders either.</p><p>I have a GeForce 9500 GT as a primary and I was hoping to passthrough a Radeon 5400 series<br />device.</p><p>uname -r gives me 3.9.9-1-ARCH which I guess should have the necessary options on.</p><p>I can post whatever additional info you need, thanks.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300648">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300697" class="blockpost roweven"> <h2><span><span class="conr">#235</span> <a href="viewtopic.php?pid=1300697#p1300697">2013-07-16 09:33:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73235">resr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-16</span></dd> <dd><span>Posts: 2</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>reintseri</p><p>I had a similar experience which I&#039;m presently working through. I can&#039;t speak for mac, but I had the same symptoms with my new arch system.</p><p>I added </p><div class="codebox"><pre><code>intel_iommu=on</code></pre></div><p> to my kernel parameters, which gives me &quot;[&#160; &#160; 0.000000] Intel-IOMMU: enabled&quot; from a </p><div class="codebox"><pre><code>dmesg | grep IOMMU</code></pre></div><p>.</p><p>But I wasn&#039;t getting any iommu_group links under /sys/bus/pci/devices/&lt;device&gt;, the same as yourself.</p><p>My /sys/kernel/iommu_groups/ folder is empty too.</p><p>I&#039;m about to rebuild the kernel, making sure that the </p><p>CONFIG_VFIO_IOMMU_TYPE1=y<br />CONFIG_VFIO=y<br />CONFIG_VFIO_PCI=y<br />CONFIG_VFIO_PCI_VGA=y</p><p>options are there.</p><p>And as per rabcor&#039;s experience <a href="https://bbs.archlinux.org/viewtopic.php?pid=1292236" rel="nofollow">halfway through the thread</a> I&#039;m going to try CONFIG_INTEL_IOMMU_DEFAULT_ON=y as well.</p><p>I&#039;m a little bit different from the thread instructions as I&#039;m only trying to pass a firewire card through, so I&#039;ve skipped the patched seabios step.</p><p>I have things in my /sys/bus/pci/drivers/vfio-pci folder, but I&#039;ve recompiled once.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300697">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300712" class="blockpost rowodd"> <h2><span><span class="conr">#236</span> <a href="viewtopic.php?pid=1300712#p1300712">2013-07-16 10:22:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73235">resr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-16</span></dd> <dd><span>Posts: 2</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Don&#039;t mind me. I&#039;ve found that VT-d isn&#039;t a feature of my 3770K cpu.</p><p>Bit silly paying the extra for the K as I haven&#039;t overclocked it yet.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300712">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300729" class="blockpost roweven"> <h2><span><span class="conr">#237</span> <a href="viewtopic.php?pid=1300729#p1300729">2013-07-16 11:01:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73230">reintseri</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-16</span></dd> <dd><span>Posts: 6</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok I&#039;ve made some progress. I set the intel_iommu=on and vfio_iommu_type1.allow_unsafe_interrupts=1 in grub and now I have the iommu_group folders. I also modprobed vfio-pci and the drivers are present also.</p><p>I can also bind a device without any (visible) error messages using the script. Testing with qemu starts a black screen (as it should) but no picture from the other graphics card.</p><p>I&#039;d appreciate if someone can tell me how to troubleshoot the problem. I had the proprietary nvidia drivers for my host installed first, but I removed them and installed nouveau instead. No change I guess.</p><p>Qemu version: QEMU emulator version 1.5.1</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300729">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300822" class="blockpost rowodd"> <h2><span><span class="conr">#238</span> <a href="viewtopic.php?pid=1300822#p1300822">2013-07-16 15:43:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73111">argon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-11</span></dd> <dd><span>Posts: 5</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>reintseri:<br />Hm, I don&#039;t know, whether removing nvidia drivers was helpful. However, you need<br />kernel and qemu with pci-resetting support. You can find linux-mainline (3.10), qemu with<br />mentioned patches in this thread and you&#039;ll have to compile them and install. Also you&#039;ll need<br />to use patched seabios - again, link available in this thread, few pages back.</p><p>This is exactly what I did and what seem to work for me.</p> <p class="postedit"><em>Last edited by argon (2013-07-16 15:45:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300822">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300925" class="blockpost roweven"> <h2><span><span class="conr">#239</span> <a href="viewtopic.php?pid=1300925#p1300925">2013-07-16 19:26:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72712">perfectsine</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-06-28</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=72712">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>nbhs:</p><p>Do you know if it would be possible to run a headless setup with one video card as &quot;secondary&quot; passthrough?&#160; &#160;I have a server that I want to test this on but, it doesn&#039;t have a built-in graphics adapter.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300925">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1300929" class="blockpost rowodd"> <h2><span><span class="conr">#240</span> <a href="viewtopic.php?pid=1300929#p1300929">2013-07-16 19:32:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>perfectsine wrote:</cite><blockquote><div><p>nbhs:</p><p>Do you know if it would be possible to run a headless setup with one video card as &quot;secondary&quot; passthrough?&#160; &#160;I have a server that I want to test this on but, it doesn&#039;t have a built-in graphics adapter.</p></div></blockquote></div><p>Using this guide probably not, though if you have a radeon card you could pass it through as a secondary device to qemu that means both the emulated card and the radeon card will be present on the vm, note that im not sure if this is working anymore since ive been using vfio instead of &quot;pci-assing&quot; for a long time ( last time i tried it worked )</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1300929">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301038" class="blockpost roweven"> <h2><span><span class="conr">#241</span> <a href="viewtopic.php?pid=1301038#p1301038">2013-07-16 23:51:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>reintseri wrote:</cite><blockquote><div><p>Ok I&#039;ve made some progress. I set the intel_iommu=on and vfio_iommu_type1.allow_unsafe_interrupts=1 in grub and now I have the iommu_group folders. I also modprobed vfio-pci and the drivers are present also.</p><p>I can also bind a device without any (visible) error messages using the script. Testing with qemu starts a black screen (as it should) but no picture from the other graphics card.</p><p>I&#039;d appreciate if someone can tell me how to troubleshoot the problem. I had the proprietary nvidia drivers for my host installed first, but I removed them and installed nouveau instead. No change I guess.</p><p>Qemu version: QEMU emulator version 1.5.1</p></div></blockquote></div><p>Could you try giving a shot using the patched builds?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301038">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301157" class="blockpost rowodd"> <h2><span><span class="conr">#242</span> <a href="viewtopic.php?pid=1301157#p1301157">2013-07-17 10:40:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73230">reintseri</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-16</span></dd> <dd><span>Posts: 6</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok I have now the patched mainline kernel, patched QEMU, patched Seabios and it .... works!</p><p>Thanks so much. I can give out my system specs later if someone else is trying to do this on a Mac Pro or with a similar setup.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301157">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301212" class="blockpost roweven"> <h2><span><span class="conr">#243</span> <a href="viewtopic.php?pid=1301212#p1301212">2013-07-17 13:53:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71752">Diggo</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/71752.jpg?m=1375869480" width="80" height="80" alt="" /></dd> <dd><span>Registered: 2013-05-29</span></dd> <dd><span>Posts: 11</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71752">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Congrats <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I´d like to see the specs, too. ´Trying to build a small list of components that work.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301212">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301299" class="blockpost rowodd"> <h2><span><span class="conr">#244</span> <a href="viewtopic.php?pid=1301299#p1301299">2013-07-17 18:16:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73111">argon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-11</span></dd> <dd><span>Posts: 5</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Low-end NVIDIA 210 also works.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301299">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301315" class="blockpost roweven"> <h2><span><span class="conr">#245</span> <a href="viewtopic.php?pid=1301315#p1301315">2013-07-17 18:58:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>reintseri wrote:</cite><blockquote><div><p>Ok I have now the patched mainline kernel, patched QEMU, patched Seabios and it .... works!</p><p>Thanks so much. I can give out my system specs later if someone else is trying to do this on a Mac Pro or with a similar setup.</p></div></blockquote></div><p>Awesome please post you specs! i assume you got it working on intel right (well duh its a mac!)?<span style="color: #FF0000"> I also updated the qemu patch yesterday, it seems i forgot to include some late patches that contain some quirks for the vga&#039;s, so i recommend people who couldnt get it to work to try the lastest builds </span></p><p>Also you can try doing this with mac osx, here&#039;s a guide on how to get mac running on qemu: <a href="http://www.contrib.andrew.cmu.edu/~somlo/OSXKVM/" rel="nofollow">http://www.contrib.andrew.cmu.edu/~somlo/OSXKVM/</a>, unfortunately i couldnt get it to run on my amd system but it should work on intel, it would be sweet if you can get vga passthrough working with a mac install!</p> <p class="postedit"><em>Last edited by nbhs (2013-07-17 19:19:43)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301315">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301323" class="blockpost rowodd"> <h2><span><span class="conr">#246</span> <a href="viewtopic.php?pid=1301323#p1301323">2013-07-17 19:31:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53621">teekay</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-10-26</span></dd> <dd><span>Posts: 267</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53621">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>Also you can try doing this with mac osx, here&#039;s a guide on how to get mac running on qemu: <a href="http://www.contrib.andrew.cmu.edu/~somlo/OSXKVM/" rel="nofollow">http://www.contrib.andrew.cmu.edu/~somlo/OSXKVM/</a>, unfortunately i couldnt get it to run on my amd system but it should work on intel, it would be sweet if you can get vga passthrough working with a mac install!</p></div></blockquote></div><p>I do have a snow leopard VM with some AMD patched kernel which works fine in VMware also in VirtualBox (no guest tools, though). But I failed to get it running in Qemu - with VGA passthrough that would be so cool, indeed.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301323">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301532" class="blockpost roweven"> <h2><span><span class="conr">#247</span> <a href="viewtopic.php?pid=1301532#p1301532">2013-07-18 10:25:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Dear All,</p><p>I would like to install Windows 8 without any VGA-Passthrough and faced with terrible performance issue I suggest with storage: in takes more than half a hour to pass from partition selection dialog to coping files. A long time coping percentage stay at 0%. Is it OK? Is it any way to improve performance? Live Ubuntu works well.</p><p>I use the following lines for storage:<br />-device ahci,bus=pcie.0,id=ahci<br />-drive file=/home/nbhs/windows.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301532">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301582" class="blockpost rowodd"> <h2><span><span class="conr">#248</span> <a href="viewtopic.php?pid=1301582#p1301582">2013-07-18 13:40:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Dear All,</p><p>I would like to install Windows 8 without any VGA-Passthrough and faced with terrible performance issue I suggest with storage: in takes more than half a hour to pass from partition selection dialog to coping files. A long time coping percentage stay at 0%. Is it OK? Is it any way to improve performance? Live Ubuntu works well.</p><p>I use the following lines for storage:<br />-device ahci,bus=pcie.0,id=ahci<br />-drive file=/home/nbhs/windows.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk</p></div></blockquote></div><p>Could you post the entire qemu cmdline? You could also try using the faster virtio blk</p> <p class="postedit"><em>Last edited by nbhs (2013-07-18 13:41:13)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301582">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301700" class="blockpost roweven"> <h2><span><span class="conr">#249</span> <a href="viewtopic.php?pid=1301700#p1301700">2013-07-18 20:07:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>qemu-system-x86_64 -M q35 -nodefconfig -readconfig ~/new/qemu/src/qemu-1.5.1/docs/q35-chipset.cfg -m 2048&#160; -enable-kvm -cpu host&#160; \<br />-smp 2,sockets=1,cores=2,threads=1 -vga std \<br />-L ~/tmp/src/seabios-1.7.3/out/ \<br />-device ahci,bus=pcie.0,id=ahci \<br />-drive file=/run/media/user/CopiedData/Soft/9200.16384.120725-1247_x64frev_Enterprise_VL_HRM_CENA_X64FREV_EN-US_DVD.iso,id=isocd -device ide-cd,bus=ahci.1,drive=isocd \<br />-drive file=/home/user/windows.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301700">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1301708" class="blockpost rowodd"> <h2><span><span class="conr">#250</span> <a href="viewtopic.php?pid=1301708#p1301708">2013-07-18 20:45:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>qemu-system-x86_64 -M q35 -nodefconfig -readconfig ~/new/qemu/src/qemu-1.5.1/docs/q35-chipset.cfg -m 2048&#160; -enable-kvm -cpu host&#160; \<br />-smp 2,sockets=1,cores=2,threads=1 -vga std \<br />-L ~/tmp/src/seabios-1.7.3/out/ \<br />-device ahci,bus=pcie.0,id=ahci \<br />-drive file=/run/media/user/CopiedData/Soft/9200.16384.120725-1247_x64frev_Enterprise_VL_HRM_CENA_X64FREV_EN-US_DVD.iso,id=isocd -device ide-cd,bus=ahci.1,drive=isocd \<br />-drive file=/home/user/windows.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk</p></div></blockquote></div><p>Have you tried to copy the iso image to your hard drive and install it from there?</p> <p class="postedit"><em>Last edited by nbhs (2013-07-18 20:45:51)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1301708">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=9">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=8">8</a> <a href="viewtopic.php?id=162768&amp;p=9">9</a> <strong>10</strong> <a href="viewtopic.php?id=162768&amp;p=11">11</a> <a href="viewtopic.php?id=162768&amp;p=12">12</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=11">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
