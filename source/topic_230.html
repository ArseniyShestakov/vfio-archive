<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 230) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=230" title="Page 230" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=229" title="Page 229" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=231" title="Page 231" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=229">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=228">228</a> <a href="viewtopic.php?id=162768&amp;p=229">229</a> <strong>230</strong> <a href="viewtopic.php?id=162768&amp;p=231">231</a> <a href="viewtopic.php?id=162768&amp;p=232">232</a> <a href="viewtopic.php?id=162768&amp;p=233">233</a> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=231">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1547543" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5726</span> <a href="viewtopic.php?pid=1547543#p1547543">2015-07-24 15:49:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@SXX</p><p>Yes, you can make new qcow2 images with your existing as a backing store.&#160; I think it even works with raw images, so your disk might also work as well.&#160; Also, don&#039;t come crying to me when <em>-snapshot</em> either uses all your ram or fills your tmpfs and starts giving write errors, I warned you.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547543">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1547553" class="blockpost roweven"> <h2><span><span class="conr">#5727</span> <a href="viewtopic.php?pid=1547553#p1547553">2015-07-24 16:17:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@aw<br />Thanks for information! I&#039;ll try to setup once I have time it and report back.<br />Don&#039;t think that write errors anything like an issue as long as it&#039;s only affect running VM and not actual disk image. :-)</p><p>PS: BTW to change where is snapshot going &quot;TMPDIR=/home/tmp&quot; can be used, by default it&#039;s write into /var/tmp.</p> <p class="postedit"><em>Last edited by SXX (2015-07-24 16:35:02)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547553">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1547659" class="blockpost rowodd"> <h2><span><span class="conr">#5728</span> <a href="viewtopic.php?pid=1547659#p1547659">2015-07-24 22:50:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So you were right @aw! It&#039;s working with raw drive partitions just fine and IO performance with QCOW2 image is better than with &quot;-snapshot&quot; (e.g Google Chrome on guest start to freeze with that option when downloading file). I&#039;d <a href="https://gist.github.com/ArseniyShestakov/dc152d080c65ebaa6781" rel="nofollow">put my current configuration on gist</a>.</p><p>Sadly VM with Nvidia have inconsistent startup success rate (e.g sometimes only load after it&#039;s started once with Linux VM) and looks like it&#039;s may cause host freeze on restart or 2nd startup. Though it&#039;s may be easily hardware failure due to overheating or who know what else (GPU is 7 years old). Anyway I successfully run Unigine Heaven on host and both VMs simultaneously.</p><p>Thanks again! Now I just need to find out how to do CPU pinning without using libvirt.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547659">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1547723" class="blockpost roweven"> <h2><span><span class="conr">#5729</span> <a href="viewtopic.php?pid=1547723#p1547723">2015-07-25 07:44:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SXX wrote:</cite><blockquote><div><p>Sadly VM with Nvidia have inconsistent startup success rate (e.g sometimes only load after it&#039;s started once with Linux VM) and looks like it&#039;s may cause host freeze on restart or 2nd startup. Though it&#039;s may be easily hardware failure due to overheating or who know what else (GPU is 7 years old). Anyway I successfully run Unigine Heaven on host and both VMs simultaneously.</p></div></blockquote></div><p>It&#039;s too early to roar with success.</p><p>I&#039;ve had that sort of problem when i ran SeaBIOS on an AMD platform - it worked just sometimes. Try disabling hugepages maybe?</p> <p class="postedit"><em>Last edited by Duelist (2015-07-25 09:07:09)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547723">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1547756" class="blockpost rowodd"> <h2><span><span class="conr">#5730</span> <a href="viewtopic.php?pid=1547756#p1547756">2015-07-25 12:31:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Try disabling hugepages maybe?</p></div></blockquote></div><p>I don&#039;t use huge pages because those never improved VM performance a lot for my use cases. BTW I only applied ACS because never needed any other patches for one GPU passthrough, can this be reason of my issues with Nvidia?</p><p>UPD: Found a way to have consistent startup success:</p><ol class="decimal"><li><p>Run Kubuntu livecd with nouveau till display activated.</p></li><li><p>Now shutdown it or just kill QEMU.<br />Display remain active with some image freezed on it.</p></li><li><p>Boot into Windows with QXL.</p></li><li><p>Go to Control Panel -&gt; Device Manager.</p></li><li><p>Disable and enable device.<br />At that point cursor on freeze image goes into left top corner of screen and monitor lose signal.<br />Though Windows still don&#039;t see monitor, GPU not working.</p></li><li><p>Now disable and enable it once again.<br />Monitor connected to Nvidia now active! It&#039;s working!</p></li></ol><p>Though there is still weird issue with fan speed control. E.g if Nouveaus started with high speed fan then even after driver become working Windows VM don&#039;t decrease fan speed. Though if started with low speed than VM can control speed just fine.</p><p>UDP2: Looks like there issue with clocks too, sadly. Though one more disable / enable cycle fixes it.</p> <p class="postedit"><em>Last edited by SXX (2015-07-25 15:59:51)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547756">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1547926" class="blockpost roweven"> <h2><span><span class="conr">#5731</span> <a href="viewtopic.php?pid=1547926#p1547926">2015-07-26 10:01:56</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>The latest OVMF dated today works for me with Windows 8.1 again.</p><p>Edit: not after all. My existing install booted up but as I was doing some experiments with a new test install, the installer still crashed when it started copying files.</p> <p class="postedit"><em>Last edited by impulse_255 (2015-07-26 14:50:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547926">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1547943" class="blockpost rowodd"> <h2><span><span class="conr">#5732</span> <a href="viewtopic.php?pid=1547943#p1547943">2015-07-26 12:47:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84760">Denso</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/84760.png?m=1412533733" width="71" height="80" alt="" /></dd> <dd><span>Registered: 2014-08-30</span></dd> <dd><span>Posts: 179</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@impulse_255 :</p><p>I approve that I can finally install Windows 10 . The code was compiled 30 minutes ago .</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1547943">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548014" class="blockpost roweven"> <h2><span><span class="conr">#5733</span> <a href="viewtopic.php?pid=1548014#p1548014">2015-07-26 17:54:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=71932">kantras</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-06-04</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=71932">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Using the ovmf-git AUR package, I was just able to install Windows 8 Pro earlier this morning - new install, compiled from about 6 hours ago</p> <p class="postedit"><em>Last edited by kantras (2015-07-26 17:55:10)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548014">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548019" class="blockpost rowodd"> <h2><span><span class="conr">#5734</span> <a href="viewtopic.php?pid=1548019#p1548019">2015-07-26 18:09:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82117">devianceluka</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-19</span></dd> <dd><span>Posts: 43</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>OVMF boot from physical SATA disk possible yet (SATA controller passthrough)?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548019">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548058" class="blockpost roweven"> <h2><span><span class="conr">#5735</span> <a href="viewtopic.php?pid=1548058#p1548058">2015-07-26 21:08:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>With the latest OVMF builds, i am unable to install windows 7. <br />The installer successfully does it&#039;s job, reboots the VM and the system freezes without the logo showing with 4 cores on 100%.<br />When force resetting the machine, next boot shows me a loading logo which freezes in the middle.<br />I am not passing through any devices, the only GPU is the emulated QXL...<br />Seems like it&#039;s time to sing along to that song, where &quot;all men play on ten&quot;.</p><p><a href="http://lists.nongnu.org/archive/html/qemu-discuss/2015-07/msg00063.html" rel="nofollow">There&#039;s a message for us</a>.<br />Anyone had same experience?</p> <p class="postedit"><em>Last edited by Duelist (2015-07-26 21:43:45)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548058">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548078" class="blockpost rowodd"> <h2><span><span class="conr">#5736</span> <a href="viewtopic.php?pid=1548078#p1548078">2015-07-26 23:06:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>BTW, I reported the Win8.1/OVMF install issue to Laszlo who bisected and found the commit that introduced it.&#160; There&#039;s already a patch on their list to fix it, but the ongoing sorceforge outage is delaying it being committed and new builds including it.&#160; Stick with a pre-July build until things get moving again.</p></div></blockquote></div><p>Right.</p><p>Here&#039;s some more background.</p><p>The bug breaks the UEFI variable runtime services when going from physical addressing to virtual addressing, at SetVirtualAddressMap(). The variable service drivers were rewritten recently (there had been two separate variable drivers, one for secure boot enabled platforms, and another for secure boot-less platforms -- those were unified now). During this, commits a6811666 (SVN 17758) and fa0737a8 (SVN 17765) introduced the bug. Date: 2015-Jul-01.</p><p>The rest of the timeline (mostly in UTC+02:00, ie. CEST):</p><ul><li><p>July 16th (approx): sourceforge.net blows up. The most recent commit in our SVN repo at this point is 18032. The last SVN commit shoveled over into our git mirror corresponds to SVN rev 18030. (The mirroring daemon runs periodically.)</p></li><li><p>July 21st: Alex reports the installation regression to me at 1 AM approx. Patches for the bug are (independently) posted to the list at 11 AM. <a href="http://thread.gmane.org/gmane.comp.bios.edk2.devel/133" rel="nofollow">http://thread.gmane.org/gmane.comp.bios.edk2.devel/133</a> . At 2-3 PM I read Alex&#039;s&#160; email, bisect the bug, and recall the patches from the list I saw just a few hours earlier. I test them, and they work. The patches cannot be committed because SVN is down.</p></li><li><p>July 23rd: SVN has been down for a week. We cannot exist without a repo any longer, not just due to the above bug(fixes), but also because other patches have been accumulating. Jordan sets up a temporary git repo (a fork of our well-known svn-to-git mirror) on github, so that we can queue up the ready-to-merge (reviewed) patches in the SVN interim. See <a href="http://thread.gmane.org/gmane.comp.bios.edk2.devel/227" rel="nofollow">http://thread.gmane.org/gmane.comp.bios.edk2.devel/227</a> . First of all, Jordan queues the two patches from the list that made it to SVN (as revs 18031 and 18032) but never to the git mirror.</p></li><li><p>July 23rd still: I round up the bulk of pending reviewed patches for Jordan in a personal branch, and Jordan merges them to the temporary git repo (fast forward merge), on top of 18032. These new patches include my work that ports the SMBIOS client code to ARM, and refactor the original x86 code a bit. They also include the variable driver bugfix noted above.</p></li><li><p>July 25th: Jordan goes on and picks up three more patches from the list that have become ready for merging</p></li><li><p>July 26th (today -- well, it&#039;s past midnight, so &quot;yesterday&quot;): the SVN repo comes back from the dead. Surprise: the most recent revision it knows about is 18014. So, in a hurry, Jordan commits patches from the git repo back to SVN (revisions 18015..18030), which thereby qualifies as restoration from backup, and commits 18031..18032 from the tempoary queue (which is still restoral from backup, theoretically).</p></li><li><p>July 26th still: because SVN is back, with new patches no less, SVN revisions 18031..18032 are mirrored to our semi-official git mirror. Then Gerd&#039;s Jenkins daemon performs a git pull (at the commit corresponding to SVN rev 18032: b59e5ad), and successfully builds build#1121. This is what you guys have now, and it contains the bug.</p></li><li><p>July 26th still: Jordan flushes the 31 new queued patches to SVN. The SVN revision number we thus reach is 18063. The temporary git queue is practically discontinued. The new SVN commits percolate to the git mirror as well. The bugfix you guys would need corresponds to SVN revs 18054 (git e43525ee) and 18055 (git f18b2162).</p></li><li><p>July 26th still: Jenkins build 1122 (which would correspond to SVN rev 18063 / git 88656abf1b) fails, beause my SMBIOS refactoring (SVN r18040 / git 164cf403) conflicts with some downstream-only patches we have in Gerd&#039;s build. I get an automatic email about the build failure, but I&#039;m not surprised. Namely, I keep those same downstream patches in my local tree, so I have already adapted them. I send them to Gerd so he can resume the Jenkins build. Unfortunately, Gerd seems to have entered a phase of &quot;not reading email for a while&quot; already -- my email misses him and the build remains stuck at build#1121 / SVN rev 18032 / git b59e5ad, leaving you guys without the necessary fix.</p></li></ul> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548078">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548081" class="blockpost roweven"> <h2><span><span class="conr">#5737</span> <a href="viewtopic.php?pid=1548081#p1548081">2015-07-26 23:18:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Until the Jenkins build gets sorted out, you guys can try this build: <a href="http://people.redhat.com/~lersek/ovmf-r18063-ad-hoc-4530eb75/" rel="nofollow">http://people.redhat.com/~lersek/ovmf-r … -4530eb75/</a> . It is based on 18063 and has a bunch of local patches (my usual env setup and some of my work in progress, but nothing that should interfere with your use case). No RPM, just raw binaries, but you all ought to know how to point the domain XML / libvirt&#039;s qemu.conf to them at this point. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548081">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548083" class="blockpost rowodd"> <h2><span><span class="conr">#5738</span> <a href="viewtopic.php?pid=1548083#p1548083">2015-07-26 23:20:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><p>Here&#039;s some more background.</p></div></blockquote></div><p>Whoa, what a mess you&#039;ve had there.<br />So, I guess, the conclusion for the majority of us is to wait until Gerd Hoffman wakes up and resumes the auto builds, right?<br />That would be one or two days, I think, not a problem.<br />I&#039;m kind of surprised that you had the patch ready in 11 hours, but couldn&#039;t deliver it for almost a week due to sourceforge storming.It&#039;s still storming, right?</p><p>UPD:</p><div class="codebox"><pre><code> &lt;loader readonly=&#039;yes&#039; type=&#039;pflash&#039;&gt;/mnt/hdd/qemu/OVMF_CODE.fd&lt;/loader&gt; &lt;nvram&gt;/mnt/hdd/qemu/OVMF_VARS.fd&lt;/nvram&gt;</code></pre></div><p><span class="bbs"><br />I guess that would be the lines to use the files you&#039;ve provided, but i&#039;m having some troubles with permissions...<br /></span></p> <p class="postedit"><em>Last edited by Duelist (2015-07-26 23:50:25)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548083">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548090" class="blockpost roweven"> <h2><span><span class="conr">#5739</span> <a href="viewtopic.php?pid=1548090#p1548090">2015-07-26 23:41:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>I&#039;m kind of surprised that you had the patch ready in 11 hours, but couldn&#039;t deliver it for almost a week due to sourceforge storming.It&#039;s still storming, right?</p></div></blockquote></div><p>For us at least, it&#039;s okay, I&#039;d think. <a href="http://sourceforge.net/blog/" rel="nofollow">http://sourceforge.net/blog/</a></p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>UPD:</p><div class="codebox"><pre><code> &lt;loader readonly=&#039;yes&#039; type=&#039;pflash&#039;&gt;/mnt/hdd/qemu/OVMF_CODE.fd&lt;/loader&gt; &lt;nvram&gt;/mnt/hdd/qemu/OVMF_VARS.fd&lt;/nvram&gt;</code></pre></div><p>I guess that would be the lines to use the files you&#039;ve provided, but i&#039;m having some troubles with permissions...</p></div></blockquote></div><p>First, the above XML fragment is not entirely correct. The loader element looks okay, but the nvram element should not be updated -- you should continue using the virtual machine&#039;s private varstore. (The OVMF_CODE.fd binary that I provided should be compatible with it.) ... Actually, the loader element is the only one you have to care about, if you already have a prior VM. If you insist, the varstore *template* (which OVMF_VARS.fd is) can be specified in the &quot;template&quot; attribute of the nvram element.</p><p>Libvirt&#039;s qemu.conf should be modified, and libvirt restarted, if you intend to create new VMs with the files I provided. That config file is where you stick them both. So: loader is okay, and revert nvram to what it used to be earlier.</p><p>Then, regarding permissions -- qemu runs with unprivileged UID and GID, plus in an SELinux &quot;sandbox&quot;, if you run Fedora / RHEL and launch qemu from libvirt. So for now the easiest would be probably if you just copied these new files under</p><p>/usr/share/edk2.git/ovmf-x64</p><p>(which is a directory that belongs to Gerd&#039;s edk2.git-ovmf-x64 package), and then ran:</p><div class="codebox"><pre><code>cd /usr/share/edk2.git/ovmf-x64 chown root:root OVMF_*.fd chmod 644 OVMF_*.fd restorecon -FvvR .</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548090">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548092" class="blockpost rowodd"> <h2><span><span class="conr">#5740</span> <a href="viewtopic.php?pid=1548092#p1548092">2015-07-26 23:47:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>I&#039;m kind of surprised that you had the patch ready in 11 hours, but couldn&#039;t deliver it for almost a week due to sourceforge storming.It&#039;s still storming, right?</p></div></blockquote></div><p>For us at least, it&#039;s okay, I&#039;d think. <a href="http://sourceforge.net/blog/" rel="nofollow">http://sourceforge.net/blog/</a></p><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>UPD:</p><div class="codebox"><pre><code> &lt;loader readonly=&#039;yes&#039; type=&#039;pflash&#039;&gt;/mnt/hdd/qemu/OVMF_CODE.fd&lt;/loader&gt; &lt;nvram&gt;/mnt/hdd/qemu/OVMF_VARS.fd&lt;/nvram&gt;</code></pre></div><p>I guess that would be the lines to use the files you&#039;ve provided, but i&#039;m having some troubles with permissions...</p></div></blockquote></div><p>First, the above XML fragment is not entirely correct. The loader element looks okay, but the nvram element should not be updated -- you should continue using the virtual machine&#039;s private varstore. (The OVMF_CODE.fd binary that I provided should be compatible with it.) ... Actually, the loader element is the only one you have to care about, if you already have a prior VM. If you insist, the varstore *template* (which OVMF_VARS.fd is) can be specified in the &quot;template&quot; attribute of the nvram element.</p><p>Libvirt&#039;s qemu.conf should be modified, and libvirt restarted, if you intend to create new VMs with the files I provided. That config file is where you stick them both. So: loader is okay, and revert nvram to what it used to be earlier.</p><p>Then, regarding permissions -- qemu runs with unprivileged UID and GID, plus in an SELinux &quot;sandbox&quot;, if you run Fedora / RHEL and launch qemu from libvirt. So for now the easiest would be probably if you just copied these new files under</p><p>/usr/share/edk2.git/ovmf-x64</p><p>(which is a directory that belongs to Gerd&#039;s edk2.git-ovmf-x64 package), and then ran:</p><div class="codebox"><pre><code>cd /usr/share/edk2.git/ovmf-x64 chown root:root OVMF_*.fd chmod 644 OVMF_*.fd restorecon -FvvR .</code></pre></div></div></blockquote></div><p>You are right in every sentence, i&#039;ve concluded the same. VARS are not needed, it&#039;s easiest to just copy the files over, which i did.</p><p>However, that didn&#039;t resolve my windows7 installation freeze issue.(win 10 release is in two or three days, so i don&#039;t care much) I don&#039;t know for others. The time(and they) will tell.</p><br /><p>BTW, it&#039;s awesome to read SF&#039;s blog with all those &quot;system_xxx online&quot; posts almost every day. That voice in my head keeps saying stuff like &quot;Battlecruiser operational&quot;.</p> <p class="postedit"><em>Last edited by Duelist (2015-07-26 23:52:35)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548092">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548101" class="blockpost roweven"> <h2><span><span class="conr">#5741</span> <a href="viewtopic.php?pid=1548101#p1548101">2015-07-27 01:12:06</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So as I expected problem with Nvidia GTX 260 VM startup was caused by VGA arbitration and it&#039;s caused KVM error with x-vga=on too. It&#039;s still really weird because AMD GPU only had temporary gamma corruption issue, but looks like Nvidia Windows driver fail to take control over GPU when it&#039;s not initialized on boot properly.</p><p>Would be great if that eventually will be solved without EFI needed (GTX 260 doesn&#039;t support it), but for now it&#039;s will work for me as when I need two VMs I don&#039;t really care about 3D acceleration on host. I&#039;ll just reboot with different options when I need two VMs or just wouldn&#039;t worry about fan noise. Thanks to everyone who helped me!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548101">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548103" class="blockpost rowodd"> <h2><span><span class="conr">#5742</span> <a href="viewtopic.php?pid=1548103#p1548103">2015-07-27 01:39:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@SXX</p><p>Maybe time for new hardware?&#160; GTX 260 may have been pretty sweet 6 years ago... just sayin&#039;</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548103">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548118" class="blockpost roweven"> <h2><span><span class="conr">#5743</span> <a href="viewtopic.php?pid=1548118#p1548118">2015-07-27 02:54:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>No doubt about that. Though this is just what I got for free because I don&#039;t really want to buy any Nvidia products. Unfortunately still need it for humble open source game development and testing.</p><p>Later on if AMD finally going to drop Catalyst kernel blob I&#039;ll buy Fury X or something.</p><p>...</p><p><del>BTW is there anyone using Windows with access time update disabled? Any downside? I just think it&#039;s should decrease QCOW2 growth quite a lot.</del> Oops, looks like windows don&#039;t enable it by default.</p> <p class="postedit"><em>Last edited by SXX (2015-07-27 04:36:52)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548118">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548168" class="blockpost rowodd"> <h2><span><span class="conr">#5744</span> <a href="viewtopic.php?pid=1548168#p1548168">2015-07-27 09:58:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=89552">lersek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-03-15</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=89552">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>However, that didn&#039;t resolve my windows7 installation freeze issue.(win 10 release is in two or three days, so i don&#039;t care much) I don&#039;t know for others. The time(and they) will tell.</p></div></blockquote></div><p>Can you link an earlier comment of yours about this issue, with more details? (I assume you described it earlier.)</p><p>Also, Gerd has incorporated my updated downstream-only smbios patches, and the Jenkins build is back to normal -- I just got an email about build # 1125 succeeding; I believe the RPMs too should be soon refreshed at the usual location.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548168">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548183" class="blockpost roweven"> <h2><span><span class="conr">#5745</span> <a href="viewtopic.php?pid=1548183#p1548183">2015-07-27 10:41:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>lersek wrote:</cite><blockquote><div><div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>However, that didn&#039;t resolve my windows7 installation freeze issue.(win 10 release is in two or three days, so i don&#039;t care much) I don&#039;t know for others. The time(and they) will tell.</p></div></blockquote></div><p>Can you link an earlier comment of yours about this issue, with more details? (I assume you described it earlier.)</p><p>Also, Gerd has incorporated my updated downstream-only smbios patches, and the Jenkins build is back to normal -- I just got an email about build # 1125 succeeding; I believe the RPMs too should be soon refreshed at the usual location.</p></div></blockquote></div><p><span class="bbs"><a href="https://www.kraxel.org/repos/jenkins/edk2/" rel="nofollow">Strange</a>, it&#039;s still B1121...</span><br />11:50 UTC - B1125 is in place.</p><p>...<br />Ouch it hurts.<br />Is there a legitimate way of attaching an ISA debug console to a libvirt domain(VM)? I tried to pass the regular options as qemu:commandline, but it says that there&#039;s no such option...<br />Googling that problem leads me to my own messages about that debug feature.</p> <p class="postedit"><em>Last edited by Duelist (2015-07-27 15:10:19)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548183">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548259" class="blockpost rowodd"> <h2><span><span class="conr">#5746</span> <a href="viewtopic.php?pid=1548259#p1548259">2015-07-27 17:31:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79899">winie</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-01</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:alireza4051@yahoo.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Does anyone know if it&#039;s possible to boot (with gpu passthrough of course) only using coreboot for linux guests and getting rid of both seabios and ovmf? <br />One of the reasons I&#039;m asking is because ovmf loads really slow.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548259">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548263" class="blockpost roweven"> <h2><span><span class="conr">#5747</span> <a href="viewtopic.php?pid=1548263#p1548263">2015-07-27 17:45:41</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>winie wrote:</cite><blockquote><div><p>Does anyone know if it&#039;s possible to boot (with gpu passthrough of course) only using coreboot for linux guests and getting rid of both seabios and ovmf? <br />One of the reasons I&#039;m asking is because ovmf loads really slow.</p></div></blockquote></div><p><a href="http://www.coreboot.org/QEMU" rel="nofollow">http://www.coreboot.org/QEMU</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548263">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548278" class="blockpost rowodd"> <h2><span><span class="conr">#5748</span> <a href="viewtopic.php?pid=1548278#p1548278">2015-07-27 18:50:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79899">winie</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-01</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:alireza4051@yahoo.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>The_Moves wrote:</cite><blockquote><div><div class="quotebox"><cite>winie wrote:</cite><blockquote><div><p>Does anyone know if it&#039;s possible to boot (with gpu passthrough of course) only using coreboot for linux guests and getting rid of both seabios and ovmf? <br />One of the reasons I&#039;m asking is because ovmf loads really slow.</p></div></blockquote></div><p><a href="http://www.coreboot.org/QEMU" rel="nofollow">http://www.coreboot.org/QEMU</a></p></div></blockquote></div><p>I mean how to get it working with vga passthrough</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548278">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548353" class="blockpost roweven"> <h2><span><span class="conr">#5749</span> <a href="viewtopic.php?pid=1548353#p1548353">2015-07-27 23:22:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>You might try posting on their IRC channel: <a href="http://www.coreboot.org/IRC" rel="nofollow">http://www.coreboot.org/IRC</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548353">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1548359" class="blockpost rowodd"> <h2><span><span class="conr">#5750</span> <a href="viewtopic.php?pid=1548359#p1548359">2015-07-27 23:38:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77641">zir_blazer</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 35</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>winie wrote:</cite><blockquote><div><div class="quotebox"><cite>The_Moves wrote:</cite><blockquote><div><div class="quotebox"><cite>winie wrote:</cite><blockquote><div><p>Does anyone know if it&#039;s possible to boot (with gpu passthrough of course) only using coreboot for linux guests and getting rid of both seabios and ovmf? <br />One of the reasons I&#039;m asking is because ovmf loads really slow.</p></div></blockquote></div><p><a href="http://www.coreboot.org/QEMU" rel="nofollow">http://www.coreboot.org/QEMU</a></p></div></blockquote></div><p>I mean how to get it working with vga passthrough</p></div></blockquote></div><p>You shouldn&#039;t even be able to do anything close to that, since Coreboot doesn&#039;t work in a standalone fashion. Its purpose is to initialize the Hardware components, THEN use SeaBIOS or OVMF for BIOS/UEFI support, which do the actual booting and presents the devices, ACPI, etc, to the OS. You can&#039;t really omit them.</p><p>A different matter is using Xen to make a paravirtualized VM. Since Linux is fully concious of the fact that it is a PV VM, these can skip having a Firmware. But that isn&#039;t reelevant to this Thread.</p> <p class="postedit"><em>Last edited by zir_blazer (2015-07-27 23:39:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1548359">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=229">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=228">228</a> <a href="viewtopic.php?id=162768&amp;p=229">229</a> <strong>230</strong> <a href="viewtopic.php?id=162768&amp;p=231">231</a> <a href="viewtopic.php?id=162768&amp;p=232">232</a> <a href="viewtopic.php?id=162768&amp;p=233">233</a> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=231">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
