<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 53) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=53" title="Page 53" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=52" title="Page 52" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=54" title="Page 54" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=52">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=51">51</a> <a href="viewtopic.php?id=162768&amp;p=52">52</a> <strong>53</strong> <a href="viewtopic.php?id=162768&amp;p=54">54</a> <a href="viewtopic.php?id=162768&amp;p=55">55</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=54">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1390111" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1301</span> <a href="viewtopic.php?pid=1390111#p1390111">2014-03-08 20:37:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=46338">GNA</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-02-15</span></dd> <dd><span>Posts: 57</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=46338">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>/sys/kernel/iommu_groups is empty.<br />My system is supporting vt-d and it should be enabled. I dont get it.<br />Did i miss something obvious? Thanks for help!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390111">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390113" class="blockpost roweven"> <h2><span><span class="conr">#1302</span> <a href="viewtopic.php?pid=1390113#p1390113">2014-03-08 20:43:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80088">pereczes</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-08</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi,</p><p>thanks for this thread. Tried to follow the instructions, can boot into windows 7, though when installing AMD catalyst drivers the host is hanging.</p><p>relevant info:</p><p>lspci:</p><div class="codebox"><pre><code>... (for usb keyboard for guest) 00:12.0 USB controller: Advanced Micro Devices, Inc. [AMD/ATI] SB7x0/SB8x0/SB9x0 USB OHCI0 Controller 00:12.2 USB controller: Advanced Micro Devices, Inc. [AMD/ATI] SB7x0/SB8x0/SB9x0 USB EHCI Controller ... (NVIDIA for host) 01:00.0 VGA compatible controller: NVIDIA Corporation G71 [GeForce 7900 GT/GTO] (rev a1) ... (ATI for guest) 04:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Cayman PRO [Radeon HD 6950] 04:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Cayman/Antilles HDMI Audio [Radeon HD 6900 Series] ...</code></pre></div><p>with the script mentioned @beginning of thread:</p><div class="codebox"><pre><code>sudo vfio-bind 0000:04:00.0 0000:04:00.1 0000:00:12.0 0000:00:12.2</code></pre></div><p>and my qemu command is:</p><div class="codebox"><pre><code>/usr/local/bin/qemu-system-x86_64 \ -M q35 \ -vga none \ -nographic \ -cpu host \ -machine accel=kvm \ -bios /usr/local/share/qemu/bios.bin \ -m 4096 \ -smp 4,cores=4 \ -drive file=win8.img,if=virtio \ -netdev type=tap,ifname=tap0,script=no,id=net0 \ -device virtio-net-pci,netdev=net0 \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=04:00.0,bus=root.1,multifunction=on,x-vga=on,addr=0.0 \ -device vfio-pci,host=04:00.1,bus=root.1,addr=0.1 \ -device vfio-pci,host=00:12.0,bus=root.1 \ -boot d</code></pre></div><p>kernel: 3.13.5-031305-generic (ubuntu) </p><p>tried to unload nouveau from host card (or boot without it, by blacklisting), closed X, but whatsoever way I am doing, do not manage to have <br />the catalyst installed. Without catalyst it works, but need the powerfull graphics under windows with driver.</p><p>Any hints how I could narrow down the cause of host freeze?</p><p>thanks a lot in advance for your help</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390113">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390247" class="blockpost rowodd"> <h2><span><span class="conr">#1303</span> <a href="viewtopic.php?pid=1390247#p1390247">2014-03-09 08:10:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello guys, now I have another problem here.</p><p>I successfully pass-through my GTX770 into my KVM, and it works perfectly.<br />But I&#039;m using Ubuntu to do this I&#039;ll try Archlinux in these days.</p><p>Here is my question.</p><p>If I want to pass-through 2 GPUs into 2 VMs (each VM have 1 GPU), and these GPU is same (Ex. Both GTX480)<br />Is VFIO or pci-stub will got &#039;conflict&#039; when I entered hardware ID into pci-stub or VFIO?<br />Because same GPU have same hardware ID, and pci-stub.ids is input hardware ID only. (In bootloader cfg)</p><p>Is someone do this before?</p> <p class="postedit"><em>Last edited by AKSN74 (2014-03-09 08:13:23)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390247">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390260" class="blockpost roweven"> <h2><span><span class="conr">#1304</span> <a href="viewtopic.php?pid=1390260#p1390260">2014-03-09 08:45:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79534">zzz3000</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-02-16</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79534">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>to pereczes<br />I have the same problem with intel host and Windows7 hd7750 guest...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390260">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390326" class="blockpost rowodd"> <h2><span><span class="conr">#1305</span> <a href="viewtopic.php?pid=1390326#p1390326">2014-03-09 13:01:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=17456">FruitieX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2008-07-03</span></dd> <dd><span>Posts: 18</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=17456">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>KVM VGA passthrough confirmed working with an AMD Radeon R9 280X graphics card, host is Arch and guest Windows 8.1. More relevant specs:</p><p>Mainboard: Asrock Z87M Pro4 Socket LGA 1150<br />CPU: Intel Core i5 4670 3.4 GHz LGA 1150<br />Graphics card: Asus Radeon R9 280X DirectCU II TOP 3 GB GDDR5</p><p>To pereczes and zzz3000: I initially had issues with crashing (and refusing to boot again) right after Windows would either automatically install the video drivers or after I&#039;d do so manually (Catalyst). To fix this I:</p><p>1. Compiled latest qemu and seabios from git, used these. Had to comment out an assertion otherwise the code wouldn&#039;t compile. (probably not a great idea <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)<br />2. Passed through only the video card, not the HDMI audio interface on it. I&#039;m not sure if this actually helped the cause, I&#039;ll do some further testing once I get back home tonight. In the qemu version found in Arch repos this would cause the passed through display to show garbled output but it works in the git version.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390326">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390334" class="blockpost roweven"> <h2><span><span class="conr">#1306</span> <a href="viewtopic.php?pid=1390334#p1390334">2014-03-09 13:23:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>AKSN74 wrote:</cite><blockquote><div><p>Here is my question.</p><p>If I want to pass-through 2 GPUs into 2 VMs (each VM have 1 GPU), and these GPU is same (Ex. Both GTX480)<br />Is VFIO or pci-stub will got &#039;conflict&#039; when I entered hardware ID into pci-stub or VFIO?<br />Because same GPU have same hardware ID, and pci-stub.ids is input hardware ID only. (In bootloader cfg)</p><p>Is someone do this before?</p></div></blockquote></div><p>If you intend to pass both through to guests, it shouldn&#039;t matter.&#160; If you use pci-stub.ids= with the single vendor:device ID, both devices will be claimed.&#160; You can then individually more them over to vfio-pci.&#160; Multiple identical devices is usually only a problem if you intend one to be used by the host.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390334">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390533" class="blockpost rowodd"> <h2><span><span class="conr">#1307</span> <a href="viewtopic.php?pid=1390533#p1390533">2014-03-09 23:37:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=64462">mastersplinter777</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-10-09</span></dd> <dd><span>Posts: 8</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=64462">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi! I managed to successfully pass thru my Sparkle GTS450 1024M GPU to Windows 8.1 VM. But now I&#039;m trying to do the same with OSX 10.9 guest: </p><div class="codebox"><pre><code>spicec --host 127.0.0.1 --port 5908 &amp; sudo qemu-system-x86_64 \ -enable-kvm \ -bios &#039;/opt/Qemu/OSX/bios-1.7.4-osx.bin&#039; \ -smp 2,sockets=1,cores=2,threads=1 \ -spice port=5908,disable-ticketing \ -chardev spicevmc,id=vdagent,name=vdagent \ -device virtio-serial \ -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 \ -M q35 \ -m 4096 \ -cpu core2duo \ -rtc base=localtime \ -vga none \ -device ich9-usb-uhci1,id=usb1,bus=pcie.0 \ -usb -usbdevice host:15ca:00c3 \ -net nic,macaddr=00:00:00:8a:2b:2c,model=virtio,id=netkvm \ -net bridge \ -device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 \ -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device piix4-ide,addr=1a.0,bus=pcie.0 \ -drive file=&#039;/opt/Qemu/OSX/osx.img&#039;,id=hd,format=raw -device ide-hd,bus=ide.0,drive=hd</code></pre></div><p>and get message (after connecting to VM thru ssh):</p><div class="codebox"><pre><code>NVDA,Display-A: Not usable NVDA,Display-B: Not usable</code></pre></div><p>Also, when I try to do it using AMD 7770 GPU - Chameleon just hangs with a lot of unreadable symbols.<br />Could you please help me to solve this problem or maybe try to do the same youself?</p><p>P.S.: In the past I used pci-assign and successfully passed my AMD GPU to VM: <a href="https://www.linux.org.ru/gallery/screenshots/9732976#comments" rel="nofollow">https://www.linux.org.ru/gallery/screen … 6#comments</a></p> <p class="postedit"><em>Last edited by mastersplinter777 (2014-03-09 23:40:32)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390533">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390567" class="blockpost roweven"> <h2><span><span class="conr">#1308</span> <a href="viewtopic.php?pid=1390567#p1390567">2014-03-10 01:49:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>AKSN74 wrote:</cite><blockquote><div><p>Here is my question.</p><p>If I want to pass-through 2 GPUs into 2 VMs (each VM have 1 GPU), and these GPU is same (Ex. Both GTX480)<br />Is VFIO or pci-stub will got &#039;conflict&#039; when I entered hardware ID into pci-stub or VFIO?<br />Because same GPU have same hardware ID, and pci-stub.ids is input hardware ID only. (In bootloader cfg)</p><p>Is someone do this before?</p></div></blockquote></div><p>If you intend to pass both through to guests, it shouldn&#039;t matter.&#160; If you use pci-stub.ids= with the single vendor:device ID, both devices will be claimed.&#160; You can then individually more them over to vfio-pci.&#160; Multiple identical devices is usually only a problem if you intend one to be used by the host.</p></div></blockquote></div><p>Roger that! I&#039;ll try in these days, thanks for ur answers.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390567">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390621" class="blockpost rowodd"> <h2><span><span class="conr">#1309</span> <a href="viewtopic.php?pid=1390621#p1390621">2014-03-10 07:21:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80096">swex</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-09</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80096">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Yea! Second day and I&#039;ve got it working.<br />Asrock Z77 Extreme3<br />Intel Core i7-3770<br />Nvidia Geforce GT640 - host<br />AMD Radeon HD 7750<br />git qemu - no patches<br />patched ACS kubuntu 14.04&#160; kernel <br />patched nvidia host driver.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390621">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390666" class="blockpost roweven"> <h2><span><span class="conr">#1310</span> <a href="viewtopic.php?pid=1390666#p1390666">2014-03-10 10:11:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75968">deniv</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-16</span></dd> <dd><span>Posts: 27</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m trying to get 3.14rc6 work with dirty debug registers patches (<a href="http://www.spinics.net/lists/kvm/msg100840.html" rel="nofollow">http://www.spinics.net/lists/kvm/msg100840.html</a>). A minor annoyance is that the first patch doesn&#039;t apply cleanly, I have to do it manually. But the biggest issue is that kernel fails to compile: </p><div class="codebox"><pre><code>arch/x86/kvm/vmx.c: In function ‘vmx_sync_dirty_debug_regs’: arch/x86/kvm/vmx.c:5155:2: error: implicit declaration of function ‘get_debugreg’ [-Werror=implicit-function-declaration] get_debugreg(vcpu-&gt;arch.db[0], 0); ^</code></pre></div><p>Can somebody help me?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390666">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390882" class="blockpost rowodd"> <h2><span><span class="conr">#1311</span> <a href="viewtopic.php?pid=1390882#p1390882">2014-03-10 20:22:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>keatsfonam wrote:</cite><blockquote><div><p>EDIT2:</p><p>All problems solved by avoiding letting vfio-pci take the device from pci-stub upon starting the vm with the script provided.&#160; Thanks</p></div></blockquote></div><p>What exactly does that mean?</p><p>BTW, as of this morning everything except i915 vga arbiter stuff is in upstream, kernel and qemu.</p></div></blockquote></div><br /><p>I was perhaps a tad to fast saying that my GTX670 was pass through perfectly. I also get the dreaded error code 43 error people have been having. <br />I keep see references to a patch of yours aw, but is this already implemented upstream or do I have to compile &quot;qemu-vfio-vfio-pci-for-qemu-20131003.0&quot; for my arch install? (Quoting a post you made a couple of weeks ago)</p><p>When I boot my Win8.1 install I get the following in journalctl:</p><div class="codebox"><pre><code>Mar 10 22:10:45 arch kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Mar 10 22:10:45 arch kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Mar 10 22:10:54 arch kernel: kvm: zapping shadow pages for mmio generation wraparound Mar 10 22:10:56 arch kernel: vfio-pci 0000:00:19.0: irq 48 for MSI/MSI-X</code></pre></div><p>I use the following script to start my VM:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash # bind gtx 670, gpu audio and secondary network card echo -n &quot;Binding devices...&quot; sudo vfio-bind 0000:01:00.0 0000:01:00.1 0000:00:19.0 echo &quot;done&quot; echo &quot;Starting Synergy&quot; sudo systemctl start synergys@trimm echo &quot;Done&quot; echo -n &quot;Disabling display VGA1...&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --off # use pulseaudio #export QEMU_AUDIO_DRV=pa echo -n &quot;Starting VIRTUAL machine...&quot; sudo qemu-system-x86_64 \ -enable-kvm \ -M q35 \ -m 16384 \ -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ -bios /usr/share/qemu/bios.bin \ -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -nographic \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/var/lib/libvirt/images/Windows8.1.img,id=disk,format=raw \ -device ide-hd,bus=ahci.0,drive=disk \ -device vfio-pci,host=00:19.0,bus=pcie.0 echo &quot;Done&quot; sudo systemctl stop synergys@trimm echo -n &quot;Restoring display VGA1..&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --mode 1920x1080 --pos 0x0 --rotate normal echo &quot;done&quot;</code></pre></div><p>My setup at the moment is perfect for me, the only (small?) problem is the error code 43 issue.<br />Any help is greatly appreciated.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390882">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390889" class="blockpost roweven"> <h2><span><span class="conr">#1312</span> <a href="viewtopic.php?pid=1390889#p1390889">2014-03-10 20:39:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>keatsfonam wrote:</cite><blockquote><div><p>EDIT2:</p><p>All problems solved by avoiding letting vfio-pci take the device from pci-stub upon starting the vm with the script provided.&#160; Thanks</p></div></blockquote></div><p>What exactly does that mean?</p><p>BTW, as of this morning everything except i915 vga arbiter stuff is in upstream, kernel and qemu.</p></div></blockquote></div><br /><p>I was perhaps a tad to fast saying that my GTX670 was pass through perfectly. I also get the dreaded error code 43 error people have been having. <br />I keep see references to a patch of yours aw, but is this already implemented upstream or do I have to compile &quot;qemu-vfio-vfio-pci-for-qemu-20131003.0&quot; for my arch install? (Quoting a post you made a couple of weeks ago)</p><p>When I boot my Win8.1 install I get the following in journalctl:</p><div class="codebox"><pre><code>Mar 10 22:10:45 arch kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Mar 10 22:10:45 arch kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Mar 10 22:10:54 arch kernel: kvm: zapping shadow pages for mmio generation wraparound Mar 10 22:10:56 arch kernel: vfio-pci 0000:00:19.0: irq 48 for MSI/MSI-X</code></pre></div><p>I use the following script to start my VM:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash # bind gtx 670, gpu audio and secondary network card echo -n &quot;Binding devices...&quot; sudo vfio-bind 0000:01:00.0 0000:01:00.1 0000:00:19.0 echo &quot;done&quot; echo &quot;Starting Synergy&quot; sudo systemctl start synergys@trimm echo &quot;Done&quot; echo -n &quot;Disabling display VGA1...&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --off # use pulseaudio #export QEMU_AUDIO_DRV=pa echo -n &quot;Starting VIRTUAL machine...&quot; sudo qemu-system-x86_64 \ -enable-kvm \ -M q35 \ -m 16384 \ -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ -bios /usr/share/qemu/bios.bin \ -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -nographic \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/var/lib/libvirt/images/Windows8.1.img,id=disk,format=raw \ -device ide-hd,bus=ahci.0,drive=disk \ -device vfio-pci,host=00:19.0,bus=pcie.0 echo &quot;Done&quot; sudo systemctl stop synergys@trimm echo -n &quot;Restoring display VGA1..&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --mode 1920x1080 --pos 0x0 --rotate normal echo &quot;done&quot;</code></pre></div><p>My setup at the moment is perfect for me, the only (small?) problem is the error code 43 issue.<br />Any help is greatly appreciated.</p></div></blockquote></div><p>are you using my qemu-git and seabios-git packages?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390889">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390904" class="blockpost rowodd"> <h2><span><span class="conr">#1313</span> <a href="viewtopic.php?pid=1390904#p1390904">2014-03-10 21:07:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Bronek wrote:</cite><blockquote><div><div class="quotebox"><cite>Blind Tree Frog wrote:</cite><blockquote><div><p>1) Do I need multiple video cards or can this be done with just one? ...</p><p>2) Any source I should look at to set this up from a fresh install? ...</p></div></blockquote></div><p>I also plan to build such a machine, with essentially headless host and Windows running on selected cores with VGA passthrough. For the time being my plan is to use the newest stable kernel and rely on top post in this thread, since it seems to be kept up-to date (thanks <strong>nbhs</strong> !)</p></div></blockquote></div><p>I&#039;ve been swamped lately and I&#039;m only now getting back to this thread, but I noticed that it looks like my first question might be doable.&#160; So &#039;yay!&#039; for that.&#160; Skimming also seems to suggest that powering through the first post is going to be my best option for the second.</p><p>I&#039;m planning on reinstalling my machine this week and give this another go.&#160; Hopefully I&#039;ll get it working and be able to report back with great success.&#160; I&#039;ll be sure to take notes.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390904">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390909" class="blockpost roweven"> <h2><span><span class="conr">#1314</span> <a href="viewtopic.php?pid=1390909#p1390909">2014-03-10 21:23:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>RIght now im passing through my primary card (radeon 6950) what i did was, use pci-stub to bind it at boot and i disabled the efifb framebuffer with video=efifb:off on my grub cmdline</p></div></blockquote></div><p>While using VFIO or no?</p><p>Just checking since you said this earlier...</p><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>You should set you primary boot device as IGP instead of pcie, vfio-vga wont work on you primary vga device.</p></div></blockquote></div><p>... and I wasn&#039;t sure if you&#039;ve learned a different approach or if you found a setting that you didn&#039;t know about then (I&#039;m assuming you just found the &#039;efifb&#039; setting you mention above)</p><p>EDIT:<br />and how did i never notice post 40 about you doing this in XEN.... bah... reading is hard apparently.</p> <p class="postedit"><em>Last edited by Blind Tree Frog (2014-03-10 21:45:57)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390909">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390910" class="blockpost rowodd"> <h2><span><span class="conr">#1315</span> <a href="viewtopic.php?pid=1390910#p1390910">2014-03-10 21:23:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>What exactly does that mean?</p><p>BTW, as of this morning everything except i915 vga arbiter stuff is in upstream, kernel and qemu.</p></div></blockquote></div><br /><p>I was perhaps a tad to fast saying that my GTX670 was pass through perfectly. I also get the dreaded error code 43 error people have been having. <br />I keep see references to a patch of yours aw, but is this already implemented upstream or do I have to compile &quot;qemu-vfio-vfio-pci-for-qemu-20131003.0&quot; for my arch install? (Quoting a post you made a couple of weeks ago)</p><p>When I boot my Win8.1 install I get the following in journalctl:</p><div class="codebox"><pre><code>Mar 10 22:10:45 arch kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Mar 10 22:10:45 arch kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Mar 10 22:10:54 arch kernel: kvm: zapping shadow pages for mmio generation wraparound Mar 10 22:10:56 arch kernel: vfio-pci 0000:00:19.0: irq 48 for MSI/MSI-X</code></pre></div><p>I use the following script to start my VM:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash # bind gtx 670, gpu audio and secondary network card echo -n &quot;Binding devices...&quot; sudo vfio-bind 0000:01:00.0 0000:01:00.1 0000:00:19.0 echo &quot;done&quot; echo &quot;Starting Synergy&quot; sudo systemctl start synergys@trimm echo &quot;Done&quot; echo -n &quot;Disabling display VGA1...&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --off # use pulseaudio #export QEMU_AUDIO_DRV=pa echo -n &quot;Starting VIRTUAL machine...&quot; sudo qemu-system-x86_64 \ -enable-kvm \ -M q35 \ -m 16384 \ -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ -bios /usr/share/qemu/bios.bin \ -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -nographic \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/var/lib/libvirt/images/Windows8.1.img,id=disk,format=raw \ -device ide-hd,bus=ahci.0,drive=disk \ -device vfio-pci,host=00:19.0,bus=pcie.0 echo &quot;Done&quot; sudo systemctl stop synergys@trimm echo -n &quot;Restoring display VGA1..&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --mode 1920x1080 --pos 0x0 --rotate normal echo &quot;done&quot;</code></pre></div><p>My setup at the moment is perfect for me, the only (small?) problem is the error code 43 issue.<br />Any help is greatly appreciated.</p></div></blockquote></div><p>are you using my qemu-git and seabios-git packages?</p></div></blockquote></div><br /><p>I am afraid not, this is the result while using qemu-git and seabios-git: qemu-system-x86_64: hw/pci/pcie.c:240: pcie_cap_slot_hotplug_common: Assertion `((pci_dev-&gt;devfn) &amp; 0x07) == 0&#039; failed.</p> <p class="postedit"><em>Last edited by trimm (2014-03-10 21:24:42)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390910">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390912" class="blockpost roweven"> <h2><span><span class="conr">#1316</span> <a href="viewtopic.php?pid=1390912#p1390912">2014-03-10 21:26:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><br /><p>I was perhaps a tad to fast saying that my GTX670 was pass through perfectly. I also get the dreaded error code 43 error people have been having. <br />I keep see references to a patch of yours aw, but is this already implemented upstream or do I have to compile &quot;qemu-vfio-vfio-pci-for-qemu-20131003.0&quot; for my arch install? (Quoting a post you made a couple of weeks ago)</p><p>When I boot my Win8.1 install I get the following in journalctl:</p><div class="codebox"><pre><code>Mar 10 22:10:45 arch kernel: vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003) Mar 10 22:10:45 arch kernel: vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x900 Mar 10 22:10:54 arch kernel: kvm: zapping shadow pages for mmio generation wraparound Mar 10 22:10:56 arch kernel: vfio-pci 0000:00:19.0: irq 48 for MSI/MSI-X</code></pre></div><p>I use the following script to start my VM:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash # bind gtx 670, gpu audio and secondary network card echo -n &quot;Binding devices...&quot; sudo vfio-bind 0000:01:00.0 0000:01:00.1 0000:00:19.0 echo &quot;done&quot; echo &quot;Starting Synergy&quot; sudo systemctl start synergys@trimm echo &quot;Done&quot; echo -n &quot;Disabling display VGA1...&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --off # use pulseaudio #export QEMU_AUDIO_DRV=pa echo -n &quot;Starting VIRTUAL machine...&quot; sudo qemu-system-x86_64 \ -enable-kvm \ -M q35 \ -m 16384 \ -cpu host \ -smp 6,sockets=1,cores=6,threads=1 \ -bios /usr/share/qemu/bios.bin \ -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -nographic \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/var/lib/libvirt/images/Windows8.1.img,id=disk,format=raw \ -device ide-hd,bus=ahci.0,drive=disk \ -device vfio-pci,host=00:19.0,bus=pcie.0 echo &quot;Done&quot; sudo systemctl stop synergys@trimm echo -n &quot;Restoring display VGA1..&quot; xrandr --output VIRTUAL1 --off --output DP1 --off --output HDMI3 --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI2 --off --output HDMI1 --off --output VGA1 --mode 1920x1080 --pos 0x0 --rotate normal echo &quot;done&quot;</code></pre></div><p>My setup at the moment is perfect for me, the only (small?) problem is the error code 43 issue.<br />Any help is greatly appreciated.</p></div></blockquote></div><p>are you using my qemu-git and seabios-git packages?</p></div></blockquote></div><br /><p>I am afraid not, this is the result while using qemu-git and seabios-git: qemu-system-x86_64: hw/pci/pcie.c:240: pcie_cap_slot_hotplug_common: Assertion `((pci_dev-&gt;devfn) &amp; 0x07) == 0&#039; failed.</p></div></blockquote></div><p><del>Oh yeah my bad, i forgot to update it on the first post, try this one <a href="http://www.fileswap.com/dl/WQwPEF2Nj/" rel="nofollow">qemu-git.tar.gz</a></del><br />Sorry again its this one: <a href="http://www.fileswap.com/dl/4gx5nllaz5/" rel="nofollow">qemu-git.tar.gz</a></p> <p class="postedit"><em>Last edited by nbhs (2014-03-10 21:33:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390912">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390922" class="blockpost rowodd"> <h2><span><span class="conr">#1317</span> <a href="viewtopic.php?pid=1390922#p1390922">2014-03-10 21:43:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>GNA wrote:</cite><blockquote><div><p>/sys/kernel/iommu_groups is empty.<br />My system is supporting vt-d and it should be enabled. I dont get it.<br />Did i miss something obvious? Thanks for help!</p></div></blockquote></div><p>perhaps you forgot to boot with intel_iommu=on</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390922">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390924" class="blockpost roweven"> <h2><span><span class="conr">#1318</span> <a href="viewtopic.php?pid=1390924#p1390924">2014-03-10 21:53:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>are you using my qemu-git and seabios-git packages?</p></div></blockquote></div><br /><p>I am afraid not, this is the result while using qemu-git and seabios-git: qemu-system-x86_64: hw/pci/pcie.c:240: pcie_cap_slot_hotplug_common: Assertion `((pci_dev-&gt;devfn) &amp; 0x07) == 0&#039; failed.</p></div></blockquote></div><p><del>Oh yeah my bad, i forgot to update it on the first post, try this one <a href="http://www.fileswap.com/dl/WQwPEF2Nj/" rel="nofollow">qemu-git.tar.gz</a></del><br />Sorry again its this one: <a href="http://www.fileswap.com/dl/4gx5nllaz5/" rel="nofollow">qemu-git.tar.gz</a></p></div></blockquote></div><p>Tried with your second qemu-git and get the following:</p><p> cp: cannot stat &#039;/home/thor/Downloads/qemu-git/src/qemu-git-2.0.r31488.gb304bf0/.libs/libcacard.so*&#039;: No such file or directory<br />==&gt; ERROR: A failure occurred in package_libcacard-git().<br />&#160; &#160; Aborting...</p><p>Edit: I tried starting my virtual machine(after I installed the newest qemu-git and ignoring libcacard-git) but now I got issues with my hard drive. &quot;Booting from Hard Disk: boot failed, could not read the boot disk&quot;</p> <p class="postedit"><em>Last edited by trimm (2014-03-10 22:14:25)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390924">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390937" class="blockpost rowodd"> <h2><span><span class="conr">#1319</span> <a href="viewtopic.php?pid=1390937#p1390937">2014-03-10 22:14:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><br /><p>I am afraid not, this is the result while using qemu-git and seabios-git: qemu-system-x86_64: hw/pci/pcie.c:240: pcie_cap_slot_hotplug_common: Assertion `((pci_dev-&gt;devfn) &amp; 0x07) == 0&#039; failed.</p></div></blockquote></div><p><del>Oh yeah my bad, i forgot to update it on the first post, try this one <a href="http://www.fileswap.com/dl/WQwPEF2Nj/" rel="nofollow">qemu-git.tar.gz</a></del><br />Sorry again its this one: <a href="http://www.fileswap.com/dl/4gx5nllaz5/" rel="nofollow">qemu-git.tar.gz</a></p></div></blockquote></div><p>Tried with your second qemu-git and get the following:</p><p> cp: cannot stat &#039;/home/thor/Downloads/qemu-git/src/qemu-git-2.0.r31488.gb304bf0/.libs/libcacard.so*&#039;: No such file or directory<br />==&gt; ERROR: A failure occurred in package_libcacard-git().<br />&#160; &#160; Aborting...</p></div></blockquote></div><p>I downloaded the second package i linked and it builds and installs fine ( <a href="http://www.fileswap.com/dl/4gx5nllaz5/" rel="nofollow">qemu-git.tar.gz</a> ), and since you also managed to build the first package i posted, perhaps you&#039;re working on an unclean folder, try deleting the qemu-git folder, unpack my package and build it again</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390937">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1390949" class="blockpost roweven"> <h2><span><span class="conr">#1320</span> <a href="viewtopic.php?pid=1390949#p1390949">2014-03-10 22:36:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p><del>Oh yeah my bad, i forgot to update it on the first post, try this one <a href="http://www.fileswap.com/dl/WQwPEF2Nj/" rel="nofollow">qemu-git.tar.gz</a></del><br />Sorry again its this one: <a href="http://www.fileswap.com/dl/4gx5nllaz5/" rel="nofollow">qemu-git.tar.gz</a></p></div></blockquote></div><p>Tried with your second qemu-git and get the following:</p><p> cp: cannot stat &#039;/home/thor/Downloads/qemu-git/src/qemu-git-2.0.r31488.gb304bf0/.libs/libcacard.so*&#039;: No such file or directory<br />==&gt; ERROR: A failure occurred in package_libcacard-git().<br />&#160; &#160; Aborting...</p></div></blockquote></div><p>I downloaded the second package i linked and it builds and installs fine ( <a href="http://www.fileswap.com/dl/4gx5nllaz5/" rel="nofollow">qemu-git.tar.gz</a> ), and since you also managed to build the first package i posted, perhaps you&#039;re working on an unclean folder, try deleting the qemu-git folder, unpack my package and build it again</p></div></blockquote></div><p>Weird, I tried to delete the old folder and build it again but the issue persists.<br />However, I installed the qemu-git package, rebooted and now my GPU is working in WIndows 8.1VM without any errors. Thank you so much nbhs!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1390949">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1391074" class="blockpost rowodd"> <h2><span><span class="conr">#1321</span> <a href="viewtopic.php?pid=1391074#p1391074">2014-03-11 10:12:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72881">alexis_evo</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-04</span></dd> <dd><span>Posts: 33</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=72881">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>zoop2 wrote:</cite><blockquote><div><p>From here i am looking to implement the Debug registers patch that was mentioned by @aw a while back to improve performance.&#160; I am wondering what kernel that Patch was for, I am assuming it was for 3.13.x.</p></div></blockquote></div><p>The second debug register patchset that @aw posted (the generic one that works on AMD as well) is definitely for a newer kernel than 3.13.x. I used linux-mainline from AUR (3.14rc6 I think) and managed to get it compiling, but you&#039;ll need to fix a couple of the patches.</p><p>Actually, here... I&#039;ve uploaded my changes to the PKGBUILD/patches here. <a href="https://gist.github.com/anonymous/9482833" rel="nofollow">https://gist.github.com/anonymous/9482833</a></p><p>You&#039;ll need to download linux-mainline from the AUR, extract it, copy all of the .patch files from linux-mainline.tar.gz (the one in OP, not in AUR) into the new folder, replace the PKGBUILD with the one supplied, download all of the patches from that gist, then it should compile fine.</p><p>I&#039;m not quite sure what version that patchset was made for. I compared the diffs against the latest git and it still didn&#039;t match up. The diff files had lines/changes that didn&#039;t exist in the current git. But I don&#039;t know much about the kernel release/cvs structure, so maybe there&#039;s a newer version than the main git.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1391074">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1391113" class="blockpost roweven"> <h2><span><span class="conr">#1322</span> <a href="viewtopic.php?pid=1391113#p1391113">2014-03-11 11:35:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80088">pereczes</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-08</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>FruitieX wrote:</cite><blockquote><div><p>To pereczes and zzz3000: I initially had issues with crashing (and refusing to boot again) right after Windows would either automatically install the video drivers or after I&#039;d do so manually (Catalyst). To fix this I:<br />1. Compiled latest qemu and seabios from git, used these. Had to comment out an assertion otherwise the code wouldn&#039;t compile. (probably not a great idea <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)<br />2. Passed through only the video card, not the HDMI audio interface on it. I&#039;m not sure if this actually helped the cause, I&#039;ll do some further testing once I get back home tonight. In the qemu version found in Arch repos this would cause the passed through display to show garbled output but it works in the git version.</p></div></blockquote></div><p>@FruitieX: not clear from your post: crashing of host or guest? I assume host.</p><p>cloned git repo, built it (version 1.7.50)... BTW would be lovely if qemu people would embedd some extra commit version info into the version string<br />removed the </p><div class="codebox"><pre><code>-device vfio-pci,host=04:00.1,bus=root.1,addr=0.1</code></pre></div><p> line (HDMI sound)</p><p>but no changes... host is freezing once windows is trying to activate the catalyst driver (I assume that is the moment)</p><p>would be interesting to know what could be traced at this moment for easier investigation</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1391113">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1391187" class="blockpost rowodd"> <h2><span><span class="conr">#1323</span> <a href="viewtopic.php?pid=1391187#p1391187">2014-03-11 15:32:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>deniv wrote:</cite><blockquote><div><p>I&#039;m trying to get 3.14rc6 work with dirty debug registers patches (<a href="http://www.spinics.net/lists/kvm/msg100840.html" rel="nofollow">http://www.spinics.net/lists/kvm/msg100840.html</a>). A minor annoyance is that the first patch doesn&#039;t apply cleanly, I have to do it manually. But the biggest issue is that kernel fails to compile: </p><div class="codebox"><pre><code>arch/x86/kvm/vmx.c: In function ‘vmx_sync_dirty_debug_regs’: arch/x86/kvm/vmx.c:5155:2: error: implicit declaration of function ‘get_debugreg’ [-Werror=implicit-function-declaration] get_debugreg(vcpu-&gt;arch.db[0], 0); ^</code></pre></div><p>Can somebody help me?</p></div></blockquote></div><p>I just uploaded a new kernel package on the front page (3.13.6) that includes this patch</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1391187">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1391261" class="blockpost roweven"> <h2><span><span class="conr">#1324</span> <a href="viewtopic.php?pid=1391261#p1391261">2014-03-11 18:15:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77842">Flyser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-19</span></dd> <dd><span>Posts: 29</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>I just uploaded a new kernel package on the front page (3.13.6) that includes this patch</p></div></blockquote></div><p>Since I am not using arch, I tried to apply fix_reading_of_DR6.patch and debug_registers.patch from your linux-mainline tarball on top of 3.13.6, but if fails with</p><div class="codebox"><pre><code> CC [M] arch/x86/kvm/../../../virt/kvm/vfio.o arch/x86/kvm/vmx.c: In function &#039;vmx_sync_dirty_debug_regs&#039;: arch/x86/kvm/vmx.c:5124:2: error: implicit declaration of function &#039;get_debugreg&#039; [-Werror=implicit-function-declaration] make[3]: `arch/x86/realmode/rm/realmode.bin&#039; is up to date. CC [M] arch/x86/kvm/../../../virt/kvm/assigned-dev.o cc1: some warnings being treated as errors make[2]: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_5.html topic_6.html topic_7.html topic_8.html topic_9.html [arch/x86/kvm/vmx.o] Error 1 make[2]: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_5.html topic_6.html topic_7.html topic_8.html topic_9.html Waiting for unfinished jobs.... CHK kernel/config_data.h make[1]: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_5.html topic_6.html topic_7.html topic_8.html topic_9.html [arch/x86/kvm] Error 2 make: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_5.html topic_6.html topic_7.html topic_8.html topic_9.html [arch/x86] Error 2 make: 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_5.html topic_6.html topic_7.html topic_8.html topic_9.html Waiting for unfinished jobs....</code></pre></div><p>Anything I am missing?</p><p>EDIT: Adding &quot;#include &lt;asm/debugreg.h&gt;&quot; to arch/x86/kvm/vmx.c fixed the error. Maybe you could update the patch?</p> <p class="postedit"><em>Last edited by Flyser (2014-03-11 18:27:53)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1391261">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1391263" class="blockpost rowodd"> <h2><span><span class="conr">#1325</span> <a href="viewtopic.php?pid=1391263#p1391263">2014-03-11 18:22:38</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75968">deniv</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-16</span></dd> <dd><span>Posts: 27</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>nbhs wrote:</cite><blockquote><div><p>I just uploaded a new kernel package on the front page (3.13.6) that includes this patch</p></div></blockquote></div><p>B-but, but! 3.13 doesn&#039;t support hv-time. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1391263">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=52">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=51">51</a> <a href="viewtopic.php?id=162768&amp;p=52">52</a> <strong>53</strong> <a href="viewtopic.php?id=162768&amp;p=54">54</a> <a href="viewtopic.php?id=162768&amp;p=55">55</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=54">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
