<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 228) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=228" title="Page 228" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=227" title="Page 227" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=229" title="Page 229" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=227">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=226">226</a> <a href="viewtopic.php?id=162768&amp;p=227">227</a> <strong>228</strong> <a href="viewtopic.php?id=162768&amp;p=229">229</a> <a href="viewtopic.php?id=162768&amp;p=230">230</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=229">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1545828" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5676</span> <a href="viewtopic.php?pid=1545828#p1545828">2015-07-19 07:42:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Nazfellun wrote:</cite><blockquote><div><div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>2. Is there a better alternative than Synergy for gaming? Hitting the edges is a problem, and it seems to handle direct pointer captures very badly, so besides Steam Inhouse Streaming, is there a viable way to play D3D games?</p><p>Thanks for all your help getting me this far, and if anyone with similar issues to mine needs any help, I&#039;d be more than happy.</p></div></blockquote></div><p>If what you&#039;re referring to by &quot;seems to handle direct pointer captures very badly&quot; is what I think, ensure you have &#039;relativeMouseMoves = true&#039; in your server config, bind a button to lockCursorToScreen(toggle), and then lock the cursor to the vm screen when you&#039;re playing, should solve that issue and also your edge problem.</p></div></blockquote></div><p>Worked like a charm, thanks!</p><div class="quotebox"><cite>Michael Corleone wrote:</cite><blockquote><div><p>Just when I thought I was out, they pull me back in.</p></div></blockquote></div><p>The most luck I&#039;ve had with audio so far is Windows 8 recognising a &quot;High Definition Audio Controller&quot;, which believes it&#039;s outputting sound, but I hear nothing. I have used vnc_allow_host_audio = 1, and tried setting the qemu user to my own, but that only causes permission issues with the pci. libvirt is set to use ich9.</p><p>Edit: I should also point out that I&#039;m not using, nor have I been able to test, the nVidia HDMI sound, as the financial situ at the moment prohibits good monitors.</p> <p class="postedit"><em>Last edited by morat (2015-07-19 08:41:17)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545828">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1545921" class="blockpost roweven"> <h2><span><span class="conr">#5677</span> <a href="viewtopic.php?pid=1545921#p1545921">2015-07-19 12:32:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75548">Schlunze</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-03</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ts_reload@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>The most luck I&#039;ve had with audio so far is Windows 8 recognising a &quot;High Definition Audio Controller&quot;, which believes it&#039;s outputting sound, but I hear nothing. I have used vnc_allow_host_audio = 1, and tried setting the qemu user to my own, but that only causes permission issues with the pci. libvirt is set to use ich9.</p></div></blockquote></div><p>Maybe you use libvirt / virtmanager and the guest window is closed then you get no sound output.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1545921">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546056" class="blockpost rowodd"> <h2><span><span class="conr">#5678</span> <a href="viewtopic.php?pid=1546056#p1546056">2015-07-19 21:09:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92679">Col_Panic</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-19</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hey guys! Long time reader here, first time poster. I hope someone can help me out!<br />I&#039;ve had passthrough working for a while now, on my old GPU; I&#039;m running kernel 4.1.2, and binding the GPU to vfio on boot.<br />I&#039;m also loading the modules: <br />amd_iommu<br />vfio<br />vfio_iommu_type1<br />vfio_pci<br />vfio_virqfd<br />I don&#039;t have any other special configuration on either my host or guest.</p><p>After switching out my primary GPU for the old KVM one, and adding a brand shiny new secondary GPU, my setup is now:</p><p>CPU: AMD FX8350<br />MOBO: Asus M5A97 LE R2.0 (with latest BIOS)<br />GPU 1: Radeon HD 7770<br />GPU 2: Radeon R9 270x</p><p>Passthrough still works for the 7770 if I use that one as secondary instead, but trying to pass through my new GPU doesn&#039;t seem to work. My Windows guest starts, then my host locks up as the guest tries to load the GPU.<br />This is what it dumps out:</p><div class="codebox"><pre class="vscroll"><code>[ 645.924773] qemu-system-x86: sending ioctl 5326 to a partition! [ 645.924784] qemu-system-x86: sending ioctl 80200204 to a partition! [ 648.526720] vfio-pci 0000:00:13.2: enabling device (0000 -&gt; 0002) [ 648.558718] vfio_cap_init: 0000:00:13.2 hiding cap 0xa [ 648.674350] AMD-Vi: Completion-Wait loop timed out [ 648.787568] AMD-Vi: Completion-Wait loop timed out [ 648.900662] AMD-Vi: Completion-Wait loop timed out [ 648.936352] AMD-Vi: Completion-Wait loop timed out [ 649.012717] AMD-Vi: Completion-Wait loop timed out [ 649.123771] AMD-Vi: Completion-Wait loop timed out [ 649.234736] AMD-Vi: Completion-Wait loop timed out [ 649.349347] AMD-Vi: Completion-Wait loop timed out [ 649.464152] AMD-Vi: Completion-Wait loop timed out [ 649.478740] vfio-pci 0000:05:00.0: enabling device (0000 -&gt; 0003) [ 649.478995] vfio_ecap_init: 0000:05:00.0 hiding ecap 0x19@0x270 [ 649.479008] vfio_ecap_init: 0000:05:00.0 hiding ecap 0x1b@0x2d0 [ 649.498706] vfio-pci 0000:05:00.1: enabling device (0000 -&gt; 0002) [ 649.678811] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f810] [ 649.678823] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f830] [ 649.678829] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f850] [ 650.797361] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f8a0] [ 650.808317] AMD-Vi: Completion-Wait loop timed out [ 650.808320] ------------[ cut here ]------------ [ 650.808326] WARNING: CPU: 6 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 650.808328] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 650.808364] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 650.808379] CPU: 6 PID: 3851 Comm: qemu-system-x86 Not tainted 4.1.2-040102-generic #201507101335 [ 650.808380] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 650.808382] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 650.808385] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 650.808387] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 650.808389] Call Trace: [ 650.808394] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 650.808398] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 650.808400] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 650.808401] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 650.808404] [&lt;ffffffff81013673&gt;] ? __switch_to+0x1e3/0x580 [ 650.808406] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 650.808409] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 650.808411] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 650.808417] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 650.808421] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 650.808437] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 650.808446] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 650.808452] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 650.808455] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 650.808459] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 650.808461] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 650.808463] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 650.808465] ---[ end trace 29b4fb9fbe5211cb ]--- [ 650.926817] AMD-Vi: Completion-Wait loop timed out [ 650.926826] ------------[ cut here ]------------ [ 650.926841] WARNING: CPU: 5 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 650.926844] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 650.926923] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 650.926957] CPU: 5 PID: 3851 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 650.926961] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 650.926965] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 650.926971] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 650.926976] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 650.926982] Call Trace: [ 650.926991] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 650.926998] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 650.927003] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 650.927007] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 650.927014] [&lt;ffffffff81013673&gt;] ? __switch_to+0x1e3/0x580 [ 650.927019] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 650.927025] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 650.927029] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 650.927041] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 650.927053] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 650.927083] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 650.927105] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 650.927119] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 650.927127] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 650.927133] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 650.927138] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 650.927144] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 650.927149] ---[ end trace 29b4fb9fbe5211cc ]--- [ 651.058621] AMD-Vi: Completion-Wait loop timed out [ 651.058626] ------------[ cut here ]------------ [ 651.058632] WARNING: CPU: 4 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 651.058633] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 651.058669] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 651.058684] CPU: 4 PID: 3851 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 651.058686] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 651.058687] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 651.058689] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 651.058691] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 651.058694] Call Trace: [ 651.058699] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 651.058702] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 651.058704] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 651.058705] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 651.058707] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 651.058710] [&lt;ffffffff8118fb1e&gt;] ? compound_unlock_irqrestore+0xe/0x20 [ 651.058713] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 651.058715] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 651.058720] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 651.058725] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 651.058742] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 651.058750] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 651.058756] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 651.058784] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 651.058788] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 651.058800] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 651.058818] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 651.058829] ---[ end trace 29b4fb9fbe5211cd ]--- [ 651.183912] AMD-Vi: Completion-Wait loop timed out [ 651.183917] ------------[ cut here ]------------ [ 651.183922] WARNING: CPU: 4 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 651.183924] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 651.183956] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 651.183970] CPU: 4 PID: 3851 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 651.183971] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 651.183973] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 651.183975] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 651.183977] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 651.183979] Call Trace: [ 651.183984] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 651.183987] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 651.183989] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 651.183990] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 651.183993] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 651.183996] [&lt;ffffffff81190156&gt;] ? put_compound_page+0xd6/0x1b0 [ 651.183999] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 651.184000] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 651.184006] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 651.184010] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 651.184027] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 651.184035] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 651.184041] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 651.184045] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 651.184047] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 651.184050] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 651.184052] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 651.184054] ---[ end trace 29b4fb9fbe5211ce ]--- [ 651.311628] AMD-Vi: Completion-Wait loop timed out [ 651.311633] ------------[ cut here ]------------ [ 651.311640] WARNING: CPU: 4 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 651.311641] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 651.311682] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 651.311699] CPU: 4 PID: 3851 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 651.311701] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 651.311703] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 651.311706] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 651.311708] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 651.311711] Call Trace: [ 651.311716] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 651.311720] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 651.311722] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 651.311724] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 651.311727] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 651.311730] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 651.311732] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 651.311739] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 651.311744] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 651.311762] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 651.311772] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 651.311779] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 651.311783] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 651.311786] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 651.311789] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 651.311792] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 651.311794] ---[ end trace 29b4fb9fbe5211cf ]--- [ 651.437788] AMD-Vi: Completion-Wait loop timed out [ 651.437793] ------------[ cut here ]------------ [ 651.437798] WARNING: CPU: 5 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 651.437799] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 651.437837] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 651.437853] CPU: 5 PID: 3851 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 651.437854] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 651.437856] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 651.437858] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 651.437860] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 651.437862] Call Trace: [ 651.437867] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 651.437870] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 651.437872] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 651.437873] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 651.437876] [&lt;ffffffff81013673&gt;] ? __switch_to+0x1e3/0x580 [ 651.437878] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 651.437881] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 651.437883] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 651.437888] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 651.437893] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 651.437909] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 651.437917] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 651.437923] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 651.437927] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 651.437930] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 651.437932] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 651.437935] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 651.437936] ---[ end trace 29b4fb9fbe5211d0 ]--- [ 651.562996] AMD-Vi: Completion-Wait loop timed out [ 651.563001] ------------[ cut here ]------------ [ 651.563007] WARNING: CPU: 4 PID: 3851 at /home/kernel/COD/linux/drivers/iommu/amd_iommu.c:1199 __domain_flush_pages+0x162/0x170() [ 651.563008] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 651.563045] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 651.563061] CPU: 4 PID: 3851 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 651.563062] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 651.563064] ffffffff81b124e0 ffff88048e27bb88 ffffffff817d076c 0000000000000000 [ 651.563066] 0000000000000000 ffff88048e27bbc8 ffffffff81079b0a 00000000fffffffb [ 651.563068] ffff880533c53610 00000000fffffffb 0000000000000000 7fffffffffffffff [ 651.563070] Call Trace: [ 651.563075] [&lt;ffffffff817d076c&gt;] dump_stack+0x45/0x57 [ 651.563078] [&lt;ffffffff81079b0a&gt;] warn_slowpath_common+0x8a/0xc0 [ 651.563080] [&lt;ffffffff81079bfa&gt;] warn_slowpath_null+0x1a/0x20 [ 651.563081] [&lt;ffffffff814f4662&gt;] __domain_flush_pages+0x162/0x170 [ 651.563083] [&lt;ffffffff814f5259&gt;] amd_iommu_unmap+0x119/0x140 [ 651.563087] [&lt;ffffffff8118fb1e&gt;] ? compound_unlock_irqrestore+0xe/0x20 [ 651.563090] [&lt;ffffffff814eec79&gt;] iommu_unmap+0xc9/0x1d0 [ 651.563091] [&lt;ffffffff814f242f&gt;] ? amd_iommu_iova_to_phys+0x2f/0x80 [ 651.563097] [&lt;ffffffffc01575b7&gt;] vfio_remove_dma+0x107/0x1f0 [vfio_iommu_type1] [ 651.563101] [&lt;ffffffffc0157d35&gt;] vfio_iommu_type1_ioctl+0x3e5/0xa40 [vfio_iommu_type1] [ 651.563117] [&lt;ffffffffc01c674a&gt;] ? kvm_set_memory_region+0x3a/0x50 [kvm] [ 651.563126] [&lt;ffffffffc01c6cb5&gt;] ? kvm_vm_ioctl+0x555/0x790 [kvm] [ 651.563132] [&lt;ffffffffc000a6f9&gt;] vfio_fops_unl_ioctl+0x79/0x2b0 [vfio] [ 651.563135] [&lt;ffffffff8120c4f8&gt;] do_vfs_ioctl+0x2f8/0x510 [ 651.563138] [&lt;ffffffff81066f16&gt;] ? __do_page_fault+0x1b6/0x450 [ 651.563140] [&lt;ffffffff8120c791&gt;] SyS_ioctl+0x81/0xa0 [ 651.563143] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 651.563145] ---[ end trace 29b4fb9fbe5211d1 ]--- [ 651.654821] BUG: unable to handle kernel NULL pointer dereference at 0000000000000049 [ 651.654855] IP: [&lt;ffffffff810f745e&gt;] drop_futex_key_refs.isra.14+0xe/0x70 [ 651.654882] PGD 0 [ 651.654890] Oops: 0000 [#1] SMP [ 651.654903] Modules linked in: vhost_net vhost macvtap macvlan xt_CHECKSUM iptable_mangle ipt_REJECT nf_reject_ipv4 xt_tcpudp ebtable_filter ebtables ip6table_filter ip6_tables iptable_filter ip_tables x_tables cmac rfcomm bnep cfg80211 bridge stp llc nls_iso8859_1 btusb btbcm btintel eeepc_wmi bluetooth asus_wmi sparse_keymap video crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_usb_audio aesni_intel joydev aes_x86_64 snd_usbmidi_lib snd_hda_codec_realtek lrw snd_hda_codec_generic snd_hda_intel gf128mul glue_helper snd_hda_controller ablk_helper edac_core snd_hda_codec cryptd snd_hda_core snd_hwdep serio_raw edac_mce_amd 8250_fintek tpm_infineon fam15h_power i2c_piix4 k10temp shpchp mac_hid snd_aloop snd_pcm snd_seq_midi snd_seq_midi_event snd_rawmidi snd_seq snd_seq_device snd_timer snd soundcore [ 651.655166] kvm_amd kvm vfio_iommu_type1 parport_pc ppdev lp parport autofs4 hid_generic usbhid hid amdkfd amd_iommu_v2 radeon i2c_algo_bit ttm drm_kms_helper drm mxm_wmi psmouse vfio_pci ahci r8169 vfio_virqfd libahci mii vfio wmi [ 651.655244] CPU: 4 PID: 3848 Comm: qemu-system-x86 Tainted: G W 4.1.2-040102-generic #201507101335 [ 651.655275] Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 LE R2.0, BIOS 2601 03/24/2015 [ 651.655305] task: ffff88048e2764a0 ti: ffff8804bc08c000 task.ti: ffff8804bc08c000 [ 651.655350] RIP: 0010:[&lt;ffffffff810f745e&gt;] [&lt;ffffffff810f745e&gt;] drop_futex_key_refs.isra.14+0xe/0x70 [ 651.655380] RSP: 0018:ffff8804bc08fcc8 EFLAGS: 00010286 [ 651.655396] RAX: ffff88048e2764a0 RBX: 0000000000000001 RCX: 00000000c0000100 [ 651.655419] RDX: ffff8804bc090000 RSI: 0000000000000049 RDI: ffff8805313eda00 [ 651.655440] RBP: ffff8804bc08fcc8 R08: ffff8804bc08c000 R09: 0000000000000000 [ 651.655461] R10: 0000000000000004 R11: 0000000000000005 R12: 0000000000000000 [ 651.655482] R13: 0000000000000000 R14: 0000000000000000 R15: ffff88048e2764a0 [ 651.655504] FS: 00007f24f8e3cb00(0000) GS:ffff88054ed00000(0000) knlGS:0000000000000000 [ 651.655528] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [ 651.655545] CR2: 0000000000000049 CR3: 00000004bc371000 CR4: 00000000000407e0 [ 651.655566] Stack: [ 651.655574] ffff8804bc08fe28 ffffffff810f9122 ffff8804bc11bc00 ffffffff00000019 [ 651.655598] 0000000000000000 ffff8804bc08fd60 0000000000000002 000055989a1a1ac0 [ 651.655622] dead000000200200 ffffc90003567780 0000000000000064 ffff8804bc08fd20 [ 651.655646] Call Trace: [ 651.655657] [&lt;ffffffff810f9122&gt;] futex_wait+0x1a2/0x280 [ 651.655676] [&lt;ffffffff8120d160&gt;] ? poll_select_copy_remaining+0x130/0x130 [ 651.655698] [&lt;ffffffff8120d160&gt;] ? poll_select_copy_remaining+0x130/0x130 [ 651.655719] [&lt;ffffffff810fa4ee&gt;] do_futex+0xde/0x5f0 [ 651.655736] [&lt;ffffffff8101e2b9&gt;] ? read_tsc+0x9/0x10 [ 651.655753] [&lt;ffffffff810ebd8e&gt;] ? ktime_get_ts64+0x4e/0xf0 [ 651.655771] [&lt;ffffffff8120d131&gt;] ? poll_select_copy_remaining+0x101/0x130 [ 651.655793] [&lt;ffffffff810faa71&gt;] SyS_futex+0x71/0x150 [ 651.655811] [&lt;ffffffff817d8272&gt;] system_call_fastpath+0x16/0x75 [ 651.655830] Code: c3 0f 1f 40 00 55 48 89 e5 0f 1f 40 00 e8 0b cb 11 00 5d f3 c3 0f 1f 84 00 00 00 00 00 66 66 66 66 90 55 48 85 ff 48 89 e5 74 3a &lt;8b&gt; 06 83 e0 03 83 f8 01 74 10 83 f8 02 75 06 f0 ff 4f 4c 74 15 [ 651.655921] RIP [&lt;ffffffff810f745e&gt;] drop_futex_key_refs.isra.14+0xe/0x70 [ 651.655943] RSP &lt;ffff8804bc08fcc8&gt; [ 651.655953] CR2: 0000000000000049 [ 651.660818] ---[ end trace 29b4fb9fbe5211d2 ]--- [ 651.916078] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f920] [ 651.916087] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f940] [ 653.034592] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fdb0] [ 653.034601] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f9d0] [ 653.034605] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2f9f0] [ 653.034609] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fa10] [ 653.034613] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fa30] [ 653.034616] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fa50] [ 653.034619] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fa70] [ 653.034622] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fa90] [ 653.034626] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fab0] [ 653.034629] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fad0] [ 653.034632] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2faf0] [ 653.034635] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fb10] [ 653.034639] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fb30] [ 653.034642] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fb50] [ 653.034645] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fb70] [ 653.034648] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fb90] [ 653.034651] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fbb0] [ 653.034654] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fbd0] [ 653.034658] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fbf0] [ 653.034661] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fc10] [ 653.034664] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fc30] [ 653.034667] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fc50] [ 653.034670] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fc70] [ 653.034674] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fc90] [ 653.034677] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fcb0] [ 653.034680] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fcd0] [ 653.034683] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fcf0] [ 653.034686] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fd10] [ 653.034689] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fd30] [ 653.034693] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fd50] [ 653.034696] AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=05:00.0 address=0x0000000536f2fd70]</code></pre></div><p>...followed by a lot more IOTLB_INV_TIMEOUT messages.</p><p>I also get a set of &quot;AMD-Vi: Completion-Wait loop timed out&quot; messages on boot if I bind the 270x card (otherwise, it&#039;s the same as the other card), but afterwards, lspci shows the card properly bound to vfio.</p><p>I&#039;m not sure what to do here, Has anyone seen this issue before, who might be able to point me in the right direction?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546056">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546059" class="blockpost roweven"> <h2><span><span class="conr">#5679</span> <a href="viewtopic.php?pid=1546059#p1546059">2015-07-19 21:17:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Col_Panic<br />I was getting inexplicable kernel panics for the longest time, before it was pointed out to me that one of the PCI ids was mistyped. Check and double check, and if it still hangs, pastebin your dmesg and command line/domain xml; and perhaps someone wiser than I could lend a hand.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546059">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546060" class="blockpost rowodd"> <h2><span><span class="conr">#5680</span> <a href="viewtopic.php?pid=1546060#p1546060">2015-07-19 21:20:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@Col_Panic</p><p>modprobe.d:<br />options vfio_iommu_type1 disable_hugepages=1</p><p>That&#039;s my default answer for anyone getting strange AMD-Vi problems.</p><p>BTW, amd_iommu cannot be built as a module.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546060">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546063" class="blockpost roweven"> <h2><span><span class="conr">#5681</span> <a href="viewtopic.php?pid=1546063#p1546063">2015-07-19 21:21:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Schlunze wrote:</cite><blockquote><div><div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>The most luck I&#039;ve had with audio so far is Windows 8 recognising a &quot;High Definition Audio Controller&quot;, which believes it&#039;s outputting sound, but I hear nothing. I have used vnc_allow_host_audio = 1, and tried setting the qemu user to my own, but that only causes permission issues with the pci. libvirt is set to use ich9.</p></div></blockquote></div><p>Maybe you use libvirt / virtmanager and the guest window is closed then you get no sound output.</p></div></blockquote></div><p>So then, is it impossible to have sound passed through the host without a libvirt VNC session?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546063">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546071" class="blockpost rowodd"> <h2><span><span class="conr">#5682</span> <a href="viewtopic.php?pid=1546071#p1546071">2015-07-19 22:05:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92679">Col_Panic</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-19</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>@Col_Panic</p><p>modprobe.d:<br />options vfio_iommu_type1 disable_hugepages=1</p><p>That&#039;s my default answer for anyone getting strange AMD-Vi problems.</p><p>BTW, amd_iommu cannot be built as a module.</p></div></blockquote></div><p>Thanks! This seems to have gotten me somewhere,<br />I&#039;m still getting the same iommu_unmap, etc messages, followed by IOTLB_INV_TIMEOUT. But instead of crashing the host after IOTLB_INV_TIMEOUT, it&#039;s constantly looping back to the first error.<br />Passthrough isn&#039;t working yet, but at least one problem is solved!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546071">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546078" class="blockpost roweven"> <h2><span><span class="conr">#5683</span> <a href="viewtopic.php?pid=1546078#p1546078">2015-07-19 22:34:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>No success whatsoever with the pciid spoofing. I attempted to spoof my Titan X as an M6000 for the purpose of using Hyper-V enlightenments. I patched Qemu 2.3.0 with the patch posted earlier. It needed some modifications to work with 2.3.0. The file was moved to vfio/pci.c instead of misc/vfio.c and one of the structs was now VFIOPCIDevice instead of VFIODevice.</p><p>Once I started Qemu with the new pci id, the VM GPU would not show a picture. I let it boot the OS but it would remain blank. Of course I did a sanity check to see if it would work with the alteration enabled but with the original pci id. That worked. However, passing any rom with the romfile option produced a black screen, even with the actual rom dumped with GPU-Z in guest Windows. In summary:</p><p>1) altered PCIIDs to M6000 (x-vid=0x10DE,x-did=0x17f0,x-ss-vid=0x10DE,x-ss-did=0x1129) =&gt; black screen<br />2) altered PCIIDs to M6000, supplied original rom =&gt; black screen<br />3) altered PCIIDS to original (x-vid=0x10DE,x-did=0x17c2,x-ss-vid=0x10DE,x-ss-did=0x1132) =&gt; works<br />4) altered PCIIDS to original, supplied original rom =&gt; black screen</p><p>#4 puzzles me the most. Another thing worth mentioning is that I got a BSOD when I tried to boot without any trickery after attempting all of the above. After a host reboot, I could boot the guest again, suggesting that the GPU was left in a broken state before the reboot. I don&#039;t know if supplying an M6000 rom, which I don&#039;t have, would do any good since even the card&#039;s own rom gives me a black screen. I wonder if Nvidia has added more obstacles to the cards.</p><p>Could someone else with a Maxwell card try this?</p><p>EDIT: For clarification, I also tried #4 after a host reboot to make sure the GPU was not left in a messed up state. Black screen. I forgot to mention that I briefly tried SeaBIOS instead of OVMF with a more minimalistic qemu command line and #1 but I still couldn&#039;t get a picture out of the GPU.</p><p>Here&#039;s an example of my configuration for the GPU passthrough. I removed the hostdev configuration and replaced it with a custom qemu command line configuration:</p><div class="codebox"><pre><code> &lt;qemu:commandline&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.0,id=hostdevvga,bus=pci.0,addr=0x8,x-vid=0x10DE,x-did=0x17c2,x-ss-vid=0x10DE,x-ss-did=0x1132,romfile=GM200.rom&#039;/&gt; &lt;/qemu:commandline&gt;</code></pre></div><p>where the values are according to #4.</p> <p class="postedit"><em>Last edited by impulse_255 (2015-07-19 22:54:09)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546078">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546151" class="blockpost rowodd"> <h2><span><span class="conr">#5684</span> <a href="viewtopic.php?pid=1546151#p1546151">2015-07-20 06:27:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thx impulse_255 for trying it out....</p><p>This is how I start my vm as grid k2....</p><div class="quotebox"><blockquote><div><p>&lt;qemu:arg value=&#039;-device&#039;/&gt;<br />&#160; &#160; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on,x-vid=0x10DE,x-did=0x11BF,x-ss-vid=0x10DE,x-ss-did=0x0965&#039;&#039;/&gt;</p></div></blockquote></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546151">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546184" class="blockpost roweven"> <h2><span><span class="conr">#5685</span> <a href="viewtopic.php?pid=1546184#p1546184">2015-07-20 10:02:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Ok, I got it working. First of all, the rom dump I took from Windows was different to one I took from the host with the GPU in an uninitialised state (resumed from S3 suspend and had not started the VM after that). Once I repeated #4 with that dump, it worked.</p><p>Next I read the eevblog forum posts on hardware pci id modding (euphemism for fiddling with your pricey graphics cards with a soldering iron) and rom flashing. Damn, we have it easy. Everything can be safely done in software. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I took the working original rom and changed the pci ids with a hex editor. VGA roms have a rudimentary checksum which can be fooled by changing some non-critical plaintext strings present in the rom to compensate for any relevant changes: <a href="http://www.eevblog.com/forum/chat/hacking-nvidia-cards-into-their-professional-counterparts/msg208495/#msg208495" rel="nofollow">http://www.eevblog.com/forum/chat/hacki … #msg208495</a></p><p>It works! In installed the Quadro driver and enabled hyper-v enlightenments. I did not run benchmarks yet but I can&#039;t see any significant difference, though. Crysis Warhead which runs noticeably worse than on bare metal is still as cpu limited as ever. Well, it was an exiting journey anyway, lol.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546184">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546192" class="blockpost rowodd"> <h2><span><span class="conr">#5686</span> <a href="viewtopic.php?pid=1546192#p1546192">2015-07-20 10:44:17</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Nice, does it work with geforce driver? not quadro one? but I guess its same... now i can go maxwell haha <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />edit: you got i7 2600? about crysis... did you try run different cpu config like cores=4/8 threads=1? and what about cpu governor is it set to performance? I&#039;m using it like this <a href="http://justpaste.it/mgsj" rel="nofollow">http://justpaste.it/mgsj</a></p><br /><br /><p>edit2: maybe you should post it to eevlog, so that guys with vt-d don&#039;t have to solder <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p> <p class="postedit"><em>Last edited by slis (2015-07-20 11:50:42)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546192">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546204" class="blockpost roweven"> <h2><span><span class="conr">#5687</span> <a href="viewtopic.php?pid=1546204#p1546204">2015-07-20 11:51:37</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>The quadro driver is a separate package. After booting with the changes, Windows was in standard vga mode and I had to install the other driver. It seems to work just the same, including the nv control panel.</p><p>I have tried various cpu settings such as cores=4,threads=2 which will give the guest all the throughput it can get. Performance governor too. Now I use cores=3,threads=2 and keep host processes on the remaining core to keep latency and stutter down. I&#039;m not that concerned with how Crysis runs. I noticed its framerate issues and I have since used it as a benchmark for a game that does not play nicely in a VM (for me at least). It would be good to iron out such exceptional issues. Other games such as Witcher 3 run just fine with everything cranked up.</p><p>BTW, a disadvantage of having a card appear as Quadro: MSI Afterburner no longer provides voltage controls for overclocking. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Maybe it could be fooled somehow as well. It&#039;s the exact same card and bios except for the ids after all. But that does not belong here.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546204">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546205" class="blockpost rowodd"> <h2><span><span class="conr">#5688</span> <a href="viewtopic.php?pid=1546205#p1546205">2015-07-20 11:56:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>For me using threads=1 with cores=4/8 instead threads=2 cores=2/4 is much faster in cpu dependent games / dota2.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546205">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546209" class="blockpost roweven"> <h2><span><span class="conr">#5689</span> <a href="viewtopic.php?pid=1546209#p1546209">2015-07-20 12:03:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>slis wrote:</cite><blockquote><div><p>For me using threads=1 with cores=4/8 instead threads=2 cores=2/4 is much faster in cpu dependent games / dota2.</p></div></blockquote></div><p>Hmm. Someone on reddit claimed the exact opposite. Do you know if Windows actually treats logical (HT) processors differently than physical or does threads=1 vs. 2 change hypervisor behaviour?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546209">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546210" class="blockpost rowodd"> <h2><span><span class="conr">#5690</span> <a href="viewtopic.php?pid=1546210#p1546210">2015-07-20 12:07:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Well, I don&#039;t know, you should try it, with smth similar to what I posted on that pasteit link, real cores are 0-3.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546210">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546215" class="blockpost roweven"> <h2><span><span class="conr">#5691</span> <a href="viewtopic.php?pid=1546215#p1546215">2015-07-20 12:24:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>slis wrote:</cite><blockquote><div><p>Well, I don&#039;t know, you should try it, with smth similar to what I posted on that pasteit link, real cores are 0-3.</p></div></blockquote></div><br /><p>All right, thanks. I&#039;ll try that.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546215">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546348" class="blockpost rowodd"> <h2><span><span class="conr">#5692</span> <a href="viewtopic.php?pid=1546348#p1546348">2015-07-20 20:57:32</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80749">SXX</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-31</span></dd> <dd><span>Posts: 15</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80749">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Just wonder is it possible to pass 2nd GPU or two GPUs to same VM without ACS patch?<br />I just trying to pass HD6950 (work alone just fine) and GTX260 into same VM, but it&#039;s just don&#039;t work.<br />When I try to only pass GTX260 (that use 2nd PCIe port) it&#039;s fail with &quot;KVM internal error. Suberror: 1&quot;.</p><p>Is that would work if I&#039;m going to apply ACS? And if so is same patch would work for 4.1 kernel?</p><p>PS: Also a bit off-topic question, but anyway. Is there way to make QEMU emulate USB mouse with more than 3 buttons? I already using &quot;-device usb-mouse&quot;, but on host I have mouse with 7 buttons while QEMU only grabbing 3 first.</p> <p class="postedit"><em>Last edited by SXX (2015-07-20 20:57:45)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><strong>Online</strong></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546348">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546354" class="blockpost roweven"> <h2><span><span class="conr">#5693</span> <a href="viewtopic.php?pid=1546354#p1546354">2015-07-20 21:14:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Nngh. The Quadro solution isn&#039;t problem free either. If hyper-v enlightenments are enabled, the driver does work but runs in some weird crippled mode. There are some missing configuration options such as display rotation, digital audio and custom resolutions. It also would not let me use refresh rates over 85 Hz which is very annoying since I could go up to 144 Hz. Now I&#039;m torn between making the most out of my monitor in less demanding games or getting some extra performance in more demanding ones. To make matters worse I can&#039;t simply switch them on or off between VM restarts because in Quadro mode and hyper-v disabled fullscreen games show a blank screen. WTF? Switching between &quot;graphics cards&quot; needs a driver reinstall every time. I&#039;m starting to believe nvidia&#039;s explanation that it was indeed incompetence, not malice, that broke hyper-v.</p><p>As a bonus, I ran GTA 5&#039;s built-in benchmark with Quadro mod + HV and Titan X without HV. The difference is small but there were annoying stutters that occurred without HV. It could be placebo, too. <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Here are the results:</p><p>HV enabled:<br />Frames Per Second (Higher is better) Min, Max, Avg<br />Pass 0, 39.046333, 92.392410, 58.477955<br />Pass 1, 20.063923, 80.518539, 48.624252<br />Pass 2, 36.416340, 88.159317, 61.158989<br />Pass 3, 35.666138, 93.538368, 69.098633<br />Pass 4, 15.514916, 103.371994, 58.484459</p><p>HV disabled:<br />Frames Per Second (Higher is better) Min, Max, Avg<br />Pass 0, 24.502665, 69.663994, 57.547050<br />Pass 1, 27.271063, 61.661015, 47.173367<br />Pass 2, 36.337238, 79.242561, 59.791538<br />Pass 3, 24.399113, 84.966293, 67.116913<br />Pass 4, 15.372684, 90.449654, 55.312733</p><p>I think I&#039;ll stick without HV at least for now because of the myriad issues.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546354">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546373" class="blockpost rowodd"> <h2><span><span class="conr">#5694</span> <a href="viewtopic.php?pid=1546373#p1546373">2015-07-20 23:29:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>impulse_255 wrote:</cite><blockquote><div><p>No success whatsoever with the pciid spoofing. I attempted to spoof my Titan X as an M6000 for the purpose of using Hyper-V enlightenments. I patched Qemu 2.3.0 with the patch posted earlier. It needed some modifications to work with 2.3.0. The file was moved to vfio/pci.c instead of misc/vfio.c and one of the structs was now VFIOPCIDevice instead of VFIODevice.</p></div></blockquote></div><p>Impulse,</p><p>Do you think you could link your updated patch for the stock pci.c in QEMU 2.3.0? I&#039;ve tried modifying the patch but i haven&#039;t been able to get it to work</p> <p class="postedit"><em>Last edited by The_Moves (2015-07-21 00:20:06)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546373">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546400" class="blockpost roweven"> <h2><span><span class="conr">#5695</span> <a href="viewtopic.php?pid=1546400#p1546400">2015-07-21 01:47:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I think I might have gotten it, but now i&#039;m getting this:</p><p>XML document failed to validate against schema: Unable to validate doc against/usr/share/libvirt/schemas/domain.rng<br />Element domain has extra content: qemu:command line</p><p>EDIT: Never mind, I must not have gotten it patched correctly...more research from my end on how to patch packages. I was able to get a Kernel patched, but this...</p> <p class="postedit"><em>Last edited by The_Moves (2015-07-21 02:27:14)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546400">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546403" class="blockpost rowodd"> <h2><span><span class="conr">#5696</span> <a href="viewtopic.php?pid=1546403#p1546403">2015-07-21 02:03:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92679">Col_Panic</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-19</span></dd> <dd><span>Posts: 4</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So I&#039;m still having no luck getting past my problem for this GPU. I&#039;ve been experimenting with different boot options, and I&#039;m still stuck at where I was after aw&#039;s suggestion; instead of locking the host, I&#039;m just getting an endless loop of iommu page flushes, and a guest that complains if I try to destroy it. <br />I thought I was getting somewhere with nofullflush, when I was able to shut down the guest, but it turns out that was a fluke.<br />I came across the same symptoms on the KVM dev list, and it was concluded in that thread that it was probably a BIOS problem, rather than a driver issue.<br />Looks like it&#039;s time to upgrade my discount-store MOBO <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546403">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546420" class="blockpost roweven"> <h2><span><span class="conr">#5697</span> <a href="viewtopic.php?pid=1546420#p1546420">2015-07-21 05:00:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=82442">slis</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-06-02</span></dd> <dd><span>Posts: 125</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:xslisx@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@the_moves, you need to change first line of xml to make it take qemu args,..<br />edit:</p><div class="codebox"><pre><code>&lt;domain type=&#039;kvm&#039; id=&#039;5&#039; xmlns:qemu=&#039;http://libvirt.org/schemas/domain/qemu/1.0&#039;&gt; </code></pre></div><p>@impulse_255 thx for that, it shows good&#160; boost of min/ max fps...&#160; well if its detected like quadro it would show nv control panel with less options then as geforce, but you maybe could use nview for resolution and stuff</p> <p class="postedit"><em>Last edited by slis (2015-07-21 05:03:14)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546420">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546470" class="blockpost rowodd"> <h2><span><span class="conr">#5698</span> <a href="viewtopic.php?pid=1546470#p1546470">2015-07-21 08:47:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@The_Moves: Here is the updated spoofing patch for Qemu 2.3.0: <a href="http://pastebin.com/vFpN06LX" rel="nofollow">http://pastebin.com/vFpN06LX</a></p><p>@slis: The control panel shows all the options when hyper-v is disabled. Only when hyper-v is enabled, stuff goes missing and refresh rates are limited, so it doesn&#039;t seem like it&#039;s meant to be some quadro specific limitation. In fact, there is a quadro specific &quot;workstation&quot; category which also goes missing with HV. I have only so far tried with all four hv_* options enabled or none at all but I&#039;m assuming it works by detecting the Microsoft Hv string just like the Geforce driver.</p><p>I really wonder what makes Nvidia drivers so allergic to it.</p><p>EDIT: But of course if you don&#039;t need 100+ Hz refresh rates or all the dials and buttons, you probably won&#039;t have any problems. Even G-Sync works in the crippled mode. I&#039;m just being my obsessive perfectionist self. <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p> <p class="postedit"><em>Last edited by impulse_255 (2015-07-21 08:51:04)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546470">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546567" class="blockpost roweven"> <h2><span><span class="conr">#5699</span> <a href="viewtopic.php?pid=1546567#p1546567">2015-07-21 14:42:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80387">dwe11er</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-18</span></dd> <dd><span>Posts: 73</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SXX wrote:</cite><blockquote><div><p>Just wonder is it possible to pass 2nd GPU or two GPUs to same VM without ACS patch?<br />I just trying to pass HD6950 (work alone just fine) and GTX260 into same VM, but it&#039;s just don&#039;t work.<br />When I try to only pass GTX260 (that use 2nd PCIe port) it&#039;s fail with &quot;KVM internal error. Suberror: 1&quot;.</p><p>Is that would work if I&#039;m going to apply ACS? And if so is same patch would work for 4.1 kernel?</p><p>PS: Also a bit off-topic question, but anyway. Is there way to make QEMU emulate USB mouse with more than 3 buttons? I already using &quot;-device usb-mouse&quot;, but on host I have mouse with 7 buttons while QEMU only grabbing 3 first.</p></div></blockquote></div><p>Get second mouse for host (wireless for example) and passthrough main one<br /><em>or</em><br />passthrough your mouse to VM and use Synergy (host as client, VM as server).</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546567">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1546580" class="blockpost rowodd"> <h2><span><span class="conr">#5700</span> <a href="viewtopic.php?pid=1546580#p1546580">2015-07-21 15:39:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92218">impulse_255</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-29</span></dd> <dd><span>Posts: 22</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>dwe11er wrote:</cite><blockquote><div><div class="quotebox"><cite>SXX wrote:</cite><blockquote><div><p>Just wonder is it possible to pass 2nd GPU or two GPUs to same VM without ACS patch?<br />I just trying to pass HD6950 (work alone just fine) and GTX260 into same VM, but it&#039;s just don&#039;t work.<br />When I try to only pass GTX260 (that use 2nd PCIe port) it&#039;s fail with &quot;KVM internal error. Suberror: 1&quot;.</p><p>Is that would work if I&#039;m going to apply ACS? And if so is same patch would work for 4.1 kernel?</p><p>PS: Also a bit off-topic question, but anyway. Is there way to make QEMU emulate USB mouse with more than 3 buttons? I already using &quot;-device usb-mouse&quot;, but on host I have mouse with 7 buttons while QEMU only grabbing 3 first.</p></div></blockquote></div><p>Get second mouse for host (wireless for example) and passthrough main one<br /><em>or</em><br />passthrough your mouse to VM and use Synergy (host as client, VM as server).</p></div></blockquote></div><p>No need for a second mouse and kb, a kvm switch (<a href="https://en.wikipedia.org/wiki/KVM_switch" rel="nofollow">the other kvm</a>) is handy if a software solution is not good enough.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1546580">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=227">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=226">226</a> <a href="viewtopic.php?id=162768&amp;p=227">227</a> <strong>228</strong> <a href="viewtopic.php?id=162768&amp;p=229">229</a> <a href="viewtopic.php?id=162768&amp;p=230">230</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=229">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
