<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 170) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=170" title="Page 170" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=169" title="Page 169" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=171" title="Page 171" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=169">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=168">168</a> <a href="viewtopic.php?id=162768&amp;p=169">169</a> <strong>170</strong> <a href="viewtopic.php?id=162768&amp;p=171">171</a> <a href="viewtopic.php?id=162768&amp;p=172">172</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=171">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1503905" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#4226</span> <a href="viewtopic.php?pid=1503905#p1503905">2015-02-17 23:43:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>sl44x wrote:</cite><blockquote><div><p>Intel i5 2500 @ 3300 Mhz</p></div></blockquote></div><p>This is not a processor version, it&#039;s a family and a speed, so we have no idea if your CPU supports VT-d.&#160; Look it up on ark.intel.com</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1503905">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1503919" class="blockpost roweven"> <h2><span><span class="conr">#4227</span> <a href="viewtopic.php?pid=1503919#p1503919">2015-02-18 00:57:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88915">sl44x</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-17</span></dd> <dd><span>Posts: 3</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88915">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>sl44x wrote:</cite><blockquote><div><p>Intel i5 2500 @ 3300 Mhz</p></div></blockquote></div><p>This is not a processor version, it&#039;s a family and a speed, so we have no idea if your CPU supports VT-d.&#160; Look it up on ark.intel.com</p></div></blockquote></div><p>Sorry. Here the full description of this processor:</p><p><a href="http://ark.intel.com/products/52209/Intel-Core-i5-2500-Processor-6M-Cache-up-to-3_70-GHz" rel="nofollow">http://ark.intel.com/products/52209/Int … o-3_70-GHz</a></p><div class="codebox"><pre><code>Intel® Virtualization Technology for Directed I/O (VT-d) ‡ Yes</code></pre></div><p>The processor has support VT-d. I belive that is the bios or chipset of the mobo that not.</p> <p class="postedit"><em>Last edited by sl44x (2015-02-18 01:06:32)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1503919">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1503953" class="blockpost rowodd"> <h2><span><span class="conr">#4228</span> <a href="viewtopic.php?pid=1503953#p1503953">2015-02-18 05:16:06</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78217">DanaGoyette</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-01-03</span></dd> <dd><span>Posts: 46</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:danagoyette@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><blockquote><div><p>This is the error in dmesg when I try to assign the sound card alone or both the controller and the card:</p><div class="codebox"><pre><code>genirq: Flags mismatch irq 16. 00000080 (vfio-intx(0000:00:1a.0)) vs. 00000000 (vfio-intx(0000:08:04.0))</code></pre></div><p>And here is the relevant lspci output (the sound card is behind a bridge, which I don&#039;t assign): </p><div class="codebox"><pre><code>00:1a.0 USB controller: Intel Corporation 7 Series/C210 Series Chipset Family USB Enhanced Host Controller #2 (rev 04) (prog-if 20 [EHCI]) Subsystem: Gigabyte Technology Co., Ltd 7 Series/C210 Series Chipset Family USB Enhanced Host Controller 07:00.0 PCI bridge: ASMedia Technology Inc. ASM1083/1085 PCIe to PCI Bridge (rev 04) (prog-if 00 [Normal decode]) 08:04.0 Multimedia audio controller: C-Media Electronics Inc CMI8788 [Oxygen HD Audio] Subsystem: ASUSTeK Computer Inc. CMI8788 [Oxygen HD Audio]</code></pre></div></div></blockquote></div><p>I had similar issues with my Xonar DX, and found two ways to possibly fix the issue: either move the card to another slot, or go into the BIOS and disable the conflicting EHCI controller (while leaving the other enabled).&#160; <br />I can imagine some BIOSes having EHCI #1 and #2 swapped, so you should double-check it once you reboot.</p><p>Note that the Xonar DX is just a Xonar D1 behind a PLX PEX8112, and StarTech offers a standalone PEX8112 board for use with any arbitrary PCI card.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1503953">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1503980" class="blockpost roweven"> <h2><span><span class="conr">#4229</span> <a href="viewtopic.php?pid=1503980#p1503980">2015-02-18 08:55:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=84538">mauorrizze</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-08-22</span></dd> <dd><span>Posts: 17</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=84538">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Something OVMF/UEFI-Rom related:<br />I just investigated why I don&#039;t see the tiancore bootscreen anymore after switching from my 750Ti to an R9 280X. Turns out it has only a legacy rom, but apart from the inability to see the UEFI output of the VM at boot it works fine!? Could this work for all cards or only AMD because the card isn&#039;t initialized as the primary one?</p><p>Edit: If this works with more cards, than we could use older cards with OVMF by installing Windows with a virtual graphics adapter and later switching to the real one, booting, letting Windows install drivers and ready is the legacy-ovmf-hybrid.<br />Regarding my 280X, I&#039;m gonna flash an other BIOS because there&#039;s one rather similar to mine including UEFI support. Thanks again for the rom-parser!</p> <p class="postedit"><em>Last edited by mauorrizze (2015-02-18 09:13:01)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1503980">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1503997" class="blockpost rowodd"> <h2><span><span class="conr">#4230</span> <a href="viewtopic.php?pid=1503997#p1503997">2015-02-18 10:19:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75968">deniv</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-16</span></dd> <dd><span>Posts: 27</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>DanaGoyette wrote:</cite><blockquote><div><p>I had similar issues with my Xonar DX, and found two ways to possibly fix the issue: either move the card to another slot,</p></div></blockquote></div><p>Not possible. This motherboard just refuses to boot when I move the sound card to another slot.</p><div class="quotebox"><blockquote><div><p>or go into the BIOS and disable the conflicting EHCI controller (while leaving the other enabled).</p></div></blockquote></div><p>Also not possible. There is only one option in UEFI to disable both EHCI controllers. If I disable them, even xHCI stops working pre-boot, so no keyboard/mouse input possible until Linux. In any case, this method isn&#039;t better than soft-remove. With soft-remove I can at least use the controller until I choose to disable it.</p><div class="quotebox"><blockquote><div><p>Note that the Xonar DX is just a Xonar D1 behind a PLX PEX8112</p></div></blockquote></div><p>I know there are certain Xonar DX with PLX chip, but mine uses ASMedia as seen in the lspci output.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1503997">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504058" class="blockpost roweven"> <h2><span><span class="conr">#4231</span> <a href="viewtopic.php?pid=1504058#p1504058">2015-02-18 14:11:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88936">Maloute</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-18</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88936">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello guys,</p><p>I am also hijacking this thread, thanks to the tutorial in first page, my vga passthrough is not far from working but I&#039;m stuck at the &quot;code 43&quot; phase.</p><p>My config:<br />Cpu: Core I7 860 (first gen with no IGP, but with VT-D)<br />Motherboard: Asus P7P55D<br />Graphic card #1 in the first PCI-E 16X port: ATI/AMD Radeon HD4350 fanless for host display<br />Graphic card #2 in the 2nd PCI-E 16X port: Gainward Golden Sample Geforce 560ti 1Gb for vga passthrough<br />Host Software config: Archlinux, multiple kernel config, 3.18.5 patch + vga arbiter patch + acs override patch, or 3.18.6 not patched, stock QEMU from Archlinux<br />Guest soft: Windows 8.1 x64</p><p>The VGA passthrough is working fine, when I am launching QEMU, I do see the bios output on the 2nd screen and I can also just install and use Win 8.1 just fine. The only problem I have is that&#160; guest reboot is not working and I can only launch QEMU once, if I need to halt the guest, I have to reboot the host to reuse the guest again.</p><p>So, after installing Geforce Drivers in the guest, the card is recognized by Windows as GeForce 560ti but I have an &quot;code 43&quot; error like a lot people...</p><p>What I tried to solve the problem:<br />- installing 331 and 335 Geforce drivers version -&gt; same problem<br />- using microsoft whql drivers -&gt; same problem<br />- using -cpu host,kvm=off option -&gt; same problem<br />- Tried with the 3.18.5 patched kernel (i915 + acs override) -&gt; same problem<br />- fresh 3.18.6 kernel -&gt; same problem<br />- using 440FX chipset instead of Q35 with the Qemu config: -&gt; same problem<br />- tried with romfile corresponding to my model -&gt; same problem</p><p>Here is my QEMU command:</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host,kvm=off -vga none \ -smp 6,sockets=1,cores=6,threads=1 \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=06:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=06:00.1,bus=root.1,addr=00.1 \ -drive file=windows.img,id=disk,format=raw,if=none -device ide-hd,bus=ide.0,drive=disk \ -usb -device usb-host,hostbus=1,hostaddr=4 \ -usb -device usb-host,hostbus=1,hostaddr=3</code></pre></div><p>I&#039;m stuck and I don&#039;t see what is wrong... Ideas or advices would be appreciated :-)<br />Thank you !</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504058">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504098" class="blockpost rowodd"> <h2><span><span class="conr">#4232</span> <a href="viewtopic.php?pid=1504098#p1504098">2015-02-18 16:12:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79471">Bronek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: London</span></dd> <dd><span>Registered: 2014-02-14</span></dd> <dd><span>Posts: 90</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79471">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Maloute wrote:</cite><blockquote><div><p>The only problem I have is that&#160; guest reboot is not working and I can only launch QEMU once, if I need to halt the guest, I have to reboot the host to reuse the guest again.</p></div></blockquote></div><p>I had the same problem with a card which turned out not to support GPU pass through.</p> </div> <div class="postsignature postmsg"><hr /><p>Sorry about&#160; &quot;KVM VGA-Passthrough ...&quot; thread <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Anyone interested in continuing this discussion elsewhere, please contact me privately. I might be able to find it a new home.</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504098">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504103" class="blockpost roweven"> <h2><span><span class="conr">#4233</span> <a href="viewtopic.php?pid=1504103#p1504103">2015-02-18 16:19:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88886">jaeger</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-16</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88886">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>As a followup to my earlier posts, I&#039;ve been playing with the various hv* options but unfortunately still haven&#039;t had any luck. I always get the &quot;code 43&quot; error in the device manager for the nvidia GPU and the vfio_pci_read_config and vfio_pci_write_config &quot;bad address&quot; errors.</p><p>I&#039;ve tried every version of the nvidia drivers that supports the GTX 970 with no luck, 344.11 being the oldest.</p><p>My current qemu invocation is this:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash VFIO_DEVS=&quot;01:00.0 01:00.1&quot; sudo /opt/bin/vfio-bind ${VFIO_DEVS} NAME=&quot;Windows 8.1 Enterprise&quot; MEM=8192 CORES=4 DRIVE=/home/jaeger/VMs/win81/win81.img CDROM=/home/jaeger/VMs/win81/win81entx64.iso VIRTIO=/home/jaeger/VMs/win81/virtio-win-0.1-81.iso OVMF=/home/jaeger/ovmf-x64 sudo QEMU_AUDIO_DRV=pa \ /usr/bin/qemu-system-x86_64 \ -name &quot;${NAME}&quot; \ -nographic \ -enable-kvm \ -cpu host,kvm=off,hv-time=off,hv-vapic=off,hv-relaxed=off \ -m ${MEM} \ -smp cores=${CORES},threads=1,sockets=1 \ -vga none \ -nodefconfig \ -drive if=pflash,format=raw,readonly,file=${OVMF}/OVMF_CODE-pure-efi.fd \ -drive if=pflash,format=raw,file=${OVMF}/OVMF_VARS-pure-efi.fd \ -device vfio-pci,host=01:00.0,multifunction=on \ -device vfio-pci,host=01:00.1 \ -drive file=&quot;${DRIVE}&quot;,format=raw,id=disk0,if=virtio \ -drive file=&quot;${CDROM}&quot;,format=raw,id=cd0,if=none \ -device ide-cd,drive=cd0 \ -drive file=&quot;${VIRTIO}&quot;,format=raw,id=cd1,if=none \ -device ide-cd,drive=cd1 \ -netdev bridge,id=net0 \ -device virtio-net-pci,netdev=net0 \ -soundhw hda \ -usbdevice host:046d:c52b \ -usbdevice host:03f0:0024</code></pre></div><p>Has anyone else seen the vfio_pci_read_config and vfio_pci_write_config errors?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504103">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504107" class="blockpost rowodd"> <h2><span><span class="conr">#4234</span> <a href="viewtopic.php?pid=1504107#p1504107">2015-02-18 16:35:23</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75548">Schlunze</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-03</span></dd> <dd><span>Posts: 13</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:ts_reload@gmx.net">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello,</p><p>thanks to this thread and the great tutorial my setup is also up and works like expected.</p><p>Setup:<br />Asrock Extreme6<br />I7-4790K<br />HD4850</p><p>Just the power consumption of the second card after shutting down the guest is a problem. </p><p>41W without HD4850, linux idle<br />61W with installed HD4850, linux idle<br />83W Guest Windows7 idle, linux idle<br />83W after Guest Windows7 is shut down, linux idle.</p><p>After digging around in sysfs and ASPM and googling around, i have absolutly no idea how set the second card in back in idle state.</p><p>Maybe someone with more experience have a solution to this problem. </p><p>Thank you in advance.</p> <p class="postedit"><em>Last edited by Schlunze (2015-02-18 16:37:43)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504107">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504121" class="blockpost roweven"> <h2><span><span class="conr">#4235</span> <a href="viewtopic.php?pid=1504121#p1504121">2015-02-18 17:25:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=65690">Jcrash</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Toronto</span></dd> <dd><span>Registered: 2012-11-12</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=65690">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Maloute wrote:</cite><blockquote><div><p>Hello guys,</p><p>I am also hijacking this thread, thanks to the tutorial in first page, my vga passthrough is not far from working but I&#039;m stuck at the &quot;code 43&quot; phase.</p><p>[...]</p><p>Here is my QEMU command:</p><div class="codebox"><pre><code>qemu-system-x86_64 -enable-kvm -M q35 -m 4096 -cpu host,kvm=off -vga none \ -smp 6,sockets=1,cores=6,threads=1 \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=06:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=06:00.1,bus=root.1,addr=00.1 \ -drive file=windows.img,id=disk,format=raw,if=none -device ide-hd,bus=ide.0,drive=disk \ -usb -device usb-host,hostbus=1,hostaddr=4 \ -usb -device usb-host,hostbus=1,hostaddr=3</code></pre></div><p>I&#039;m stuck and I don&#039;t see what is wrong... Ideas or advices would be appreciated :-)<br />Thank you !</p></div></blockquote></div><p>Try loading your card from a ROM file (see bottom of post #1). I got mine from </p><div class="codebox"><pre><code>http://www.techpowerup.com/vgabios/</code></pre></div><p>I had a lot of trouble with my 560ti within the VM regarding drivers, sleep functions, resets...right now I have it assigned to the host. I use a 6800 series ATI for the VM and it behaves, updates clean.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504121">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504128" class="blockpost rowodd"> <h2><span><span class="conr">#4236</span> <a href="viewtopic.php?pid=1504128#p1504128">2015-02-18 17:39:06</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88939">Mysingen</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-18</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88939">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hello everyone. Thank you all for this guide. I have been able to pass through an Nvidia 970 card to Windows 8.1 and had it working. Briefly... Then the driver detected the virtualization and threw up Code 43.</p><p>The problem seems to be that I am not booting with OVMF even though I try to. When I point directly to the TianoCore firmware, the ISO is not detected as bootable:</p><div class="codebox"><pre><code>-drive if=pflash,format=raw,readonly,file=/mnt/vault/qemu/ovmf/20150218/OVMF_CODE-pure-efi.fd -drive if=pflash,format=raw,file=/mnt/vault/qemu/ovmf/20150218/OVMF_VARS-pure-efi.fd</code></pre></div><p>I first suspected that I was missing other component such as ipxe.git, etc, due to dangling symlinks in the 20150218 directory and installed those as well. But it doesn&#039;t help. When I point to the entire 20150218 directory (which contains a symlink bios.bin -&gt; OVMF-pure-efi.fd), QEMU boots with SeaBios instead:</p><div class="codebox"><pre><code>-L /mnt/vault/qemu/ovmf/20150218</code></pre></div><p>Any idea what I might be doing wrong? There are guides on the net for converting USB sticks from MBR to GPT so that they can be used as installation media, but I found nothing similar for ISO&#039;s. My suspicion is that the ISO somehow does not support UEFI but I don&#039;t know how to check this theory. All I see is that TianoCore detects the virtual DVD drive, but not the ISO in it.</p><p>Current config:</p><div class="codebox"><pre><code>ROM=/mnt/vault/qemu/rom/Asus.GTX970.4096.140917.rom DISK=/mnt/vault/qemu/img/win81-ovmf.qcow2 ISO1=/mnt/vault/qemu/iso/windows81pro64.iso BIOS=/mnt/vault/qemu/ovmf/20150218 CODE=/mnt/vault/qemu/ovmf/20150218/OVMF_CODE-pure-efi.fd VARS=/mnt/vault/qemu/ovmf/20150218/OVMF_VARS-pure-efi-windows81.fd qemu-system-x86_64 \ -nodefconfig \ -drive if=pflash,format=raw,readonly,file=$CODE \ -drive if=pflash,format=raw,file=$VARS \ -enable-kvm \ -M pc-i440fx-2.1 \ -m 16384 \ -cpu host,kvm=off \ -smp 4,sockets=1,cores=4,threads=1 \ -rtc base=localtime \ -soundhw hda \ -device ioh3420,bus=pci.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on,rombar=0,romfile=$ROM \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -drive file=$ISO1,media=cdrom \ -drive file=$DISK,media=disk \ -monitor stdio \ -vga cirrus</code></pre></div><p>/M</p> <p class="postedit"><em>Last edited by Mysingen (2015-02-18 18:17:38)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504128">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504138" class="blockpost roweven"> <h2><span><span class="conr">#4237</span> <a href="viewtopic.php?pid=1504138#p1504138">2015-02-18 18:19:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>100% cpu load, nothing on any output.<br />Pure nothing!<br />WTF?</p><p>When booting bare metal, i can see the setup menu and even attempt to boot into windows7. But windows7 fails to output video signal after the starting logo.</p><p>UPD:<br />Alright, i&#039;ve connected to qemu via gdb(had to set the mode manually), and..<br />I&#039;m no low-level specialist, but something hints me that this won&#039;t work:</p><div class="codebox"><pre class="vscroll"><code>(gdb) info reg rax 0x0 0 rbx 0x810248 8454728 rcx 0x402 1026 rdx 0x402 1026 rsi 0x10 16 rdi 0xbfed1060 3219984480 rbp 0xbff62ad0 0xbff62ad0 rsp 0xbff62ac0 0xbff62ac0 r8 0x1 1 r9 0x0 0 r10 0x36 54 r11 0xd7 215 r12 0x0 0 r13 0x0 0 r14 0x0 0 r15 0x0 0 rip 0xbed9d9df 0xbed9d9df eflags 0x246 [ PF ZF IF ] cs 0x28 40 ss 0x8 8 ds 0x8 8 es 0x8 8 fs 0x8 8 gs 0x8 8 (gdb) x/10i $rip =&gt; 0xbed9d9df: mov -0x8(%rbp),%rax 0xbed9d9e3: test %rax,%rax 0xbed9d9e6: je 0xbed9d9df 0xbed9d9e8: leaveq 0xbed9d9e9: retq 0xbed9d9ea: push %rbp 0xbed9d9eb: mov %rsp,%rbp 0xbed9d9ee: sti 0xbed9d9ef: pop %rbp 0xbed9d9f0: retq</code></pre></div></div></blockquote></div><br /><p>Well, I have good news and bad news.<br />Good news:<br />I did this:</p><div class="codebox"><pre><code>(gdb) x/10b 0xbed9d9df 0xbed9d9df: 0x48 0x8b 0x45 0xf8 0x48 0x85 0xc0 0x74 0xbed9d9e7: 0xf7 0xc9</code></pre></div><p>Got some bytes from here, like: 0x48 0x8b ... 0x74 0xf7 0xc9.<br />So i&#039;ve used bgrep to search for this sequence of bytes in all my binaries being loaded to QEMU... naaah, just kidding, i&#039;m an idiot, so i did just</p><div class="codebox"><pre><code>hexdump -C /usr/share/edk2.git/ovmf-x64/OVMF-pure-efi.fd | grep &quot;74 f7 c9&quot; 001cdaf0 90 48 8b 45 f8 48 85 c0 74 f7 c9 c3 55 48 89 e5 |.H.E.H..t...UH..|</code></pre></div><p>and</p><div class="codebox"><pre><code>hexdump -C ~/rom-parser/image_uefi.rom | grep &quot;74 f7 c9&quot;</code></pre></div><p>.<br />Good news are - <strong>IT IS OVMF THAT IS BROKEN AND PREVENTING MY VM TO BOOT WITH MY HARDWARE</strong><br />Bad news are - while I know who broke it, i don&#039;t know what section of the actual code does this.</p><p>Can someone skilled enough help me to advance further on fixing this bug?</p><p>P.S.<br />I&#039;m tempted to just manually break that cycle by inserting instructions via gdb live, but i don&#039;t know how to do that.</p><p>EDIT:<br />Piece of code that wasn&#039;t included in previous post:</p><div class="codebox"><pre><code> 0xbed9d9d6: movq $0x0,-0x8(%rbp) 0xbed9d9de: nop 0xbed9d9df: mov -0x8(%rbp),%rax =&gt; 0xbed9d9e3: test %rax,%rax 0xbed9d9e6: je 0xbed9d9df</code></pre></div><p>UPD:<br />Okay, I did something(actually, i&#039;ve updated OVMF to the freshest git build) and now it just outputs &quot;invalid ROM contents&quot; to dmesg when trying to boot. Trying to pass the romfile option. That worked. Looks like i&#039;ve accidentally flashed some piece of ROM somehow. Spooky.</p><p>UPD2:<br />Stopping qemu with GDB, changing that JE to JNE(really, one byte)... worked. When QEMU process continued, the GPU successfully fired-up and showed me graphikz. Le success. Well, now i have to write a little essay to EDK2-devel mailing list regarding that. Maybe someone more clever will fix it properly.</p> <p class="postedit"><em>Last edited by Duelist (2015-02-18 20:03:30)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504138">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504206" class="blockpost rowodd"> <h2><span><span class="conr">#4238</span> <a href="viewtopic.php?pid=1504206#p1504206">2015-02-18 22:36:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88936">Maloute</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-18</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88936">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Bronek wrote:</cite><blockquote><div><p> I had the same problem with a card which turned out not to support GPU pass through.</p></div></blockquote></div><div class="quotebox"><cite>Jcrash wrote:</cite><blockquote><div><p>Try loading your card from a ROM file (see bottom of post #1). I got mine from </p><div class="codebox"><pre><code>http://www.techpowerup.com/vgabios/</code></pre></div><p>I had a lot of trouble with my 560ti within the VM regarding drivers, sleep functions, resets...right now I have it assigned to the host. I use a 6800 series ATI for the VM and it behaves, updates clean.</p></div></blockquote></div><p>Thanks for your replies !<br />I tried the ROM file corresponding to my graphic card (Gainward Golden Sample 560 ti 1Gb) but there was no improvement...&#160; It seems that this graphic card is not very well suited for VGA passthrough...</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504206">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504208" class="blockpost roweven"> <h2><span><span class="conr">#4239</span> <a href="viewtopic.php?pid=1504208#p1504208">2015-02-18 22:41:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88952">fingerboxes</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-18</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88952">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi, I&#039;ve tried sorting through the last 25 pages or so of this thread and I think I&#039;m sort of on the right path. It seems as though the OP is wildly out of date, though; can anyone direct me toward a document which contain more up to date information (In particular, on setting up OVMF instead of using vga arbitration, or any information from someone who has had success using a physical disk instead of an image for qemu)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504208">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504214" class="blockpost rowodd"> <h2><span><span class="conr">#4240</span> <a href="viewtopic.php?pid=1504214#p1504214">2015-02-18 23:43:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88886">jaeger</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-16</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88886">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>jaeger wrote:</cite><blockquote><div><p>As a followup to my earlier posts, I&#039;ve been playing with the various hv* options but unfortunately still haven&#039;t had any luck. I always get the &quot;code 43&quot; error in the device manager for the nvidia GPU and the vfio_pci_read_config and vfio_pci_write_config &quot;bad address&quot; errors.</p><p>I&#039;ve tried every version of the nvidia drivers that supports the GTX 970 with no luck, 344.11 being the oldest.</p><p>My current qemu invocation is this:</p><div class="codebox"><pre class="vscroll"><code>#!/bin/bash VFIO_DEVS=&quot;01:00.0 01:00.1&quot; sudo /opt/bin/vfio-bind ${VFIO_DEVS} NAME=&quot;Windows 8.1 Enterprise&quot; MEM=8192 CORES=4 DRIVE=/home/jaeger/VMs/win81/win81.img CDROM=/home/jaeger/VMs/win81/win81entx64.iso VIRTIO=/home/jaeger/VMs/win81/virtio-win-0.1-81.iso OVMF=/home/jaeger/ovmf-x64 sudo QEMU_AUDIO_DRV=pa \ /usr/bin/qemu-system-x86_64 \ -name &quot;${NAME}&quot; \ -nographic \ -enable-kvm \ -cpu host,kvm=off,hv-time=off,hv-vapic=off,hv-relaxed=off \ -m ${MEM} \ -smp cores=${CORES},threads=1,sockets=1 \ -vga none \ -nodefconfig \ -drive if=pflash,format=raw,readonly,file=${OVMF}/OVMF_CODE-pure-efi.fd \ -drive if=pflash,format=raw,file=${OVMF}/OVMF_VARS-pure-efi.fd \ -device vfio-pci,host=01:00.0,multifunction=on \ -device vfio-pci,host=01:00.1 \ -drive file=&quot;${DRIVE}&quot;,format=raw,id=disk0,if=virtio \ -drive file=&quot;${CDROM}&quot;,format=raw,id=cd0,if=none \ -device ide-cd,drive=cd0 \ -drive file=&quot;${VIRTIO}&quot;,format=raw,id=cd1,if=none \ -device ide-cd,drive=cd1 \ -netdev bridge,id=net0 \ -device virtio-net-pci,netdev=net0 \ -soundhw hda \ -usbdevice host:046d:c52b \ -usbdevice host:03f0:0024</code></pre></div><p>Has anyone else seen the vfio_pci_read_config and vfio_pci_write_config errors?</p></div></blockquote></div><p>For science, today I installed Fedora 21 on an extra hard drive and tested my setup using libvirt and virt-manager (vs. qemu command line under CRUX). Under Fedora 21 it works! So I know now that my hardware isn&#039;t to blame for the failures I&#039;ve been experiencing, it&#039;s got to be somewhere in my qemu or kernel configuration, I guess.</p><p>Unfortunately I don&#039;t know what exactly to chase regarding the vfio_pci_{read,write}_config errors but at least I know that what I want to do is possible with this particular hardware config.</p><p>I dumped the xml from my libvirt VM for comparison but I don&#039;t see anything between it and my qemu command line that screams broken. That makes me think perhaps there&#039;s a kernel issue. Fedora includes a lot of things I&#039;m not building into my own kernel like cgroups, etc., so I&#039;ll poke around and see if I can find something there. Maybe I&#039;ll try the Fedora kernel config on my CRUX machine.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504214">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504256" class="blockpost roweven"> <h2><span><span class="conr">#4241</span> <a href="viewtopic.php?pid=1504256#p1504256">2015-02-19 03:38:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=65690">Jcrash</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: Toronto</span></dd> <dd><span>Registered: 2012-11-12</span></dd> <dd><span>Posts: 12</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=65690">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Maloute wrote:</cite><blockquote><div><p>[...]<br />I tried the ROM file corresponding to my graphic card (Gainward Golden Sample 560 ti 1Gb) but there was no improvement...&#160; [...]</p></div></blockquote></div><p>I&#039;ve used roms from other manufacturers (equal hardware specs; gpu/#core&#039;s/clock)</p><p>My process: <br />1. new win7 VM (base, sytem updates) for every rom file<br />2. shutdown; make copy of VM on host<br />3. boot copy; install video drivers (start with most recent, work back)<br />4. working? rename and file</p><p>I threw in the towel because I couldn&#039;t take advantage of any power saving features; VM&#039;s wouldn&#039;t recover from sleep or monitor wake. Force close through host, reboot to a corrupted VM image (every time, unrecoverable), and rollback to step 3.</p><p>Careful though: I have a wireless hdmi 460ti that lost it&#039;s wireless hdmi capability through this type of tinkering (i think). Can&#039;t find the card-specific rom for it so I gambled</p><p>Haven&#039;t tried with win8</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504256">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504364" class="blockpost rowodd"> <h2><span><span class="conr">#4242</span> <a href="viewtopic.php?pid=1504364#p1504364">2015-02-19 14:43:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>jaeger wrote:</cite><blockquote><div><div class="codebox"><pre class="vscroll"><code>#!/bin/bash VFIO_DEVS=&quot;01:00.0 01:00.1&quot; sudo /opt/bin/vfio-bind ${VFIO_DEVS} NAME=&quot;Windows 8.1 Enterprise&quot; MEM=8192 CORES=4 DRIVE=/home/jaeger/VMs/win81/win81.img CDROM=/home/jaeger/VMs/win81/win81entx64.iso VIRTIO=/home/jaeger/VMs/win81/virtio-win-0.1-81.iso OVMF=/home/jaeger/ovmf-x64 sudo QEMU_AUDIO_DRV=pa \ /usr/bin/qemu-system-x86_64 \ -name &quot;${NAME}&quot; \ -nographic \ -enable-kvm \ -cpu host,kvm=off,hv-time=off,hv-vapic=off,hv-relaxed=off \ -m ${MEM} \ -smp cores=${CORES},threads=1,sockets=1 \ -vga none \ -nodefconfig \ -drive if=pflash,format=raw,readonly,file=${OVMF}/OVMF_CODE-pure-efi.fd \ -drive if=pflash,format=raw,file=${OVMF}/OVMF_VARS-pure-efi.fd \ -device vfio-pci,host=01:00.0,multifunction=on \ -device vfio-pci,host=01:00.1 \ -drive file=&quot;${DRIVE}&quot;,format=raw,id=disk0,if=virtio \ -drive file=&quot;${CDROM}&quot;,format=raw,id=cd0,if=none \ -device ide-cd,drive=cd0 \ -drive file=&quot;${VIRTIO}&quot;,format=raw,id=cd1,if=none \ -device ide-cd,drive=cd1 \ -netdev bridge,id=net0 \ -device virtio-net-pci,netdev=net0 \ -soundhw hda \ -usbdevice host:046d:c52b \ -usbdevice host:03f0:0024</code></pre></div></div></blockquote></div><p>By emulator I meant &#039;/usr/bin/qemu-system-x86_64&#039;. I don&#039;t have my system running to test now, but are your variables getting passed through correctly? Have you tried removing all other devices besides the video card and image of your os? Maybe try passing through one of your USB controllers through, that is what I did instead of passing through single USB devices.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504364">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504405" class="blockpost roweven"> <h2><span><span class="conr">#4243</span> <a href="viewtopic.php?pid=1504405#p1504405">2015-02-19 16:19:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88886">jaeger</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-16</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88886">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>The_Moves wrote:</cite><blockquote><div><p>By emulator I meant &#039;/usr/bin/qemu-system-x86_64&#039;. I don&#039;t have my system running to test now, but are your variables getting passed through correctly? Have you tried removing all other devices besides the video card and image of your os? Maybe try passing through one of your USB controllers through, that is what I did instead of passing through single USB devices.</p></div></blockquote></div><p>Ah, ok, thanks for the clarification. As far as I can tell the variables are all passed correctly. VirtIO drivers work fine, windows works fine, it&#039;s just the GPU that&#039;s giving me trouble. The USB devices work fine as well, for what that&#039;s worth. At least now that I know the setup works in Fedora 21 with libvirt I can try to narrow down the differences between the two installs.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504405">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504407" class="blockpost rowodd"> <h2><span><span class="conr">#4244</span> <a href="viewtopic.php?pid=1504407#p1504407">2015-02-19 16:31:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=8908">SchaduwBlink</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2007-01-07</span></dd> <dd><span>Posts: 59</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=8908">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>My OVMF q35 booting is going strait to the UEFI command line. It doesn&#039;t see my drives. This is part of the libvirt xml:</p><div class="codebox"><pre><code> &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039; cache=&#039;none&#039; io=&#039;native&#039;/&gt; &lt;source dev=&#039;/dev/mordor/EmmaPC&#039;/&gt; &lt;target dev=&#039;sda&#039; bus=&#039;sata&#039;/&gt; &lt;boot order=&#039;2&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/media/Storage/OS/en-gb_windows_8.1_enterprise_with_update_x64_dvd_4048611.iso&#039;/&gt; &lt;target dev=&#039;sdb&#039; bus=&#039;scsi&#039;/&gt; &lt;readonly/&gt; &lt;boot order=&#039;1&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;1&#039;/&gt; &lt;/disk&gt;</code></pre></div><p>This is with me trying the most basic of settings for the drive. I&#039;m using the latest git source for virt-manager and libvirt.</p><p>Hope you can help because I really want to get this set up with q35 because of the better handling of AMD cards.</p><p>Thanks.</p><div class="quotebox"><cite>Denso wrote:</cite><blockquote><div><div class="quotebox"><cite>Len wrote:</cite><blockquote><div><p>@mauorrizze Windows 7</p></div></blockquote></div><p>It won&#039;t work with OVMF without some hacking , you can search for some posts about installing it from FAT32 USB drive .</p><p>Also , I think its better to use SCSI rather than AHCI . My drives defined as follows :</p><div class="codebox"><pre><code>-drive file=/VMs/Win_Main.img,cache=writeback,format=raw,if=none,id=drive0,aio=threads \ -device virtio-blk-pci,drive=drive0,ioeventfd=on,bootindex=1 \ -device virtio-scsi-pci,id=scsi \ -drive file=/VMs/Win8.iso,id=iso_install,if=none \ -device scsi-cd,drive=iso_install \ -cdrom /VMs/virtio.iso \</code></pre></div><p>Good luck !</p></div></blockquote></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504407">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504411" class="blockpost roweven"> <h2><span><span class="conr">#4245</span> <a href="viewtopic.php?pid=1504411#p1504411">2015-02-19 16:41:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>100% cpu load, nothing on any output.<br />..deep OVMF problems..</p></div></blockquote></div><p>In case of <strong>VERY STRANGE</strong> behaviour with OVMF and qemu in general, you can turn on the debug console via adding following line to qemu startup options:</p><div class="codebox"><pre><code>-debugcon file:debug.log -global isa-debugcon.iobase=0x402</code></pre></div><p>Actually, the dead loop appeared to be a ... CPU dead loop function, so it was intentional, heh. Turns out there was an error message in the debug console:</p><div class="codebox"><pre><code> ASSERT /var/lib/jenkins/jobs/edk2/workspace/rpmbuild/rpm/BUILD/edk2.git/MdeModulePkg/Core/Dxe/Mem/Pool.c(475): CR has Bad Signature</code></pre></div><p>I&#039;ll keep posting some updates on my problem, just in case it might get useful for someone later.</p><p>UPD:<br />Seems like GPU&#039;s UEFI oprom is broken. Deep debugging to be done... or not. Maybe i&#039;ll just sack the cards and buy something MORE working. Or try poking ASUS. Or something else. But seems like i&#039;m damned with those cards and shall continue digging.</p> <p class="postedit"><em>Last edited by Duelist (2015-02-19 17:46:34)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504411">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504426" class="blockpost rowodd"> <h2><span><span class="conr">#4246</span> <a href="viewtopic.php?pid=1504426#p1504426">2015-02-19 17:10:10</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=87826">The_Moves</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-01-06</span></dd> <dd><span>Posts: 58</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=87826">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SchaduwBlink wrote:</cite><blockquote><div><p>My OVMF q35 booting is going strait to the UEFI command line. It doesn&#039;t see my drives. This is part of the libvirt xml:</p><div class="codebox"><pre><code> &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039; cache=&#039;none&#039; io=&#039;native&#039;/&gt; &lt;source dev=&#039;/dev/mordor/EmmaPC&#039;/&gt; &lt;target dev=&#039;sda&#039; bus=&#039;sata&#039;/&gt; &lt;boot order=&#039;2&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/media/Storage/OS/en-gb_windows_8.1_enterprise_with_update_x64_dvd_4048611.iso&#039;/&gt; &lt;target dev=&#039;sdb&#039; bus=&#039;scsi&#039;/&gt; &lt;readonly/&gt; &lt;boot order=&#039;1&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;1&#039;/&gt; &lt;/disk&gt;</code></pre></div></div></blockquote></div><p>You should be using &#039;file&#039;&#160; as the disk type for &#039;/dev/mordor/EmmaPC&#039;. This does not look like a valid block device, like /dev/sda2. Also you will want to change the target bus from SATA to IDE, and SCSI to IDE. Here is mine:</p><div class="codebox"><pre><code> &lt;disk type=&#039;file&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039; cache=&#039;none&#039;/&gt; &lt;source file=&#039;/home/user/virtual_machines/disks/GamingMachineOS.img&#039;/&gt; &lt;target dev=&#039;hda&#039; bus=&#039;ide&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/home/user/Disk_Images/Windows10_TechnicalPreview_x64_EN-US_9926.iso&#039;/&gt; &lt;target dev=&#039;hdc&#039; bus=&#039;ide&#039;/&gt; &lt;readonly/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;1&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt;</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504426">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504458" class="blockpost roweven"> <h2><span><span class="conr">#4247</span> <a href="viewtopic.php?pid=1504458#p1504458">2015-02-19 19:33:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85100">Tyrewt</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-13</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>anickname wrote:</cite><blockquote><div><div class="quotebox"><blockquote><div><p>I was researching that too, if anyone can confirm that the HD7790 has the reset problem, it might be affordable enough that I could pick one up for testing.</p></div></blockquote></div><p>Yes, the HD7790 has the reset problem.</p></div></blockquote></div><p>Ok, I&#039;ll try to keep an eye out for a cheap one on ebay</p></div></blockquote></div><p>Was the HD7790 reset problem ever addressed, if so, can somebody link to the resolution?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504458">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504576" class="blockpost rowodd"> <h2><span><span class="conr">#4248</span> <a href="viewtopic.php?pid=1504576#p1504576">2015-02-19 23:54:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88939">Mysingen</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-18</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88939">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Mysingen wrote:</cite><blockquote><div><p>Hello everyone. Thank you all for this guide. I have been able to pass through an Nvidia 970 card to Windows 8.1 and had it working. Briefly... Then the driver detected the virtualization and threw up Code 43.</p><p>The problem seems to be that I am not booting with OVMF even though I try to. When I point directly to the TianoCore firmware, the ISO is not detected as bootable:</p><div class="codebox"><pre><code>-drive if=pflash,format=raw,readonly,file=/mnt/vault/qemu/ovmf/20150218/OVMF_CODE-pure-efi.fd -drive if=pflash,format=raw,file=/mnt/vault/qemu/ovmf/20150218/OVMF_VARS-pure-efi.fd</code></pre></div><p>I first suspected that I was missing other component such as ipxe.git, etc, due to dangling symlinks in the 20150218 directory and installed those as well. But it doesn&#039;t help. When I point to the entire 20150218 directory (which contains a symlink bios.bin -&gt; OVMF-pure-efi.fd), QEMU boots with SeaBios instead:</p><div class="codebox"><pre><code>-L /mnt/vault/qemu/ovmf/20150218</code></pre></div><p>Any idea what I might be doing wrong? There are guides on the net for converting USB sticks from MBR to GPT so that they can be used as installation media, but I found nothing similar for ISO&#039;s. My suspicion is that the ISO somehow does not support UEFI but I don&#039;t know how to check this theory. All I see is that TianoCore detects the virtual DVD drive, but not the ISO in it.<br />/M</p></div></blockquote></div><p>Problem solved, partly.</p><p>It turns out that there (reasonably) must be a bug in OVMF. I could install by first formatting a USB stick as GPT+FAT32, copy all files from the Win8.1 ISO over to it and then pass the physical USB stick on to OVMF which then detected its file system and let me boot the installation from it.</p><p>After that, I was able to install Nvidia 344.11 drivers and it actually worked really well. I restarted the VM a great number of times and played Mass Effect for a few hours. However...</p><p>At some point Mass Effect started to crash on startup and I tried to solve the problem by installing newer drivers. Since then I always get Error 43. What baffles me is that I now get Error 43 even after completely starting over with the original working formula, including a fresh copy of the OVMF VARS file. I cannot for my life understand how the driver can see *this* time that it is running under virtualization, while it didn&#039;t the first time. Absolutely astonishing.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504576">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504581" class="blockpost roweven"> <h2><span><span class="conr">#4249</span> <a href="viewtopic.php?pid=1504581#p1504581">2015-02-20 00:26:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88939">Mysingen</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-18</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=88939">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><blockquote><div><p>At some point Mass Effect started to crash on startup and I tried to solve the problem by installing newer drivers. Since then I always get Code 43. What baffles me is that I now get Code 43 even after completely starting over with the original working formula, including a fresh copy of the OVMF VARS file. I cannot for my life understand how the driver can see *this* time that it is running under virtualization, while it didn&#039;t the first time. Absolutely astonishing.</p></div></blockquote></div><p>What is even weirder is that now the damn thing works again! All I did was to restart the host a couple of times. Posts from normal Windows users on the net give me the idea that Code 43 is a generic cannot-initialize-the-card-for-whatever-reason kind of thing. And that it happens on windows *hosts* under a very wide range of conditions. I haven&#039;t actually used Windows at home since 1997. Now I&#039;m rather extra happy to not let it near the bare metal and especially not my host BIOS. Quirky stuff.</p> <p class="postedit"><em>Last edited by Mysingen (2015-02-20 02:09:11)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504581">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1504605" class="blockpost rowodd"> <h2><span><span class="conr">#4250</span> <a href="viewtopic.php?pid=1504605#p1504605">2015-02-20 04:30:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=88986">arch742</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-02-20</span></dd> <dd><span>Posts: 1</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I am running into a very strange issue. On Intel I &#039;m passing through&#160; a GTX 460 and using internal graphics for the host, which works perfectly except for when the guest is shut down and started again (asks for rom and throws irqs, then freezes up the host completely). This in itself is not a problem as I can use the suspend/resume trick.</p><p>The weird part is if I try to use virtio-net instead of e1000, windows will get to the spinning logo and then dmesg will show irq 34 or 35 for the gtx460, at which point the host will freeze. Also, if the virtio driver is not installed but the device is still emulated, it does not crash.</p><p>Has anyone else had a similar issue with virtio-net?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1504605">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=169">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=168">168</a> <a href="viewtopic.php?id=162768&amp;p=169">169</a> <strong>170</strong> <a href="viewtopic.php?id=162768&amp;p=171">171</a> <a href="viewtopic.php?id=162768&amp;p=172">172</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=171">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
