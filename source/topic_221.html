<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 221) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=221" title="Page 221" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=220" title="Page 220" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=222" title="Page 222" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=220">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=219">219</a> <a href="viewtopic.php?id=162768&amp;p=220">220</a> <strong>221</strong> <a href="viewtopic.php?id=162768&amp;p=222">222</a> <a href="viewtopic.php?id=162768&amp;p=223">223</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=222">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1541806" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#5501</span> <a href="viewtopic.php?pid=1541806#p1541806">2015-07-03 17:45:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>Even though it complains about ioapic[9] and ioapic[10]?&#160; Then again, iommu is not my expertise.</p><p>Kernel is -ck with required options enabled for passthrough.</p><p>Everything else was in Arch repos, though I haven&#039;t really gotten that far thanks to Asus not knowing how to make a bios correctly.</p></div></blockquote></div><p>I said adjust accordingly.. I&#039;d try mapping <span class="bbs">ioapic[10] to 00:14.0 and ioapic[9] to 00:01.0. Maybe vice-versa... I can&#039;t tell for sure.</span><br />Yeah, 00:14.0 to ioapic[9], 00:01.0 to ioapic[10]. That should do the thing.</p><p>Tell the real versions.</p> <p class="postedit"><em>Last edited by Duelist (2015-07-03 17:48:18)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1541806">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1541826" class="blockpost roweven"> <h2><span><span class="conr">#5502</span> <a href="viewtopic.php?pid=1541826#p1541826">2015-07-03 18:56:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92304">Zeorymer</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-03</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jerichokru@aol.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>Even though it complains about ioapic[9] and ioapic[10]?&#160; Then again, iommu is not my expertise.</p><p>Kernel is -ck with required options enabled for passthrough.</p><p>Everything else was in Arch repos, though I haven&#039;t really gotten that far thanks to Asus not knowing how to make a bios correctly.</p></div></blockquote></div><p>I said adjust accordingly.. I&#039;d try mapping <span class="bbs">ioapic[10] to 00:14.0 and ioapic[9] to 00:01.0. Maybe vice-versa... I can&#039;t tell for sure.</span><br />Yeah, 00:14.0 to ioapic[9], 00:01.0 to ioapic[10]. That should do the thing.</p><p>Tell the real versions.</p></div></blockquote></div><p>Whell booting with that caused a panic...I&#039;m going to assume first that I messed something up.</p><p><a href="http://pastebin.com/3AgVU6KB" rel="nofollow">http://pastebin.com/3AgVU6KB</a></p><p>pastebin because of the size of the log.</p><p>It seems to be related to the 7950 I&#039;m trying to pass.&#160; I doubt the card itself, it was working yesterday in Windows (before I nuked it)</p><p>Kernel version is at the top of the log.<br />extra/qemu 2.3.0-3<br />community/libvirt 1.2.17-1<br />ovmf-fishman-git&#160; &lt;-SVN version was marked out of date, if this version will be a problem, I can change it.</p><p>Anything else?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1541826">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542143" class="blockpost rowodd"> <h2><span><span class="conr">#5503</span> <a href="viewtopic.php?pid=1542143#p1542143">2015-07-05 01:49:22</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92337">MonopolyMan</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-05</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92337">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So I&#039;ve had Windows 8.1 running for quite some time now in a VM and almost everything is working fine. However, I still feel like I&#039;m missing something as far a CPU tweaking goes. </p><p>I have a Xeon with 8 threads (4 cores + HT). I launch with the qemu arg &quot;cpu -host&quot; and use libvirt to set the topology to 3 cores 6 thread. Then I use cpuset to create a cpuset and move all tasks (and kernel threads) to cpu 0-1. Then I have my vcpus pinned to CPUs 2-7. I&#039;ve also enabled the Hyper-V enlightenments. However, I still feel like I&#039;m getting questionable CPU performance. The most notable example is Borderlands: PS, which has really poor performance in the VM. I am passing through a 270X and play a lot of GPU intesive games just fine, but BL gives me issues like no other game. </p><p>Do anyone have any tips on how I could further optimize my CPU performance?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542143">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542154" class="blockpost roweven"> <h2><span><span class="conr">#5504</span> <a href="viewtopic.php?pid=1542154#p1542154">2015-07-05 04:02:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>@MonopolyMan</p><p>What host kernel?&#160; A while back we added lazy debug register handling, primarily due to BL2 use of debug registers.</p><p>EDIT: kernel 3.15 includes lazy debug register handling</p> <p class="postedit"><em>Last edited by aw (2015-07-05 13:25:07)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542154">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542196" class="blockpost rowodd"> <h2><span><span class="conr">#5505</span> <a href="viewtopic.php?pid=1542196#p1542196">2015-07-05 08:17:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79471">Bronek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: London</span></dd> <dd><span>Registered: 2014-02-14</span></dd> <dd><span>Posts: 90</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79471">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So, my VDIs are working almost fine, they are stable and the performance is good. There are two small problems though</p><ul><li><p>keyboard is not available during initial phase of Windows startup (selections in text mode, before Windows logo)</p></li><li><p>quite often during startup (animated Windows logo) the virtual machine will enter &quot;paused&quot; state and there is nothing to indicate why. The only way to recover is &quot;virsh destroy&quot;, rollback its system volume (* because of above) and then start again</p></li></ul><p>Here is current virsh definition of one of the affected VDIs.</p><div class="codebox"><pre class="vscroll"><code>&lt;domain type=&#039;kvm&#039; id=&#039;3&#039;&gt; &lt;name&gt;gdynia&lt;/name&gt; &lt;uuid&gt;7a76b37e-3604-4ab1-84ef-69de09123ea3&lt;/uuid&gt; &lt;memory unit=&#039;KiB&#039;&gt;16777216&lt;/memory&gt; &lt;currentMemory unit=&#039;KiB&#039;&gt;16777216&lt;/currentMemory&gt; &lt;memoryBacking&gt; &lt;hugepages&gt; &lt;page size=&#039;2048&#039; unit=&#039;KiB&#039;/&gt; &lt;/hugepages&gt; &lt;/memoryBacking&gt; &lt;vcpu placement=&#039;static&#039;&gt;8&lt;/vcpu&gt; &lt;cputune&gt; &lt;vcpupin vcpu=&#039;0&#039; cpuset=&#039;2&#039;/&gt; &lt;vcpupin vcpu=&#039;1&#039; cpuset=&#039;3&#039;/&gt; &lt;vcpupin vcpu=&#039;2&#039; cpuset=&#039;4&#039;/&gt; &lt;vcpupin vcpu=&#039;3&#039; cpuset=&#039;5&#039;/&gt; &lt;vcpupin vcpu=&#039;4&#039; cpuset=&#039;14&#039;/&gt; &lt;vcpupin vcpu=&#039;5&#039; cpuset=&#039;15&#039;/&gt; &lt;vcpupin vcpu=&#039;6&#039; cpuset=&#039;16&#039;/&gt; &lt;vcpupin vcpu=&#039;7&#039; cpuset=&#039;17&#039;/&gt; &lt;/cputune&gt; &lt;resource&gt; &lt;partition&gt;/machine&lt;/partition&gt; &lt;/resource&gt; &lt;os&gt; &lt;type arch=&#039;x86_64&#039; machine=&#039;pc-i440fx-2.2&#039;&gt;hvm&lt;/type&gt; &lt;loader type=&#039;rom&#039;&gt;/usr/share/qemu/bios.bin&lt;/loader&gt; &lt;/os&gt; &lt;features&gt; &lt;acpi/&gt; &lt;apic/&gt; &lt;pae/&gt; &lt;hyperv&gt; &lt;relaxed state=&#039;on&#039;/&gt; &lt;vapic state=&#039;on&#039;/&gt; &lt;spinlocks state=&#039;on&#039; retries=&#039;4096&#039;/&gt; &lt;/hyperv&gt; &lt;/features&gt; &lt;cpu mode=&#039;host-passthrough&#039;&gt; &lt;topology sockets=&#039;1&#039; cores=&#039;4&#039; threads=&#039;2&#039;/&gt; &lt;/cpu&gt; &lt;clock offset=&#039;utc&#039;&gt; &lt;timer name=&#039;rtc&#039; tickpolicy=&#039;catchup&#039;/&gt; &lt;timer name=&#039;pit&#039; tickpolicy=&#039;delay&#039;/&gt; &lt;timer name=&#039;hpet&#039; present=&#039;no&#039;/&gt; &lt;timer name=&#039;hypervclock&#039; present=&#039;yes&#039;/&gt; &lt;/clock&gt; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt; &lt;on_reboot&gt;restart&lt;/on_reboot&gt; &lt;on_crash&gt;restart&lt;/on_crash&gt; &lt;pm&gt; &lt;suspend-to-mem enabled=&#039;no&#039;/&gt; &lt;suspend-to-disk enabled=&#039;no&#039;/&gt; &lt;/pm&gt; &lt;devices&gt; &lt;emulator&gt;/usr/bin/qemu-system-x86_64.xvga03.sh&lt;/emulator&gt; &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source dev=&#039;/dev/zvol/zdata/vdis/gdynia&#039;/&gt; &lt;backingStore/&gt; &lt;target dev=&#039;vda&#039; bus=&#039;virtio&#039;/&gt; &lt;boot order=&#039;1&#039;/&gt; &lt;alias name=&#039;virtio-disk0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x02&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source dev=&#039;/dev/zvol/zdata/protected&#039;/&gt; &lt;backingStore/&gt; &lt;target dev=&#039;vdc&#039; bus=&#039;virtio&#039;/&gt; &lt;alias name=&#039;virtio-disk2&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x05&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039; cache=&#039;none&#039;/&gt; &lt;source dev=&#039;/dev/disk/by-partuuid/c5a05f68-9f2c-4ad6-96c5-a5fc85d73d7c&#039;/&gt; &lt;backingStore/&gt; &lt;target dev=&#039;vdd&#039; bus=&#039;virtio&#039;/&gt; &lt;alias name=&#039;virtio-disk3&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x06&#039; function=&#039;0x0&#039;/&gt; &lt;/disk&gt; &lt;disk type=&#039;file&#039; device=&#039;cdrom&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source file=&#039;/root/virtio-win.iso&#039;/&gt; &lt;backingStore/&gt; &lt;target dev=&#039;hdd&#039; bus=&#039;ide&#039;/&gt; &lt;readonly/&gt; &lt;alias name=&#039;ide0-0-1&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;1&#039;/&gt; &lt;/disk&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-ehci1&#039;&gt; &lt;alias name=&#039;usb&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x04&#039; function=&#039;0x7&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;usb&#039; index=&#039;0&#039; model=&#039;ich9-uhci1&#039;&gt; &lt;alias name=&#039;usb&#039;/&gt; &lt;master startport=&#039;0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x04&#039; function=&#039;0x0&#039; multifunction=&#039;on&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;ide&#039; index=&#039;0&#039;&gt; &lt;alias name=&#039;ide&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x01&#039; function=&#039;0x1&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;pci&#039; index=&#039;0&#039; model=&#039;pci-root&#039;&gt; &lt;alias name=&#039;pci.0&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;virtio-serial&#039; index=&#039;0&#039;&gt; &lt;alias name=&#039;virtio-serial0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x09&#039; function=&#039;0x0&#039;/&gt; &lt;/controller&gt; &lt;interface type=&#039;bridge&#039;&gt; &lt;mac address=&#039;52:54:01:34:56:e7&#039;/&gt; &lt;source bridge=&#039;br0&#039;/&gt; &lt;target dev=&#039;vnet1&#039;/&gt; &lt;model type=&#039;virtio&#039;/&gt; &lt;alias name=&#039;net0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x03&#039; function=&#039;0x0&#039;/&gt; &lt;/interface&gt; &lt;channel type=&#039;unix&#039;&gt; &lt;source mode=&#039;bind&#039; path=&#039;/var/lib/libvirt/qemu/gdynia.agent&#039;/&gt; &lt;target type=&#039;virtio&#039; name=&#039;org.qemu.guest_agent.0&#039; state=&#039;connected&#039;/&gt; &lt;alias name=&#039;channel0&#039;/&gt; &lt;address type=&#039;virtio-serial&#039; controller=&#039;0&#039; bus=&#039;0&#039; port=&#039;1&#039;/&gt; &lt;/channel&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;usb&#039; managed=&#039;yes&#039;&gt; &lt;source&gt; &lt;vendor id=&#039;0x0853&#039;/&gt; &lt;product id=&#039;0x0124&#039;/&gt; &lt;address bus=&#039;2&#039; device=&#039;3&#039;/&gt; &lt;/source&gt; &lt;alias name=&#039;hostdev0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x84&#039; slot=&#039;0x00&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;alias name=&#039;hostdev1&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x0f&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;hostdev mode=&#039;subsystem&#039; type=&#039;pci&#039; managed=&#039;yes&#039;&gt; &lt;driver name=&#039;vfio&#039;/&gt; &lt;source&gt; &lt;address domain=&#039;0x0000&#039; bus=&#039;0x03&#039; slot=&#039;0x00&#039; function=&#039;0x0&#039;/&gt; &lt;/source&gt; &lt;alias name=&#039;hostdev2&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x08&#039; function=&#039;0x0&#039;/&gt; &lt;/hostdev&gt; &lt;memballoon model=&#039;virtio&#039;&gt; &lt;alias name=&#039;balloon0&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x07&#039; function=&#039;0x0&#039;/&gt; &lt;/memballoon&gt; &lt;/devices&gt; &lt;/domain&gt;</code></pre></div><p>and some information about the host</p><div class="codebox"><pre class="vscroll"><code>root@gdansk ~ # uname -a Linux gdansk 4.0.7-1-ARCH #1 SMP PREEMPT Sat Jul 4 15:22:43 BST 2015 x86_64 GNU/Linux root@gdansk ~ # qemu-system-x86_64 --version QEMU emulator version 2.2.1, Copyright (c) 2003-2008 Fabrice Bellard root@gdansk ~ # virsh --version 1.2.16 root@gdansk ~ # cat /proc/cmdline BOOT_IMAGE=../vmlinuz-linux zfs=zroot rw spl.spl_hostid=0xa8c03302 console=ttyS0,115200N8R nomodeset udev.children-max=32 edac_core.edac_mc_panic_on_ue=1 nohz=off intel_iommu=on iommu=pt pci-stub.ids=8086:1d20,1002:6707,1002:aa80,1002:67b0,1002:aac8,104c:8241,1033:0194 isolcpus=2,3,4,5,6,7,8,9,10,11,14,15,16,17,18,19,20,21,22,23 initrd=../initramfs-linux.img root@gdansk ~ # zgrep VFIO /proc/config.gz CONFIG_VFIO_IOMMU_TYPE1=m CONFIG_VFIO=m CONFIG_VFIO_PCI=m CONFIG_VFIO_PCI_VGA=y CONFIG_VFIO_PCI_MMAP=y CONFIG_VFIO_PCI_INTX=y CONFIG_KVM_VFIO=y root@gdansk ~ # free -gwt :( total used free shared buffers cache available Mem: 125 51 58 0 6 9 65 Swap: 159 0 159 Total: 285 51 218 root@gdansk /etc/sysctl.d # cat 80-hugepages.conf # Reserve this many 2MB pages for virtual machine vm.nr_hugepages = 25000 root@gdansk ~ # grep &quot;processor&quot; /proc/cpuinfo | wc -l 24 root@gdansk ~ # cat /proc/cpuinfo | tail -28 processor : 23 vendor_id : GenuineIntel cpu family : 6 model : 62 model name : Intel(R) Xeon(R) CPU E5-2630 v2 @ 2.60GHz stepping : 4 microcode : 0x427 cpu MHz : 1268.617 cache size : 15360 KB physical id : 1 siblings : 12 core id : 5 cpu cores : 6 apicid : 43 initial apicid : 43 fpu : yes fpu_exception : yes cpuid level : 13 wp : yes flags : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm ida arat epb pln pts dtherm tpr_shadow vnmi flexpriority ept vpid fsgsbase smep erms xsaveopt bugs : bogomips : 5204.72 clflush size : 64 cache_alignment : 64 address sizes : 46 bits physical, 48 bits virtual power management: root@gdansk ~ # cat /usr/bin/qemu-system-x86_64.xvga03.sh #!/bin/sh exec nice --adjustment=-5 /usr/bin/qemu-system-x86_64 `echo &quot;$@&quot; | sed &#039;s/vfio-pci,host=03:00.0/vfio-pci,host=03:00.0,x-vga=on/g&#039;` root@gdansk ~ # lspci -vnn -s 0000:03:00 03:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Cayman LE GL [FirePro V5900] [1002:6707] (prog-if 00 [VGA controller]) Subsystem: Advanced Micro Devices, Inc. [AMD/ATI] Device [1002:0b06] Flags: bus master, fast devsel, latency 0, IRQ 128 Memory at c0000000 (64-bit, prefetchable) [size=256M] Memory at dfe20000 (64-bit, non-prefetchable) [size=128K] I/O ports at 7000 [size=256] Expansion ROM at dfe00000 [disabled] [size=128K] Capabilities: [50] Power Management version 3 Capabilities: [58] Express Legacy Endpoint, MSI 00 Capabilities: [a0] MSI: Enable+ Count=1/1 Maskable- 64bit+ Capabilities: [100] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150] Advanced Error Reporting Kernel driver in use: vfio-pci Kernel modules: radeon 03:00.1 Audio device [0403]: Advanced Micro Devices, Inc. [AMD/ATI] Cayman/Antilles HDMI Audio [Radeon HD 6900 Series] [1002:aa80] Subsystem: Advanced Micro Devices, Inc. [AMD/ATI] Cayman/Antilles HDMI Audio [Radeon HD 6900 Series] [1002:aa80] Flags: bus master, fast devsel, latency 0, IRQ 10 Memory at dfe40000 (64-bit, non-prefetchable) [size=16K] Capabilities: [50] Power Management version 3 Capabilities: [58] Express Legacy Endpoint, MSI 00 Capabilities: [a0] MSI: Enable- Count=1/1 Maskable- 64bit+ Capabilities: [100] Vendor Specific Information: ID=0001 Rev=1 Len=010 &lt;?&gt; Capabilities: [150] Advanced Error Reporting Kernel driver in use: pci-stub Kernel modules: snd_hda_intel</code></pre></div> <p class="postedit"><em>Last edited by Bronek (2015-07-05 08:22:29)</em></p> </div> <div class="postsignature postmsg"><hr /><p>Sorry about&#160; &quot;KVM VGA-Passthrough ...&quot; thread <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Anyone interested in continuing this discussion elsewhere, please contact me privately. I might be able to find it a new home.</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542196">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542286" class="blockpost roweven"> <h2><span><span class="conr">#5506</span> <a href="viewtopic.php?pid=1542286#p1542286">2015-07-05 18:49:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92337">MonopolyMan</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-05</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92337">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>@MonopolyMan</p><p>What host kernel?&#160; A while back we added lazy debug register handling, primarily due to BL2 use of debug registers.</p><p>EDIT: kernel 3.15 includes lazy debug register handling</p></div></blockquote></div><p>I just installed 3.16 and that seemed to fix it! It made both Dirty Bomb and Borderlands go from completely unplayable to 60+ FPS. </p><p>Thank you very much!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542286">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542294" class="blockpost rowodd"> <h2><span><span class="conr">#5507</span> <a href="viewtopic.php?pid=1542294#p1542294">2015-07-05 19:12:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>Anything else?</p></div></blockquote></div><br /><p>Well... try swapping BDFs in the commandline, making ioapic[9] 00:00.1 and vice versa.<br />Also you can try swapping the host and the guest cards, placing your HD7950 into 01:00.0(first pci-e slot).<br />BTW, the card itself should be fine, because, afair, 270x is rebadged HD7950, and as you can see <a href="https://docs.google.com/spreadsheets/d/1LnGpTrXalwGVNy0PWJDURhyxa3sgqkGXmvNCIvIMenk/edit#gid=0" rel="nofollow">there</a> and along the thread, people have no problems using it.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542294">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542296" class="blockpost roweven"> <h2><span><span class="conr">#5508</span> <a href="viewtopic.php?pid=1542296#p1542296">2015-07-05 19:16:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92337">MonopolyMan</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-05</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92337">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>One other thing. For sound, I am using -soundhw hda. This works really well for output, but I have an odd issue with input. For some reason, my microphone is delayed by about 20-25 second on the guest. However, there is no issues on the host. I can&#039;t seem to find any reason why this might be happening. Does anyone have any susgestions?</p><br /><p>Note: I&#039;m using:&#160; &#160;<br />&lt;qemu:env name=&#039;QEMU_PA_SAMPLES&#039; value=&#039;4096&#039;/&gt;<br />&lt;qemu:env name=&#039;QEMU_AUDIO_DRV&#039; value=&#039;pa&#039;/&gt;</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542296">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542609" class="blockpost rowodd"> <h2><span><span class="conr">#5509</span> <a href="viewtopic.php?pid=1542609#p1542609">2015-07-06 22:46:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92304">Zeorymer</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-03</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jerichokru@aol.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>Anything else?</p></div></blockquote></div><p>Well... try swapping BDFs in the commandline, making ioapic[9] 00:00.1 and vice versa.</p></div></blockquote></div><p>Tried that, froze on &quot;booting kernel&quot;<br />I noticed a line appear while booting that doesn&#039;t seem to get logged:</p><div class="codebox"><pre><code>/init/ line 1 = ivrs_ioapic[9]=00:14.0 : Command not found /init/ line 1 = ivrs_ioapic[10]=00:00.1 : Command not found</code></pre></div><p>or something like that.</p><p>It seems to work anyway as the table error doesn&#039;t show</p><div class="quotebox"><blockquote><div><p>Also you can try swapping the host and the guest cards, placing your HD7950 into 01:00.0(first pci-e slot).</p></div></blockquote></div><p>I attempted to do this as i was setting up the system, but it wants to diosplay everything out the first card in the system, even if the monitors are in the 2600XT in the lower slots.&#160; Any way I can force it to?</p><div class="quotebox"><blockquote><div><p>BTW, the card itself should be fine, because, afair, 270x is rebadged HD7950, and as you can see <a href="https://docs.google.com/spreadsheets/d/1LnGpTrXalwGVNy0PWJDURhyxa3sgqkGXmvNCIvIMenk/edit#gid=0" rel="nofollow">there</a> and along the thread, people have no problems using it.</p></div></blockquote></div><p>The R9 270X = 7870<br />The R9 280 = 7950</p><p>However there are quite a few 7950s on the list being passed sucessfully.</p><br /><p>Additionally, I built the linux-vfio package to see if it made any difference, system booted with the same timeout messages and locked up when I tried the vfio-bind command.</p><div class="codebox"><pre class="vscroll"><code>Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:02 JK-Desktop kernel: AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=07:00.0 address=0x00000002451e49e0] Jul 06 18:30:02 JK-Desktop kernel: BUG: unable to handle kernel paging request at ffffffffffffc039 Jul 06 18:30:02 JK-Desktop kernel: IP: [&lt;ffffffff81576b77&gt;] schedule+0x37/0x90 Jul 06 18:30:02 JK-Desktop kernel: PGD 180e067 PUD 1810067 PMD 0 Jul 06 18:30:02 JK-Desktop kernel: Oops: 0000 [#1] PREEMPT SMP Jul 06 18:30:02 JK-Desktop kernel: Modules linked in: nls_utf8 isofs vfio_pci vfio_iommu_type1 vfio it87 hwmon_vid eeepc_wmi asus_wmi sparse_keymap led_class rfkill video kvm_amd kvm fuse crct10dif_pclmu Jul 06 18:30:02 JK-Desktop kernel: hid_logitech ff_memless hid_generic hid_microsoft usbhid hid uas usb_storage atkbd libps2 ahci libahci libata ohci_pci xhci_pci ohci_hcd ehci_pci xhci_hcd ehci_hcd scs Jul 06 18:30:02 JK-Desktop kernel: CPU: 4 PID: 720 Comm: cinnamon Not tainted 4.0.7-2-vfio #1 Jul 06 18:30:02 JK-Desktop kernel: Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 EVO, BIOS 1604 10/16/2012 Jul 06 18:30:02 JK-Desktop kernel: task: ffff88023db2b2a0 ti: ffff8800a4144000 task.ti: ffff8800a4144000 Jul 06 18:30:02 JK-Desktop kernel: RIP: 0010:[&lt;ffffffff81576b77&gt;] [&lt;ffffffff81576b77&gt;] schedule+0x37/0x90 Jul 06 18:30:02 JK-Desktop kernel: RSP: 0018:ffff8800a4147a08 EFLAGS: 00010292 Jul 06 18:30:02 JK-Desktop kernel: RAX: 0000000000000000 RBX: 0000000000000001 RCX: 00000000c0000100 Jul 06 18:30:02 JK-Desktop kernel: RDX: ffff8800a4147fd8 RSI: ffff88023db2b2a0 RDI: ffff88024ed13e40 Jul 06 18:30:02 JK-Desktop kernel: RBP: ffff8800a4147a18 R08: ffff8800a4144000 R09: ffff88024ed13e70 Jul 06 18:30:02 JK-Desktop kernel: R10: 0000000000000020 R11: 0000000000000004 R12: 000000000006224f Jul 06 18:30:02 JK-Desktop kernel: R13: ffff8800a4147b80 R14: ffff8800a4147bec R15: 0000000000000000 Jul 06 18:30:02 JK-Desktop kernel: FS: 00007f532c8c39c0(0000) GS:ffff88024ed00000(0000) knlGS:0000000000000000 Jul 06 18:30:02 JK-Desktop kernel: CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033 Jul 06 18:30:02 JK-Desktop kernel: CR2: ffffffffffffc039 CR3: 00000000a4ca2000 CR4: 00000000000407e0 Jul 06 18:30:02 JK-Desktop kernel: Stack: Jul 06 18:30:02 JK-Desktop kernel: ffff8800a4147bec 0000000000000000 ffff8800a4147ab8 ffffffff815798fc Jul 06 18:30:02 JK-Desktop kernel: ffff8800a4147a28 0000000000000000 0000000000000000 000000a9a6b041b6 Jul 06 18:30:02 JK-Desktop kernel: 000000a9a6aa1f67 ffffffff810e0bd0 ffff88024ed0e408 0000000000000000 Jul 06 18:30:02 JK-Desktop kernel: Call Trace: Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff815798fc&gt;] schedule_hrtimeout_range_clock.part.6+0xfc/0x120 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff810e0bd0&gt;] ? __run_hrtimer+0x250/0x250 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff81579891&gt;] ? schedule_hrtimeout_range_clock.part.6+0x91/0x120 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff81579939&gt;] schedule_hrtimeout_range_clock+0x19/0x50 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff81579983&gt;] schedule_hrtimeout_range+0x13/0x20 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811ec8f4&gt;] poll_schedule_timeout+0x44/0x70 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811ee111&gt;] do_sys_poll+0x531/0x600 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811ee2e1&gt;] SyS_poll+0x71/0x130 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff8157a889&gt;] system_call_fastpath+0x12/0x17 Jul 06 18:30:02 JK-Desktop kernel: Code: b8 00 00 48 89 e5 53 48 83 ec 08 48 8b 10 48 85 d2 74 0a 48 83 b8 a8 07 00 00 00 74 27 65 48 8b 1c 25 60 b8 00 00 e8 99 f5 ff ff &lt;48&gt; 8b 83 38 c0 ff ff a8 08 75 f Jul 06 18:30:02 JK-Desktop kernel: RIP [&lt;ffffffff81576b77&gt;] schedule+0x37/0x90</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542609">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542645" class="blockpost roweven"> <h2><span><span class="conr">#5510</span> <a href="viewtopic.php?pid=1542645#p1542645">2015-07-07 01:51:54</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>I attempted to do this as i was setting up the system, but it wants to diosplay everything out the first card in the system, even if the monitors are in the 2600XT in the lower slots.&#160; Any way I can force it to?</p></div></blockquote></div><p>There&#039;s three ways of changing this:<br />1. Making the host use UEFI too and ignore VGA. That way you&#039;ll see UEFI setup menu on all video outputs, but the GPU will be free of any extra burden like VGA.<br />2. On some Gigabyte motherboards it&#039;s possible to select the primary GPU device, to which all VGA stuff will be directed.<br />3. Live with it,<span class="bbs"> but the VM should use OVMF.</span> Currently my host system is legacy-booted with all VGA stuff routed to 01:00.0(so if i will push ctrl-alt-f1 while VM is off, i&#039;ll see a console on the screen), but when the system loads, my nvidia driver kicks in, loads the 04:00.0 GT610 card, and 01:00.0 is not used by host system(as i have my radeon blacklisted, but it&#039;s not prone to bind itself when not asked)...<br />Oh wait, you don&#039;t even need OVMF, if x-vga=on works correctly on your platform. For me it doesn&#039;t, so i use OVMF.<br />Anyway, i have the following lines in my xorg.conf line, maybe you&#039;ll like it too:</p><div class="codebox"><pre><code>Section &quot;Device&quot; Identifier &quot;Device0&quot; Driver &quot;nvidia&quot; VendorName &quot;NVIDIA Corporation&quot; BoardName &quot;GeForce GT 610&quot; BusID &quot;PCI:04:00:00&quot; EndSection</code></pre></div><p>As you can see, i specify the device be it&#039;s BDF address, so if i would have multiple nvidia GPUs, normally only 04:00.0 would work.</p><div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>The R9 270X = 7870<br />The R9 280 = 7950</p><p>However there are quite a few 7950s on the list being passed sucessfully.</p></div></blockquote></div><p>The card&#039;s just rare, i guess. Anyway, i don&#039;t remember them being any special, just another radeon southern(right?) islands GPU with reset problems that were fixed some time ago.</p><div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><div class="codebox"><pre class="vscroll"><code>Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:01 JK-Desktop kernel: AMD-Vi: Completion-Wait loop timed out Jul 06 18:30:02 JK-Desktop kernel: AMD-Vi: Event logged [IOTLB_INV_TIMEOUT device=07:00.0 address=0x00000002451e49e0] Jul 06 18:30:02 JK-Desktop kernel: BUG: unable to handle kernel paging request at ffffffffffffc039 Jul 06 18:30:02 JK-Desktop kernel: IP: [&lt;ffffffff81576b77&gt;] schedule+0x37/0x90 Jul 06 18:30:02 JK-Desktop kernel: PGD 180e067 PUD 1810067 PMD 0 Jul 06 18:30:02 JK-Desktop kernel: Oops: 0000 [#1] PREEMPT SMP Jul 06 18:30:02 JK-Desktop kernel: Modules linked in: nls_utf8 isofs vfio_pci vfio_iommu_type1 vfio it87 hwmon_vid eeepc_wmi asus_wmi sparse_keymap led_class rfkill video kvm_amd kvm fuse crct10dif_pclmu Jul 06 18:30:02 JK-Desktop kernel: hid_logitech ff_memless hid_generic hid_microsoft usbhid hid uas usb_storage atkbd libps2 ahci libahci libata ohci_pci xhci_pci ohci_hcd ehci_pci xhci_hcd ehci_hcd scs Jul 06 18:30:02 JK-Desktop kernel: CPU: 4 PID: 720 Comm: cinnamon Not tainted 4.0.7-2-vfio #1 Jul 06 18:30:02 JK-Desktop kernel: Hardware name: To be filled by O.E.M. To be filled by O.E.M./M5A97 EVO, BIOS 1604 10/16/2012 Jul 06 18:30:02 JK-Desktop kernel: task: ffff88023db2b2a0 ti: ffff8800a4144000 task.ti: ffff8800a4144000 Jul 06 18:30:02 JK-Desktop kernel: RIP: 0010:[&lt;ffffffff81576b77&gt;] [&lt;ffffffff81576b77&gt;] schedule+0x37/0x90 Jul 06 18:30:02 JK-Desktop kernel: RSP: 0018:ffff8800a4147a08 EFLAGS: 00010292 Jul 06 18:30:02 JK-Desktop kernel: RAX: 0000000000000000 RBX: 0000000000000001 RCX: 00000000c0000100 Jul 06 18:30:02 JK-Desktop kernel: RDX: ffff8800a4147fd8 RSI: ffff88023db2b2a0 RDI: ffff88024ed13e40 Jul 06 18:30:02 JK-Desktop kernel: RBP: ffff8800a4147a18 R08: ffff8800a4144000 R09: ffff88024ed13e70 Jul 06 18:30:02 JK-Desktop kernel: R10: 0000000000000020 R11: 0000000000000004 R12: 000000000006224f Jul 06 18:30:02 JK-Desktop kernel: R13: ffff8800a4147b80 R14: ffff8800a4147bec R15: 0000000000000000 Jul 06 18:30:02 JK-Desktop kernel: FS: 00007f532c8c39c0(0000) GS:ffff88024ed00000(0000) knlGS:0000000000000000 Jul 06 18:30:02 JK-Desktop kernel: CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033 Jul 06 18:30:02 JK-Desktop kernel: CR2: ffffffffffffc039 CR3: 00000000a4ca2000 CR4: 00000000000407e0 Jul 06 18:30:02 JK-Desktop kernel: Stack: Jul 06 18:30:02 JK-Desktop kernel: ffff8800a4147bec 0000000000000000 ffff8800a4147ab8 ffffffff815798fc Jul 06 18:30:02 JK-Desktop kernel: ffff8800a4147a28 0000000000000000 0000000000000000 000000a9a6b041b6 Jul 06 18:30:02 JK-Desktop kernel: 000000a9a6aa1f67 ffffffff810e0bd0 ffff88024ed0e408 0000000000000000 Jul 06 18:30:02 JK-Desktop kernel: Call Trace: Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff815798fc&gt;] schedule_hrtimeout_range_clock.part.6+0xfc/0x120 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff810e0bd0&gt;] ? __run_hrtimer+0x250/0x250 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff81579891&gt;] ? schedule_hrtimeout_range_clock.part.6+0x91/0x120 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff81579939&gt;] schedule_hrtimeout_range_clock+0x19/0x50 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff81579983&gt;] schedule_hrtimeout_range+0x13/0x20 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811ec8f4&gt;] poll_schedule_timeout+0x44/0x70 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811ee111&gt;] do_sys_poll+0x531/0x600 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811eca70&gt;] ? poll_select_copy_remaining+0x150/0x150 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff811ee2e1&gt;] SyS_poll+0x71/0x130 Jul 06 18:30:02 JK-Desktop kernel: [&lt;ffffffff8157a889&gt;] system_call_fastpath+0x12/0x17 Jul 06 18:30:02 JK-Desktop kernel: Code: b8 00 00 48 89 e5 53 48 83 ec 08 48 8b 10 48 85 d2 74 0a 48 83 b8 a8 07 00 00 00 74 27 65 48 8b 1c 25 60 b8 00 00 e8 99 f5 ff ff &lt;48&gt; 8b 83 38 c0 ff ff a8 08 75 f Jul 06 18:30:02 JK-Desktop kernel: RIP [&lt;ffffffff81576b77&gt;] schedule+0x37/0x90</code></pre></div></div></blockquote></div><p>Actually, this looks very bad. I think only aw or someone his level can give you a proper advice. Strange thing those ioapic remapping commands didn&#039;t work.</p> <p class="postedit"><em>Last edited by Duelist (2015-07-07 01:57:35)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542645">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542657" class="blockpost rowodd"> <h2><span><span class="conr">#5511</span> <a href="viewtopic.php?pid=1542657#p1542657">2015-07-07 04:26:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92304">Zeorymer</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-03</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:jerichokru@aol.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>Actually, this looks very bad. I think only aw or someone his level can give you a proper advice. Strange thing those ioapic remapping commands didn&#039;t work.</p></div></blockquote></div><p>So, in simple terms, I&#039;m screwed because Asus messed up something.</p><p>I guess the easy way of fixing this is to replace the board with a known working one, which is hard to do with minimal funds.</p><p>Could power problems cause this?&#160; I&#039;ve had suspicions that my PSU is on it&#039;s way out for a bit now because of some strange behavior with Windows and that both my previous 8320 and the 7950 had to be RMA&#039;d last year (roughly around the same time as well).</p><br /><p>My sensors show this, but I don&#039;t know how accurate these sensors are.</p><div class="codebox"><pre><code>it8721-isa-0290 Adapter: ISA adapter in0: +2.81 V (min = +2.63 V, max = +2.75 V) ALARM in1: +2.87 V (min = +2.84 V, max = +3.05 V) in2: +0.80 V (min = +0.00 V, max = +2.72 V) +3.3V: +3.31 V (min = +5.90 V, max = +2.74 V) ALARM in4: +2.27 V (min = +2.95 V, max = +1.50 V) ALARM in5: +2.50 V (min = +1.06 V, max = +2.35 V) ALARM in6: +1.54 V (min = +0.56 V, max = +2.53 V) 3VSB: +5.40 V (min = +3.02 V, max = +6.10 V) Vbat: +3.38 V fan1: 944 RPM (min = 20 RPM) fan2: 0 RPM (min = 291 RPM) ALARM fan3: 0 RPM (min = 66 RPM) ALARM temp1: +30.0°C (low = +97.0°C, high = -18.0°C) ALARM sensor = thermistor temp2: +27.0°C (low = -56.0°C, high = +94.0°C) sensor = thermistor temp3: -128.0°C (low = -1.0°C, high = +127.0°C) sensor = disabled intrusion0: OK</code></pre></div><p>I do see some obvious garbage, like fans 2 and 3, that have nothing in them.</p> <p class="postedit"><em>Last edited by Zeorymer (2015-07-07 04:27:34)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542657">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542680" class="blockpost roweven"> <h2><span><span class="conr">#5512</span> <a href="viewtopic.php?pid=1542680#p1542680">2015-07-07 07:48:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi guys<br />I&#039;ve been working at this all day, but no matter what I do, IOMMU doesn&#039;t seem to ever enable, at the kernel level. My processor and mobo both (supposedly) have vt-d support, but dmesg | grep iommu only returns the boot parameters themselves; almost as if they are being completely ignored. My boot options are </p><div class="codebox"><pre><code>intel_iommu=on,igfx_on,pass-through i915.enable_hd_vgaarb=1 pci-stub.ids=10de:13c0,10de:0fbb</code></pre></div><p>And my build is:<br />ASUS Maximus VII Ranger<br />Intel i7 4970K (ark.intel does claim this K edition had VT-d support)<br />Intel HD 4600 iGPU (arch host)<br />Nvidia GTX 980 (passthrough)</p><p>I am so lost, google has been no help.</p><p><strong>Update:</strong><br />Made a bit of a mistake, dmesg | grep IOMMU (as opposed to iommu) returns [0.000000] Intel-IOMMU: enabled, and nothing else. /sys/kernel/iommu_groups is completely empty.</p> <p class="postedit"><em>Last edited by morat (2015-07-07 08:38:34)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542680">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542740" class="blockpost rowodd"> <h2><span><span class="conr">#5513</span> <a href="viewtopic.php?pid=1542740#p1542740">2015-07-07 14:19:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Zeorymer wrote:</cite><blockquote><div><p>Could power problems cause this?&#160; I&#039;ve had suspicions that my PSU is on it&#039;s way out for a bit now because of some strange behavior with Windows and that both my previous 8320 and the 7950 had to be RMA&#039;d last year (roughly around the same time as well).</p></div></blockquote></div><p>Use the PSU calculator, like outervision&#039;s one, and compare calculations with your PSU.<br />Do <span class="bbu">not</span> trust software voltmeters, use a physical one and push it into molex(IDE power) or pci-e power connector to find out 12V voltage.</p><p>...the motherboards for AM3+ are kinda cheap, however i understand your concern. Try joining #kvm and ask there. I feel an easy fix somewhere near.</p><p>And i&#039;ve forgot, did you update your bios? It&#039;d be useful to try every revision supporting IOMMU.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542740">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542741" class="blockpost roweven"> <h2><span><span class="conr">#5514</span> <a href="viewtopic.php?pid=1542741#p1542741">2015-07-07 14:22:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>Hi guys<br />I&#039;ve been working at this all day, but no matter what I do, IOMMU doesn&#039;t seem to ever enable, at the kernel level. My processor and mobo both (supposedly) have vt-d support, but dmesg | grep iommu only returns the boot parameters themselves; almost as if they are being completely ignored. My boot options are </p><div class="codebox"><pre><code>intel_iommu=on,igfx_on,pass-through i915.enable_hd_vgaarb=1 pci-stub.ids=10de:13c0,10de:0fbb</code></pre></div><p>And my build is:<br />ASUS Maximus VII Ranger<br />Intel i7 4970K (ark.intel does claim this K edition had VT-d support)<br />Intel HD 4600 iGPU (arch host)<br />Nvidia GTX 980 (passthrough)</p><p>I am so lost, google has been no help.</p><p><strong>Update:</strong><br />Made a bit of a mistake, dmesg | grep IOMMU (as opposed to iommu) returns [0.000000] Intel-IOMMU: enabled, and nothing else. /sys/kernel/iommu_groups is completely empty.</p></div></blockquote></div><p>What does lsmod | grep vfio says?<br />It should be like</p><div class="codebox"><pre><code>vfio_iommu_type1 20480 1 vfio_pci 36864 4 vfio 24576 9 vfio_iommu_type1,vfio_pci</code></pre></div><p>but only when vfio is used. Try loading it manually via modprobe.</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542741">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542746" class="blockpost rowodd"> <h2><span><span class="conr">#5515</span> <a href="viewtopic.php?pid=1542746#p1542746">2015-07-07 14:35:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>Hi guys<br />I&#039;ve been working at this all day, but no matter what I do, IOMMU doesn&#039;t seem to ever enable, at the kernel level. My processor and mobo both (supposedly) have vt-d support, but dmesg | grep iommu only returns the boot parameters themselves; almost as if they are being completely ignored. My boot options are </p><div class="codebox"><pre><code>intel_iommu=on,igfx_on,pass-through i915.enable_hd_vgaarb=1 pci-stub.ids=10de:13c0,10de:0fbb</code></pre></div><p>And my build is:<br />ASUS Maximus VII Ranger<br />Intel i7 4970K (ark.intel does claim this K edition had VT-d support)<br />Intel HD 4600 iGPU (arch host)<br />Nvidia GTX 980 (passthrough)</p><p>I am so lost, google has been no help.</p><p><strong>Update:</strong><br />Made a bit of a mistake, dmesg | grep IOMMU (as opposed to iommu) returns [0.000000] Intel-IOMMU: enabled, and nothing else. /sys/kernel/iommu_groups is completely empty.</p></div></blockquote></div><p>What does lsmod | grep vfio says?<br />It should be like</p><div class="codebox"><pre><code>vfio_iommu_type1 20480 1 vfio_pci 36864 4 vfio 24576 9 vfio_iommu_type1,vfio_pci</code></pre></div><p>but only when vfio is used. Try loading it manually via modprobe.</p></div></blockquote></div><p>vfio is irrelevant until the iommu gets squared away.&#160; Is VT-d enabled in the BIOS?&#160; Do you have a DMAR line like this in dmesg?</p><div class="codebox"><pre><code>ACPI: DMAR 0x00000000DAFDB000 0000B8 (v01 INTEL SNB 00000001 INTL 00000001)</code></pre></div><p>It&#039;s always a good idea to pastebin dmesg even if you don&#039;t know what you&#039;re looking for.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542746">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542785" class="blockpost roweven"> <h2><span><span class="conr">#5516</span> <a href="viewtopic.php?pid=1542785#p1542785">2015-07-07 18:05:16</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=91715">WildyLion</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-06-07</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=91715">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi there.</p><p>I wonder if there&#039;s a way to use VFIO-PCI passthrough under Libvirt user session (qemu://session)?<br />It&#039;s been a huge success so far, but I&#039;m using it via Libvirt system session, but it&#039;s keeping me from using PulseAudio, so far I keep getting the message that &#039;PCI device &lt;ID&gt; is not assignable&gt;, is there any way around that?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542785">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542812" class="blockpost rowodd"> <h2><span><span class="conr">#5517</span> <a href="viewtopic.php?pid=1542812#p1542812">2015-07-07 18:53:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>WildyLion wrote:</cite><blockquote><div><p>Hi there.</p><p>I wonder if there&#039;s a way to use VFIO-PCI passthrough under Libvirt user session (qemu://session)?<br />It&#039;s been a huge success so far, but I&#039;m using it via Libvirt system session, but it&#039;s keeping me from using PulseAudio, so far I keep getting the message that &#039;PCI device &lt;ID&gt; is not assignable&gt;, is there any way around that?</p></div></blockquote></div><p>Not currently</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542812">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542870" class="blockpost roweven"> <h2><span><span class="conr">#5518</span> <a href="viewtopic.php?pid=1542870#p1542870">2015-07-08 00:19:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>What does lsmod | grep vfio says?<br />It should be like</p><div class="codebox"><pre><code>vfio_iommu_type1 20480 1 vfio_pci 36864 4 vfio 24576 9 vfio_iommu_type1,vfio_pci</code></pre></div><p>but only when vfio is used. Try loading it manually via modprobe.</p></div></blockquote></div><p>I have loaded vfio, and it does appear</p><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>vfio is irrelevant until the iommu gets squared away.&#160; Is VT-d enabled in the BIOS?&#160; Do you have a DMAR line like this in dmesg?</p><div class="codebox"><pre><code>ACPI: DMAR 0x00000000DAFDB000 0000B8 (v01 INTEL SNB 00000001 INTL 00000001)</code></pre></div><p>It&#039;s always a good idea to pastebin dmesg even if you don&#039;t know what you&#039;re looking for.</p></div></blockquote></div><p>Something has screwed my iGPU, and I can&#039;t get any output from it anymore; so I reset the CMOS, and now IOMMU seems to work. That would be the end of this, but now I cant use the onboard graphics as the display for arch, so can&#039;t bind the gpu, as its the only other output. Unfortunately I already <strong>have</strong> set it up to use the gpu. How can I roll back the changes I made from the OP?</p><p><strong>Update:</strong><br />I can use vga to get output from arch, <a href="https://gist.github.com/fd8d4fa8c7245d5cd06c" rel="nofollow">so here is the dmesg</a></p> <p class="postedit"><em>Last edited by morat (2015-07-08 00:56:41)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542870">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542878" class="blockpost rowodd"> <h2><span><span class="conr">#5519</span> <a href="viewtopic.php?pid=1542878#p1542878">2015-07-08 01:25:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="codebox"><pre><code>[ 0.000000] Command line: initrd=\initramfs-linux.img iommu=force,calgary intel_iommu=on root=PARTUUID=dc06f381-717e-4143-8e0e-a2ee69b1649c rw i915.enable_hd_vgaarb=1 pci-stub.ids=10de:13c0,10de:0fbb</code></pre></div><p>So we&#039;re just making up kernel boot option now, right? (calgary)</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542878">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1542970" class="blockpost roweven"> <h2><span><span class="conr">#5520</span> <a href="viewtopic.php?pid=1542970#p1542970">2015-07-08 14:07:24</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="codebox"><pre><code>[ 0.000000] Command line: initrd=\initramfs-linux.img iommu=force,calgary intel_iommu=on root=PARTUUID=dc06f381-717e-4143-8e0e-a2ee69b1649c rw i915.enable_hd_vgaarb=1 pci-stub.ids=10de:13c0,10de:0fbb</code></pre></div><p>So we&#039;re just making up kernel boot option now, right? (calgary)</p></div></blockquote></div><p>We are? I thought Calgary was the option to select Intel support.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1542970">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1543000" class="blockpost rowodd"> <h2><span><span class="conr">#5521</span> <a href="viewtopic.php?pid=1543000#p1543000">2015-07-08 15:50:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>morat wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="codebox"><pre><code>[ 0.000000] Command line: initrd=\initramfs-linux.img iommu=force,calgary intel_iommu=on root=PARTUUID=dc06f381-717e-4143-8e0e-a2ee69b1649c rw i915.enable_hd_vgaarb=1 pci-stub.ids=10de:13c0,10de:0fbb</code></pre></div><p>So we&#039;re just making up kernel boot option now, right? (calgary)</p></div></blockquote></div><p>We are? I thought Calgary was the option to select Intel support.</p></div></blockquote></div><p>Ok, even though it&#039;s not documented in <a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/kernel-parameters.txt#n1555" rel="nofollow">kenel-parameters.txt</a> calgary is a valid option there... but you don&#039;t have a calgary system, <del>I hope</del>definitely.</p><div class="codebox"><pre><code>config CALGARY_IOMMU bool &quot;IBM Calgary IOMMU support&quot; select SWIOTLB depends on X86_64 &amp;&amp; PCI ---help--- Support for hardware IOMMUs in IBM&#039;s xSeries x366 and x460 systems. Needed to run systems with more than 3GB of memory properly with 32-bit PCI devices that do not support DAC (Double Address Cycle). Calgary also supports bus level isolation, where all DMAs pass through the IOMMU. This prevents them from going anywhere except their intended destination. This catches hard-to-find kernel bugs and mis-behaving drivers and devices that do not use the DMA-API properly to set up their DMA buffers. The IOMMU can be turned off at boot time with the iommu=off parameter. Normally the kernel will make the right choice by itself. If unsure, say Y.</code></pre></div> <p class="postedit"><em>Last edited by aw (2015-07-08 16:27:38)</em></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1543000">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1543131" class="blockpost roweven"> <h2><span><span class="conr">#5522</span> <a href="viewtopic.php?pid=1543131#p1543131">2015-07-09 01:16:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Ok, even though it&#039;s not documented in <a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/kernel-parameters.txt#n1555" rel="nofollow">kenel-parameters.txt</a> calgary is a valid option there... but you don&#039;t have a calgary system, <del>I hope</del>definitely.</p><div class="codebox"><pre><code>config CALGARY_IOMMU bool &quot;IBM Calgary IOMMU support&quot; select SWIOTLB depends on X86_64 &amp;&amp; PCI ---help--- Support for hardware IOMMUs in IBM&#039;s xSeries x366 and x460 systems. Needed to run systems with more than 3GB of memory properly with 32-bit PCI devices that do not support DAC (Double Address Cycle). Calgary also supports bus level isolation, where all DMAs pass through the IOMMU. This prevents them from going anywhere except their intended destination. This catches hard-to-find kernel bugs and mis-behaving drivers and devices that do not use the DMA-API properly to set up their DMA buffers. The IOMMU can be turned off at boot time with the iommu=off parameter. Normally the kernel will make the right choice by itself. If unsure, say Y.</code></pre></div></div></blockquote></div><p>Ah, right, OK. Well that&#039;s good to know, but IOMMU is already functioning properly, as per my last post. It looks like the dvi port on the mobo is busted, for reasons unknown, VGA and HDMI work fine, but running the vfio-bind script on the GPU crashes the computer, and seems to completely halt the CPU (motherboard opcode). Any ideas?</p> <p class="postedit"><em>Last edited by morat (2015-07-09 01:17:32)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1543131">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1543148" class="blockpost rowodd"> <h2><span><span class="conr">#5523</span> <a href="viewtopic.php?pid=1543148#p1543148">2015-07-09 03:04:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>Ah, right, OK. Well that&#039;s good to know, but IOMMU is already functioning properly, as per my last post. It looks like the dvi port on the mobo is busted, for reasons unknown, VGA and HDMI work fine, but running the vfio-bind script on the GPU crashes the computer, and seems to completely halt the CPU (motherboard opcode). Any ideas?</p></div></blockquote></div><p>IOMMU doesn&#039;t work right, and vfio-bind script sucks.<br />A fresh <a href="http://vfio.blogspot.com/" rel="nofollow"> guide</a> to follow.</p><p>@nbhs: mark the op-post as somewhat outdated and post a huge link to aw&#039;s blog, that&#039;ll help a lot, thanks!</p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1543148">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1543158" class="blockpost roweven"> <h2><span><span class="conr">#5524</span> <a href="viewtopic.php?pid=1543158#p1543158">2015-07-09 06:30:04</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=92386">morat</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2015-07-07</span></dd> <dd><span>Posts: 35</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=92386">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Duelist wrote:</cite><blockquote><div><p>IOMMU doesn&#039;t work right, and vfio-bind script sucks.<br />A fresh <a href="http://vfio.blogspot.com/" rel="nofollow"> guide</a> to follow.</p><p>@nbhs: mark the op-post as somewhat outdated and post a huge link to aw&#039;s blog, that&#039;ll help a lot, thanks!</p></div></blockquote></div><p>Excellent, thanks; and even moreso to @aw. I&#039;ll let you know if it works.<br />Will I need to rollback what I did from OP&#039;s guide, and if so, how?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1543158">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1543217" class="blockpost rowodd"> <h2><span><span class="conr">#5525</span> <a href="viewtopic.php?pid=1543217#p1543217">2015-07-09 13:23:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=85314">Duelist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-09-22</span></dd> <dd><span>Posts: 358</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>morat wrote:</cite><blockquote><div><p>Excellent, thanks; and even moreso to @aw. I&#039;ll let you know if it works.<br />Will I need to rollback what I did from OP&#039;s guide, and if so, how?</p></div></blockquote></div><p>Depending on where you&#039;ve stopped. Disable the vfio-bind systemd service, delete its&#039; remains, use a recent qemu and kernel - and you should be good to go for following aw&#039;s guide.</p><p>Gratitude is always welcome, but try reading modinfo vfio, he wrote that...</p> <p class="postedit"><em>Last edited by Duelist (2015-07-09 14:41:17)</em></p> </div> <div class="postsignature postmsg"><hr /><p><span class="bbs">The forum rules prohibit requesting support for distributions other than arch.</span><br /><a href="https://bbs.archlinux.org/viewtopic.php?pid=1551460#p1551460" rel="nofollow">I gave up.</a><a href="https://bbs.archlinux.org/viewtopic.php?id=162768" rel="nofollow"> It was too late.</a><br /><a href="http://pastebin.com/B3fL84bq" rel="nofollow">What I was trying to do</a>.<br /><a href="http://vfio.blogspot.com/" rel="nofollow">The reference about VFIO and KVM VGA passthrough.</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1543217">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=220">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=219">219</a> <a href="viewtopic.php?id=162768&amp;p=220">220</a> <strong>221</strong> <a href="viewtopic.php?id=162768&amp;p=222">222</a> <a href="viewtopic.php?id=162768&amp;p=223">223</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=222">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
