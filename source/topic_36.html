<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 36) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=36" title="Page 36" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=35" title="Page 35" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=37" title="Page 37" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=35">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=34">34</a> <a href="viewtopic.php?id=162768&amp;p=35">35</a> <strong>36</strong> <a href="viewtopic.php?id=162768&amp;p=37">37</a> <a href="viewtopic.php?id=162768&amp;p=38">38</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=37">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1358569" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#876</span> <a href="viewtopic.php?pid=1358569#p1358569">2013-12-09 20:03:51</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I also just tried assigning USB3 controllers and they just work for me.&#160; I tried both an onboard Etron EJ168 and a plugin Renesas uPD720200.&#160; Windows 7 guest, drivers installed, seems to work with an old USB thumb drive.&#160; I picked up the Renesas card at Best Buy - <a href="http://www.rocketfishproducts.com/products/computer-accessories/RF-P2USB3.html" rel="nofollow">http://www.rocketfishproducts.com/produ … 2USB3.html</a> <a href="http://www.bestbuy.com/site/2-port-usb-3-0-pci-express-interface-card/1092716.p" rel="nofollow">http://www.bestbuy.com/site/2-port-usb- … /1092716.p</a> YMMV</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358569">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358572" class="blockpost roweven"> <h2><span><span class="conr">#877</span> <a href="viewtopic.php?pid=1358572#p1358572">2013-12-09 20:10:26</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>peaquino wrote:</cite><blockquote><div><div class="codebox"><pre><code>#!/bin/bash QEMU_PA_SAMPLES=128 QEMU_AUDIO_DRV=pa qemu-system-x86_64 -enable-kvm -cpu qemu64 -M q35 -m 8192 \ -smp 2,sockets=1,cores=2,threads=1 \ -bios /usr/share/qemu/bios.bin \ -vga none \ -monitor stdio \ -nographic \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/dev/bcache/by-uuid/d79f9dd0-c884-42f7-b5a9-79db832ea9d0,id=disk,format=raw \ -device ide-hd,bus=ahci.0,drive=disk \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on,rombar=0,romfile=/home/myuser/Tahiti.rom \ -device vfio-pci,host=01:00.1,bus=pcie.0,multifunction=on \ -device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 \ -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \ -usb -usbdevice host:04fc:05d8 \ -boot menu=on</code></pre></div></div></blockquote></div><p>rombar=0, romfile=&lt;something&gt; are conflicting.&#160; The first tells it not to expose a ROM, the second tells it what to expose for the ROM.&#160; I suppose maybe rombar=0 is getting ignored if you&#039;re getting output.</p><div class="quotebox"><blockquote><div><p>I can see the BIOS output and Windows starting animation on the monitor connected to the Radeon, but as soon as Catalyst tries to initialize the card, I get a BSOD with atikmpag.sys 116 error. <br />Additionally, after Seabios initializes the 7870, the color palette in Gnome running on the 7660D is totally messed up (I can to post a photo of the screen, if that could be any help). Qemu monitor is not showing any errors, but I get</p></div></blockquote></div><p>I&#039;ve seen color palette corruption on AMD as well, even without AMD primary display IIRC.</p><div class="quotebox"><blockquote><div><p>the follwing entries in journal:</p><div class="quotebox"><blockquote><div><p>[ 2204.807168] vfio-pci 0000:01:00.0: enabling device (0000 -&gt; 0003)<br />[ 2204.831486] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x19@0x270<br />[ 2204.831500] vfio_ecap_init: 0000:01:00.0 hiding ecap 0x1b@0x2d0<br />[ 2204.873898] vfio-pci 0000:01:00.1: enabling device (0000 -&gt; 0002)<br />[ 2246.082840] kvm: zapping shadow pages for mmio generation wraparound<br />[ 2248.441789] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc000 flags=0x0010]<br />[ 2248.441798] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0010]<br />[ 2248.441801] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0030]<br />[ 2248.441803] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0010]<br />[ 2248.441805] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc810 flags=0x0030]<br />[ 2248.441807] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0010]<br />[ 2248.441809] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc810 flags=0x0030]</p></div></blockquote></div></div></blockquote></div><p>The errors are from your audio card.&#160; What about not assigning it at all?</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358572">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358591" class="blockpost rowodd"> <h2><span><span class="conr">#878</span> <a href="viewtopic.php?pid=1358591#p1358591">2013-12-09 21:00:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77556">peaquino</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-09</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77556">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>The following script doesn&#039;t change much: the pagefaults are occuring on 01:00.0 device (main GPU) now (I still get a BSOD on Windows startup).</p><div class="codebox"><pre><code>#!/bin/bash QEMU_PA_SAMPLES=128 QEMU_AUDIO_DRV=pa qemu-system-x86_64 -enable-kvm -cpu qemu64 -M q35 -m 8192 \ -smp 2,sockets=1,cores=2,threads=1 \ -bios /usr/share/qemu/bios.bin \ -vga none \ -monitor stdio \ -nographic \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/dev/bcache/by-uuid/d79f9dd0-c884-42f7-b5a9-79db832ea9d0,id=disk,format=raw \ -device ide-hd,bus=ahci.0,drive=disk \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on,romfile=/home/myuser/Tahiti.rom \ -device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 \ -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 \ -usb -usbdevice host:04fc:05d8 \ -boot menu=on</code></pre></div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>rombar=0, romfile=&lt;something&gt; are conflicting.&#160; The first tells it not to expose a ROM, the second tells it what to expose for the ROM.&#160; I suppose maybe rombar=0 is getting ignored if you&#039;re getting output.</p></div></blockquote></div><p>Thanks, I corrected that in the script.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358591">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358600" class="blockpost roweven"> <h2><span><span class="conr">#879</span> <a href="viewtopic.php?pid=1358600#p1358600">2013-12-09 21:15:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>peaquino, your errors seem to be occuring on 01:00.1 not 01:00.0, which is your audio card.</p><div class="codebox"><pre><code>[ 2248.441807] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0010] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT HDMI Audio [Radeon HD 7970 Series]</code></pre></div><p>is there are reason why you aren&#039;t assigning it? (like so)</p><div class="codebox"><pre><code>-device vfio-pci,host=01:00.0,bus=root.1,addr=0.0,multifunction=on,x-vga=on,romfile=/home/myuser/Tahiti.rom \ -device vfio-pci,host=01:00.1,bus=root.1,addr=0.1 \</code></pre></div> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358600">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358603" class="blockpost rowodd"> <h2><span><span class="conr">#880</span> <a href="viewtopic.php?pid=1358603#p1358603">2013-12-09 21:23:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>andy123 wrote:</cite><blockquote><div><p>peaquino, your errors seem to be occuring on 01:00.1 not 01:00.0, which is your audio card.</p><div class="codebox"><pre><code>[ 2248.441807] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0010] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT HDMI Audio [Radeon HD 7970 Series]</code></pre></div><p>is there are reason why you aren&#039;t assigning it? (like so)</p><div class="codebox"><pre><code>-device vfio-pci,host=01:00.0,bus=root.1,addr=0.0,multifunction=on,x-vga=on,romfile=/home/myuser/Tahiti.rom \ -device vfio-pci,host=01:00.1,bus=root.1,addr=0.1 \</code></pre></div></div></blockquote></div><p>Numerous folks have reported BSODs which were solved by moving the audio device to the root complex rather than exposing it as a sub-function.&#160; It may work, but exposing it on pcie.0 has had more success it seems.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358603">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358639" class="blockpost roweven"> <h2><span><span class="conr">#881</span> <a href="viewtopic.php?pid=1358639#p1358639">2013-12-10 00:14:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77556">peaquino</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-09</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77556">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>andy123 wrote:</cite><blockquote><div><p>peaquino, your errors seem to be occuring on 01:00.1 not 01:00.0, which is your audio card.</p><div class="codebox"><pre><code>[ 2248.441807] AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 address=0x00000000857fc800 flags=0x0010] 01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Tahiti XT HDMI Audio [Radeon HD 7970 Series]</code></pre></div><p>is there are reason why you aren&#039;t assigning it? (like so)</p><div class="codebox"><pre><code>-device vfio-pci,host=01:00.0,bus=root.1,addr=0.0,multifunction=on,x-vga=on,romfile=/home/myuser/Tahiti.rom \ -device vfio-pci,host=01:00.1,bus=root.1,addr=0.1 \</code></pre></div></div></blockquote></div><p>Numerous folks have reported BSODs which were solved by moving the audio device to the root complex rather than exposing it as a sub-function.&#160; It may work, but exposing it on pcie.0 has had more success it seems.</p></div></blockquote></div><p>That&#039;s what I read in th this thread -- I tried both options (exposing the soundcard as subdevice and as separate unit) -- none worked. Not passing the soundcard is not making any visible differences: instad of</p><div class="quotebox"><blockquote><div><p>AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.1 domain=0x0002 ...</p></div></blockquote></div><p>I get </p><div class="quotebox"><blockquote><div><p>AMD-Vi: Event logged [IO_PAGE_FAULT device=01:00.0 domain=0x0002 ...</p></div></blockquote></div><p>Sometimes the host reboots even before it has a chance to write theses errors to journal.</p><p>Moments ago I tried with pci-assign method and Windows Blue Preview: it doesn&#039;t BSOD, but the passed 7870 is not turning on and has a yellow exlamantion mark in device manager (Code 10 - if I remember correctly).</p><p>Still, thanks a lot! I *really* appreciate your help.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358639">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358673" class="blockpost rowodd"> <h2><span><span class="conr">#882</span> <a href="viewtopic.php?pid=1358673#p1358673">2013-12-10 03:18:46</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=70922">nbhs</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/70922.jpg?m=1367773811" width="80" height="80" alt="" /></dd> <dd><span>From: Montevideo, Uruguay</span></dd> <dd><span>Registered: 2013-05-02</span></dd> <dd><span>Posts: 402</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>binaryplease wrote:</cite><blockquote><div><p>I cant get pass the step from unbinding step. Everytime i execute the script or do </p><div class="codebox"><pre><code>echo &quot;0000:02:00.0&quot; &gt; /sys/bus/pci/devices/0000:02:00.0/driver/unbind</code></pre></div><p>my system freezes and i have to switch it of holding the power button.</p><p>I have a lenovo y500 with two geforce gt650m cards (SLI). <br />Im using the nouveau driver. Can anyone help?</p></div></blockquote></div><p>You&#039;ll probably have to use pci-stub or blacklist the nouveau driver</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358673">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358680" class="blockpost roweven"> <h2><span><span class="conr">#883</span> <a href="viewtopic.php?pid=1358680#p1358680">2013-12-10 03:57:15</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75819">alphahere</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75819">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>I also just tried assigning USB3 controllers and they just work for me.&#160; I tried both an onboard Etron EJ168 and a plugin Renesas uPD720200.&#160; Windows 7 guest, drivers installed, seems to work with an old USB thumb drive.&#160; I picked up the Renesas card at Best Buy - <a href="http://www.rocketfishproducts.com/products/computer-accessories/RF-P2USB3.html" rel="nofollow">http://www.rocketfishproducts.com/produ … 2USB3.html</a> <a href="http://www.bestbuy.com/site/2-port-usb-3-0-pci-express-interface-card/1092716.p" rel="nofollow">http://www.bestbuy.com/site/2-port-usb- … /1092716.p</a> YMMV</p></div></blockquote></div><p>Thanks also to teekay for reporting that it does work with nec (renasas) usb 3.0 cards. The card does work fine under linux and windows natively. </p><p>Anyway I have wasted most of yesterday trying to figure this out and it must be my setup. Will try to compile everything again and see if I can figure it out. I can get a little crazy trying to get stuff to work. </p><p>Even the intel controller usb 3.0 on the motherboard does not work with qemu. It must be my setup because the default xhci driver does not even work anymore. This is the default built in usb 3.0 driver in qemu and it does not work! </p><p>-device nec-usb-xhci,id=xhci</p><p>This comes up as unknown device under windows 7.&#160; I know I had this built in xhci driver working once. </p><p>Any hints at what to look for would be greatly apperciated.</p><p>Fun times!</p><p>Thanks</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358680">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358701" class="blockpost rowodd"> <h2><span><span class="conr">#884</span> <a href="viewtopic.php?pid=1358701#p1358701">2013-12-10 05:42:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=69703">keatsfonam</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-03-28</span></dd> <dd><span>Posts: 3</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>keatsfonam wrote:</cite><blockquote><div><p>EDIT2:</p><p>All problems solved by avoiding letting vfio-pci take the device from pci-stub upon starting the vm with the script provided.&#160; Thanks</p></div></blockquote></div><p>What exactly does that mean?</p><p>BTW, as of this morning everything except i915 vga arbiter stuff is in upstream, kernel and qemu.</p></div></blockquote></div><p>Not executing vfio-bind and just starting the vm while the pci-stub is loaded is what I meant.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358701">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1358763" class="blockpost roweven"> <h2><span><span class="conr">#885</span> <a href="viewtopic.php?pid=1358763#p1358763">2013-12-10 13:48:02</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>keatsfonam wrote:</cite><blockquote><div><p>Not executing vfio-bind and just starting the vm while the pci-stub is loaded is what I meant.</p></div></blockquote></div><p>Now that sounds really strange.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1358763">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359035" class="blockpost rowodd"> <h2><span><span class="conr">#886</span> <a href="viewtopic.php?pid=1359035#p1359035">2013-12-11 03:49:08</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73226">ddjdx</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-16</span></dd> <dd><span>Posts: 3</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi All. Encountering an issue that I cant seem to get a hold of a solution for.</p><p>I have installed the 3 packages in the OP, Kernel with default configuration. </p><p>I&#039;m able to use pci-stub on my secondary AMD Radeon 5450 adapter and the VIFO-BIND Script appears to work.</p><p>When I start up the test Qemu, the screen that is plugged into the passthrough adapter comes out of standby but is blank. And a journalctl -r reveals the following :</p><div class="codebox"><pre><code>Dec 11 14:28:05 tux kernel: ------------[ cut here ]------------ Dec 11 14:28:05 tux kernel: ---[ end trace 59e460fd7afe9fe2 ]--- Dec 11 14:28:05 tux kernel: [&lt;ffffffff815053ad&gt;] system_call_fastpath+0x1a/0x1f Dec 11 14:28:05 tux kernel: [&lt;ffffffff811b60c1&gt;] SyS_ioctl+0x81/0xa0 Dec 11 14:28:05 tux kernel: [&lt;ffffffff811b5e60&gt;] do_vfs_ioctl+0x2e0/0x4c0 Dec 11 14:28:05 tux kernel: [&lt;ffffffffa1042ea7&gt;] vfio_fops_unl_ioctl+0x77/0x340 [vfio] Dec 11 14:28:05 tux kernel: [&lt;ffffffffa1055439&gt;] vfio_iommu_type1_ioctl+0x219/0x290 [vfio_iommu_type1] Dec 11 14:28:05 tux kernel: [&lt;ffffffffa1054bc9&gt;] vfio_dma_do_map+0x209/0x860 [vfio_iommu_type1] Dec 11 14:28:05 tux kernel: [&lt;ffffffff813dab66&gt;] iommu_map+0xe6/0x220 Dec 11 14:28:05 tux kernel: [&lt;ffffffff813e5f95&gt;] intel_iommu_map+0x75/0xa0 Dec 11 14:28:05 tux kernel: [&lt;ffffffff813e5ea7&gt;] __domain_mapping+0x3a7/0x420 Dec 11 14:28:05 tux kernel: [&lt;ffffffff81061c8a&gt;] warn_slowpath_null+0x1a/0x20 Dec 11 14:28:05 tux kernel: [&lt;ffffffff81061bad&gt;] warn_slowpath_common+0x7d/0xa0 Dec 11 14:28:05 tux kernel: [&lt;ffffffff814f6f10&gt;] dump_stack+0x4d/0x6f Dec 11 14:28:05 tux kernel: Call Trace: Dec 11 14:28:05 tux kernel: ffff8800ac626000 0000000000000201 0000000000000200 ffff880bea403c90 Dec 11 14:28:05 tux kernel: ffff880bea403c80 ffffffff81061bad 0000000000000200 0000000be2200083 Dec 11 14:28:05 tux kernel: 0000000000000009 ffff880bea403c48 ffffffff814f6f10 0000000000000000 Dec 11 14:28:05 tux kernel: Hardware name: Gigabyte Technology Co., Ltd. To be filled by O.E.M./X79-UP4, BIOS F1 07/13/2012 Dec 11 14:28:05 tux kernel: CPU: 5 PID: 1246 Comm: qemu-system-x86 Not tainted 3.13.0-1-mainline #1 Dec 11 14:28:05 tux kernel: snd_usb_audio evdev snd_usbmidi_lib snd_rawmidi dvb_core snd_seq_device rc_core sb_edac edac_core i2c_i801 radeon lpc_ich ttm drm_kms_helper drm i2c_algo_bi Dec 11 14:28:05 tux kernel: Modules linked in: vfio_pci vfio_iommu_type1 vfio tun ipt_MASQUERADE iptable_nat nf_nat_ipv4 nf_nat nf_conntrack_ipv4 nf_defrag_ipv4 xt_conntrack nf_conntrac Dec 11 14:28:05 tux kernel: WARNING: CPU: 5 PID: 1246 at drivers/iommu/intel-iommu.c:1860 __domain_mapping+0x3a7/0x420() Dec 11 14:28:05 tux kernel: ------------[ cut here ]------------ Dec 11 14:28:05 tux kernel: ERROR: DMA PTE for vPFN 0x0 already set (to bec52f003 not be2200083) Dec 11 14:28:03 tux kernel: vfio-pci 0000:03:00.0: enabling device (0000 -&gt; 0003)</code></pre></div><p>The stack trace is repeated over 100 times and eventually stops with Qemu still running and the secondary screen blank.</p><p>I&#039;m not sure what to look at next as the stack trace doesn&#039;t seem to tell me anything. Though this line caught my eye:</p><div class="codebox"><pre><code>Dec 11 14:28:05 tux kernel: ERROR: DMA PTE for vPFN 0x0 already set (to bec52f003 not be2200083)</code></pre></div><p>But not sure what it means?</p><p>EDIT- <br />Tinkered around some more. Blacklisting the Radeon driver allows SeaBios to appear on the passthrough card. I&#039;m assuming its because the Radeon driver is connecting to the card first before PCI-stub loads. I&#039;m sure that can be fixed by compiling pci-stub into the kernel.But I&#039;m,still getting 100&#039;s of the stack traces listed above. So I&#039;m hesitant to go furthur and install an OS.</p><p>I&#039;ve tried the following:<br />Disabling off-chipset Marvell SATA controller (Its known to cause problems with IOMMU), No difference.<br />Disabled Interrupt Mapping in the BIOS and enabled the workaround in the OP. No Difference<br />Disbaled all other Virtulisation settings in the bios except for VT-D and VT and enabled the Interrupt Mapping work around. No Difference.</p> <p class="postedit"><em>Last edited by ddjdx (2013-12-11 08:54:02)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359035">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359392" class="blockpost roweven"> <h2><span><span class="conr">#887</span> <a href="viewtopic.php?pid=1359392#p1359392">2013-12-12 06:17:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77626">Owen77</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77626">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Thanks for the excellent guide, I&#039;ve followed it through but having no luck with kernel 3.12 + qemu 1.7. <br />Does anyone know possible causes for vfio reporting the device does not support x-vga?<br />This is a headless server and no display drivers are loaded, nouveau is blacklisted</p><p>qemu-system-x86_64 -enable-kvm -M q35 -m 1024 -cpu host -smp 6,sockets=1,cores=6,threads=1 -bios /usr/share/qemu/bios.bin -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=04:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on -device vfio-pci,host=04:00.1,bus=root.1,addr=00.1</p><p>qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: Device does not support requested feature x-vga<br />qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to get device 0000:04:00.0<br />qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed.<br />qemu-system-x86_64: -device vfio-pci,host=04:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device &#039;vfio-pci&#039; could not be initialized</p><p>lspci | grep NVIDIA<br />04:00.0 3D controller: NVIDIA Corporation GF100GL [Tesla M2070-Q] (rev a3)<br />04:00.1 Audio device: NVIDIA Corporation GF100 High Definition Audio Controller (rev a1)</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359392">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359396" class="blockpost rowodd"> <h2><span><span class="conr">#888</span> <a href="viewtopic.php?pid=1359396#p1359396">2013-12-12 06:29:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><p>Thanks for the excellent guide, I&#039;ve followed it through but having no luck with kernel 3.12 + qemu 1.7. <br />Does anyone know possible causes for vfio reporting the device does not support x-vga?</p></div></blockquote></div><p>grep VFIO from your kernel config and it might be pretty obvious.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359396">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359402" class="blockpost roweven"> <h2><span><span class="conr">#889</span> <a href="viewtopic.php?pid=1359402#p1359402">2013-12-12 07:36:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77626">Owen77</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77626">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><p>Thanks for the excellent guide, I&#039;ve followed it through but having no luck with kernel 3.12 + qemu 1.7. <br />Does anyone know possible causes for vfio reporting the device does not support x-vga?</p></div></blockquote></div><p>grep VFIO from your kernel config and it might be pretty obvious.</p></div></blockquote></div><p>cat /boot/config-3.12.0-031200-generic | grep VFIO<br />CONFIG_VFIO_IOMMU_TYPE1=m<br />CONFIG_VFIO=m<br />CONFIG_VFIO_PCI=m<br />CONFIG_VFIO_PCI_VGA=y</p><p>lsmod | grep vfio<br />vfio_pci&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;37175&#160; 0 <br />vfio_iommu_type1&#160; &#160; &#160; &#160;17885&#160; 0 <br />vfio&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;21113&#160; 2 vfio_pci,vfio_iommu_type1</p><p>Looks ok to me, anything I&#039;m missing?</p><p>A colleague has just suggested x-vga may not be necessary for a headless config, would I be able to still access the NVidia card and install drivers to use CUDA for example with standard pci pass-through?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359402">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359404" class="blockpost rowodd"> <h2><span><span class="conr">#890</span> <a href="viewtopic.php?pid=1359404#p1359404">2013-12-12 08:12:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><p>cat /boot/config-3.12.0-031200-generic | grep VFIO<br />CONFIG_VFIO_IOMMU_TYPE1=m<br />CONFIG_VFIO=m<br />CONFIG_VFIO_PCI=m<br />CONFIG_VFIO_PCI_VGA=y</p></div></blockquote></div><p>Why not compile VFIO support into the kernel instead of building as module?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359404">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359411" class="blockpost roweven"> <h2><span><span class="conr">#891</span> <a href="viewtopic.php?pid=1359411#p1359411">2013-12-12 08:55:57</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77626">Owen77</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77626">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p>Why not compile VFIO support into the kernel instead of building as module?</p></div></blockquote></div><p>That&#039;s how it came.<br />It&#039;s an Ubuntu machine (trying to get this working without replacing the OS if possible) and I took the lazy option of installing a pre-built 3.12 kernel package.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359411">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359413" class="blockpost rowodd"> <h2><span><span class="conr">#892</span> <a href="viewtopic.php?pid=1359413#p1359413">2013-12-12 09:10:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=76794">ilya80</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-11-12</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=76794">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p>Why not compile VFIO support into the kernel instead of building as module?</p></div></blockquote></div><p>That&#039;s how it came.<br />It&#039;s an Ubuntu machine (trying to get this working without replacing the OS if possible) and I took the lazy option of installing a pre-built 3.12 kernel package.</p></div></blockquote></div><p>I believe you need both upstream kernel and upstream qemu, prebuilt package wont do it for you.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359413">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359415" class="blockpost roweven"> <h2><span><span class="conr">#893</span> <a href="viewtopic.php?pid=1359415#p1359415">2013-12-12 09:24:39</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77626">Owen77</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77626">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ilya80 wrote:</cite><blockquote><div><p>I believe you need both upstream kernel and upstream qemu, prebuilt package wont do it for you.</p></div></blockquote></div><p>Ok, well I&#039;m using&#160; qemu 1.7 built from source (originally using 1.5 from a package).<br />I&#039;ll build the kernel if necessary but according to this post <a href="https://bbs.archlinux.org/viewtopic.php?pid=1304619#p1304619" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 9#p1304619</a> packages should work ok.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359415">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359468" class="blockpost rowodd"> <h2><span><span class="conr">#894</span> <a href="viewtopic.php?pid=1359468#p1359468">2013-12-12 14:14:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><p>Thanks for the excellent guide, I&#039;ve followed it through but having no luck with kernel 3.12 + qemu 1.7. <br />Does anyone know possible causes for vfio reporting the device does not support x-vga?</p></div></blockquote></div><p>grep VFIO from your kernel config and it might be pretty obvious.</p></div></blockquote></div><p>cat /boot/config-3.12.0-031200-generic | grep VFIO<br />CONFIG_VFIO_IOMMU_TYPE1=m<br />CONFIG_VFIO=m<br />CONFIG_VFIO_PCI=m<br />CONFIG_VFIO_PCI_VGA=y</p><p>lsmod | grep vfio<br />vfio_pci&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;37175&#160; 0 <br />vfio_iommu_type1&#160; &#160; &#160; &#160;17885&#160; 0 <br />vfio&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;21113&#160; 2 vfio_pci,vfio_iommu_type1</p><p>Looks ok to me, anything I&#039;m missing?</p><p>A colleague has just suggested x-vga may not be necessary for a headless config, would I be able to still access the NVidia card and install drivers to use CUDA for example with standard pci pass-through?</p></div></blockquote></div><p>CONFIG_VFIO_PCI_VGA is what I was looking for since I think you would have gotten the same error message if it was disabled (there&#039;s no need to build VFIO statically into the kernel, that&#039;s not the problem)&#160; The problem though is that your Telsa card doesn&#039;t support VGA, note that the PCI class code is &quot;3D controller&quot; rather than &quot;VGA compatible controller&quot;.&#160; VFIO only enables VGA access to devices that claim to support VGA per the PCI spec.&#160; Your Tesla is handled as if you had asked to enable VGA access to an Ethernet card.</p><p>Nvidia does support Tesla, Quadro, and GRID in virtualized environments, but only the K-series of each.&#160; The supported configuration is to assign the GPU as a secondary device to the emulated VGA.&#160; There&#039;s no need to use the x-vga option in the case.&#160; For Quadro and GRID cards the Nvidia device becomes the primary display device when the Nvidia driver stack loads.&#160; I don&#039;t know if this would work with your card, but VGA doesn&#039;t seem to be an option.&#160; Also note that 3.12/1.7 is not sufficient, there are changes in both kernel and qemu that went in after those releases.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359468">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359645" class="blockpost roweven"> <h2><span><span class="conr">#895</span> <a href="viewtopic.php?pid=1359645#p1359645">2013-12-12 23:55:27</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77626">Owen77</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77626">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>CONFIG_VFIO_PCI_VGA is what I was looking for since I think you would have gotten the same error message if it was disabled (there&#039;s no need to build VFIO statically into the kernel, that&#039;s not the problem)&#160; The problem though is that your Telsa card doesn&#039;t support VGA, note that the PCI class code is &quot;3D controller&quot; rather than &quot;VGA compatible controller&quot;.&#160; VFIO only enables VGA access to devices that claim to support VGA per the PCI spec.&#160; Your Tesla is handled as if you had asked to enable VGA access to an Ethernet card.</p><p>Nvidia does support Tesla, Quadro, and GRID in virtualized environments, but only the K-series of each.&#160; The supported configuration is to assign the GPU as a secondary device to the emulated VGA.&#160; There&#039;s no need to use the x-vga option in the case.&#160; For Quadro and GRID cards the Nvidia device becomes the primary display device when the Nvidia driver stack loads.&#160; I don&#039;t know if this would work with your card, but VGA doesn&#039;t seem to be an option.&#160; Also note that 3.12/1.7 is not sufficient, there are changes in both kernel and qemu that went in after those releases.</p></div></blockquote></div><p>Aha, well that explains it. The M2070-Q adds the Quadro features to the M2070 and they advertise it as able to do remote visualisation, so maybe the second technique could work with this card.</p><p>I won&#039;t clutter up this thread with any more about this as it&#039;s clearly a different setup and it looks like we might need newer hardware but if you have any references about the latter option to speed up my research you could share I&#039;d greatly appreciate it, thanks for the help so far.<br />(For disclosure this is a publicly funded research project and all our work will be written up and posted online for community use as we get things running.)</p> <p class="postedit"><em>Last edited by Owen77 (2013-12-12 23:57:55)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359645">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1359670" class="blockpost rowodd"> <h2><span><span class="conr">#896</span> <a href="viewtopic.php?pid=1359670#p1359670">2013-12-13 01:32:28</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>CONFIG_VFIO_PCI_VGA is what I was looking for since I think you would have gotten the same error message if it was disabled (there&#039;s no need to build VFIO statically into the kernel, that&#039;s not the problem)&#160; The problem though is that your Telsa card doesn&#039;t support VGA, note that the PCI class code is &quot;3D controller&quot; rather than &quot;VGA compatible controller&quot;.&#160; VFIO only enables VGA access to devices that claim to support VGA per the PCI spec.&#160; Your Tesla is handled as if you had asked to enable VGA access to an Ethernet card.</p><p>Nvidia does support Tesla, Quadro, and GRID in virtualized environments, but only the K-series of each.&#160; The supported configuration is to assign the GPU as a secondary device to the emulated VGA.&#160; There&#039;s no need to use the x-vga option in the case.&#160; For Quadro and GRID cards the Nvidia device becomes the primary display device when the Nvidia driver stack loads.&#160; I don&#039;t know if this would work with your card, but VGA doesn&#039;t seem to be an option.&#160; Also note that 3.12/1.7 is not sufficient, there are changes in both kernel and qemu that went in after those releases.</p></div></blockquote></div><p>Aha, well that explains it. The M2070-Q adds the Quadro features to the M2070 and they advertise it as able to do remote visualisation, so maybe the second technique could work with this card.</p><p>I won&#039;t clutter up this thread with any more about this as it&#039;s clearly a different setup and it looks like we might need newer hardware but if you have any references about the latter option to speed up my research you could share I&#039;d greatly appreciate it, thanks for the help so far.<br />(For disclosure this is a publicly funded research project and all our work will be written up and posted online for community use as we get things running.)</p></div></blockquote></div><p>There&#039;s certainly a chance that assigning the GPU as a secondary device with emulated VGA could work, try it and see.&#160; Do it just like you would if it&#039;s not a graphics device.&#160; If it behaves like Quadro/GRID the display will switch once the Nvidia driver stack loads, so be sure you can get to the desktop over the network via VNC or some other remote access solution first.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1359670">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1360976" class="blockpost roweven"> <h2><span><span class="conr">#897</span> <a href="viewtopic.php?pid=1360976#p1360976">2013-12-17 00:17:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=48315">TripleSpeeder</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-05-02</span></dd> <dd><span>Posts: 43</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=48315">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So what&#039;s the status of KVM and VGA passthrough - Are there still specific patches necessary or is this now working out-of-the-box? I just installed Win7 in a VM, passing through my HD7880 and it seemed to work fine. After initial windows install and reboot I installed latest Catalyst, rebooted and it just works <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I did not do any performance tests so far, just wondering if in the meantime all relevant changes are already in the standard packages or anything still needs to be done?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1360976">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1361071" class="blockpost rowodd"> <h2><span><span class="conr">#898</span> <a href="viewtopic.php?pid=1361071#p1361071">2013-12-17 05:22:06</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77762">firewing1</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-17</span></dd> <dd><span>Posts: 9</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77762">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>VGA passthrough is working well for me with a Radeon R9 270X (i.e. a rebranded 7870 GHz Edition), however after installing the latest Catalyst driver version 13.11 beta 9.5 on Windows 7 SP1 I am having trouble booting Windows.</p><p>I see &#039;Starting Windows...&#039; with the windows splash screen animation but then the screen goes black and after a bit the monitor loses signal. In Safe mode, the event log shows error 0x00000116 - MSDN says this: &quot;The VIDEO_TDR_ ERROR bug check has a value of 0x00000116. This indicates that an attempt to reset the display driver and recover from a timeout failed.&quot;</p><p>I have tried so moving the HDMI audio device (ID 0000:01:00.1) to pcie.0 instead of root.1 as well as eliminating passthrough of the HDMI audio device entirely, neither of which helped. I also tried manually specifying the ROM (rombar=0 romfile=...) from a ROM bin I dumped using GPU-Z. I dumped it from within the VM, which I read may not work but it didn&#039;t throw any errors and GPU-Z properly detected the card so I think it dumped the VBIOS correctly. Has anyone encountered something similar, or has any ideas on what I could do?</p><p>Full disclosure: I am on Fedora 20 using the virt-preview repository so I have kernel 3.12.5 and qemu-kvm 1.7.0. I&#039;m using the same config as the main howto - AHCI, virtualized audio. Here&#039;s the command I use:</p><div class="codebox"><pre><code>/usr/bin/qemu-system-x86_64 -machine accel=kvm -name win7 -S -M q35 -m 2048 \ -realtime mlock=off -rtc base=localtime \ -smp 4,sockets=1,cores=4,threads=1 \ -bios /usr/share/qemu/bios.bin -vga none \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/home/VMs/W7.img,if=none,id=disk,format=qcow2 -device ide-hd,bus=ahci.0,drive=disk \ -drive file=/dev/null,id=isocd -device ide-cd,bus=ahci.1,drive=isocd \ -boot menu=on</code></pre></div><p>VFIO passthrough was normally prior to installing the Catalyst drivers, so my guess is that pass-through is working correctly and the bug is in the machine config or the Windows driver.</p> <p class="postedit"><em>Last edited by firewing1 (2013-12-17 05:28:52)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1361071">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1361094" class="blockpost roweven"> <h2><span><span class="conr">#899</span> <a href="viewtopic.php?pid=1361094#p1361094">2013-12-17 06:18:34</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77626">Owen77</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-12</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77626">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>There&#039;s certainly a chance that assigning the GPU as a secondary device with emulated VGA could work, try it and see.&#160; Do it just like you would if it&#039;s not a graphics device.&#160; If it behaves like Quadro/GRID the display will switch once the Nvidia driver stack loads, so be sure you can get to the desktop over the network via VNC or some other remote access solution first.</p></div></blockquote></div><p>Hmmm, one last question about my slightly tangential issues in case anyone has any suggestions:</p><ul><li><p>The Tesla card is being passed through ok, I can login to a guest with the vga drivers and run CUDA or OpenCL programs.</p></li><li><p>If the NVIDIA drivers are installed (tried 319.76 and 331.20) with appropriate xorg.conf created, the VNC screen just freezes after it loads the X server, if I then ssh in to the VM there are no errors in Xorg.0.log but X apps can&#039;t find a display, no matter what I set $DISPLAY to.</p></li><li><p>If I start in runlevel 3 and login then run startx, the VNC screen then goes black but I can ssh in and the X server is now running! I can set $DISPLAY to :0.0 and run glxinfo and glxgears at ludicrous speeds from the terminal but have no way of seeing anything.</p></li></ul> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1361094">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1361187" class="blockpost rowodd"> <h2><span><span class="conr">#900</span> <a href="viewtopic.php?pid=1361187#p1361187">2013-12-17 14:05:14</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Owen77 wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>There&#039;s certainly a chance that assigning the GPU as a secondary device with emulated VGA could work, try it and see.&#160; Do it just like you would if it&#039;s not a graphics device.&#160; If it behaves like Quadro/GRID the display will switch once the Nvidia driver stack loads, so be sure you can get to the desktop over the network via VNC or some other remote access solution first.</p></div></blockquote></div><p>Hmmm, one last question about my slightly tangential issues in case anyone has any suggestions:</p><ul><li><p>The Tesla card is being passed through ok, I can login to a guest with the vga drivers and run CUDA or OpenCL programs.</p></li><li><p>If the NVIDIA drivers are installed (tried 319.76 and 331.20) with appropriate xorg.conf created, the VNC screen just freezes after it loads the X server, if I then ssh in to the VM there are no errors in Xorg.0.log but X apps can&#039;t find a display, no matter what I set $DISPLAY to.</p></li><li><p>If I start in runlevel 3 and login then run startx, the VNC screen then goes black but I can ssh in and the X server is now running! I can set $DISPLAY to :0.0 and run glxinfo and glxgears at ludicrous speeds from the terminal but have no way of seeing anything.</p></li></ul></div></blockquote></div><p>Congratulation, it works.&#160; When the Nvidia driver is used, the emulated VGA is only used for text mode and the GPU is used for graphical mode.&#160; They&#039;re mutually exclusive, so it&#039;s expected that the emulated VGA &quot;freezes&quot; when X starts.&#160; In your first case, apps can&#039;t find any display device, probably because the graphical desktop is sitting at a login prompt.&#160; In the second case, you&#039;ve started an X session, therefore there is a display to connect to.&#160; This is the way that GRID cards work and Quadro as well if you ignore that it has a physical display connector.&#160; You need to setup remote access to the desktop first.&#160; You can run a vnc server in the guest or use some other remote&#039;ing solution.&#160; If you were expecting X on the emulated VGA with rendering in the GPU, that doesn&#039;t happen.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1361187">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=35">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=34">34</a> <a href="viewtopic.php?id=162768&amp;p=35">35</a> <strong>36</strong> <a href="viewtopic.php?id=162768&amp;p=37">37</a> <a href="viewtopic.php?id=162768&amp;p=38">38</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=37">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
