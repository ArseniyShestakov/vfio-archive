<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 66) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=66" title="Page 66" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=65" title="Page 65" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=67" title="Page 67" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=65">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=64">64</a> <a href="viewtopic.php?id=162768&amp;p=65">65</a> <strong>66</strong> <a href="viewtopic.php?id=162768&amp;p=67">67</a> <a href="viewtopic.php?id=162768&amp;p=68">68</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=67">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1411168" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1626</span> <a href="viewtopic.php?pid=1411168#p1411168">2014-05-01 21:07:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78033">dismuter</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-27</span></dd> <dd><span>Posts: 4</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78033">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Nex7 wrote:</cite><blockquote><div><p>So I&#039;ve discovered what I believe to be my problem, but I&#039;m confused why nobody else seems to be hitting it.</p><p><a href="https://lists.gnu.org/archive/html/qemu-devel/2014-04/msg01858.html" rel="nofollow">https://lists.gnu.org/archive/html/qemu … 01858.html</a></p><p>That&#039;s what&#039;s hitting me - I&#039;m getting c0000221 stop&#039;s on boot on my VM, at this point, and seemingly this is due to virtio-scsi. I wonder why nobody else is hitting this?</p><p>EDIT: Of course, starting over with a fresh Win7 x64 install using ide instead of virtio, it works fine up until I try to install Windows updates, even only a few of them, at which point after reboot it dies with a different BSOD, code c000021a. -sigh-</p></div></blockquote></div><br /><p>Sorry for the OT here, but I&#039;ve also been hitting this issue. I&#039;m not able to install or boot Windows 8.1 with virtio-scsi and qemu 2.0.<br />Just to let others know that the issue is known:<br /><a href="https://lists.gnu.org/archive/html/qemu-devel/2014-04/msg02280.html" rel="nofollow">https://lists.gnu.org/archive/html/qemu … 02280.html</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411168">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411184" class="blockpost roweven"> <h2><span><span class="conr">#1627</span> <a href="viewtopic.php?pid=1411184#p1411184">2014-05-01 21:29:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>This particular bridge likely produces a WARN_ON when booting the kernel on a VT-d system because it lacks a PCIe capability (in violation of the PCIe spec).&#160; As a result, I doubt that the IOMMU tables are getting setup correct for devices behind the bridge.&#160; I&#039;ve actually been working on trying to fix this for the last couple weeks.&#160; In any case, assigning the bridge to the guest is always wrong, so I&#039;d start with that.&#160; I&#039;ll hopefully be posting patches to fix the situation with this bridge this week or next.</p></div></blockquote></div><p>This is amazing news! <br />Could you please specify where are you going to upload/write info about fix (twitter, github, ... - how to follow news)?</p></div></blockquote></div><p>I posted the patches today, here&#039;s a link to the header with a description:</p><p><a href="http://www.spinics.net/lists/linux-pci/msg30941.html" rel="nofollow">http://www.spinics.net/lists/linux-pci/msg30941.html</a></p><p>For your convenience, I&#039;ve also pushed a branch out to github that is 3.15-rc3 + these changes, you&#039;ll need to add whatever other patches (i915/acs) on top:</p><p>git://github.com/awilliam/linux-vfio.git</p><p>branch: dma-alias</p><p>Let me know how it goes.</p></div></blockquote></div><p>Alex, thank you!<br />I have specified:</p><div class="codebox"><pre><code>source=(&quot;git://github.com/awilliam/linux-vfio.git#branch=dma-alias&quot;</code></pre></div><p>in PKGBUILD, I am not sure that is right. Could you please specify how to check that sourced are exactly from dma-alias branch?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411184">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411191" class="blockpost rowodd"> <h2><span><span class="conr">#1628</span> <a href="viewtopic.php?pid=1411191#p1411191">2014-05-01 21:33:52</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>This is amazing news! <br />Could you please specify where are you going to upload/write info about fix (twitter, github, ... - how to follow news)?</p></div></blockquote></div><p>I posted the patches today, here&#039;s a link to the header with a description:</p><p><a href="http://www.spinics.net/lists/linux-pci/msg30941.html" rel="nofollow">http://www.spinics.net/lists/linux-pci/msg30941.html</a></p><p>For your convenience, I&#039;ve also pushed a branch out to github that is 3.15-rc3 + these changes, you&#039;ll need to add whatever other patches (i915/acs) on top:</p><p>git://github.com/awilliam/linux-vfio.git</p><p>branch: dma-alias</p><p>Let me know how it goes.</p></div></blockquote></div><p>Alex, thank you!<br />I have specified:</p><div class="codebox"><pre><code>source=(&quot;git://github.com/awilliam/linux-vfio.git#branch=dma-alias&quot;</code></pre></div><p>in PKGBUILD, I am not sure that is right. Could you please specify how to check that sourced are exactly from dma-alias branch?</p></div></blockquote></div><p>I don&#039;t use archlinux, so I have no idea what that does.&#160; If you have the build tree available to examine, the last patch removes the function named pci_get_dma_source from drivers/pci/quirks.c.&#160; If that matches what you find in the tree, you probably have the correct code.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411191">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411208" class="blockpost roweven"> <h2><span><span class="conr">#1629</span> <a href="viewtopic.php?pid=1411208#p1411208">2014-05-01 22:04:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Can&#039;t apply ACS patch:</p><div class="codebox"><pre><code>src/linux-vfio/drivers/pci/quirks.c.rej --- drivers/pci/quirks.c 2013-10-19 19:28:15.000000000 +0000 +++ drivers/pci/quirks.c 2013-10-23 18:02:18.000000000 +0000 @@ -3517,6 +3619,7 @@ { PCI_VENDOR_ID_ATI, 0x439d, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4384, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4399, pci_quirk_amd_sb_acs }, + { PCI_ANY_ID, PCI_ANY_ID, pcie_acs_overrides }, { 0 } };</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411208">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411216" class="blockpost rowodd"> <h2><span><span class="conr">#1630</span> <a href="viewtopic.php?pid=1411216#p1411216">2014-05-01 22:12:59</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Can&#039;t apply ACS patch:</p><div class="codebox"><pre><code>src/linux-vfio/drivers/pci/quirks.c.rej --- drivers/pci/quirks.c 2013-10-19 19:28:15.000000000 +0000 +++ drivers/pci/quirks.c 2013-10-23 18:02:18.000000000 +0000 @@ -3517,6 +3619,7 @@ { PCI_VENDOR_ID_ATI, 0x439d, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4384, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4399, pci_quirk_amd_sb_acs }, + { PCI_ANY_ID, PCI_ANY_ID, pcie_acs_overrides }, { 0 } };</code></pre></div></div></blockquote></div><p>Sooo... add it</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411216">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411219" class="blockpost roweven"> <h2><span><span class="conr">#1631</span> <a href="viewtopic.php?pid=1411219#p1411219">2014-05-01 22:14:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Yes, modified patch to:</p><div class="codebox"><pre><code> /1 /bin /boot /cdrom /dev /etc /home /initrd.img /initrd.img.old /lib /lib32 /lib64 /libx32 /lost+found /media /mnt /opt /proc /root /run /sbin /srv /sys /tmp /ubiquity-apt-clone /usr /var /vmlinuz /vmlinuz.old /win81-base.qcow2 /win81-base.qcow2.md5 /win81-writable-amd.qcow2 /win81-writable-nvidia.qcow2 /win81-writable-nvidia.qcow2.backup 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_6.html topic_7.html topic_8.html topic_9.html AMD has indicated that the devices below do not support peer-to-peer 1.sh topic_10.html topic_11.html topic_12.html topic_13.html topic_14.html topic_15.html topic_16.html topic_17.html topic_18.html topic_19.html topic_1.html topic_20.html topic_21.html topic_22.html topic_23.html topic_24.html topic_25.html topic_26.html topic_27.html topic_28.html topic_29.html topic_2.html topic_30.html topic_31.html topic_32.html topic_33.html topic_34.html topic_35.html topic_36.html topic_37.html topic_38.html topic_39.html topic_3.html topic_40.html topic_41.html topic_42.html topic_43.html topic_44.html topic_45.html topic_46.html topic_47.html topic_48.html topic_49.html topic_4.html topic_50.html topic_51.html topic_52.html topic_53.html topic_54.html topic_55.html topic_56.html topic_57.html topic_58.html topic_59.html topic_5.html topic_60.html topic_61.html topic_62.html topic_63.html topic_64.html topic_65.html topic_6.html topic_7.html topic_8.html topic_9.html in any system where they are found in the southbridge with an AMD @@ -3404,6 +3505,7 @@ static int pci_quirk_amd_sb_acs(struct p #endif } + static const struct pci_dev_acs_enabled { u16 vendor; u16 device; @@ -3415,6 +3517,7 @@ static const struct pci_dev_acs_enabled { PCI_VENDOR_ID_ATI, 0x439d, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4384, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_ATI, 0x4399, pci_quirk_amd_sb_acs }, { PCI_VENDOR_ID_INTEL, PCI_ANY_ID, pci_quirk_intel_pch_acs }, + { PCI_ANY_ID, PCI_ANY_ID, pcie_acs_overrides }, { 0 } };</code></pre></div><p>added line</p><div class="codebox"><pre><code> { PCI_VENDOR_ID_INTEL, PCI_ANY_ID, pci_quirk_intel_pch_acs },</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411219">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411255" class="blockpost rowodd"> <h2><span><span class="conr">#1632</span> <a href="viewtopic.php?pid=1411255#p1411255">2014-05-01 23:54:00</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Strange, but no any changes: still Dmar error.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411255">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411267" class="blockpost roweven"> <h2><span><span class="conr">#1633</span> <a href="viewtopic.php?pid=1411267#p1411267">2014-05-02 00:40:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Strange, but no any changes: still Dmar error.</p></div></blockquote></div><p>Is it the same DMAR error, on device 04:00.0?&#160; I&#039;ve got a new processor coming tomorrow that will let me do VT-d with that bridge, until then I don&#039;t really know whether to handle it as a PCIe-to-PCI bridge or a PCI-to-PCI bridge.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411267">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411322" class="blockpost rowodd"> <h2><span><span class="conr">#1634</span> <a href="viewtopic.php?pid=1411322#p1411322">2014-05-02 07:52:48</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Strange, but no any changes: still Dmar error.</p></div></blockquote></div><p>Is it the same DMAR error, on device 04:00.0?&#160; I&#039;ve got a new processor coming tomorrow that will let me do VT-d with that bridge, until then I don&#039;t really know whether to handle it as a PCIe-to-PCI bridge or a PCI-to-PCI bridge.</p></div></blockquote></div><p>Yes, it is the same error:</p><div class="codebox"><pre><code>DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear dmar: DRHD: handling fault status reg 2 dmar: DRHD: handling fault status reg 3</code></pre></div> <p class="postedit"><em>Last edited by myweb (2014-05-02 07:54:04)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411322">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411418" class="blockpost roweven"> <h2><span><span class="conr">#1635</span> <a href="viewtopic.php?pid=1411418#p1411418">2014-05-02 14:48:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><p>Strange, but no any changes: still Dmar error.</p></div></blockquote></div><p>Is it the same DMAR error, on device 04:00.0?&#160; I&#039;ve got a new processor coming tomorrow that will let me do VT-d with that bridge, until then I don&#039;t really know whether to handle it as a PCIe-to-PCI bridge or a PCI-to-PCI bridge.</p></div></blockquote></div><p>Yes, it is the same error:</p><div class="codebox"><pre><code>DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear dmar: DRHD: handling fault status reg 2 dmar: DRHD: handling fault status reg 3</code></pre></div></div></blockquote></div><p>Does this help?</p><p><a href="https://github.com/awilliam/linux-vfio/commit/548a54070f3639295093bda0df9315b2dc4db04c" rel="nofollow">https://github.com/awilliam/linux-vfio/ … b2dc4db04c</a></p><p>I&#039;ve pushed it to the dma-alias-test branch for you to try.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411418">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411427" class="blockpost rowodd"> <h2><span><span class="conr">#1636</span> <a href="viewtopic.php?pid=1411427#p1411427">2014-05-02 15:16:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Is it the same DMAR error, on device 04:00.0?&#160; I&#039;ve got a new processor coming tomorrow that will let me do VT-d with that bridge, until then I don&#039;t really know whether to handle it as a PCIe-to-PCI bridge or a PCI-to-PCI bridge.</p></div></blockquote></div><p>Yes, it is the same error:</p><div class="codebox"><pre><code>DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear dmar: DRHD: handling fault status reg 2 dmar: DRHD: handling fault status reg 3</code></pre></div></div></blockquote></div><p>Does this help?</p><p><a href="https://github.com/awilliam/linux-vfio/commit/548a54070f3639295093bda0df9315b2dc4db04c" rel="nofollow">https://github.com/awilliam/linux-vfio/ … b2dc4db04c</a></p><p>I&#039;ve pushed it to the dma-alias-test branch for you to try.</p></div></blockquote></div><p>Thank you!<br />I will recompile kernel and try.<br />I will let you know results in hour or two.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411427">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411445" class="blockpost roweven"> <h2><span><span class="conr">#1637</span> <a href="viewtopic.php?pid=1411445#p1411445">2014-05-02 16:03:09</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=31536">ProFfeSsoRr</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2009-11-30</span></dd> <dd><span>Posts: 5</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=31536">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Anybody used vfio with libvirt and virt-manager? I create VM in virt-manager, it starts but in commandline of qemu proccess a can&#039;t find &quot;magick&quot; option &quot;-M q35&quot;, virt-manager or libvirt not support this or I do something wrong? I need to passthrough my second GPU GTX750Ti to Win8.1 VM, and i&#039;ve got 43 error now.<br />P.S. I need virt-manager or something GUI tool because this is for my parents <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p> <p class="postedit"><em>Last edited by ProFfeSsoRr (2014-05-02 16:16:08)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411445">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411476" class="blockpost rowodd"> <h2><span><span class="conr">#1638</span> <a href="viewtopic.php?pid=1411476#p1411476">2014-05-02 17:02:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Does this help?</p><p><a href="https://github.com/awilliam/linux-vfio/commit/548a54070f3639295093bda0df9315b2dc4db04c" rel="nofollow">https://github.com/awilliam/linux-vfio/ … b2dc4db04c</a></p><p>I&#039;ve pushed it to the dma-alias-test branch for you to try.</p></div></blockquote></div><div class="codebox"><pre><code>May 02 23:00:46 dhcppc5 kernel: dmar: DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear May 02 23:00:46 dhcppc5 kernel: dmar: DRHD: handling fault status reg 3</code></pre></div><p>No, it does not help.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411476">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411538" class="blockpost roweven"> <h2><span><span class="conr">#1639</span> <a href="viewtopic.php?pid=1411538#p1411538">2014-05-02 20:27:42</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81707">brainkiller</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-02</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81707">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>All,</p><p>Let me first take the time to thank you all for the detailed information and patches.</p><p>My setup looks like this:<br />Asus Z87-A<br />Intel I7 4770<br />Asus GTX 760</p><p>OS:<br />Vanilla Kernel 3.14.1 + mainline patches (from main post)<br />QEMU emulator version 2.0.0 (Debian 2.0.0+dfsg-4)</p><p>Guest:<br />windows 8.1 + latest patches<br />Nvidia driver 9.18.13.2619</p><p>All KVM modules are build into the kernel. No modules are used for KVM.<br />Boot options: <br />$ cat /proc/cmdline <br />BOOT_IMAGE=/vmlinuz-3.14.1-kvm root=/dev/mapper/vg00-debian--root ro pci-stub.ids=10de:1187,10de:0e0a intel_iommu=on pcie_acs_override=downstream vfio_iommu_type1.allow_unsafe_interrupts=1 kvm.ignore_msrs=1</p><p>Qemu (Still WIP as I&#039;m quite new to KVM, I used to be a XEN user):<br />qemu-system-x86_64 \<br />&#160; &#160; &#160; &#160; -name Windows-8 \<br />&#160; &#160; &#160; &#160; -cpu host \<br />&#160; &#160; &#160; &#160; -smp 4,sockets=1,cores=2,threads=2 \<br />&#160; &#160; &#160; &#160; -enable-kvm \<br />&#160; &#160; &#160; &#160; -m 4G \<br />&#160; &#160; &#160; &#160; -boot menu=on \<br />&#160; &#160; &#160; &#160; -balloon none \<br />&#160; &#160; &#160; &#160; -serial null \<br />&#160; &#160; &#160; &#160; -parallel null \<br />&#160; &#160; &#160; &#160; -soundhw hda \<br />&#160; &#160; &#160; &#160; -k fr-be \<br />&#160; &#160; &#160; &#160; -machine type=q35,accel=kvm \<br />&#160; &#160; &#160; &#160; -boot order=cd \<br />&#160; &#160; &#160; &#160; -device ahci,id=ahci \<br />&#160; &#160; &#160; &#160; -device virtio-scsi-pci,id=scsi \<br />&#160; &#160; &#160; &#160; -drive id=win8,format=raw,file=/dev/vg00/win8 -device ide-hd,bus=ide.0,drive=win8 \<br />&#160; &#160; &#160; &#160; -drive id=win7,format=raw,file=/dev/vg00/win7-x64 -device ide-hd,bus=ide.1,drive=win7 \<br />&#160; &#160; &#160; &#160; -drive file=/home/brainkiller/Downloads/virtio-win-0.1-74.iso,id=virtiocd -device ide-cd,bus=ide.2,drive=virtiocd \<br />&#160; &#160; &#160; &#160; -net nic,macaddr=00:16:3E:51:20:4C,model=virtio -net tap \<br />&#160; &#160; &#160; &#160; -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \<br />&#160; &#160; &#160; &#160; -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \<br />&#160; &#160; &#160; &#160; -device vfio-pci,host=01:00.1,bus=root.1,addr=00.1 \<br />&#160; &#160; &#160; &#160; -vga none \<br />&#160; &#160; &#160; &#160; -monitor none \<br />&#160; &#160; &#160; &#160; -display none \</p><br /><p>Initially I was blocked but this turned out to solved by upgrading qemu to 2.0.0<br />Thanks again for all advice, I just wanted to share another success story and to indicate another working setup</p><p>Regards,<br />Brainkiller</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411538">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411570" class="blockpost rowodd"> <h2><span><span class="conr">#1640</span> <a href="viewtopic.php?pid=1411570#p1411570">2014-05-02 22:00:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Does this help?</p><p><a href="https://github.com/awilliam/linux-vfio/commit/548a54070f3639295093bda0df9315b2dc4db04c" rel="nofollow">https://github.com/awilliam/linux-vfio/ … b2dc4db04c</a></p><p>I&#039;ve pushed it to the dma-alias-test branch for you to try.</p></div></blockquote></div><div class="codebox"><pre><code>May 02 23:00:46 dhcppc5 kernel: dmar: DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear May 02 23:00:46 dhcppc5 kernel: dmar: DRHD: handling fault status reg 3</code></pre></div><p>No, it does not help.</p></div></blockquote></div><p>Hmm, I got my VT-d CPU installed in the system with same bridge and can confirm that the patch in the dma-alias-test branch is definitely needed for the ASM1083 bridge.&#160; Without it, a conventional PCI NIC installed in the system streams IOMMU faults.&#160; So, I&#039;m not sure what&#039;s happening.&#160; The fault address you&#039;re getting does look suspicious, being exactly the last page before the 32bit, 4G barrier.&#160; Is that the only fault address you get?&#160; There are devices out there that are incompatible with IOMMUs, either the driver doesn&#039;t use the DMA API correctly or the hardware makes stray accesses.&#160; Sometimes the only solution for those devices is to run the system with iommu=pt to put them into passthrough mode.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411570">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411590" class="blockpost roweven"> <h2><span><span class="conr">#1641</span> <a href="viewtopic.php?pid=1411590#p1411590">2014-05-02 23:34:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>Does this help?</p><p><a href="https://github.com/awilliam/linux-vfio/commit/548a54070f3639295093bda0df9315b2dc4db04c" rel="nofollow">https://github.com/awilliam/linux-vfio/ … b2dc4db04c</a></p><p>I&#039;ve pushed it to the dma-alias-test branch for you to try.</p></div></blockquote></div><div class="codebox"><pre><code>May 02 23:00:46 dhcppc5 kernel: dmar: DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear May 02 23:00:46 dhcppc5 kernel: dmar: DRHD: handling fault status reg 3</code></pre></div><p>No, it does not help.</p></div></blockquote></div><p>Hmm, I got my VT-d CPU installed in the system with same bridge and can confirm that the patch in the dma-alias-test branch is definitely needed for the ASM1083 bridge.&#160; Without it, a conventional PCI NIC installed in the system streams IOMMU faults.&#160; So, I&#039;m not sure what&#039;s happening.&#160; The fault address you&#039;re getting does look suspicious, being exactly the last page before the 32bit, 4G barrier.&#160; Is that the only fault address you get?&#160; There are devices out there that are incompatible with IOMMUs, either the driver doesn&#039;t use the DMA API correctly or the hardware makes stray accesses.&#160; Sometimes the only solution for those devices is to run the system with iommu=pt to put them into passthrough mode.</p></div></blockquote></div><p>I am terribly sorry, I used old branch dma-alias instead of dma-alias-test.<br />I compiled a dma-alias-test and my DVB card works in host system (I can&#039;t check in VM since I have trouble to boot it)</p><p>But I experience some issue with USB controller (00:1a.0)</p><div class="codebox"><pre><code>dmar: DRHD: handling fault status reg 3 DMAR:[DMA Read] Request device [00:1a.0] fault addr ee000 DMAR:[fault reason 06] PTE Read access is not set dmar: DRHD: handling fault status reg 3 dmar: DMAR:[DMA Read] Request device [00:1a.0] fault addr ee000 DMAR:[fault reason 06] PTE Read access is not set</code></pre></div> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411590">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411613" class="blockpost rowodd"> <h2><span><span class="conr">#1642</span> <a href="viewtopic.php?pid=1411613#p1411613">2014-05-03 01:52:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=50506">Sphaerophoria</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-07-14</span></dd> <dd><span>Posts: 41</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ProFfeSsoRr wrote:</cite><blockquote><div><p>Anybody used vfio with libvirt and virt-manager? I create VM in virt-manager, it starts but in commandline of qemu proccess a can&#039;t find &quot;magick&quot; option &quot;-M q35&quot;, virt-manager or libvirt not support this or I do something wrong? I need to passthrough my second GPU GTX750Ti to Win8.1 VM, and i&#039;ve got 43 error now.<br />P.S. I need virt-manager or something GUI tool because this is for my parents <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></div></blockquote></div><br /><p>I just got it working the other day, it&#039;s actually quite simple.</p><p>Set up libvirt as you normally would and remove the display server/display driver.</p><p>Then do a virsh edit, alter the first line to look like this</p><div class="codebox"><pre><code>&lt;domain type=&#039;kvm&#039; xmlns:qemu=&#039;http://libvirt.org/schemas/domain/qemu/1.0&#039;&gt;</code></pre></div><p>and then add a pci device like you would with regular qemu</p><div class="codebox"><pre><code> &lt;qemu:commandline&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;ioh3420,bus=pci.0,addr=1c.0,multifunction=on,port=1,chassis =1,id=root.1&#039;/&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on ,x-vga=on&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.1,bus=root.1,addr=00.1&#039;/&gt; &lt;/qemu:commandline&gt; &lt;/domain&gt;</code></pre></div> <p class="postedit"><em>Last edited by Sphaerophoria (2014-05-03 01:53:07)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411613">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411637" class="blockpost roweven"> <h2><span><span class="conr">#1643</span> <a href="viewtopic.php?pid=1411637#p1411637">2014-05-03 05:41:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="quotebox"><cite>aw wrote:</cite><blockquote><div><div class="quotebox"><cite>myweb wrote:</cite><blockquote><div><div class="codebox"><pre><code>May 02 23:00:46 dhcppc5 kernel: dmar: DMAR:[DMA Write] Request device [04:00.0] fault addr fffff000 DMAR:[fault reason 02] Present bit in context entry is clear May 02 23:00:46 dhcppc5 kernel: dmar: DRHD: handling fault status reg 3</code></pre></div><p>No, it does not help.</p></div></blockquote></div><p>Hmm, I got my VT-d CPU installed in the system with same bridge and can confirm that the patch in the dma-alias-test branch is definitely needed for the ASM1083 bridge.&#160; Without it, a conventional PCI NIC installed in the system streams IOMMU faults.&#160; So, I&#039;m not sure what&#039;s happening.&#160; The fault address you&#039;re getting does look suspicious, being exactly the last page before the 32bit, 4G barrier.&#160; Is that the only fault address you get?&#160; There are devices out there that are incompatible with IOMMUs, either the driver doesn&#039;t use the DMA API correctly or the hardware makes stray accesses.&#160; Sometimes the only solution for those devices is to run the system with iommu=pt to put them into passthrough mode.</p></div></blockquote></div><p>I am terribly sorry, I used old branch dma-alias instead of dma-alias-test.<br />I compiled a dma-alias-test and my DVB card works in host system (I can&#039;t check in VM since I have trouble to boot it)</p><p>But I experience some issue with USB controller (00:1a.0)</p><div class="codebox"><pre><code>dmar: DRHD: handling fault status reg 3 DMAR:[DMA Read] Request device [00:1a.0] fault addr ee000 DMAR:[fault reason 06] PTE Read access is not set dmar: DRHD: handling fault status reg 3 dmar: DMAR:[DMA Read] Request device [00:1a.0] fault addr ee000 DMAR:[fault reason 06] PTE Read access is not set</code></pre></div></div></blockquote></div><p>These patches should not have changed anything with respect to this device.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411637">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411687" class="blockpost rowodd"> <h2><span><span class="conr">#1644</span> <a href="viewtopic.php?pid=1411687#p1411687">2014-05-03 09:45:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=73162">myweb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-13</span></dd> <dd><span>Posts: 68</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=73162">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Could you please help to fix:</p><div class="codebox"><pre><code> sudo virsh -c qemu:///system start X error: Failed to start domain X error: internal error: early end of file from monitor: possible problem: qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio_dma_map(0x7fe2de4e6f70, 0x0, 0x80000000, 0x7fe1c4000000) = -12 (Cannot allocate memory) qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio_dma_map(0x7fe2de4e6f70, 0x100000000, 0x80000000, 0x7fe244000000) = -12 (Cannot allocate memory) qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: memory listener initialization failed for container qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to setup container for group 13 qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: vfio: failed to get group 13 qemu-system-x86_64: -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on: Device initialization failed.</code></pre></div><p>Dmesg</p><div class="codebox"><pre><code>[ 3684.367018] vfio_pin_pages: RLIMIT_MEMLOCK (65536) exceeded [ 3684.367036] vfio_pin_pages: RLIMIT_MEMLOCK (65536) exceeded [ 3684.367362] vfio_pin_pages: RLIMIT_MEMLOCK (65536) exceeded [ 3684.367377] vfio_pin_pages: RLIMIT_MEMLOCK (65536) exceeded</code></pre></div><p>VM XML:</p><div class="codebox"><pre class="vscroll"><code>&lt;domain type=&#039;kvm&#039; xmlns:qemu=&#039;http://libvirt.org/schemas/domain/qemu/1.0&#039;&gt; &lt;name&gt;X&lt;/name&gt; &lt;uuid&gt;9efa8a71-b193-c50b-c770-9ce6dad02390&lt;/uuid&gt; &lt;memory unit=&#039;KiB&#039;&gt;4194304&lt;/memory&gt; &lt;currentMemory unit=&#039;KiB&#039;&gt;4194304&lt;/currentMemory&gt; &lt;vcpu placement=&#039;static&#039;&gt;2&lt;/vcpu&gt; &lt;os&gt; &lt;type arch=&#039;x86_64&#039; machine=&#039;pc-q35-2.0&#039;&gt;hvm&lt;/type&gt; &lt;boot dev=&#039;hd&#039;/&gt; &lt;/os&gt; &lt;features&gt; &lt;acpi/&gt; &lt;apic/&gt; &lt;pae/&gt; &lt;/features&gt; &lt;clock offset=&#039;utc&#039;/&gt; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt; &lt;on_reboot&gt;restart&lt;/on_reboot&gt; &lt;on_crash&gt;restart&lt;/on_crash&gt; &lt;devices&gt; &lt;emulator&gt;/usr/sbin/qemu-system-x86_64&lt;/emulator&gt; &lt;disk type=&#039;block&#039; device=&#039;disk&#039;&gt; &lt;driver name=&#039;qemu&#039; type=&#039;raw&#039;/&gt; &lt;source dev=&#039;/dev/md1&#039;/&gt; &lt;target dev=&#039;sda&#039; bus=&#039;sata&#039;/&gt; &lt;address type=&#039;drive&#039; controller=&#039;0&#039; bus=&#039;0&#039; target=&#039;0&#039; unit=&#039;0&#039;/&gt; &lt;/disk&gt; &lt;controller type=&#039;sata&#039; index=&#039;0&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1f&#039; function=&#039;0x2&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;pci&#039; index=&#039;0&#039; model=&#039;pcie-root&#039;/&gt; &lt;controller type=&#039;pci&#039; index=&#039;1&#039; model=&#039;dmi-to-pci-bridge&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x00&#039; slot=&#039;0x1e&#039; function=&#039;0x0&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;pci&#039; index=&#039;2&#039; model=&#039;pci-bridge&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x01&#039; slot=&#039;0x01&#039; function=&#039;0x0&#039;/&gt; &lt;/controller&gt; &lt;controller type=&#039;ide&#039; index=&#039;0&#039;/&gt; &lt;interface type=&#039;bridge&#039;&gt; &lt;mac address=&#039;52:54:00:4b:be:6d&#039;/&gt; &lt;source bridge=&#039;br0&#039;/&gt; &lt;model type=&#039;virtio&#039;/&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x03&#039; function=&#039;0x0&#039;/&gt; &lt;/interface&gt; &lt;memballoon model=&#039;virtio&#039;&gt; &lt;address type=&#039;pci&#039; domain=&#039;0x0000&#039; bus=&#039;0x02&#039; slot=&#039;0x05&#039; function=&#039;0x0&#039;/&gt; &lt;/memballoon&gt; &lt;/devices&gt; &lt;qemu:commandline&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1&#039;/&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on&#039;/&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=01:00.1,bus=root.1,addr=00.1&#039;/&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=00:1a.0,bus=root.1&#039;/&gt; &lt;qemu:arg value=&#039;-device&#039;/&gt; &lt;qemu:arg value=&#039;vfio-pci,host=00:1b.0,bus=root.1&#039;/&gt; &lt;/qemu:commandline&gt; &lt;/domain&gt;</code></pre></div><p>It would be nice to use &lt;hostdev type=&#039;pci&#039; managed=&#039;yes&#039;&gt;&#160; &#160; &#160; &lt;driver name=&#039;vfio&#039;/&gt; since I use libvirt git, but it is unclear how to set &quot;x-vga=on&quot;.</p> <p class="postedit"><em>Last edited by myweb (2014-05-03 09:50:34)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411687">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1411690" class="blockpost roweven"> <h2><span><span class="conr">#1645</span> <a href="viewtopic.php?pid=1411690#p1411690">2014-05-03 10:00:07</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74146">easd</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-08-15</span></dd> <dd><span>Posts: 1</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:alberto.vaccariello@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m totally new about KVM, I read in the first post in the requirements: &quot;At least 2 GPU&#039;s, one primary boot device and the card you wish to pass-through.&quot;<br />If I have an intel cpu (i7 3770) with an iGPU and a nvidia card (GTX 780) , I have to physically connect the monitor to the iGPU?<br />In that way I can&#039;t use the nvidia card in linux (for example for native gaming), am I missing something?</p> <p class="postedit"><em>Last edited by easd (2014-05-03 10:00:31)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1411690">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1412143" class="blockpost rowodd"> <h2><span><span class="conr">#1646</span> <a href="viewtopic.php?pid=1412143#p1412143">2014-05-04 13:31:36</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81541">belliash</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-04-25</span></dd> <dd><span>Posts: 16</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:belliash@asiotec.eu.org">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have managed to pass through my GeForce GTX 770M into KVM.<br />The GPU showed Error 10 for the very beginning and after I have installed latest ForceWare drivers, it showed error 43.<br />However if i disable and re-enable the card in Device Manager it showed that the device is working correctly.<br />Unfortunately as a second device and I was unable to boot Windows with nvidia card set as primary due to error 43, which i come across every time i reboot the VM.<br />All the time i need to disable and re-enable the dGPU in order to make Windows marking it as working.</p><br /><p>I am not sure if this is connected with nVidia Optimus, or just GTX 770M. I have found that some of you managed to get GF 7xx working, while others not.<br />Also there is no such problem with ATI cards. Due to that i think that more people having notebooks should give it a try, especially with older GeForce cards and with mobile ATI cards.</p><p>As the prove I want to show you a screenshot:</p><p><a href="http://wstaw.org/m/2014/05/04/snapshot2_1.png" rel="nofollow"><span class="postimg"><img src="http://wstaw.org/m/2014/05/04/snapshot2_1_png_750x750_q85.jpg" alt="snapshot2_1_png_750x750_q85.jpg" /></span></a></p> <p class="postedit"><em>Last edited by belliash (2014-05-04 13:47:55)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1412143">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1412149" class="blockpost roweven"> <h2><span><span class="conr">#1647</span> <a href="viewtopic.php?pid=1412149#p1412149">2014-05-04 13:42:49</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=53953">andy123</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2011-11-04</span></dd> <dd><span>Posts: 169</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=53953">Email</a></span> <span class="website"><a href="http://ajs124.de" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>belliash wrote:</cite><blockquote><div><p>I have managed to pass through my GeForce GTX 770M into KVM.<br />The GPU showed Error 10 for the very beginning and after I have installed latest ForceWare drivers, it showed error 43.<br />However if i disable and re-enable the card in Device Manager it showed that the device is working correctly.<br />Unfortunately as a second device and I was unable to boot Windows with nvidia card set as primary due to error 43, which i come across every time i reboot the VM.<br />All the time i need to disable and re-enable the dGPU in order to make Windows marking it as working.</p><br /><p>I am not sure if this is connected with nVidia Optimus, or just GTX 770M. I have found that some of you managed to get GF 7xx working, while others not.<br />Also there is no such problem with ATI cards. Due to that i think that more people having notebooks should give it a try, especially with older GeForce cards and with mobile ATI cards.</p><p>As the prove I want to show you a screenshot:</p></div></blockquote></div><p>Thumbnail and stuff… <a href="https://wiki.archlinux.org/index.php/Forum_Etiquette#Pasting_Pictures_and_Code" rel="nofollow">https://wiki.archlinux.org/index.php/Fo … s_and_Code</a></p> </div> <div class="postsignature postmsg"><hr /><p>i&#039;m sorry for my poor english wirting skills…</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1412149">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1412358" class="blockpost rowodd"> <h2><span><span class="conr">#1648</span> <a href="viewtopic.php?pid=1412358#p1412358">2014-05-05 00:59:05</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81778">svirpridon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81778">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I&#039;m trying to get this working on a Ubuntu 14.04 system, host on onboard 4770 intel graphics, guest on a 7870. I grabbed kernel 3.14.1 mainline from the kernel PPA but I&#039;m still getting the host &quot;taste the rainbow&quot; color change when I try to boot the test guest. I take it the intel vga fix isn&#039;t yet upstreamed? Or is it in 3.15rcX and I should try one of the RC kernels?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1412358">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1412360" class="blockpost roweven"> <h2><span><span class="conr">#1649</span> <a href="viewtopic.php?pid=1412360#p1412360">2014-05-05 01:18:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>svirpridon wrote:</cite><blockquote><div><p>I&#039;m trying to get this working on a Ubuntu 14.04 system, host on onboard 4770 intel graphics, guest on a 7870. I grabbed kernel 3.14.1 mainline from the kernel PPA but I&#039;m still getting the host &quot;taste the rainbow&quot; color change when I try to boot the test guest. I take it the intel vga fix isn&#039;t yet upstreamed? Or is it in 3.15rcX and I should try one of the RC kernels?</p></div></blockquote></div><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1400212#p1400212" rel="nofollow">https://bbs.archlinux.org/viewtopic.php … 2#p1400212</a></p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1412360">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1412368" class="blockpost rowodd"> <h2><span><span class="conr">#1650</span> <a href="viewtopic.php?pid=1412368#p1412368">2014-05-05 02:41:20</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=81778">svirpridon</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-05-05</span></dd> <dd><span>Posts: 2</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=81778">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>That was it, thanks aw. Can you link that off your first post? (or is it and I just missed it? I read the first post a couple times)</p><p>Maybe I&#039;ll go back to the secondary vga as you referenced there. That&#039;s how I&#039;m operating now, my only problem with 14.04 (and 13.10) was that my current config (non-vfio style) didn&#039;t work anymore.</p> <p class="postedit"><em>Last edited by svirpridon (2014-05-05 02:41:41)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1412368">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=65">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=64">64</a> <a href="viewtopic.php?id=162768&amp;p=65">65</a> <strong>66</strong> <a href="viewtopic.php?id=162768&amp;p=67">67</a> <a href="viewtopic.php?id=162768&amp;p=68">68</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=67">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
