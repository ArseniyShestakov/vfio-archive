<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9 (Page 58) / Topics Going Nowhere / Arch Linux Forums</title> <link rel="stylesheet" type="text/css" href="style/ArchLinux.css" /> <link rel="canonical" href="viewtopic.php?id=162768&amp;p=58" title="Page 58" /> <link rel="prev" href="viewtopic.php?id=162768&amp;p=57" title="Page 57" /> <link rel="next" href="viewtopic.php?id=162768&amp;p=59" title="Page 59" /> <link rel="alternate" type="application/atom+xml" href="extern.php?action=feed&amp;tid=162768&amp;type=atom" title="Atom topic feed" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/arch.css?v=3" /> <link rel="stylesheet" media="screen" href="style/ArchLinux/archnavbar.css?v=2" /> <link rel="shortcut icon" href="style/ArchLinux/favicon.ico" /> </head> <body> <div id="archnavbar" class="anb-forum"> <div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div> <div id="archnavbarmenu"> <ul id="archnavbarlist"> <li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li> </ul> </div> </div> <div id="punviewtopic" class="pun"> <div class="top-box"></div> <div class="punwrap"> <div id="brdheader" class="block"> <div class="box"> <div id="brdmenu" class="inbox"> <ul> <li id="navindex" class="isactive"><a href="index.php">Index</a></li> <li id="navuserlist"><a href="userlist.php">User list</a></li> <li id="navsearch"><a href="search.php">Search</a></li> <li id="navprofile"><a href="profile.php?id=80749">Profile</a></li> <li id="navlogout"><a href="login.php?action=out&amp;id=80749&amp;csrf_token=5c20501ec397bb45ef8ee8c84db232c8d8e421c6">Logout</a></li> </ul> </div> <div id="brdwelcome" class="inbox"> <ul class="conl"> <li><span>Logged in as <strong>SXX</strong></span></li> <li><span>Last visit: 2015-08-16 12:20:09</span></li> </ul> <ul class="conr"> <li><span>Topics: <a href="search.php?action=show_replies" title="Find topics you have posted to.">Posted</a> | <a href="search.php?action=show_new" title="Find topics with new posts since your last visit.">New</a> | <a href="search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li> </ul> <div class="clearer"></div> </div> </div> </div> <div id="brdmain"> <div class="linkst"> <div class="inbox crumbsplus"> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=57">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=56">56</a> <a href="viewtopic.php?id=162768&amp;p=57">57</a> <strong>58</strong> <a href="viewtopic.php?id=162768&amp;p=59">59</a> <a href="viewtopic.php?id=162768&amp;p=60">60</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=59">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <div class="clearer"></div> </div> </div> <div id="p1395535" class="blockpost rowodd blockpost1"> <h2><span><span class="conr">#1426</span> <a href="viewtopic.php?pid=1395535#p1395535">2014-03-22 09:33:33</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>For these days test, I got a strange problem.</p><p>First, I have HD5450 and double GTX480 on my MB, and set both GTX480 into pci-stub, lspci -k shows that both of GTX480 has bind into pci-stub.</p><p>Second, I run 2 VMs with these GTX480 passthrough by VFIO. And lspci -k shows all of them bind into VFIO-PCI.</p><p>1st VM can work normal, it can entered Windows 7. But 2nd VM has no screen when I plug DVI cable. And terminal didn&#039;t show any error.</p><p>I tried shut down the 1st VM, And only run 2nd VM, no use. Even I tried 1st VM&#039;s storage file, still give me no screen.</p><br /><p>I know X79 only serves 2 PCI-E x16 and 1 PCI-E x8, so 2nd GTX480 is PCI-E x8,</p><p>I&#039;m using Rampage IV Gene. It can only plug 2 video card at the same time, but I use PCI-E cable so I can plug 3 video cards at the same time.</p><p>Now I&#039;m thinking that maybe this MB can&#039;t do this at real. But when I switch back to Windows 7, it can catch all of 3 cards.</p><p>Is anyone have an idea?</p> <p class="postedit"><em>Last edited by AKSN74 (2014-03-22 11:51:45)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1395535">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1395587" class="blockpost roweven"> <h2><span><span class="conr">#1427</span> <a href="viewtopic.php?pid=1395587#p1395587">2014-03-22 12:26:55</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=61335">Jesse2004</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-06-25</span></dd> <dd><span>Posts: 9</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><p>I cant for the life of me sort out my audio for my VM.</p><p>I use this:</p><div class="codebox"><pre><code>-device ich9-intel-hda,bus=pcie.0,addr=1b.0,id=sound0 \ -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 </code></pre></div><p>I have also tried with -soundhw all and -soundhw ac97.</p><p>This is what I get when I fire up the computer:</p><div class="codebox"><pre><code>pulseaudio: pa_context_connect() failed pulseaudio: Reason: Connection refused pulseaudio: Failed to initialize PA contextaudio: Could not init `pa&#039; audio driver ALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave alsa: Could not initialize DAC alsa: Failed to open `default&#039;: alsa: Reason: No such file or directory ALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave alsa: Could not initialize DAC alsa: Failed to open `default&#039;: alsa: Reason: No such file or directory audio: Failed to create voice `dac&#039; ALSA lib pcm_dsnoop.c:618:(snd_pcm_dsnoop_open) unable to open slave alsa: Could not initialize ADC alsa: Failed to open `default&#039;: alsa: Reason: No such file or directory ALSA lib pcm_dsnoop.c:618:(snd_pcm_dsnoop_open) unable to open slave alsa: Could not initialize ADC alsa: Failed to open `default&#039;: alsa: Reason: No such file or directory audio: Failed to create voice `adc&#039;</code></pre></div><p>In the first post its stated that I may have to use the QEMU_AUDIO_DRV variable. I have tried this (export QEMU_AUDIO_DRV=alsa and QEMU_AUDIO_DRV=pa as root) without success. Anyone in the same boat as me, and/or found a solution?(except passing a USB headset? <img src="https://bbs.archlinux.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)</p><p>Update: I managed to get audio somewhat working:</p><p>I use sudo -E export QEMU_ALSA_DAC_BUFFER_SIZE=512 QEMU_ALSA_DAC_PERIOD_SIZE=170 QEMU_AUDIO_DRV=alsa <br />and<br />sudo -E qemu-system-x86_64 ....<br />The -E option tries to preserve the environment even though you are running with sudo.</p><p>However the audio is crackling and sounding really disorted... <img src="https://bbs.archlinux.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p></div></blockquote></div><p>I experience the exact same behaviour on my machine. Its working now with ALSA but the quality isnt good. Has anyone fixed this issue or got it working with Pulse Audio (which I would prefer)</p></div></blockquote></div><p>Similar problem here. From my reading, the pulseaudio &quot;Connection refused&quot; errors above might be due to the fact that normally pulseaudio is configured in single user mode, which means only a specific session of some user can use pulseaudio in a specific time(unless you are root). If I start a pulseaudio instance as root and then run qemu as root, these errors are gone. But yes, the sound is really harsh and distorted. </p><p>Configure pulseaudio in system mode may help eliminate the errors. However I have no idea regarding the ultra-low sound quality. Hope someone can shed light on this issue.</p> <p class="postedit"><em>Last edited by Jesse2004 (2014-03-22 12:41:08)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1395587">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1395878" class="blockpost rowodd"> <h2><span><span class="conr">#1428</span> <a href="viewtopic.php?pid=1395878#p1395878">2014-03-23 05:33:50</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=78143">Blind Tree Frog</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-31</span></dd> <dd><span>Posts: 27</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=78143">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>So I&#039;ve at least made some progress...</p><p>I think part of my earlier problem was that pci-stub wasn&#039;t grabbing the USB devices correctly.&#160; Thursday I built another kernel and made sure that pci-stub was built in.&#160; Today I finally installed it.</p><p>Booting a Fedora liveCD from iso and it comes up (as it did prior to the new kernel) but mouse and keyboard work.&#160; It still complains about little things and it locked up on me once, but it works and sound and video work.</p><p>I then switched back to the crunchbang liveCD.&#160; It booted and got to the menu,&#160; but the keyboard never got power and the system wouldn&#039;t respond to the inputs.&#160; So I&#039;m closer.</p><p>Still getting the reset errors:</p><div class="codebox"><pre><code>qemu-system-x86_64: vfio: Cannot reset device 0000:00:16.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:13.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:12.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.5, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.4, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.3, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:16.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:13.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:12.0, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.5, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.4, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.3, no available reset mechanism. qemu-system-x86_64: vfio: Cannot reset device 0000:00:14.0, no available reset mechanism.</code></pre></div><p>And still seeing page faults in dmesg</p><div class="codebox"><pre><code>[ 311.887722] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887725] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887728] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887731] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887734] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887737] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887740] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887743] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887746] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887749] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887754] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887757] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887760] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887763] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050] [ 311.887766] AMD-Vi: Event logged [IO_PAGE_FAULT device=00:13.0 domain=0x0000 address=0x00000000ffffffc0 flags=0x0050]</code></pre></div><p>Though that is a different device this time (compared to last)</p><p>I&#039;m not sure if anyone sees anything that I should take note of in the last few dmesg messages, but just in case:</p><div class="codebox"><pre class="vscroll"><code>[ 357.076479] vfio_ecap_init: 0000:03:00.0 hiding ecap 0x19@0x270 [ 357.312658] vfio_cap_init: 0000:00:12.2 hiding cap 0xa [ 357.372555] vfio_cap_init: 0000:00:13.2 hiding cap 0xa [ 357.425797] vfio_cap_init: 0000:00:16.2 hiding cap 0xa [ 485.323872] vfio_ecap_init: 0000:03:00.0 hiding ecap 0x19@0x270 [ 485.553417] vfio_cap_init: 0000:00:12.2 hiding cap 0xa [ 485.606661] vfio_cap_init: 0000:00:13.2 hiding cap 0xa [ 485.659901] vfio_cap_init: 0000:00:16.2 hiding cap 0xa [ 517.644634] kvm [893]: vcpu0 unhandled rdmsr: 0xc0010112 [ 517.644646] kvm [893]: vcpu0 unhandled rdmsr: 0xc0010048 [ 517.766789] kvm [893]: vcpu0 unhandled rdmsr: 0xc0010001 [ 517.778451] kvm [893]: vcpu1 unhandled rdmsr: 0xc0010048 [ 517.789778] kvm [893]: vcpu2 unhandled rdmsr: 0xc0010048 [ 517.801080] kvm [893]: vcpu3 unhandled rdmsr: 0xc0010048 [ 517.812380] kvm [893]: vcpu4 unhandled rdmsr: 0xc0010048 [ 517.823688] kvm [893]: vcpu5 unhandled rdmsr: 0xc0010048 [ 517.909455] kvm: zapping shadow pages for mmio generation wraparound [ 519.701768] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.741639] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.741647] vfio-pci 0000:07:00.0: irq 77 for MSI/MSI-X [ 519.748301] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.748309] vfio-pci 0000:07:00.0: irq 77 for MSI/MSI-X [ 519.748316] vfio-pci 0000:07:00.0: irq 78 for MSI/MSI-X [ 519.768267] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.768276] vfio-pci 0000:07:00.0: irq 77 for MSI/MSI-X [ 519.768283] vfio-pci 0000:07:00.0: irq 78 for MSI/MSI-X [ 519.768289] vfio-pci 0000:07:00.0: irq 79 for MSI/MSI-X [ 519.778929] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.778938] vfio-pci 0000:07:00.0: irq 77 for MSI/MSI-X [ 519.778945] vfio-pci 0000:07:00.0: irq 78 for MSI/MSI-X [ 519.778951] vfio-pci 0000:07:00.0: irq 79 for MSI/MSI-X [ 519.778957] vfio-pci 0000:07:00.0: irq 80 for MSI/MSI-X [ 519.808216] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.808223] vfio-pci 0000:07:00.0: irq 77 for MSI/MSI-X [ 519.808231] vfio-pci 0000:07:00.0: irq 78 for MSI/MSI-X [ 519.808237] vfio-pci 0000:07:00.0: irq 79 for MSI/MSI-X [ 519.808243] vfio-pci 0000:07:00.0: irq 80 for MSI/MSI-X [ 519.808250] vfio-pci 0000:07:00.0: irq 81 for MSI/MSI-X [ 519.824860] vfio-pci 0000:07:00.0: irq 76 for MSI/MSI-X [ 519.824868] vfio-pci 0000:07:00.0: irq 77 for MSI/MSI-X [ 519.824874] vfio-pci 0000:07:00.0: irq 78 for MSI/MSI-X [ 519.824880] vfio-pci 0000:07:00.0: irq 79 for MSI/MSI-X [ 519.824887] vfio-pci 0000:07:00.0: irq 80 for MSI/MSI-X [ 519.824893] vfio-pci 0000:07:00.0: irq 81 for MSI/MSI-X [ 519.824899] vfio-pci 0000:07:00.0: irq 82 for MSI/MSI-X [ 523.395384] vfio-pci 0000:03:00.1: irq 100 for MSI/MSI-X</code></pre></div><p>So &#039;yay!!&#039; for getting closer, but still not quite there.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1395878">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396162" class="blockpost roweven"> <h2><span><span class="conr">#1429</span> <a href="viewtopic.php?pid=1396162#p1396162">2014-03-23 22:50:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77819">tuoni</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-19</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77819">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Jesse2004 wrote:</cite><blockquote><div><div class="quotebox"><cite>SpacePirate wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><p>&lt;SNIP&gt;</p><p>Update: I managed to get audio somewhat working:</p><p>I use sudo -E export QEMU_ALSA_DAC_BUFFER_SIZE=512 QEMU_ALSA_DAC_PERIOD_SIZE=170 QEMU_AUDIO_DRV=alsa <br />and<br />sudo -E qemu-system-x86_64 ....<br />The -E option tries to preserve the environment even though you are running with sudo.</p><p>However the audio is crackling and sounding really disorted... <img src="https://bbs.archlinux.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p></div></blockquote></div><p>I experience the exact same behaviour on my machine. Its working now with ALSA but the quality isnt good. Has anyone fixed this issue or got it working with Pulse Audio (which I would prefer)</p></div></blockquote></div><p>Similar problem here. From my reading, the pulseaudio &quot;Connection refused&quot; errors above might be due to the fact that normally pulseaudio is configured in single user mode, which means only a specific session of some user can use pulseaudio in a specific time(unless you are root). If I start a pulseaudio instance as root and then run qemu as root, these errors are gone. But yes, the sound is really harsh and distorted. </p><p>Configure pulseaudio in system mode may help eliminate the errors. However I have no idea regarding the ultra-low sound quality. Hope someone can shed light on this issue.</p></div></blockquote></div><p>I use the following invocation for a Win7 x64 guest:</p><div class="codebox"><pre><code>sudo QEMU_AUDIO_DRV=alsa QEMU_AUDIO_TIMER_PERIOD=0 QEMU_AUDIO_DAC_FIXED_FREQ=48000 QEMU_AUDIO_ADC_FIXED_FREQ=48000 QEMU_ALSA_DAC_BUFFER_SIZE=16384 qemu-system-x86_64 -enable-kvm -M q35 &lt;snip&gt; -soundhw hda,ac97</code></pre></div><p>In my guest, I have disabled the high-definition audio and have installed the x64 AC&#039;97 drivers from <a href="http://www.realtek.com.tw/downloads/downloadsCheck.aspx?Langid=1&amp;PNid=14&amp;PFid=23&amp;Level=4&amp;Conn=3&amp;DownTypeID=3&amp;GetDown=false" rel="nofollow">Realtek&#039;s website</a>.</p><p>My audio is now clear, though there is the tiniest bit of lag occasionally.&#160; Your mileage may vary and I&#039;m sure there is a better way to do it, but I stopped fiddling once I&#039;d gotten it running <img src="https://bbs.archlinux.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396162">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396199" class="blockpost rowodd"> <h2><span><span class="conr">#1430</span> <a href="viewtopic.php?pid=1396199#p1396199">2014-03-24 01:38:31</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79578">AKSN74</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd class="postavatar"><img src="https://bbs.archlinux.org/img/avatars/79578.jpg?m=1423108340" width="80" height="80" alt="" /></dd> <dd><span>From: Taichung, Taiwan</span></dd> <dd><span>Registered: 2014-02-18</span></dd> <dd><span>Posts: 52</span></dd> <dd class="usercontacts"><span class="email"><a href="mailto:missile0407@gmail.com">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I still can&#039;t bootup 2nd VM with another GTX480. Now I focus on some setting problem.</p><p>Strange is, I can&#039;t start with just 2nd VM. And just start 1st VM is OK.</p><p>If I start 1st VM then start 2nd VM, 1st VM worked, 2nd still can&#039;t.</p><p>But if I converse the steps (start 2nd VM then start 1st VM), 1st VM will got KVM error.</p><div class="codebox"><pre><code>KVM internal error. Suberror: 1 emulation failure EAX=ffff2b56 EBX=00000000 ECX=00000000 EDX=00000300 ESI=00006d0a EDI=00006d25 EBP=000041f7 ESP=00000014 EIP=00032dcf EFL=00010082 [--S----] CPL=0 II=0 A20=1 SMM=0 HLT=0 ES =2b2b 0002b2b0 ffffffff 00809300 CS =6d23 0006d230 ffffffff 00809b00 SS =0000 00000000 ffffffff 00809300 DS =c000 000c0000 ffffffff 00809300 FS =0000 00000000 ffffffff 00809300 GS =0000 00000000 ffffffff 00809300 LDT=0000 00000000 0000ffff 00008200 TR =0000 00000000 0000ffff 00008b00 GDT= 000f68c0 00000037 IDT= 00000000 000003ff CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000 DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 DR6=00000000ffff0ff0 DR7=0000000000000400 EFER=0000000000000000 Code=00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 &lt;00&gt; ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</code></pre></div><p>And here is my dmesg when I start 2nd VM only.</p><div class="codebox"><pre><code>[ 259.375335] VFIO - User Level meta-driver version: 0.3 [ 259.392054] ehci-pci 0000:00:1d.0: remove, state 1 [ 259.392062] usb usb2: USB disconnect, device number 1 [ 259.392063] usb 2-1: USB disconnect, device number 2 [ 259.392065] usb 2-1.1: USB disconnect, device number 3 [ 259.399330] hid-generic 0003:04D9:2011.0005: can&#039;t resubmit intr, 0000:00:1d.0-1.2/input0, status -19 [ 259.414950] usb 2-1.2: USB disconnect, device number 4 [ 259.486485] usb 2-1.5: USB disconnect, device number 5 [ 259.486487] usb 2-1.5.1: USB disconnect, device number 7 [ 259.488913] usb 2-1.6: USB disconnect, device number 6 [ 259.495437] ehci-pci 0000:00:1d.0: USB bus 2 deregistered [ 259.598585] device tap1 entered promiscuous mode [ 259.599065] br0: port 3(tap1) entered forwarding state [ 259.599070] br0: port 3(tap1) entered forwarding state [ 259.898723] vfio-pci 0000:03:00.0: enabling device (0000 -&gt; 0003) [ 260.030186] vfio_cap_init: 0000:00:1d.0 hiding cap 0xa [ 262.975682] dmar: DRHD: handling fault status reg 2 [ 262.975689] dmar: DMAR:[DMA Read] Request device [00:1d.0] fault addr ee000 [ 262.975689] DMAR:[fault reason 06] PTE Read access is not set [ 274.634766] br0: port 3(tap1) entered forwarding state [ 322.927939] audit: type=1400 audit(1395624287.279:64): apparmor=&quot;DENIED&quot; operation=&quot;capable&quot; profile=&quot;/usr/sbin/cupsd&quot; pid=1705 comm=&quot;cupsd&quot; capability=36 capname=&quot;block_suspend&quot;</code></pre></div><p>Also, I don&#039;t know why it got this message in dmesg every boot, and it&#039;s a lot of then.</p><div class="codebox"><pre><code>[ 12.903046] vgaarb: this pci device is not a vga device</code></pre></div><p>And here is my QEMU start command, I thought that maybe it&#039;s anothe problem, too.</p><div class="codebox"><pre><code>(1st VM code) #!/bin/bash vfio-bind 0000:02:00.0 0000:02:00.1 qemu-system-x86_64 -enable-kvm -M q35 -m 2048 -cpu host \ -smp 2,sockets=1,cores=1,threads=2 \ -bios /usr/share/qemu/bios.bin -vga none -nographic -localtime \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=02:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=02:00.1,bus=root.1,addr=00.1 \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/home/ak/test.img,format=raw,if=virtio \ -net nic,model=virtio,vlan=0,macaddr=52-54-00-f5-44-04 -net tap,vlan=0,ifname=tap0,script=no</code></pre></div><div class="codebox"><pre><code>(2nd VM code) #!/bin/bash vfio-bind 0000:03:00.0 0000:03:00.1 0000:00:1d.0 qemu-system-x86_64 -enable-kvm -M q35 -m 2048 -cpu host \ -smp 2,sockets=1,cores=1,threads=2 \ -bios /usr/share/qemu/bios.bin -vga none -nographic -localtime \ -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 \ -device vfio-pci,host=03:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on \ -device vfio-pci,host=03:00.1,bus=root.1,addr=00.1 \ -device vfio-pci,host=00:1d.0,bus=pcie.0 \ -device ahci,bus=pcie.0,id=ahci \ -drive file=/home/ak/test2.img,id=disk,format=raw -device ide-hd,bus=ahci.0,drive=disk \ -drive file=/home/ak/ubuntu.iso,id=isocd -device ide-cd,bus=ahci.1,drive=isocd \ -net nic,model=virtio,vlan=0,macaddr=52-54-00-f5-44-08 -net tap,vlan=0,ifname=tap1,script=no</code></pre></div><p>Still, I&#039;m apologize my poor English.</p><p>Many thanks</p> <p class="postedit"><em>Last edited by AKSN74 (2014-03-24 01:41:44)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396199">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396461" class="blockpost roweven"> <h2><span><span class="conr">#1431</span> <a href="viewtopic.php?pid=1396461#p1396461">2014-03-24 22:09:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>FYI, if you&#039;re trying Passmark Performance Test on Intel, avoid -cpu host or any of the models above Penryn, they seem to result in a BSOD.&#160; I&#039;ve reported the problem to Passmark, so hopefully they&#039;ll resolve it soon.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396461">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396471" class="blockpost rowodd"> <h2><span><span class="conr">#1432</span> <a href="viewtopic.php?pid=1396471#p1396471">2014-03-24 22:37:19</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have the weirdest issue and I dont know how to troubleshoot it.</p><p>I can for example play Rocksmith 2014(perfect audio yai!) and Battlefield 4(at Ultra settings) without any issues. The performance is for me just as good as playing on a &quot;real&quot; Windows machine.<br />However as soon as I quit(!) the game it will freeze the whole machine up. I cant ping the guest from the host so it is totally frozen. The screen is showing whatever was on it the second it froze.<br />I do not receive any error messages in journalctl, and the Windows guest does not log anything to the event viewer.</p><p>The only way to unfreeze my Windows screen is to reboot the host, killing the qemu processes is not possible.</p><p>Playing Guild Wars 2 at Ultra Settings does work without any issues though.<br />(Got a Nvidia GTX 670, i7 CPU(6 dedicated to the guest), 32GB RAM(16GB to the guest). I am not running processor pinning or huge pages, but I do have cache=none set to my hard drives.</p><p>Anyone having experience to something similar like this?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396471">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396506" class="blockpost roweven"> <h2><span><span class="conr">#1433</span> <a href="viewtopic.php?pid=1396506#p1396506">2014-03-25 02:01:53</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80333">ahl</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-16</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>I have finally found the real source of those random hardware failures I was experiencing on host: The HD 7660D IGP of AMD A10-5700. Use of that GPU on host makes the host system very unreliable. Further, there appears to be nothing wrong with the cheap PCI-E NICs I mentioned earlier. It was a simple coincidence that their removal made my system slightly more stable.</p><p>Here&#039;s a summary of all the hardware I have tested with VGA vfio-pci:</p><p>System 1: AMD A10-5700 APU + <strong>Asus F2A85-M PRO</strong> (BIOS 6308)<br />- <strong>OK</strong> (must disable integrated graphics)<br />- passthrough of the integrated audio device also tested to work with Win 7</p><p>System 2: AMD FX 8350 + <strong>Asus Sabretooth 990FX R2.0</strong> (BIOS 2104)<br />- <strong>OK</strong><br />- passthrough of the integrated audio device also tested to work with Win 7</p><p>GPU 1: <strong>Radeon HD 7660D IGP</strong> of AMD A10-5700 APU<br />- If used on host, crashes the host horribly<br />- If used on guest, does not crash the host, but does not work either (no picture)<br />- If booted on headless Linux guest, kernel complains about invalid rom contents (or booting with romfile= extracted earlier stucks the VM in busy loop)<br />==&gt; <strong>USELESS</strong></p><p>GPU 2: <strong>Asus Radeon HD 3870</strong><br />- On host: OK<br />- On Linux guest: OK (glxgears tested)<br />- On Win 7 guest: Device Manager reports Code 43 (or BSoD STOP 0x3B after forced device reinstall)<br />- On WinXP guest: Might work, but I have trouble installing drivers<br />==&gt; <strong>For host or Linux guest only</strong></p><p>GPU 3: <strong>Sapphire Ultimate Radeon HD 6670</strong> (11192-06-20G)<br />- On host: OK <br />- On Linux guest: OK (glxgears tested)<br />- On Win 7 guest: OK (Graphics/Gaming score 6.9)<br />- On WinXP guest: Might work, but I have trouble installing drivers<br />==&gt; <strong>Very good</strong>, well supported GPU</p><p>GPU 4: <strong>GeForce 9600 GT</strong><br />GPU 5: <strong>Radeon X300</strong><br />GPU 6: <strong>Radeon X1600</strong><br />- None of these older cards appear to work as these refuse to initialize together with other PCI-E GPUs (lspci on host shows up to 1 card only)<br />==&gt; <strong>Useless</strong>???</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396506">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396509" class="blockpost rowodd"> <h2><span><span class="conr">#1434</span> <a href="viewtopic.php?pid=1396509#p1396509">2014-03-25 02:11:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><p>GPU 4: <strong>GeForce 9600 GT</strong><br />GPU 5: <strong>Radeon X300</strong><br />GPU 6: <strong>Radeon X1600</strong><br />- None of these older cards appear to work as these refuse to initialize together with other PCI-E GPUs (lspci on host shows up to 1 card only)<br />==&gt; <strong>Useless</strong>???</p></div></blockquote></div><p>The Radeon X-series are useless.&#160; I have an X500 that I spent some time reverse engineering quirks for, but I never got it working and decided I didn&#039;t want to set a precedence for maintaining code for devices that really aren&#039;t useful as a modern, high-performance card.&#160; The 9600GT should work.&#160; I think the Nvidia quirks we have work down to the 8-series, maybe even the 7-series, but obviously if the platform won&#039;t initialize the slot it&#039;s a non-starter.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396509">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396543" class="blockpost roweven"> <h2><span><span class="conr">#1435</span> <a href="viewtopic.php?pid=1396543#p1396543">2014-03-25 05:53:21</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80333">ahl</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-16</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>aw wrote:</cite><blockquote><div><p>The 9600GT should work.&#160; I think the Nvidia quirks we have work down to the 8-series, maybe even the 7-series, but obviously if the platform won&#039;t initialize the slot it&#039;s a non-starter.</p></div></blockquote></div><p>Thanks for the info. I did some more testing with my 9600GT. No luck with vfio-pci. All I get is blank picture even if it&#039;s the only GPU in the system.</p><p>And now it froze the host system (Sabretooth) completely...! I can&#039;t even SSH.</p><p>Here&#039;s how I tried to use it from console:</p><div class="codebox"><pre><code>GRUB: pci-stub.ids=10de:0622 vfio-bind 0000:01:00.0 qemu-system-x86_64 -machine accel=kvm -M q35 -nographic -vga none -device ioh3420,bus=pcie.0,addr=1c.0,multifunction=on,port=1,chassis=1,id=root.1 -device vfio-pci,host=01:00.0,bus=root.1,addr=00.0,multifunction=on,x-vga=on</code></pre></div><p>It would have been nice, had this worked, but after a host crash I don&#039;t think I&#039;ll keep trying unless there is some known trick.</p><p>Has anyone tested a brand new Radeon R7 260? It might be my next purchace.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396543">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396557" class="blockpost rowodd"> <h2><span><span class="conr">#1436</span> <a href="viewtopic.php?pid=1396557#p1396557">2014-03-25 07:33:13</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80333">ahl</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-16</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>TripleSpeeder wrote:</cite><blockquote><div><div class="quotebox"><cite>ahom wrote:</cite><blockquote><div><p>I have a project, which is to have 2 windows VM (with each of them having one dedicated graphic card) running on the same archlinux host for my bf and I. From this thread I&#039;m sure that it works with one, however, before buying all the stuff I need I would have liked some validation on some level that it could maybe work (if it definitely can&#039;t there&#039;s no point in spending money <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" />). From the looks of it I would say it could work but I may be missing something as I never took a look at the actual code.</p></div></blockquote></div><p>Certainly an interesting project! How do you plan to assign peripherals like keyboard, mouse, etc. to the hosts? You might want to look for a motherboard that has at least 3 distinct USB controllers, so you can pass through one chip to each VM and have one left for the host.</p></div></blockquote></div><p>An addon PCI-E usb controller could also do the trick.<br />But is it really necessary to passthrough USB controllers? I&#039;m asking this because so far I have experienced absolutely no reason to do that. Not even for light gaming use.</p><p>I only use &quot;-usbdevice tablet&quot;. It takes care of all input problems. I&#039;m finding the ability to control both host and all guests, with just one keyboard and mouse, an extremely useful feature.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396557">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396560" class="blockpost roweven"> <h2><span><span class="conr">#1437</span> <a href="viewtopic.php?pid=1396560#p1396560">2014-03-25 07:47:44</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=61335">Jesse2004</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-06-25</span></dd> <dd><span>Posts: 9</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>tuoni wrote:</cite><blockquote><div><p>I use the following invocation for a Win7 x64 guest:</p><div class="codebox"><pre><code>sudo QEMU_AUDIO_DRV=alsa QEMU_AUDIO_TIMER_PERIOD=0 QEMU_AUDIO_DAC_FIXED_FREQ=48000 QEMU_AUDIO_ADC_FIXED_FREQ=48000 QEMU_ALSA_DAC_BUFFER_SIZE=16384 qemu-system-x86_64 -enable-kvm -M q35 &lt;snip&gt; -soundhw hda,ac97</code></pre></div></div></blockquote></div><p>Thanks for sharing!</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396560">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396561" class="blockpost rowodd"> <h2><span><span class="conr">#1438</span> <a href="viewtopic.php?pid=1396561#p1396561">2014-03-25 07:50:25</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=61335">Jesse2004</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2012-06-25</span></dd> <dd><span>Posts: 9</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><p>I have the weirdest issue and I dont know how to troubleshoot it.</p><p>I can for example play Rocksmith 2014(perfect audio yai!) and Battlefield 4(at Ultra settings) without any issues. The performance is for me just as good as playing on a &quot;real&quot; Windows machine.</p></div></blockquote></div><p>May I ask your audio configuration?</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396561">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396565" class="blockpost roweven"> <h2><span><span class="conr">#1439</span> <a href="viewtopic.php?pid=1396565#p1396565">2014-03-25 08:24:01</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80279">novist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-14</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>ahl or someone - please comment on AMD setup performance. ahl, my setup is similar to your AMD FX 8350 + Asus Sabretooth 990FX R2.0. Does that rig run fine? im not sure why but i have terrible performance. to get a perspective - arma3 playable is at normal settings, better yet low. i run git qemu and kernel is 3.14-rc6 with patches from first post.</p><p>One more thing - anyone happen to test 3.14-rc7 kernel? Any stability issues? Because i have some that pop up quite fast after boot. Wondering if im only one unlucky,</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396565">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396571" class="blockpost rowodd"> <h2><span><span class="conr">#1440</span> <a href="viewtopic.php?pid=1396571#p1396571">2014-03-25 08:40:13</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80333">ahl</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-16</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>novist wrote:</cite><blockquote><div><p>ahl or someone - please comment on AMD setup performance. ahl, my setup is similar to your AMD FX 8350 + Asus Sabretooth 990FX R2.0. Does that rig run fine? im not sure why but i have terrible performance. to get a perspective - arma3 playable is at normal settings, better yet low. i run git qemu and kernel is 3.14-rc6 with patches from first post.</p><p>One more thing - anyone happen to test 3.14-rc7 kernel? Any stability issues? Because i have some that pop up quite fast after boot. Wondering if im only one unlucky,</p></div></blockquote></div><p>I can&#039;t really comment on performance just yet, because I&#039;m not even trying to get top speeds. I only need something that works.<br />I use a kernel a bit newer than 3.14-rc7. And looks like -rc8 is already out so I suggest trying that.</p><p><strong>Edit: Upgraded to 3.14-rc8 + fix_memleak.patch</strong></p> <p class="postedit"><em>Last edited by ahl (2014-03-25 12:15:30)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396571">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396581" class="blockpost roweven"> <h2><span><span class="conr">#1441</span> <a href="viewtopic.php?pid=1396581#p1396581">2014-03-25 09:54:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77842">Flyser</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-19</span></dd> <dd><span>Posts: 29</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><p>I have the weirdest issue and I dont know how to troubleshoot it.</p><p>I can for example play Rocksmith 2014(perfect audio yai!) and Battlefield 4(at Ultra settings) without any issues. The performance is for me just as good as playing on a &quot;real&quot; Windows machine.<br />However as soon as I quit(!) the game it will freeze the whole machine up. I cant ping the guest from the host so it is totally frozen. The screen is showing whatever was on it the second it froze.<br />I do not receive any error messages in journalctl, and the Windows guest does not log anything to the event viewer.</p><p>The only way to unfreeze my Windows screen is to reboot the host, killing the qemu processes is not possible.<br />Anyone having experience to something similar like this?</p></div></blockquote></div><p>I had a similar issue once and I <strong>think</strong> it was due to a qemu bug that has already been fixed. I am not 100% sure, but iirc just rebuilding the latest&#160; qemu-git fixed it.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396581">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396621" class="blockpost rowodd"> <h2><span><span class="conr">#1442</span> <a href="viewtopic.php?pid=1396621#p1396621">2014-03-25 11:59:45</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80279">novist</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-14</span></dd> <dd><span>Posts: 34</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80279">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><div class="quotebox"><cite>novist wrote:</cite><blockquote><div><p>ahl or someone - please comment on AMD setup performance. ahl, my setup is similar to your AMD FX 8350 + Asus Sabretooth 990FX R2.0. Does that rig run fine? im not sure why but i have terrible performance. to get a perspective - arma3 playable is at normal settings, better yet low. i run git qemu and kernel is 3.14-rc6 with patches from first post.</p><p>One more thing - anyone happen to test 3.14-rc7 kernel? Any stability issues? Because i have some that pop up quite fast after boot. Wondering if im only one unlucky,</p></div></blockquote></div><p>I can&#039;t really comment on performance just yet, because I&#039;m not even trying to get top speeds. I only need something that works.<br />I use a kernel a bit newer than 3.14-rc7. And looks like -rc8 is already out so I suggest trying that.</p></div></blockquote></div><p>thanks for heads-up! i tried new kernel. so far system is running for over an hour. keeping fingers crossed it stays that way. there is like 30% increase in fps (from 10 to 15) from rc6 kernel in directx9 complex passmark test. has little play-session, its still laggy. this time i kept gpu-z on checking some stats. apparently gpu most of the time runs at 20% load. that is really wrong... fan speed is reported at 33%. temperature at ~60 degrees under max load. no idea what to make of it.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396621">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396637" class="blockpost roweven"> <h2><span><span class="conr">#1443</span> <a href="viewtopic.php?pid=1396637#p1396637">2014-03-25 12:28:40</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=72881">alexis_evo</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-07-04</span></dd> <dd><span>Posts: 33</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=72881">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><div class="quotebox"><cite>TripleSpeeder wrote:</cite><blockquote><div><div class="quotebox"><cite>ahom wrote:</cite><blockquote><div><p>I have a project, which is to have 2 windows VM (with each of them having one dedicated graphic card) running on the same archlinux host for my bf and I. From this thread I&#039;m sure that it works with one, however, before buying all the stuff I need I would have liked some validation on some level that it could maybe work (if it definitely can&#039;t there&#039;s no point in spending money <img src="https://bbs.archlinux.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" />). From the looks of it I would say it could work but I may be missing something as I never took a look at the actual code.</p></div></blockquote></div><p>Certainly an interesting project! How do you plan to assign peripherals like keyboard, mouse, etc. to the hosts? You might want to look for a motherboard that has at least 3 distinct USB controllers, so you can pass through one chip to each VM and have one left for the host.</p></div></blockquote></div><p>An addon PCI-E usb controller could also do the trick.<br />But is it really necessary to passthrough USB controllers? I&#039;m asking this because so far I have experienced absolutely no reason to do that. Not even for light gaming use.</p><p>I only use &quot;-usbdevice tablet&quot;. It takes care of all input problems. I&#039;m finding the ability to control both host and all guests, with just one keyboard and mouse, an extremely useful feature.</p></div></blockquote></div><p>How does this work? Currently I pass through the USB devices (not the entire controller, just specific devices based on vendorid/productid) which means I can only use keyboard/mouse on the guest or the host. I can switch between them, but it requires using qemu console to detach/reattach. If there is an easier method for keyboard sharing, to let you use both on host/guest, I&#039;d love to hear how it works.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396637">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396645" class="blockpost rowodd"> <h2><span><span class="conr">#1444</span> <a href="viewtopic.php?pid=1396645#p1396645">2014-03-25 12:38:43</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80333">ahl</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-16</span></dd> <dd><span>Posts: 20</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>alexis_evo wrote:</cite><blockquote><div><div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><p>I only use &quot;-usbdevice tablet&quot;. It takes care of all input problems. I&#039;m finding the ability to control both host and all guests, with just one keyboard and mouse, an extremely useful feature.</p></div></blockquote></div><p>How does this work? Currently I pass through the USB devices (not the entire controller, just specific devices based on vendorid/productid) which means I can only use keyboard/mouse on the guest or the host. I can switch between them, but it requires using qemu console to detach/reattach. If there is an easier method for keyboard sharing, to let you use both on host/guest, I&#039;d love to hear how it works.</p></div></blockquote></div><p>Qemu should open a blank window by default. You can use both mouse and keyboard on that. Any input is automatically sent to the guest.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396645">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396689" class="blockpost roweven"> <h2><span><span class="conr">#1445</span> <a href="viewtopic.php?pid=1396689#p1396689">2014-03-25 14:14:03</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=75590">aw</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-10-04</span></dd> <dd><span>Posts: 921</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=75590">Email</a></span> <span class="website"><a href="http://vfio.blogspot.com/" rel="nofollow">Website</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><div class="quotebox"><cite>alexis_evo wrote:</cite><blockquote><div><div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><p>I only use &quot;-usbdevice tablet&quot;. It takes care of all input problems. I&#039;m finding the ability to control both host and all guests, with just one keyboard and mouse, an extremely useful feature.</p></div></blockquote></div><p>How does this work? Currently I pass through the USB devices (not the entire controller, just specific devices based on vendorid/productid) which means I can only use keyboard/mouse on the guest or the host. I can switch between them, but it requires using qemu console to detach/reattach. If there is an easier method for keyboard sharing, to let you use both on host/guest, I&#039;d love to hear how it works.</p></div></blockquote></div><p>Qemu should open a blank window by default. You can use both mouse and keyboard on that. Any input is automatically sent to the guest.</p></div></blockquote></div><p>I use this for quick testing as well, but with the -vnc option to the VM.&#160; It doesn&#039;t work well for gaming though, Borderlands2 at least is completely unusable with this mouse input.</p> </div> <div class="postsignature postmsg"><hr /><p><a href="http://vfio.blogspot.com" rel="nofollow">http://vfio.blogspot.com</a><br />Looking for a more open forum to discuss vfio related uses?&#160; Try <a href="https://www.redhat.com/mailman/listinfo/vfio-users" rel="nofollow">https://www.redhat.com/mailman/listinfo/vfio-users</a></p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396689">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396697" class="blockpost rowodd"> <h2><span><span class="conr">#1446</span> <a href="viewtopic.php?pid=1396697#p1396697">2014-03-25 14:27:11</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=77819">tuoni</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-12-19</span></dd> <dd><span>Posts: 7</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=77819">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>alexis_evo wrote:</cite><blockquote><div><p>If there is an easier method for keyboard sharing, to let you use both on host/guest, I&#039;d love to hear how it works.</p></div></blockquote></div><p><a href="http://synergy-foss.org" rel="nofollow">http://synergy-foss.org</a></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396697">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396733" class="blockpost roweven"> <h2><span><span class="conr">#1447</span> <a href="viewtopic.php?pid=1396733#p1396733">2014-03-25 15:22:29</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=79471">Bronek</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>From: London</span></dd> <dd><span>Registered: 2014-02-14</span></dd> <dd><span>Posts: 90</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=79471">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>ahl wrote:</cite><blockquote><div><p><strong>Edit: Upgraded to 3.14-rc8 + fix_memleak.patch</strong></p></div></blockquote></div><p>erm ... you mean memleak fix didnt make it to 3.14 yet ?? ouch.</p> </div> <div class="postsignature postmsg"><hr /><p>Sorry about&#160; &quot;KVM VGA-Passthrough ...&quot; thread <img src="https://bbs.archlinux.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Anyone interested in continuing this discussion elsewhere, please contact me privately. I might be able to find it a new home.</p></div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396733">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1396767" class="blockpost rowodd"> <h2><span><span class="conr">#1448</span> <a href="viewtopic.php?pid=1396767#p1396767">2014-03-25 16:38:47</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80028">trimm</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-06</span></dd> <dd><span>Posts: 31</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=80028">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <div class="quotebox"><cite>Jesse2004 wrote:</cite><blockquote><div><div class="quotebox"><cite>trimm wrote:</cite><blockquote><div><p>I have the weirdest issue and I dont know how to troubleshoot it.</p><p>I can for example play Rocksmith 2014(perfect audio yai!) and Battlefield 4(at Ultra settings) without any issues. The performance is for me just as good as playing on a &quot;real&quot; Windows machine.</p></div></blockquote></div><p>May I ask your audio configuration?</p></div></blockquote></div><p>I am passthroughing my onboard audio card. <br />-device vfio-pci,host=00:1b.0</p><p>And the USB rocksmith cable:<br />-usb -usbdevice host:12ba:00ff</p><br /><div class="quotebox"><cite>Flyser wrote:</cite><blockquote><div><p>I had a similar issue once and I think it was due to a qemu bug that has already been fixed. I am not 100% sure, but iirc just rebuilding the latest&#160; qemu-git fixed it.</p></div></blockquote></div><p>Thank you so much Flyser, I will definately try to use/reinstall the latest qemu-git!</p><p>Edit: is there a reason for why we are not using the AUR package of qemu-git? What is so special with the one OP has posted?<br />Edit2: Still got the same issue, the following is the only thing in my journalctl while the VM froze:</p><div class="codebox"><pre><code>Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe590 fff97410 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe5a0 fff97420 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe5b0 fff97430 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe5c0 fff97440 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe5d0 fff97450 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe5e0 fff97460 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe5f0 fff97470 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe600 fff97480 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe610 fff97490 00000000 0d00000a 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe620 fff974a0 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe630 fff974b0 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe640 fff974c0 00000000 0d00000c 07058000 Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: ERROR Transfer event for disabled endpoint or incorrect stream ring Mar 25 22:53:42 ultimaarch kernel: xhci_hcd 0000:00:14.0: @00000000ffffe650 fff974d0 00000000 0d00000c 07058000</code></pre></div> <p class="postedit"><em>Last edited by trimm (2014-03-25 20:56:42)</em></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1396767">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1397520" class="blockpost roweven"> <h2><span><span class="conr">#1449</span> <a href="viewtopic.php?pid=1397520#p1397520">2014-03-27 12:37:30</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=74748">kaeptnb</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2013-09-04</span></dd> <dd><span>Posts: 30</span></dd> <dd class="usercontacts"><span class="email"><a href="misc.php?email=74748">Email</a></span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>Hi,</p><p>anyone tried the new QEMU 2.0 rc0 ?</p><p>As soon as i startup my win7 guest with it instead of good old qemu 1.7.0 - i get a BSOD with STOP 0x00..01e<br />No Config Changes whatsover - i just replaced the qemu binary...</p><p>Perhaps the Memory layout Changes in Qemu 2.0 (see <a href="http://wiki.qemu.org/ChangeLog/2.0" rel="nofollow">http://wiki.qemu.org/ChangeLog/2.0</a> ) require a Guest-Reinstall from Scratch? i dont hope so, but... </p><p>Thanks for your thouhts on that</p><p>Greetings<br />K.</p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1397520">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div id="p1397646" class="blockpost rowodd"> <h2><span><span class="conr">#1450</span> <a href="viewtopic.php?pid=1397646#p1397646">2014-03-27 21:16:18</a></span></h2> <div class="box"> <div class="inbox"> <div class="postbody"> <div class="postleft"> <dl> <dt><strong><a href="profile.php?id=80088">pereczes</a></strong></dt> <dd class="usertitle"><strong>Member</strong></dd> <dd><span>Registered: 2014-03-08</span></dd> <dd><span>Posts: 14</span></dd> </dl> </div> <div class="postright"> <h3>Re: KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</h3> <div class="postmsg"> <p>FYI: All my adventure with Powercolor 6950 ends here... I think I had a faulty card from the beginning. <br />It was crashing linux with the original driver when I was using opencl, and now with pass-trough.<br />The GPU-Z was showing only half of the shaders in win7 guest. Once connecting in guest the DVI, system was<br />freezing. Was reading in different forums that Powercolor is just crap... better spend few more $$$ and go for better<br />brand. Managed though to reflash the original Bios, though is showing strange characters in bios and in text mode.<br />Removed now the card, power dropped from 120W to 80W in iddle mod... Was using 40W for nothing... <img src="https://bbs.archlinux.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p> </div> </div> </div> </div> <div class="inbox"> <div class="postfoot clearb"> <div class="postfootleft"><p><span>Offline</span></p></div> <div class="postfootright"> <ul> <li class="postreport"><span><a href="misc.php?report=1397646">Report</a></span></li> </ul> </div> </div> </div> </div> </div> <div class="postlinksb"> <div class="inbox crumbsplus"> <div class="pagepost"> <p class="pagelink conl"><span class="pages-label">Pages: </span><a rel="prev" class="item1" href="viewtopic.php?id=162768&amp;p=57">Previous</a> <a href="viewtopic.php?id=162768">1</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=56">56</a> <a href="viewtopic.php?id=162768&amp;p=57">57</a> <strong>58</strong> <a href="viewtopic.php?id=162768&amp;p=59">59</a> <a href="viewtopic.php?id=162768&amp;p=60">60</a> <span class="spacer">…</span> <a href="viewtopic.php?id=162768&amp;p=234">234</a> <a rel="next" href="viewtopic.php?id=162768&amp;p=59">Next</a></p> <p class="postlink conr">Topic closed</p> </div> <ul class="crumbs"> <li><a href="index.php">Index</a></li> <li><span>»&#160;</span><a href="viewforum.php?id=48">Topics Going Nowhere</a></li> <li><span>»&#160;</span><strong><a href="viewtopic.php?id=162768">KVM VGA-Passthrough using the new vfio-vga support in kernel =&gt;3.9</a></strong></li> </ul> <p class="subscribelink clearb"><a href="misc.php?action=subscribe&amp;tid=162768">Subscribe to this topic</a></p> <div class="clearer"></div> </div> </div> </div> <div id="brdfooter" class="block"> <h2><span>Board footer</span></h2> <div class="box"> <div id="brdfooternav" class="inbox"> <div class="conl"> <form id="qjump" method="get" action="viewforum.php"> <div><label><span>Jump to<br /></span> <select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)"> <optgroup label="Technical Issues and Assistance"> <option value="23">Newbie Corner</option> <option value="17">Installation</option> <option value="22">Kernel &amp; Hardware</option> <option value="18">Applications &amp; Desktop Environments</option> <option value="31">Laptop Issues</option> <option value="8">Networking, Server, and Protection</option> <option value="32">Multimedia and Games</option> <option value="50">System Administration</option> <option value="35">Other Architectures</option> </optgroup> <optgroup label="Arch-centric"> <option value="24">Announcements, Package &amp; Security Advisories</option> <option value="1">Arch Discussion</option> <option value="13">Forum &amp; Wiki discussion</option> </optgroup> <optgroup label="Pacman Upgrades, Packaging &amp; AUR"> <option value="44">Pacman &amp; Package Upgrade Issues</option> <option value="49">[testing] Repo Forum</option> <option value="4">Creating &amp; Modifying Packages</option> <option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option> </optgroup> <optgroup label="Contributions &amp; Discussion"> <option value="20">GNU/Linux Discussion</option> <option value="27">Community Contributions</option> <option value="33">Programming &amp; Scripting</option> <option value="30">Other Languages</option> <option value="47">Artwork and Screenshots</option> <option value="42">Try This</option> </optgroup> <optgroup label="/dev/null"> <option value="29">Off-Topic</option> <option value="48" selected="selected">Topics Going Nowhere</option> <option value="36">Dustbin</option> </optgroup> </select></label> <input type="submit" value=" Go " accesskey="g" /> </div> </form> </div> <div class="conr"> <p id="feedlinks"><span class="atom"><a href="extern.php?action=feed&amp;tid=162768&amp;type=atom">Atom topic feed</a></span></p> <p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p> </div> <div class="clearer"></div> </div> </div> </div> </div> <div class="end-box"></div> </div> </body> </html>
